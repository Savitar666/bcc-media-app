var Y_ = Object.defineProperty;
var J_ = (n, t, i) => t in n ? Y_(n, t, { enumerable: !0, configurable: !0, writable: !0, value: i }) : n[t] = i;
var Sa = (n, t, i) => (J_(n, typeof t != "symbol" ? t + "" : t, i), i);
var st = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function is(n) {
  var t = n.default;
  if (typeof t == "function") {
    var i = function() {
      return t.apply(this, arguments);
    };
    i.prototype = t.prototype;
  } else
    i = {};
  return Object.defineProperty(i, "__esModule", { value: !0 }), Object.keys(n).forEach(function(r) {
    var e = Object.getOwnPropertyDescriptor(n, r);
    Object.defineProperty(i, r, e.get ? e : {
      enumerable: !0,
      get: function() {
        return n[r];
      }
    });
  }), i;
}
var La;
typeof window < "u" ? La = window : typeof st < "u" ? La = st : typeof self < "u" ? La = self : La = {};
var B = La;
const Z_ = {}, ey = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: Z_
}, Symbol.toStringTag, { value: "Module" })), ty = /* @__PURE__ */ is(ey);
var gf = typeof st < "u" ? st : typeof window < "u" ? window : {}, iy = ty, Oa;
typeof document < "u" ? Oa = document : (Oa = gf["__GLOBAL_DOCUMENT_CACHE@4"], Oa || (Oa = gf["__GLOBAL_DOCUMENT_CACHE@4"] = iy));
var Te = Oa;
function Ri() {
  return Ri = Object.assign ? Object.assign.bind() : function(n) {
    for (var t = 1; t < arguments.length; t++) {
      var i = arguments[t];
      for (var r in i)
        Object.prototype.hasOwnProperty.call(i, r) && (n[r] = i[r]);
    }
    return n;
  }, Ri.apply(this, arguments);
}
const ry = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: Ri
}, Symbol.toStringTag, { value: "Module" }));
var Yl = { exports: {} };
(function(n, t) {
  function i(u) {
    if (u && typeof u == "object") {
      var l = u.which || u.keyCode || u.charCode;
      l && (u = l);
    }
    if (typeof u == "number")
      return s[u];
    var d = String(u), h = r[d.toLowerCase()];
    if (h)
      return h;
    var h = e[d.toLowerCase()];
    if (h)
      return h;
    if (d.length === 1)
      return d.charCodeAt(0);
  }
  i.isEventKey = function(l, d) {
    if (l && typeof l == "object") {
      var h = l.which || l.keyCode || l.charCode;
      if (h == null)
        return !1;
      if (typeof d == "string") {
        var f = r[d.toLowerCase()];
        if (f)
          return f === h;
        var f = e[d.toLowerCase()];
        if (f)
          return f === h;
      } else if (typeof d == "number")
        return d === h;
      return !1;
    }
  }, t = n.exports = i;
  var r = t.code = t.codes = {
    backspace: 8,
    tab: 9,
    enter: 13,
    shift: 16,
    ctrl: 17,
    alt: 18,
    "pause/break": 19,
    "caps lock": 20,
    esc: 27,
    space: 32,
    "page up": 33,
    "page down": 34,
    end: 35,
    home: 36,
    left: 37,
    up: 38,
    right: 39,
    down: 40,
    insert: 45,
    delete: 46,
    command: 91,
    "left command": 91,
    "right command": 93,
    "numpad *": 106,
    "numpad +": 107,
    "numpad -": 109,
    "numpad .": 110,
    "numpad /": 111,
    "num lock": 144,
    "scroll lock": 145,
    "my computer": 182,
    "my calculator": 183,
    ";": 186,
    "=": 187,
    ",": 188,
    "-": 189,
    ".": 190,
    "/": 191,
    "`": 192,
    "[": 219,
    "\\": 220,
    "]": 221,
    "'": 222
  }, e = t.aliases = {
    windows: 91,
    "\u21E7": 16,
    "\u2325": 18,
    "\u2303": 17,
    "\u2318": 91,
    ctl: 17,
    control: 17,
    option: 18,
    pause: 19,
    break: 19,
    caps: 20,
    return: 13,
    escape: 27,
    spc: 32,
    spacebar: 32,
    pgup: 33,
    pgdn: 34,
    ins: 45,
    del: 46,
    cmd: 91
  };
  /*!
   * Programatically add the following
   */
  for (a = 97; a < 123; a++)
    r[String.fromCharCode(a)] = a - 32;
  for (var a = 48; a < 58; a++)
    r[a - 48] = a;
  for (a = 1; a < 13; a++)
    r["f" + a] = a + 111;
  for (a = 0; a < 10; a++)
    r["numpad " + a] = a + 96;
  var s = t.names = t.title = {};
  for (a in r)
    s[r[a]] = a;
  for (var o in e)
    r[o] = e[o];
})(Yl, Yl.exports);
const ze = Yl.exports;
function Ge(n) {
  if (n === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return n;
}
function Ga(n, t) {
  return Ga = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(r, e) {
    return r.__proto__ = e, r;
  }, Ga(n, t);
}
function Ee(n, t) {
  n.prototype = Object.create(t.prototype), n.prototype.constructor = n, Ga(n, t);
}
var ny = ay;
function ay(n, t) {
  var i, r = null;
  try {
    i = JSON.parse(n, t);
  } catch (e) {
    r = e;
  }
  return [r, i];
}
var Ro = { exports: {} };
const sy = /* @__PURE__ */ is(ry);
var oy = ly, uy = Object.prototype.toString;
function ly(n) {
  if (!n)
    return !1;
  var t = uy.call(n);
  return t === "[object Function]" || typeof n == "function" && t !== "[object RegExp]" || typeof window < "u" && (n === window.setTimeout || n === window.alert || n === window.confirm || n === window.prompt);
}
var dy = B, cy = function(t, i) {
  return i === void 0 && (i = !1), function(r, e, a) {
    if (r) {
      t(r);
      return;
    }
    if (e.statusCode >= 400 && e.statusCode <= 599) {
      var s = a;
      if (i)
        if (dy.TextDecoder) {
          var o = fy(e.headers && e.headers["content-type"]);
          try {
            s = new TextDecoder(o).decode(a);
          } catch {
          }
        } else
          s = String.fromCharCode.apply(null, new Uint8Array(a));
      t({
        cause: s
      });
      return;
    }
    t(null, a);
  };
};
function fy(n) {
  return n === void 0 && (n = ""), n.toLowerCase().split(";").reduce(function(t, i) {
    var r = i.split("="), e = r[0], a = r[1];
    return e.trim() === "charset" ? a.trim() : t;
  }, "utf-8");
}
var hy = cy, Wp = B, py = sy, my = oy;
tr.httpHandler = hy;
/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bj√∂rklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */
var gy = function(t) {
  var i = {};
  return t && t.trim().split(`
`).forEach(function(r) {
    var e = r.indexOf(":"), a = r.slice(0, e).trim().toLowerCase(), s = r.slice(e + 1).trim();
    typeof i[a] > "u" ? i[a] = s : Array.isArray(i[a]) ? i[a].push(s) : i[a] = [i[a], s];
  }), i;
};
Ro.exports = tr;
Ro.exports.default = tr;
tr.XMLHttpRequest = Wp.XMLHttpRequest || Ty;
tr.XDomainRequest = "withCredentials" in new tr.XMLHttpRequest() ? tr.XMLHttpRequest : Wp.XDomainRequest;
vy(["get", "put", "post", "patch", "head", "delete"], function(n) {
  tr[n === "delete" ? "del" : n] = function(t, i, r) {
    return i = Gp(t, i, r), i.method = n.toUpperCase(), $p(i);
  };
});
function vy(n, t) {
  for (var i = 0; i < n.length; i++)
    t(n[i]);
}
function _y(n) {
  for (var t in n)
    if (n.hasOwnProperty(t))
      return !1;
  return !0;
}
function Gp(n, t, i) {
  var r = n;
  return my(t) ? (i = t, typeof n == "string" && (r = {
    uri: n
  })) : r = py({}, t, {
    uri: n
  }), r.callback = i, r;
}
function tr(n, t, i) {
  return t = Gp(n, t, i), $p(t);
}
function $p(n) {
  if (typeof n.callback > "u")
    throw new Error("callback argument missing");
  var t = !1, i = function($, k, P) {
    t || (t = !0, n.callback($, k, P));
  };
  function r() {
    o.readyState === 4 && setTimeout(s, 0);
  }
  function e() {
    var V = void 0;
    if (o.response ? V = o.response : V = o.responseText || yy(o), y)
      try {
        V = JSON.parse(V);
      } catch {
      }
    return V;
  }
  function a(V) {
    return clearTimeout(T), V instanceof Error || (V = new Error("" + (V || "Unknown XMLHttpRequest Error"))), V.statusCode = 0, i(V, I);
  }
  function s() {
    if (!l) {
      var V;
      clearTimeout(T), n.useXDR && o.status === void 0 ? V = 200 : V = o.status === 1223 ? 204 : o.status;
      var $ = I, k = null;
      return V !== 0 ? ($ = {
        body: e(),
        statusCode: V,
        method: h,
        headers: {},
        url: d,
        rawRequest: o
      }, o.getAllResponseHeaders && ($.headers = gy(o.getAllResponseHeaders()))) : k = new Error("Internal XMLHttpRequest Error"), i(k, $, $.body);
    }
  }
  var o = n.xhr || null;
  o || (n.cors || n.useXDR ? o = new tr.XDomainRequest() : o = new tr.XMLHttpRequest());
  var u, l, d = o.url = n.uri || n.url, h = o.method = n.method || "GET", f = n.body || n.data, _ = o.headers = n.headers || {}, v = !!n.sync, y = !1, T, I = {
    body: void 0,
    headers: {},
    statusCode: 0,
    method: h,
    url: d,
    rawRequest: o
  };
  if ("json" in n && n.json !== !1 && (y = !0, _.accept || _.Accept || (_.Accept = "application/json"), h !== "GET" && h !== "HEAD" && (_["content-type"] || _["Content-Type"] || (_["Content-Type"] = "application/json"), f = JSON.stringify(n.json === !0 ? f : n.json))), o.onreadystatechange = r, o.onload = s, o.onerror = a, o.onprogress = function() {
  }, o.onabort = function() {
    l = !0;
  }, o.ontimeout = a, o.open(h, d, !v, n.username, n.password), v || (o.withCredentials = !!n.withCredentials), !v && n.timeout > 0 && (T = setTimeout(function() {
    if (!l) {
      l = !0, o.abort("timeout");
      var V = new Error("XMLHttpRequest timeout");
      V.code = "ETIMEDOUT", a(V);
    }
  }, n.timeout)), o.setRequestHeader)
    for (u in _)
      _.hasOwnProperty(u) && o.setRequestHeader(u, _[u]);
  else if (n.headers && !_y(n.headers))
    throw new Error("Headers cannot be set on an XDomainRequest object");
  return "responseType" in n && (o.responseType = n.responseType), "beforeSend" in n && typeof n.beforeSend == "function" && n.beforeSend(o), o.send(f || null), o;
}
function yy(n) {
  try {
    if (n.responseType === "document")
      return n.responseXML;
    var t = n.responseXML && n.responseXML.documentElement.nodeName === "parsererror";
    if (n.responseType === "" && !t)
      return n.responseXML;
  } catch {
  }
  return null;
}
function Ty() {
}
var Jl = { exports: {} }, vf = Te, Rd = Object.create || function() {
  function n() {
  }
  return function(t) {
    if (arguments.length !== 1)
      throw new Error("Object.create shim only accepts one parameter.");
    return n.prototype = t, new n();
  };
}();
function ki(n, t) {
  this.name = "ParsingError", this.code = n.code, this.message = t || n.message;
}
ki.prototype = Rd(Error.prototype);
ki.prototype.constructor = ki;
ki.Errors = {
  BadSignature: {
    code: 0,
    message: "Malformed WebVTT signature."
  },
  BadTimeStamp: {
    code: 1,
    message: "Malformed time stamp."
  }
};
function Nd(n) {
  function t(r, e, a, s) {
    return (r | 0) * 3600 + (e | 0) * 60 + (a | 0) + (s | 0) / 1e3;
  }
  var i = n.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);
  return i ? i[3] ? t(i[1], i[2], i[3].replace(":", ""), i[4]) : i[1] > 59 ? t(i[1], i[2], 0, i[4]) : t(0, i[1], i[2], i[4]) : null;
}
function qa() {
  this.values = Rd(null);
}
qa.prototype = {
  set: function(n, t) {
    !this.get(n) && t !== "" && (this.values[n] = t);
  },
  get: function(n, t, i) {
    return i ? this.has(n) ? this.values[n] : t[i] : this.has(n) ? this.values[n] : t;
  },
  has: function(n) {
    return n in this.values;
  },
  alt: function(n, t, i) {
    for (var r = 0; r < i.length; ++r)
      if (t === i[r]) {
        this.set(n, t);
        break;
      }
  },
  integer: function(n, t) {
    /^-?\d+$/.test(t) && this.set(n, parseInt(t, 10));
  },
  percent: function(n, t) {
    return t.match(/^([\d]{1,3})(\.[\d]*)?%$/) && (t = parseFloat(t), t >= 0 && t <= 100) ? (this.set(n, t), !0) : !1;
  }
};
function Ra(n, t, i, r) {
  var e = r ? n.split(r) : [n];
  for (var a in e)
    if (typeof e[a] == "string") {
      var s = e[a].split(i);
      if (s.length === 2) {
        var o = s[0].trim(), u = s[1].trim();
        t(o, u);
      }
    }
}
function by(n, t, i) {
  var r = n;
  function e() {
    var o = Nd(n);
    if (o === null)
      throw new ki(
        ki.Errors.BadTimeStamp,
        "Malformed timestamp: " + r
      );
    return n = n.replace(/^[^\sa-zA-Z-]+/, ""), o;
  }
  function a(o, u) {
    var l = new qa();
    Ra(o, function(d, h) {
      switch (d) {
        case "region":
          for (var f = i.length - 1; f >= 0; f--)
            if (i[f].id === h) {
              l.set(d, i[f].region);
              break;
            }
          break;
        case "vertical":
          l.alt(d, h, ["rl", "lr"]);
          break;
        case "line":
          var _ = h.split(","), v = _[0];
          l.integer(d, v), l.percent(d, v) && l.set("snapToLines", !1), l.alt(d, v, ["auto"]), _.length === 2 && l.alt("lineAlign", _[1], ["start", "center", "end"]);
          break;
        case "position":
          _ = h.split(","), l.percent(d, _[0]), _.length === 2 && l.alt("positionAlign", _[1], ["start", "center", "end"]);
          break;
        case "size":
          l.percent(d, h);
          break;
        case "align":
          l.alt(d, h, ["start", "center", "end", "left", "right"]);
          break;
      }
    }, /:/, /\s/), u.region = l.get("region", null), u.vertical = l.get("vertical", "");
    try {
      u.line = l.get("line", "auto");
    } catch {
    }
    u.lineAlign = l.get("lineAlign", "start"), u.snapToLines = l.get("snapToLines", !0), u.size = l.get("size", 100);
    try {
      u.align = l.get("align", "center");
    } catch {
      u.align = l.get("align", "middle");
    }
    try {
      u.position = l.get("position", "auto");
    } catch {
      u.position = l.get("position", {
        start: 0,
        left: 0,
        center: 50,
        middle: 50,
        end: 100,
        right: 100
      }, u.align);
    }
    u.positionAlign = l.get("positionAlign", {
      start: "start",
      left: "start",
      center: "center",
      middle: "center",
      end: "end",
      right: "end"
    }, u.align);
  }
  function s() {
    n = n.replace(/^\s+/, "");
  }
  if (s(), t.startTime = e(), s(), n.substr(0, 3) !== "-->")
    throw new ki(
      ki.Errors.BadTimeStamp,
      "Malformed time stamp (time stamps must be separated by '-->'): " + r
    );
  n = n.substr(3), s(), t.endTime = e(), s(), a(n, t);
}
var ku = vf.createElement && vf.createElement("textarea"), Sy = {
  c: "span",
  i: "i",
  b: "b",
  u: "u",
  ruby: "ruby",
  rt: "rt",
  v: "span",
  lang: "span"
}, _f = {
  white: "rgba(255,255,255,1)",
  lime: "rgba(0,255,0,1)",
  cyan: "rgba(0,255,255,1)",
  red: "rgba(255,0,0,1)",
  yellow: "rgba(255,255,0,1)",
  magenta: "rgba(255,0,255,1)",
  blue: "rgba(0,0,255,1)",
  black: "rgba(0,0,0,1)"
}, Ey = {
  v: "title",
  lang: "lang"
}, yf = {
  rt: "ruby"
};
function zp(n, t) {
  function i() {
    if (!t)
      return null;
    function v(T) {
      return t = t.substr(T.length), T;
    }
    var y = t.match(/^([^<]*)(<[^>]*>?)?/);
    return v(y[1] ? y[1] : y[2]);
  }
  function r(v) {
    return ku.innerHTML = v, v = ku.textContent, ku.textContent = "", v;
  }
  function e(v, y) {
    return !yf[y.localName] || yf[y.localName] === v.localName;
  }
  function a(v, y) {
    var T = Sy[v];
    if (!T)
      return null;
    var I = n.document.createElement(T), V = Ey[v];
    return V && y && (I[V] = y.trim()), I;
  }
  for (var s = n.document.createElement("div"), o = s, u, l = []; (u = i()) !== null; ) {
    if (u[0] === "<") {
      if (u[1] === "/") {
        l.length && l[l.length - 1] === u.substr(2).replace(">", "") && (l.pop(), o = o.parentNode);
        continue;
      }
      var d = Nd(u.substr(1, u.length - 2)), h;
      if (d) {
        h = n.document.createProcessingInstruction("timestamp", d), o.appendChild(h);
        continue;
      }
      var f = u.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);
      if (!f || (h = a(f[1], f[3]), !h) || !e(o, h))
        continue;
      if (f[2]) {
        var _ = f[2].split(".");
        _.forEach(function(v) {
          var y = /^bg_/.test(v), T = y ? v.slice(3) : v;
          if (_f.hasOwnProperty(T)) {
            var I = y ? "background-color" : "color", V = _f[T];
            h.style[I] = V;
          }
        }), h.className = _.join(" ");
      }
      l.push(f[1]), o.appendChild(h), o = h;
      continue;
    }
    o.appendChild(n.document.createTextNode(r(u)));
  }
  return s;
}
var Tf = [
  [1470, 1470],
  [1472, 1472],
  [1475, 1475],
  [1478, 1478],
  [1488, 1514],
  [1520, 1524],
  [1544, 1544],
  [1547, 1547],
  [1549, 1549],
  [1563, 1563],
  [1566, 1610],
  [1645, 1647],
  [1649, 1749],
  [1765, 1766],
  [1774, 1775],
  [1786, 1805],
  [1807, 1808],
  [1810, 1839],
  [1869, 1957],
  [1969, 1969],
  [1984, 2026],
  [2036, 2037],
  [2042, 2042],
  [2048, 2069],
  [2074, 2074],
  [2084, 2084],
  [2088, 2088],
  [2096, 2110],
  [2112, 2136],
  [2142, 2142],
  [2208, 2208],
  [2210, 2220],
  [8207, 8207],
  [64285, 64285],
  [64287, 64296],
  [64298, 64310],
  [64312, 64316],
  [64318, 64318],
  [64320, 64321],
  [64323, 64324],
  [64326, 64449],
  [64467, 64829],
  [64848, 64911],
  [64914, 64967],
  [65008, 65020],
  [65136, 65140],
  [65142, 65276],
  [67584, 67589],
  [67592, 67592],
  [67594, 67637],
  [67639, 67640],
  [67644, 67644],
  [67647, 67669],
  [67671, 67679],
  [67840, 67867],
  [67872, 67897],
  [67903, 67903],
  [67968, 68023],
  [68030, 68031],
  [68096, 68096],
  [68112, 68115],
  [68117, 68119],
  [68121, 68147],
  [68160, 68167],
  [68176, 68184],
  [68192, 68223],
  [68352, 68405],
  [68416, 68437],
  [68440, 68466],
  [68472, 68479],
  [68608, 68680],
  [126464, 126467],
  [126469, 126495],
  [126497, 126498],
  [126500, 126500],
  [126503, 126503],
  [126505, 126514],
  [126516, 126519],
  [126521, 126521],
  [126523, 126523],
  [126530, 126530],
  [126535, 126535],
  [126537, 126537],
  [126539, 126539],
  [126541, 126543],
  [126545, 126546],
  [126548, 126548],
  [126551, 126551],
  [126553, 126553],
  [126555, 126555],
  [126557, 126557],
  [126559, 126559],
  [126561, 126562],
  [126564, 126564],
  [126567, 126570],
  [126572, 126578],
  [126580, 126583],
  [126585, 126588],
  [126590, 126590],
  [126592, 126601],
  [126603, 126619],
  [126625, 126627],
  [126629, 126633],
  [126635, 126651],
  [1114109, 1114109]
];
function xy(n) {
  for (var t = 0; t < Tf.length; t++) {
    var i = Tf[t];
    if (n >= i[0] && n <= i[1])
      return !0;
  }
  return !1;
}
function wy(n) {
  var t = [], i = "", r;
  if (!n || !n.childNodes)
    return "ltr";
  function e(o, u) {
    for (var l = u.childNodes.length - 1; l >= 0; l--)
      o.push(u.childNodes[l]);
  }
  function a(o) {
    if (!o || !o.length)
      return null;
    var u = o.pop(), l = u.textContent || u.innerText;
    if (l) {
      var d = l.match(/^.*(\n|\r)/);
      return d ? (o.length = 0, d[0]) : l;
    }
    if (u.tagName === "ruby")
      return a(o);
    if (u.childNodes)
      return e(o, u), a(o);
  }
  for (e(t, n); i = a(t); )
    for (var s = 0; s < i.length; s++)
      if (r = i.charCodeAt(s), xy(r))
        return "rtl";
  return "ltr";
}
function Ay(n) {
  if (typeof n.line == "number" && (n.snapToLines || n.line >= 0 && n.line <= 100))
    return n.line;
  if (!n.track || !n.track.textTrackList || !n.track.textTrackList.mediaElement)
    return -1;
  for (var t = n.track, i = t.textTrackList, r = 0, e = 0; e < i.length && i[e] !== t; e++)
    i[e].mode === "showing" && r++;
  return ++r * -1;
}
function No() {
}
No.prototype.applyStyles = function(n, t) {
  t = t || this.div;
  for (var i in n)
    n.hasOwnProperty(i) && (t.style[i] = n[i]);
};
No.prototype.formatStyle = function(n, t) {
  return n === 0 ? 0 : n + t;
};
function so(n, t, i) {
  No.call(this), this.cue = t, this.cueDiv = zp(n, t.text);
  var r = {
    color: "rgba(255, 255, 255, 1)",
    backgroundColor: "rgba(0, 0, 0, 0.8)",
    position: "relative",
    left: 0,
    right: 0,
    top: 0,
    bottom: 0,
    display: "inline",
    writingMode: t.vertical === "" ? "horizontal-tb" : t.vertical === "lr" ? "vertical-lr" : "vertical-rl",
    unicodeBidi: "plaintext"
  };
  this.applyStyles(r, this.cueDiv), this.div = n.document.createElement("div"), r = {
    direction: wy(this.cueDiv),
    writingMode: t.vertical === "" ? "horizontal-tb" : t.vertical === "lr" ? "vertical-lr" : "vertical-rl",
    unicodeBidi: "plaintext",
    textAlign: t.align === "middle" ? "center" : t.align,
    font: i.font,
    whiteSpace: "pre-line",
    position: "absolute"
  }, this.applyStyles(r), this.div.appendChild(this.cueDiv);
  var e = 0;
  switch (t.positionAlign) {
    case "start":
      e = t.position;
      break;
    case "center":
      e = t.position - t.size / 2;
      break;
    case "end":
      e = t.position - t.size;
      break;
  }
  t.vertical === "" ? this.applyStyles({
    left: this.formatStyle(e, "%"),
    width: this.formatStyle(t.size, "%")
  }) : this.applyStyles({
    top: this.formatStyle(e, "%"),
    height: this.formatStyle(t.size, "%")
  }), this.move = function(a) {
    this.applyStyles({
      top: this.formatStyle(a.top, "px"),
      bottom: this.formatStyle(a.bottom, "px"),
      left: this.formatStyle(a.left, "px"),
      right: this.formatStyle(a.right, "px"),
      height: this.formatStyle(a.height, "px"),
      width: this.formatStyle(a.width, "px")
    });
  };
}
so.prototype = Rd(No.prototype);
so.prototype.constructor = so;
function li(n) {
  var t, i, r, e;
  if (n.div) {
    i = n.div.offsetHeight, r = n.div.offsetWidth, e = n.div.offsetTop;
    var a = (a = n.div.childNodes) && (a = a[0]) && a.getClientRects && a.getClientRects();
    n = n.div.getBoundingClientRect(), t = a ? Math.max(a[0] && a[0].height || 0, n.height / a.length) : 0;
  }
  this.left = n.left, this.right = n.right, this.top = n.top || e, this.height = n.height || i, this.bottom = n.bottom || e + (n.height || i), this.width = n.width || r, this.lineHeight = t !== void 0 ? t : n.lineHeight;
}
li.prototype.move = function(n, t) {
  switch (t = t !== void 0 ? t : this.lineHeight, n) {
    case "+x":
      this.left += t, this.right += t;
      break;
    case "-x":
      this.left -= t, this.right -= t;
      break;
    case "+y":
      this.top += t, this.bottom += t;
      break;
    case "-y":
      this.top -= t, this.bottom -= t;
      break;
  }
};
li.prototype.overlaps = function(n) {
  return this.left < n.right && this.right > n.left && this.top < n.bottom && this.bottom > n.top;
};
li.prototype.overlapsAny = function(n) {
  for (var t = 0; t < n.length; t++)
    if (this.overlaps(n[t]))
      return !0;
  return !1;
};
li.prototype.within = function(n) {
  return this.top >= n.top && this.bottom <= n.bottom && this.left >= n.left && this.right <= n.right;
};
li.prototype.overlapsOppositeAxis = function(n, t) {
  switch (t) {
    case "+x":
      return this.left < n.left;
    case "-x":
      return this.right > n.right;
    case "+y":
      return this.top < n.top;
    case "-y":
      return this.bottom > n.bottom;
  }
};
li.prototype.intersectPercentage = function(n) {
  var t = Math.max(0, Math.min(this.right, n.right) - Math.max(this.left, n.left)), i = Math.max(0, Math.min(this.bottom, n.bottom) - Math.max(this.top, n.top)), r = t * i;
  return r / (this.height * this.width);
};
li.prototype.toCSSCompatValues = function(n) {
  return {
    top: this.top - n.top,
    bottom: n.bottom - this.bottom,
    left: this.left - n.left,
    right: n.right - this.right,
    height: this.height,
    width: this.width
  };
};
li.getSimpleBoxPosition = function(n) {
  var t = n.div ? n.div.offsetHeight : n.tagName ? n.offsetHeight : 0, i = n.div ? n.div.offsetWidth : n.tagName ? n.offsetWidth : 0, r = n.div ? n.div.offsetTop : n.tagName ? n.offsetTop : 0;
  n = n.div ? n.div.getBoundingClientRect() : n.tagName ? n.getBoundingClientRect() : n;
  var e = {
    left: n.left,
    right: n.right,
    top: n.top || r,
    height: n.height || t,
    bottom: n.bottom || r + (n.height || t),
    width: n.width || i
  };
  return e;
};
function Cy(n, t, i, r) {
  function e(T, I) {
    for (var V, $ = new li(T), k = 1, P = 0; P < I.length; P++) {
      for (; T.overlapsOppositeAxis(i, I[P]) || T.within(i) && T.overlapsAny(r); )
        T.move(I[P]);
      if (T.within(i))
        return T;
      var L = T.intersectPercentage(i);
      k > L && (V = new li(T), k = L), T = new li($);
    }
    return V || $;
  }
  var a = new li(t), s = t.cue, o = Ay(s), u = [];
  if (s.snapToLines) {
    var l;
    switch (s.vertical) {
      case "":
        u = ["+y", "-y"], l = "height";
        break;
      case "rl":
        u = ["+x", "-x"], l = "width";
        break;
      case "lr":
        u = ["-x", "+x"], l = "width";
        break;
    }
    var d = a.lineHeight, h = d * Math.round(o), f = i[l] + d, _ = u[0];
    Math.abs(h) > f && (h = h < 0 ? -1 : 1, h *= Math.ceil(f / d) * d), o < 0 && (h += s.vertical === "" ? i.height : i.width, u = u.reverse()), a.move(_, h);
  } else {
    var v = a.lineHeight / i.height * 100;
    switch (s.lineAlign) {
      case "center":
        o -= v / 2;
        break;
      case "end":
        o -= v;
        break;
    }
    switch (s.vertical) {
      case "":
        t.applyStyles({
          top: t.formatStyle(o, "%")
        });
        break;
      case "rl":
        t.applyStyles({
          left: t.formatStyle(o, "%")
        });
        break;
      case "lr":
        t.applyStyles({
          right: t.formatStyle(o, "%")
        });
        break;
    }
    u = ["+y", "-x", "+x", "-y"], a = new li(t);
  }
  var y = e(a, u);
  t.move(y.toCSSCompatValues(i));
}
function ia() {
}
ia.StringDecoder = function() {
  return {
    decode: function(n) {
      if (!n)
        return "";
      if (typeof n != "string")
        throw new Error("Error - expected string data.");
      return decodeURIComponent(encodeURIComponent(n));
    }
  };
};
ia.convertCueToDOMTree = function(n, t) {
  return !n || !t ? null : zp(n, t);
};
var ky = 0.05, Py = "sans-serif", Iy = "1.5%";
ia.processCues = function(n, t, i) {
  if (!n || !t || !i)
    return null;
  for (; i.firstChild; )
    i.removeChild(i.firstChild);
  var r = n.document.createElement("div");
  r.style.position = "absolute", r.style.left = "0", r.style.right = "0", r.style.top = "0", r.style.bottom = "0", r.style.margin = Iy, i.appendChild(r);
  function e(d) {
    for (var h = 0; h < d.length; h++)
      if (d[h].hasBeenReset || !d[h].displayState)
        return !0;
    return !1;
  }
  if (!e(t)) {
    for (var a = 0; a < t.length; a++)
      r.appendChild(t[a].displayState);
    return;
  }
  var s = [], o = li.getSimpleBoxPosition(r), u = Math.round(o.height * ky * 100) / 100, l = {
    font: u + "px " + Py
  };
  (function() {
    for (var d, h, f = 0; f < t.length; f++)
      h = t[f], d = new so(n, h, l), r.appendChild(d.div), Cy(n, d, o, s), h.displayState = d.div, s.push(li.getSimpleBoxPosition(d));
  })();
};
ia.Parser = function(n, t, i) {
  i || (i = t, t = {}), t || (t = {}), this.window = n, this.vttjs = t, this.state = "INITIAL", this.buffer = "", this.decoder = i || new TextDecoder("utf8"), this.regionList = [];
};
ia.Parser.prototype = {
  reportOrThrowError: function(n) {
    if (n instanceof ki)
      this.onparsingerror && this.onparsingerror(n);
    else
      throw n;
  },
  parse: function(n) {
    var t = this;
    n && (t.buffer += t.decoder.decode(n, { stream: !0 }));
    function i() {
      for (var d = t.buffer, h = 0; h < d.length && d[h] !== "\r" && d[h] !== `
`; )
        ++h;
      var f = d.substr(0, h);
      return d[h] === "\r" && ++h, d[h] === `
` && ++h, t.buffer = d.substr(h), f;
    }
    function r(d) {
      var h = new qa();
      if (Ra(d, function(_, v) {
        switch (_) {
          case "id":
            h.set(_, v);
            break;
          case "width":
            h.percent(_, v);
            break;
          case "lines":
            h.integer(_, v);
            break;
          case "regionanchor":
          case "viewportanchor":
            var y = v.split(",");
            if (y.length !== 2)
              break;
            var T = new qa();
            if (T.percent("x", y[0]), T.percent("y", y[1]), !T.has("x") || !T.has("y"))
              break;
            h.set(_ + "X", T.get("x")), h.set(_ + "Y", T.get("y"));
            break;
          case "scroll":
            h.alt(_, v, ["up"]);
            break;
        }
      }, /=/, /\s/), h.has("id")) {
        var f = new (t.vttjs.VTTRegion || t.window.VTTRegion)();
        f.width = h.get("width", 100), f.lines = h.get("lines", 3), f.regionAnchorX = h.get("regionanchorX", 0), f.regionAnchorY = h.get("regionanchorY", 100), f.viewportAnchorX = h.get("viewportanchorX", 0), f.viewportAnchorY = h.get("viewportanchorY", 100), f.scroll = h.get("scroll", ""), t.onregion && t.onregion(f), t.regionList.push({
          id: h.get("id"),
          region: f
        });
      }
    }
    function e(d) {
      var h = new qa();
      Ra(d, function(f, _) {
        switch (f) {
          case "MPEGT":
            h.integer(f + "S", _);
            break;
          case "LOCA":
            h.set(f + "L", Nd(_));
            break;
        }
      }, /[^\d]:/, /,/), t.ontimestampmap && t.ontimestampmap({
        MPEGTS: h.get("MPEGTS"),
        LOCAL: h.get("LOCAL")
      });
    }
    function a(d) {
      d.match(/X-TIMESTAMP-MAP/) ? Ra(d, function(h, f) {
        switch (h) {
          case "X-TIMESTAMP-MAP":
            e(f);
            break;
        }
      }, /=/) : Ra(d, function(h, f) {
        switch (h) {
          case "Region":
            r(f);
            break;
        }
      }, /:/);
    }
    try {
      var s;
      if (t.state === "INITIAL") {
        if (!/\r\n|\n/.test(t.buffer))
          return this;
        s = i();
        var o = s.match(/^WEBVTT([ \t].*)?$/);
        if (!o || !o[0])
          throw new ki(ki.Errors.BadSignature);
        t.state = "HEADER";
      }
      for (var u = !1; t.buffer; ) {
        if (!/\r\n|\n/.test(t.buffer))
          return this;
        switch (u ? u = !1 : s = i(), t.state) {
          case "HEADER":
            /:/.test(s) ? a(s) : s || (t.state = "ID");
            continue;
          case "NOTE":
            s || (t.state = "ID");
            continue;
          case "ID":
            if (/^NOTE($|[ \t])/.test(s)) {
              t.state = "NOTE";
              break;
            }
            if (!s)
              continue;
            t.cue = new (t.vttjs.VTTCue || t.window.VTTCue)(0, 0, "");
            try {
              t.cue.align = "center";
            } catch {
              t.cue.align = "middle";
            }
            if (t.state = "CUE", s.indexOf("-->") === -1) {
              t.cue.id = s;
              continue;
            }
          case "CUE":
            try {
              by(s, t.cue, t.regionList);
            } catch (d) {
              t.reportOrThrowError(d), t.cue = null, t.state = "BADCUE";
              continue;
            }
            t.state = "CUETEXT";
            continue;
          case "CUETEXT":
            var l = s.indexOf("-->") !== -1;
            if (!s || l && (u = !0)) {
              t.oncue && t.oncue(t.cue), t.cue = null, t.state = "ID";
              continue;
            }
            t.cue.text && (t.cue.text += `
`), t.cue.text += s.replace(/\u2028/g, `
`).replace(/u2029/g, `
`);
            continue;
          case "BADCUE":
            s || (t.state = "ID");
            continue;
        }
      }
    } catch (d) {
      t.reportOrThrowError(d), t.state === "CUETEXT" && t.cue && t.oncue && t.oncue(t.cue), t.cue = null, t.state = t.state === "INITIAL" ? "BADWEBVTT" : "BADCUE";
    }
    return this;
  },
  flush: function() {
    var n = this;
    try {
      if (n.buffer += n.decoder.decode(), (n.cue || n.state === "HEADER") && (n.buffer += `

`, n.parse()), n.state === "INITIAL")
        throw new ki(ki.Errors.BadSignature);
    } catch (t) {
      n.reportOrThrowError(t);
    }
    return n.onflush && n.onflush(), this;
  }
};
var Dy = ia, Ly = "auto", Oy = {
  "": 1,
  lr: 1,
  rl: 1
}, Ry = {
  start: 1,
  center: 1,
  end: 1,
  left: 1,
  right: 1,
  auto: 1,
  "line-left": 1,
  "line-right": 1
};
function Ny(n) {
  if (typeof n != "string")
    return !1;
  var t = Oy[n.toLowerCase()];
  return t ? n.toLowerCase() : !1;
}
function Pu(n) {
  if (typeof n != "string")
    return !1;
  var t = Ry[n.toLowerCase()];
  return t ? n.toLowerCase() : !1;
}
function Kp(n, t, i) {
  this.hasBeenReset = !1;
  var r = "", e = !1, a = n, s = t, o = i, u = null, l = "", d = !0, h = "auto", f = "start", _ = "auto", v = "auto", y = 100, T = "center";
  Object.defineProperties(this, {
    id: {
      enumerable: !0,
      get: function() {
        return r;
      },
      set: function(I) {
        r = "" + I;
      }
    },
    pauseOnExit: {
      enumerable: !0,
      get: function() {
        return e;
      },
      set: function(I) {
        e = !!I;
      }
    },
    startTime: {
      enumerable: !0,
      get: function() {
        return a;
      },
      set: function(I) {
        if (typeof I != "number")
          throw new TypeError("Start time must be set to a number.");
        a = I, this.hasBeenReset = !0;
      }
    },
    endTime: {
      enumerable: !0,
      get: function() {
        return s;
      },
      set: function(I) {
        if (typeof I != "number")
          throw new TypeError("End time must be set to a number.");
        s = I, this.hasBeenReset = !0;
      }
    },
    text: {
      enumerable: !0,
      get: function() {
        return o;
      },
      set: function(I) {
        o = "" + I, this.hasBeenReset = !0;
      }
    },
    region: {
      enumerable: !0,
      get: function() {
        return u;
      },
      set: function(I) {
        u = I, this.hasBeenReset = !0;
      }
    },
    vertical: {
      enumerable: !0,
      get: function() {
        return l;
      },
      set: function(I) {
        var V = Ny(I);
        if (V === !1)
          throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");
        l = V, this.hasBeenReset = !0;
      }
    },
    snapToLines: {
      enumerable: !0,
      get: function() {
        return d;
      },
      set: function(I) {
        d = !!I, this.hasBeenReset = !0;
      }
    },
    line: {
      enumerable: !0,
      get: function() {
        return h;
      },
      set: function(I) {
        if (typeof I != "number" && I !== Ly)
          throw new SyntaxError("Line: an invalid number or illegal string was specified.");
        h = I, this.hasBeenReset = !0;
      }
    },
    lineAlign: {
      enumerable: !0,
      get: function() {
        return f;
      },
      set: function(I) {
        var V = Pu(I);
        V ? (f = V, this.hasBeenReset = !0) : console.warn("lineAlign: an invalid or illegal string was specified.");
      }
    },
    position: {
      enumerable: !0,
      get: function() {
        return _;
      },
      set: function(I) {
        if (I < 0 || I > 100)
          throw new Error("Position must be between 0 and 100.");
        _ = I, this.hasBeenReset = !0;
      }
    },
    positionAlign: {
      enumerable: !0,
      get: function() {
        return v;
      },
      set: function(I) {
        var V = Pu(I);
        V ? (v = V, this.hasBeenReset = !0) : console.warn("positionAlign: an invalid or illegal string was specified.");
      }
    },
    size: {
      enumerable: !0,
      get: function() {
        return y;
      },
      set: function(I) {
        if (I < 0 || I > 100)
          throw new Error("Size must be between 0 and 100.");
        y = I, this.hasBeenReset = !0;
      }
    },
    align: {
      enumerable: !0,
      get: function() {
        return T;
      },
      set: function(I) {
        var V = Pu(I);
        if (!V)
          throw new SyntaxError("align: an invalid or illegal alignment string was specified.");
        T = V, this.hasBeenReset = !0;
      }
    }
  }), this.displayState = void 0;
}
Kp.prototype.getCueAsHTML = function() {
  return WebVTT.convertCueToDOMTree(window, this.text);
};
var My = Kp, Fy = {
  "": !0,
  up: !0
};
function By(n) {
  if (typeof n != "string")
    return !1;
  var t = Fy[n.toLowerCase()];
  return t ? n.toLowerCase() : !1;
}
function Ea(n) {
  return typeof n == "number" && n >= 0 && n <= 100;
}
function Uy() {
  var n = 100, t = 3, i = 0, r = 100, e = 0, a = 100, s = "";
  Object.defineProperties(this, {
    width: {
      enumerable: !0,
      get: function() {
        return n;
      },
      set: function(o) {
        if (!Ea(o))
          throw new Error("Width must be between 0 and 100.");
        n = o;
      }
    },
    lines: {
      enumerable: !0,
      get: function() {
        return t;
      },
      set: function(o) {
        if (typeof o != "number")
          throw new TypeError("Lines must be set to a number.");
        t = o;
      }
    },
    regionAnchorY: {
      enumerable: !0,
      get: function() {
        return r;
      },
      set: function(o) {
        if (!Ea(o))
          throw new Error("RegionAnchorX must be between 0 and 100.");
        r = o;
      }
    },
    regionAnchorX: {
      enumerable: !0,
      get: function() {
        return i;
      },
      set: function(o) {
        if (!Ea(o))
          throw new Error("RegionAnchorY must be between 0 and 100.");
        i = o;
      }
    },
    viewportAnchorY: {
      enumerable: !0,
      get: function() {
        return a;
      },
      set: function(o) {
        if (!Ea(o))
          throw new Error("ViewportAnchorY must be between 0 and 100.");
        a = o;
      }
    },
    viewportAnchorX: {
      enumerable: !0,
      get: function() {
        return e;
      },
      set: function(o) {
        if (!Ea(o))
          throw new Error("ViewportAnchorX must be between 0 and 100.");
        e = o;
      }
    },
    scroll: {
      enumerable: !0,
      get: function() {
        return s;
      },
      set: function(o) {
        var u = By(o);
        u === !1 ? console.warn("Scroll: an invalid or illegal string was specified.") : s = u;
      }
    }
  });
}
var qy = Uy, yr = B, un = Jl.exports = {
  WebVTT: Dy,
  VTTCue: My,
  VTTRegion: qy
};
yr.vttjs = un;
yr.WebVTT = un.WebVTT;
var Vy = un.VTTCue, jy = un.VTTRegion, Hy = yr.VTTCue, Wy = yr.VTTRegion;
un.shim = function() {
  yr.VTTCue = Vy, yr.VTTRegion = jy;
};
un.restore = function() {
  yr.VTTCue = Hy, yr.VTTRegion = Wy;
};
yr.VTTCue || un.shim();
function Gy() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return !1;
  if (typeof Proxy == "function")
    return !0;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), !0;
  } catch {
    return !1;
  }
}
function Ys(n, t, i) {
  return Gy() ? Ys = Reflect.construct.bind() : Ys = function(e, a, s) {
    var o = [null];
    o.push.apply(o, a);
    var u = Function.bind.apply(e, o), l = new u();
    return s && Ga(l, s.prototype), l;
  }, Ys.apply(null, arguments);
}
function $y(n, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function");
  n.prototype = Object.create(t && t.prototype, {
    constructor: {
      value: n,
      writable: !0,
      configurable: !0
    }
  }), Object.defineProperty(n, "prototype", {
    writable: !1
  }), t && Ga(n, t);
}
var Xp = { exports: {} };
(function(n, t) {
  (function(i) {
    var r = /^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/, e = /^(?=([^\/?#]*))\1([^]*)$/, a = /(?:\/|^)\.(?=\/)/g, s = /(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g, o = {
      buildAbsoluteURL: function(u, l, d) {
        if (d = d || {}, u = u.trim(), l = l.trim(), !l) {
          if (!d.alwaysNormalize)
            return u;
          var h = o.parseURL(u);
          if (!h)
            throw new Error("Error trying to parse base URL.");
          return h.path = o.normalizePath(
            h.path
          ), o.buildURLFromParts(h);
        }
        var f = o.parseURL(l);
        if (!f)
          throw new Error("Error trying to parse relative URL.");
        if (f.scheme)
          return d.alwaysNormalize ? (f.path = o.normalizePath(f.path), o.buildURLFromParts(f)) : l;
        var _ = o.parseURL(u);
        if (!_)
          throw new Error("Error trying to parse base URL.");
        if (!_.netLoc && _.path && _.path[0] !== "/") {
          var v = e.exec(_.path);
          _.netLoc = v[1], _.path = v[2];
        }
        _.netLoc && !_.path && (_.path = "/");
        var y = {
          scheme: _.scheme,
          netLoc: f.netLoc,
          path: null,
          params: f.params,
          query: f.query,
          fragment: f.fragment
        };
        if (!f.netLoc && (y.netLoc = _.netLoc, f.path[0] !== "/"))
          if (!f.path)
            y.path = _.path, f.params || (y.params = _.params, f.query || (y.query = _.query));
          else {
            var T = _.path, I = T.substring(0, T.lastIndexOf("/") + 1) + f.path;
            y.path = o.normalizePath(I);
          }
        return y.path === null && (y.path = d.alwaysNormalize ? o.normalizePath(f.path) : f.path), o.buildURLFromParts(y);
      },
      parseURL: function(u) {
        var l = r.exec(u);
        return l ? {
          scheme: l[1] || "",
          netLoc: l[2] || "",
          path: l[3] || "",
          params: l[4] || "",
          query: l[5] || "",
          fragment: l[6] || ""
        } : null;
      },
      normalizePath: function(u) {
        for (u = u.split("").reverse().join("").replace(a, ""); u.length !== (u = u.replace(s, "")).length; )
          ;
        return u.split("").reverse().join("");
      },
      buildURLFromParts: function(u) {
        return u.scheme + u.netLoc + u.path + u.params + u.query + u.fragment;
      }
    };
    n.exports = o;
  })();
})(Xp);
const bf = Xp.exports;
var Sf = "http://example.com", Mo = function(t, i) {
  if (/^[a-z]+:/i.test(i))
    return i;
  /^data:/.test(t) && (t = B.location && B.location.href || "");
  var r = typeof B.URL == "function", e = /^\/\//.test(t), a = !B.location && !/\/\//i.test(t);
  if (r ? t = new B.URL(t, B.location || Sf) : /\/\//i.test(t) || (t = bf.buildAbsoluteURL(B.location && B.location.href || "", t)), r) {
    var s = new URL(i, t);
    return a ? s.href.slice(Sf.length) : e ? s.href.slice(s.protocol.length) : s.href;
  }
  return bf.buildAbsoluteURL(t, i);
}, Md = /* @__PURE__ */ function() {
  function n() {
    this.listeners = {};
  }
  var t = n.prototype;
  return t.on = function(r, e) {
    this.listeners[r] || (this.listeners[r] = []), this.listeners[r].push(e);
  }, t.off = function(r, e) {
    if (!this.listeners[r])
      return !1;
    var a = this.listeners[r].indexOf(e);
    return this.listeners[r] = this.listeners[r].slice(0), this.listeners[r].splice(a, 1), a > -1;
  }, t.trigger = function(r) {
    var e = this.listeners[r];
    if (!!e)
      if (arguments.length === 2)
        for (var a = e.length, s = 0; s < a; ++s)
          e[s].call(this, arguments[1]);
      else
        for (var o = Array.prototype.slice.call(arguments, 1), u = e.length, l = 0; l < u; ++l)
          e[l].apply(this, o);
  }, t.dispose = function() {
    this.listeners = {};
  }, t.pipe = function(r) {
    this.on("data", function(e) {
      r.push(e);
    });
  }, n;
}(), zy = function(t) {
  return B.atob ? B.atob(t) : Buffer.from(t, "base64").toString("binary");
};
function Qp(n) {
  for (var t = zy(n), i = new Uint8Array(t.length), r = 0; r < t.length; r++)
    i[r] = t.charCodeAt(r);
  return i;
}
/*! @name m3u8-parser @version 4.7.1 @license Apache-2.0 */
var Ky = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t() {
    var r;
    return r = n.call(this) || this, r.buffer = "", r;
  }
  var i = t.prototype;
  return i.push = function(e) {
    var a;
    for (this.buffer += e, a = this.buffer.indexOf(`
`); a > -1; a = this.buffer.indexOf(`
`))
      this.trigger("data", this.buffer.substring(0, a)), this.buffer = this.buffer.substring(a + 1);
  }, t;
}(Md), Xy = String.fromCharCode(9), Iu = function(t) {
  var i = /([0-9.]*)?@?([0-9.]*)?/.exec(t || ""), r = {};
  return i[1] && (r.length = parseInt(i[1], 10)), i[2] && (r.offset = parseInt(i[2], 10)), r;
}, Qy = function() {
  var t = "[^=]*", i = '"[^"]*"|[^,]*', r = "(?:" + t + ")=(?:" + i + ")";
  return new RegExp("(?:^|,)(" + r + ")");
}, Bi = function(t) {
  for (var i = t.split(Qy()), r = {}, e = i.length, a; e--; )
    i[e] !== "" && (a = /([^=]*)=(.*)/.exec(i[e]).slice(1), a[0] = a[0].replace(/^\s+|\s+$/g, ""), a[1] = a[1].replace(/^\s+|\s+$/g, ""), a[1] = a[1].replace(/^['"](.*)['"]$/g, "$1"), r[a[0]] = a[1]);
  return r;
}, Yy = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t() {
    var r;
    return r = n.call(this) || this, r.customParsers = [], r.tagMappers = [], r;
  }
  var i = t.prototype;
  return i.push = function(e) {
    var a = this, s, o;
    if (e = e.trim(), e.length !== 0) {
      if (e[0] !== "#") {
        this.trigger("data", {
          type: "uri",
          uri: e
        });
        return;
      }
      var u = this.tagMappers.reduce(function(l, d) {
        var h = d(e);
        return h === e ? l : l.concat([h]);
      }, [e]);
      u.forEach(function(l) {
        for (var d = 0; d < a.customParsers.length; d++)
          if (a.customParsers[d].call(a, l))
            return;
        if (l.indexOf("#EXT") !== 0) {
          a.trigger("data", {
            type: "comment",
            text: l.slice(1)
          });
          return;
        }
        if (l = l.replace("\r", ""), s = /^#EXTM3U/.exec(l), s) {
          a.trigger("data", {
            type: "tag",
            tagType: "m3u"
          });
          return;
        }
        if (s = /^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(l), s) {
          o = {
            type: "tag",
            tagType: "inf"
          }, s[1] && (o.duration = parseFloat(s[1])), s[2] && (o.title = s[2]), a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(l), s) {
          o = {
            type: "tag",
            tagType: "targetduration"
          }, s[1] && (o.duration = parseInt(s[1], 10)), a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-VERSION:?([0-9.]*)?/.exec(l), s) {
          o = {
            type: "tag",
            tagType: "version"
          }, s[1] && (o.version = parseInt(s[1], 10)), a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(l), s) {
          o = {
            type: "tag",
            tagType: "media-sequence"
          }, s[1] && (o.number = parseInt(s[1], 10)), a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(l), s) {
          o = {
            type: "tag",
            tagType: "discontinuity-sequence"
          }, s[1] && (o.number = parseInt(s[1], 10)), a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(l), s) {
          o = {
            type: "tag",
            tagType: "playlist-type"
          }, s[1] && (o.playlistType = s[1]), a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-BYTERANGE:?(.*)?$/.exec(l), s) {
          o = Ri(Iu(s[1]), {
            type: "tag",
            tagType: "byterange"
          }), a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(l), s) {
          o = {
            type: "tag",
            tagType: "allow-cache"
          }, s[1] && (o.allowed = !/NO/.test(s[1])), a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-MAP:?(.*)$/.exec(l), s) {
          if (o = {
            type: "tag",
            tagType: "map"
          }, s[1]) {
            var h = Bi(s[1]);
            h.URI && (o.uri = h.URI), h.BYTERANGE && (o.byterange = Iu(h.BYTERANGE));
          }
          a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-STREAM-INF:?(.*)$/.exec(l), s) {
          if (o = {
            type: "tag",
            tagType: "stream-inf"
          }, s[1]) {
            if (o.attributes = Bi(s[1]), o.attributes.RESOLUTION) {
              var f = o.attributes.RESOLUTION.split("x"), _ = {};
              f[0] && (_.width = parseInt(f[0], 10)), f[1] && (_.height = parseInt(f[1], 10)), o.attributes.RESOLUTION = _;
            }
            o.attributes.BANDWIDTH && (o.attributes.BANDWIDTH = parseInt(o.attributes.BANDWIDTH, 10)), o.attributes["PROGRAM-ID"] && (o.attributes["PROGRAM-ID"] = parseInt(o.attributes["PROGRAM-ID"], 10));
          }
          a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-MEDIA:?(.*)$/.exec(l), s) {
          o = {
            type: "tag",
            tagType: "media"
          }, s[1] && (o.attributes = Bi(s[1])), a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-ENDLIST/.exec(l), s) {
          a.trigger("data", {
            type: "tag",
            tagType: "endlist"
          });
          return;
        }
        if (s = /^#EXT-X-DISCONTINUITY/.exec(l), s) {
          a.trigger("data", {
            type: "tag",
            tagType: "discontinuity"
          });
          return;
        }
        if (s = /^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(l), s) {
          o = {
            type: "tag",
            tagType: "program-date-time"
          }, s[1] && (o.dateTimeString = s[1], o.dateTimeObject = new Date(s[1])), a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-KEY:?(.*)$/.exec(l), s) {
          o = {
            type: "tag",
            tagType: "key"
          }, s[1] && (o.attributes = Bi(s[1]), o.attributes.IV && (o.attributes.IV.substring(0, 2).toLowerCase() === "0x" && (o.attributes.IV = o.attributes.IV.substring(2)), o.attributes.IV = o.attributes.IV.match(/.{8}/g), o.attributes.IV[0] = parseInt(o.attributes.IV[0], 16), o.attributes.IV[1] = parseInt(o.attributes.IV[1], 16), o.attributes.IV[2] = parseInt(o.attributes.IV[2], 16), o.attributes.IV[3] = parseInt(o.attributes.IV[3], 16), o.attributes.IV = new Uint32Array(o.attributes.IV))), a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-START:?(.*)$/.exec(l), s) {
          o = {
            type: "tag",
            tagType: "start"
          }, s[1] && (o.attributes = Bi(s[1]), o.attributes["TIME-OFFSET"] = parseFloat(o.attributes["TIME-OFFSET"]), o.attributes.PRECISE = /YES/.test(o.attributes.PRECISE)), a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(l), s) {
          o = {
            type: "tag",
            tagType: "cue-out-cont"
          }, s[1] ? o.data = s[1] : o.data = "", a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-CUE-OUT:?(.*)?$/.exec(l), s) {
          o = {
            type: "tag",
            tagType: "cue-out"
          }, s[1] ? o.data = s[1] : o.data = "", a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-CUE-IN:?(.*)?$/.exec(l), s) {
          o = {
            type: "tag",
            tagType: "cue-in"
          }, s[1] ? o.data = s[1] : o.data = "", a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-SKIP:(.*)$/.exec(l), s && s[1]) {
          o = {
            type: "tag",
            tagType: "skip"
          }, o.attributes = Bi(s[1]), o.attributes.hasOwnProperty("SKIPPED-SEGMENTS") && (o.attributes["SKIPPED-SEGMENTS"] = parseInt(o.attributes["SKIPPED-SEGMENTS"], 10)), o.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES") && (o.attributes["RECENTLY-REMOVED-DATERANGES"] = o.attributes["RECENTLY-REMOVED-DATERANGES"].split(Xy)), a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-PART:(.*)$/.exec(l), s && s[1]) {
          o = {
            type: "tag",
            tagType: "part"
          }, o.attributes = Bi(s[1]), ["DURATION"].forEach(function(v) {
            o.attributes.hasOwnProperty(v) && (o.attributes[v] = parseFloat(o.attributes[v]));
          }), ["INDEPENDENT", "GAP"].forEach(function(v) {
            o.attributes.hasOwnProperty(v) && (o.attributes[v] = /YES/.test(o.attributes[v]));
          }), o.attributes.hasOwnProperty("BYTERANGE") && (o.attributes.byterange = Iu(o.attributes.BYTERANGE)), a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-SERVER-CONTROL:(.*)$/.exec(l), s && s[1]) {
          o = {
            type: "tag",
            tagType: "server-control"
          }, o.attributes = Bi(s[1]), ["CAN-SKIP-UNTIL", "PART-HOLD-BACK", "HOLD-BACK"].forEach(function(v) {
            o.attributes.hasOwnProperty(v) && (o.attributes[v] = parseFloat(o.attributes[v]));
          }), ["CAN-SKIP-DATERANGES", "CAN-BLOCK-RELOAD"].forEach(function(v) {
            o.attributes.hasOwnProperty(v) && (o.attributes[v] = /YES/.test(o.attributes[v]));
          }), a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-PART-INF:(.*)$/.exec(l), s && s[1]) {
          o = {
            type: "tag",
            tagType: "part-inf"
          }, o.attributes = Bi(s[1]), ["PART-TARGET"].forEach(function(v) {
            o.attributes.hasOwnProperty(v) && (o.attributes[v] = parseFloat(o.attributes[v]));
          }), a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-PRELOAD-HINT:(.*)$/.exec(l), s && s[1]) {
          o = {
            type: "tag",
            tagType: "preload-hint"
          }, o.attributes = Bi(s[1]), ["BYTERANGE-START", "BYTERANGE-LENGTH"].forEach(function(v) {
            if (o.attributes.hasOwnProperty(v)) {
              o.attributes[v] = parseInt(o.attributes[v], 10);
              var y = v === "BYTERANGE-LENGTH" ? "length" : "offset";
              o.attributes.byterange = o.attributes.byterange || {}, o.attributes.byterange[y] = o.attributes[v], delete o.attributes[v];
            }
          }), a.trigger("data", o);
          return;
        }
        if (s = /^#EXT-X-RENDITION-REPORT:(.*)$/.exec(l), s && s[1]) {
          o = {
            type: "tag",
            tagType: "rendition-report"
          }, o.attributes = Bi(s[1]), ["LAST-MSN", "LAST-PART"].forEach(function(v) {
            o.attributes.hasOwnProperty(v) && (o.attributes[v] = parseInt(o.attributes[v], 10));
          }), a.trigger("data", o);
          return;
        }
        a.trigger("data", {
          type: "tag",
          data: l.slice(4)
        });
      });
    }
  }, i.addParser = function(e) {
    var a = this, s = e.expression, o = e.customType, u = e.dataParser, l = e.segment;
    typeof u != "function" && (u = function(h) {
      return h;
    }), this.customParsers.push(function(d) {
      var h = s.exec(d);
      if (h)
        return a.trigger("data", {
          type: "custom",
          data: u(d),
          customType: o,
          segment: l
        }), !0;
    });
  }, i.addTagMapper = function(e) {
    var a = e.expression, s = e.map, o = function(l) {
      return a.test(l) ? s(l) : l;
    };
    this.tagMappers.push(o);
  }, t;
}(Md), Jy = function(t) {
  return t.toLowerCase().replace(/-(\w)/g, function(i) {
    return i[1].toUpperCase();
  });
}, An = function(t) {
  var i = {};
  return Object.keys(t).forEach(function(r) {
    i[Jy(r)] = t[r];
  }), i;
}, Du = function(t) {
  var i = t.serverControl, r = t.targetDuration, e = t.partTargetDuration;
  if (!!i) {
    var a = "#EXT-X-SERVER-CONTROL", s = "holdBack", o = "partHoldBack", u = r && r * 3, l = e && e * 2;
    r && !i.hasOwnProperty(s) && (i[s] = u, this.trigger("info", {
      message: a + " defaulting HOLD-BACK to targetDuration * 3 (" + u + ")."
    })), u && i[s] < u && (this.trigger("warn", {
      message: a + " clamping HOLD-BACK (" + i[s] + ") to targetDuration * 3 (" + u + ")"
    }), i[s] = u), e && !i.hasOwnProperty(o) && (i[o] = e * 3, this.trigger("info", {
      message: a + " defaulting PART-HOLD-BACK to partTargetDuration * 3 (" + i[o] + ")."
    })), e && i[o] < l && (this.trigger("warn", {
      message: a + " clamping PART-HOLD-BACK (" + i[o] + ") to partTargetDuration * 2 (" + l + ")."
    }), i[o] = l);
  }
}, Zy = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t() {
    var r;
    r = n.call(this) || this, r.lineStream = new Ky(), r.parseStream = new Yy(), r.lineStream.pipe(r.parseStream);
    var e = Ge(r), a = [], s = {}, o, u, l = !1, d = function() {
    }, h = {
      AUDIO: {},
      VIDEO: {},
      "CLOSED-CAPTIONS": {},
      SUBTITLES: {}
    }, f = "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed", _ = 0;
    r.manifest = {
      allowCache: !0,
      discontinuityStarts: [],
      segments: []
    };
    var v = 0, y = 0;
    return r.on("end", function() {
      s.uri || !s.parts && !s.preloadHints || (!s.map && o && (s.map = o), !s.key && u && (s.key = u), !s.timeline && typeof _ == "number" && (s.timeline = _), r.manifest.preloadSegment = s);
    }), r.parseStream.on("data", function(T) {
      var I, V;
      ({
        tag: function() {
          ({
            version: function() {
              T.version && (this.manifest.version = T.version);
            },
            "allow-cache": function() {
              this.manifest.allowCache = T.allowed, "allowed" in T || (this.trigger("info", {
                message: "defaulting allowCache to YES"
              }), this.manifest.allowCache = !0);
            },
            byterange: function() {
              var P = {};
              "length" in T && (s.byterange = P, P.length = T.length, "offset" in T || (T.offset = v)), "offset" in T && (s.byterange = P, P.offset = T.offset), v = P.offset + P.length;
            },
            endlist: function() {
              this.manifest.endList = !0;
            },
            inf: function() {
              "mediaSequence" in this.manifest || (this.manifest.mediaSequence = 0, this.trigger("info", {
                message: "defaulting media sequence to zero"
              })), "discontinuitySequence" in this.manifest || (this.manifest.discontinuitySequence = 0, this.trigger("info", {
                message: "defaulting discontinuity sequence to zero"
              })), T.duration > 0 && (s.duration = T.duration), T.duration === 0 && (s.duration = 0.01, this.trigger("info", {
                message: "updating zero segment duration to a small value"
              })), this.manifest.segments = a;
            },
            key: function() {
              if (!T.attributes) {
                this.trigger("warn", {
                  message: "ignoring key declaration without attribute list"
                });
                return;
              }
              if (T.attributes.METHOD === "NONE") {
                u = null;
                return;
              }
              if (!T.attributes.URI) {
                this.trigger("warn", {
                  message: "ignoring key declaration without URI"
                });
                return;
              }
              if (T.attributes.KEYFORMAT === "com.apple.streamingkeydelivery") {
                this.manifest.contentProtection = this.manifest.contentProtection || {}, this.manifest.contentProtection["com.apple.fps.1_0"] = {
                  attributes: T.attributes
                };
                return;
              }
              if (T.attributes.KEYFORMAT === "com.microsoft.playready") {
                this.manifest.contentProtection = this.manifest.contentProtection || {}, this.manifest.contentProtection["com.microsoft.playready"] = {
                  uri: T.attributes.URI
                };
                return;
              }
              if (T.attributes.KEYFORMAT === f) {
                var P = ["SAMPLE-AES", "SAMPLE-AES-CTR", "SAMPLE-AES-CENC"];
                if (P.indexOf(T.attributes.METHOD) === -1) {
                  this.trigger("warn", {
                    message: "invalid key method provided for Widevine"
                  });
                  return;
                }
                if (T.attributes.METHOD === "SAMPLE-AES-CENC" && this.trigger("warn", {
                  message: "SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"
                }), T.attributes.URI.substring(0, 23) !== "data:text/plain;base64,") {
                  this.trigger("warn", {
                    message: "invalid key URI provided for Widevine"
                  });
                  return;
                }
                if (!(T.attributes.KEYID && T.attributes.KEYID.substring(0, 2) === "0x")) {
                  this.trigger("warn", {
                    message: "invalid key ID provided for Widevine"
                  });
                  return;
                }
                this.manifest.contentProtection = this.manifest.contentProtection || {}, this.manifest.contentProtection["com.widevine.alpha"] = {
                  attributes: {
                    schemeIdUri: T.attributes.KEYFORMAT,
                    keyId: T.attributes.KEYID.substring(2)
                  },
                  pssh: Qp(T.attributes.URI.split(",")[1])
                };
                return;
              }
              T.attributes.METHOD || this.trigger("warn", {
                message: "defaulting key method to AES-128"
              }), u = {
                method: T.attributes.METHOD || "AES-128",
                uri: T.attributes.URI
              }, typeof T.attributes.IV < "u" && (u.iv = T.attributes.IV);
            },
            "media-sequence": function() {
              if (!isFinite(T.number)) {
                this.trigger("warn", {
                  message: "ignoring invalid media sequence: " + T.number
                });
                return;
              }
              this.manifest.mediaSequence = T.number;
            },
            "discontinuity-sequence": function() {
              if (!isFinite(T.number)) {
                this.trigger("warn", {
                  message: "ignoring invalid discontinuity sequence: " + T.number
                });
                return;
              }
              this.manifest.discontinuitySequence = T.number, _ = T.number;
            },
            "playlist-type": function() {
              if (!/VOD|EVENT/.test(T.playlistType)) {
                this.trigger("warn", {
                  message: "ignoring unknown playlist type: " + T.playlist
                });
                return;
              }
              this.manifest.playlistType = T.playlistType;
            },
            map: function() {
              o = {}, T.uri && (o.uri = T.uri), T.byterange && (o.byterange = T.byterange), u && (o.key = u);
            },
            "stream-inf": function() {
              if (this.manifest.playlists = a, this.manifest.mediaGroups = this.manifest.mediaGroups || h, !T.attributes) {
                this.trigger("warn", {
                  message: "ignoring empty stream-inf attributes"
                });
                return;
              }
              s.attributes || (s.attributes = {}), Ri(s.attributes, T.attributes);
            },
            media: function() {
              if (this.manifest.mediaGroups = this.manifest.mediaGroups || h, !(T.attributes && T.attributes.TYPE && T.attributes["GROUP-ID"] && T.attributes.NAME)) {
                this.trigger("warn", {
                  message: "ignoring incomplete or missing media group"
                });
                return;
              }
              var P = this.manifest.mediaGroups[T.attributes.TYPE];
              P[T.attributes["GROUP-ID"]] = P[T.attributes["GROUP-ID"]] || {}, I = P[T.attributes["GROUP-ID"]], V = {
                default: /yes/i.test(T.attributes.DEFAULT)
              }, V.default ? V.autoselect = !0 : V.autoselect = /yes/i.test(T.attributes.AUTOSELECT), T.attributes.LANGUAGE && (V.language = T.attributes.LANGUAGE), T.attributes.URI && (V.uri = T.attributes.URI), T.attributes["INSTREAM-ID"] && (V.instreamId = T.attributes["INSTREAM-ID"]), T.attributes.CHARACTERISTICS && (V.characteristics = T.attributes.CHARACTERISTICS), T.attributes.FORCED && (V.forced = /yes/i.test(T.attributes.FORCED)), I[T.attributes.NAME] = V;
            },
            discontinuity: function() {
              _ += 1, s.discontinuity = !0, this.manifest.discontinuityStarts.push(a.length);
            },
            "program-date-time": function() {
              typeof this.manifest.dateTimeString > "u" && (this.manifest.dateTimeString = T.dateTimeString, this.manifest.dateTimeObject = T.dateTimeObject), s.dateTimeString = T.dateTimeString, s.dateTimeObject = T.dateTimeObject;
            },
            targetduration: function() {
              if (!isFinite(T.duration) || T.duration < 0) {
                this.trigger("warn", {
                  message: "ignoring invalid target duration: " + T.duration
                });
                return;
              }
              this.manifest.targetDuration = T.duration, Du.call(this, this.manifest);
            },
            start: function() {
              if (!T.attributes || isNaN(T.attributes["TIME-OFFSET"])) {
                this.trigger("warn", {
                  message: "ignoring start declaration without appropriate attribute list"
                });
                return;
              }
              this.manifest.start = {
                timeOffset: T.attributes["TIME-OFFSET"],
                precise: T.attributes.PRECISE
              };
            },
            "cue-out": function() {
              s.cueOut = T.data;
            },
            "cue-out-cont": function() {
              s.cueOutCont = T.data;
            },
            "cue-in": function() {
              s.cueIn = T.data;
            },
            skip: function() {
              this.manifest.skip = An(T.attributes), this.warnOnMissingAttributes_("#EXT-X-SKIP", T.attributes, ["SKIPPED-SEGMENTS"]);
            },
            part: function() {
              var P = this;
              l = !0;
              var L = this.manifest.segments.length, O = An(T.attributes);
              s.parts = s.parts || [], s.parts.push(O), O.byterange && (O.byterange.hasOwnProperty("offset") || (O.byterange.offset = y), y = O.byterange.offset + O.byterange.length);
              var U = s.parts.length - 1;
              this.warnOnMissingAttributes_("#EXT-X-PART #" + U + " for segment #" + L, T.attributes, ["URI", "DURATION"]), this.manifest.renditionReports && this.manifest.renditionReports.forEach(function(ie, z) {
                ie.hasOwnProperty("lastPart") || P.trigger("warn", {
                  message: "#EXT-X-RENDITION-REPORT #" + z + " lacks required attribute(s): LAST-PART"
                });
              });
            },
            "server-control": function() {
              var P = this.manifest.serverControl = An(T.attributes);
              P.hasOwnProperty("canBlockReload") || (P.canBlockReload = !1, this.trigger("info", {
                message: "#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"
              })), Du.call(this, this.manifest), P.canSkipDateranges && !P.hasOwnProperty("canSkipUntil") && this.trigger("warn", {
                message: "#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"
              });
            },
            "preload-hint": function() {
              var P = this.manifest.segments.length, L = An(T.attributes), O = L.type && L.type === "PART";
              s.preloadHints = s.preloadHints || [], s.preloadHints.push(L), L.byterange && (L.byterange.hasOwnProperty("offset") || (L.byterange.offset = O ? y : 0, O && (y = L.byterange.offset + L.byterange.length)));
              var U = s.preloadHints.length - 1;
              if (this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #" + U + " for segment #" + P, T.attributes, ["TYPE", "URI"]), !!L.type)
                for (var ie = 0; ie < s.preloadHints.length - 1; ie++) {
                  var z = s.preloadHints[ie];
                  !z.type || z.type === L.type && this.trigger("warn", {
                    message: "#EXT-X-PRELOAD-HINT #" + U + " for segment #" + P + " has the same TYPE " + L.type + " as preload hint #" + ie
                  });
                }
            },
            "rendition-report": function() {
              var P = An(T.attributes);
              this.manifest.renditionReports = this.manifest.renditionReports || [], this.manifest.renditionReports.push(P);
              var L = this.manifest.renditionReports.length - 1, O = ["LAST-MSN", "URI"];
              l && O.push("LAST-PART"), this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #" + L, T.attributes, O);
            },
            "part-inf": function() {
              this.manifest.partInf = An(T.attributes), this.warnOnMissingAttributes_("#EXT-X-PART-INF", T.attributes, ["PART-TARGET"]), this.manifest.partInf.partTarget && (this.manifest.partTargetDuration = this.manifest.partInf.partTarget), Du.call(this, this.manifest);
            }
          }[T.tagType] || d).call(e);
        },
        uri: function() {
          s.uri = T.uri, a.push(s), this.manifest.targetDuration && !("duration" in s) && (this.trigger("warn", {
            message: "defaulting segment duration to the target duration"
          }), s.duration = this.manifest.targetDuration), u && (s.key = u), s.timeline = _, o && (s.map = o), y = 0, s = {};
        },
        comment: function() {
        },
        custom: function() {
          T.segment ? (s.custom = s.custom || {}, s.custom[T.customType] = T.data) : (this.manifest.custom = this.manifest.custom || {}, this.manifest.custom[T.customType] = T.data);
        }
      })[T.type].call(e);
    }), r;
  }
  var i = t.prototype;
  return i.warnOnMissingAttributes_ = function(e, a, s) {
    var o = [];
    s.forEach(function(u) {
      a.hasOwnProperty(u) || o.push(u);
    }), o.length && this.trigger("warn", {
      message: e + " lacks required attribute(s): " + o.join(", ")
    });
  }, i.push = function(e) {
    this.lineStream.push(e);
  }, i.end = function() {
    this.lineStream.push(`
`), this.trigger("end");
  }, i.addParser = function(e) {
    this.parseStream.addParser(e);
  }, i.addTagMapper = function(e) {
    this.parseStream.addTagMapper(e);
  }, t;
}(Md), en = {
  mp4: /^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,
  webm: /^(vp0?[89]|av0?1|opus|vorbis)/,
  ogg: /^(vp0?[89]|theora|flac|opus|vorbis)/,
  video: /^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,
  audio: /^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,
  text: /^(stpp.ttml.im1t)/,
  muxerVideo: /^(avc0?1)/,
  muxerAudio: /^(mp4a)/,
  muxerText: /a^/
}, e0 = ["video", "audio", "text"], Ef = ["Video", "Audio", "Text"], Yp = function(t) {
  return t && t.replace(/avc1\.(\d+)\.(\d+)/i, function(i, r, e) {
    var a = ("00" + Number(r).toString(16)).slice(-2), s = ("00" + Number(e).toString(16)).slice(-2);
    return "avc1." + a + "00" + s;
  });
}, Qi = function(t) {
  t === void 0 && (t = "");
  var i = t.split(","), r = [];
  return i.forEach(function(e) {
    e = e.trim();
    var a;
    e0.forEach(function(s) {
      var o = en[s].exec(e.toLowerCase());
      if (!(!o || o.length <= 1)) {
        a = s;
        var u = e.substring(0, o[1].length), l = e.replace(u, "");
        r.push({
          type: u,
          details: l,
          mediaType: s
        });
      }
    }), a || r.push({
      type: e,
      details: "",
      mediaType: "unknown"
    });
  }), r;
}, t0 = function(t, i) {
  if (!t.mediaGroups.AUDIO || !i)
    return null;
  var r = t.mediaGroups.AUDIO[i];
  if (!r)
    return null;
  for (var e in r) {
    var a = r[e];
    if (a.default && a.playlists)
      return Qi(a.playlists[0].attributes.CODECS);
  }
  return null;
}, Jp = function(t) {
  return t === void 0 && (t = ""), en.audio.test(t.trim().toLowerCase());
}, i0 = function(t) {
  return t === void 0 && (t = ""), en.text.test(t.trim().toLowerCase());
}, $a = function(t) {
  if (!(!t || typeof t != "string")) {
    var i = t.toLowerCase().split(",").map(function(a) {
      return Yp(a.trim());
    }), r = "video";
    i.length === 1 && Jp(i[0]) ? r = "audio" : i.length === 1 && i0(i[0]) && (r = "application");
    var e = "mp4";
    return i.every(function(a) {
      return en.mp4.test(a);
    }) ? e = "mp4" : i.every(function(a) {
      return en.webm.test(a);
    }) ? e = "webm" : i.every(function(a) {
      return en.ogg.test(a);
    }) && (e = "ogg"), r + "/" + e + ';codecs="' + t + '"';
  }
}, Js = function(t) {
  return t === void 0 && (t = ""), B.MediaSource && B.MediaSource.isTypeSupported && B.MediaSource.isTypeSupported($a(t)) || !1;
}, Lu = function(t) {
  return t === void 0 && (t = ""), t.toLowerCase().split(",").every(function(i) {
    i = i.trim();
    for (var r = 0; r < Ef.length; r++) {
      var e = Ef[r];
      if (en["muxer" + e].test(i))
        return !0;
    }
    return !1;
  });
}, xf = "mp4a.40.2", r0 = "avc1.4d400d", n0 = /^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i, a0 = /^application\/dash\+xml/i, Zp = function(t) {
  return n0.test(t) ? "hls" : a0.test(t) ? "dash" : t === "application/vnd.videojs.vhs+json" ? "vhs-json" : null;
}, s0 = function(t) {
  return t.toString(2).length;
}, o0 = function(t) {
  return Math.ceil(s0(t) / 8);
}, em = function(t) {
  return ArrayBuffer.isView === "function" ? ArrayBuffer.isView(t) : t && t.buffer instanceof ArrayBuffer;
}, u0 = function(t) {
  return em(t);
}, Oe = function(t) {
  return t instanceof Uint8Array ? t : (!Array.isArray(t) && !u0(t) && !(t instanceof ArrayBuffer) && (typeof t != "number" || typeof t == "number" && t !== t ? t = 0 : t = [t]), new Uint8Array(t && t.buffer || t, t && t.byteOffset || 0, t && t.byteLength || 0));
}, Qt = B.BigInt || Number, Zl = [Qt("0x1"), Qt("0x100"), Qt("0x10000"), Qt("0x1000000"), Qt("0x100000000"), Qt("0x10000000000"), Qt("0x1000000000000"), Qt("0x100000000000000"), Qt("0x10000000000000000")];
(function() {
  var n = new Uint16Array([65484]), t = new Uint8Array(n.buffer, n.byteOffset, n.byteLength);
  return t[0] === 255 ? "big" : t[0] === 204 ? "little" : "unknown";
})();
var l0 = function(t, i) {
  var r = i === void 0 ? {} : i, e = r.signed, a = e === void 0 ? !1 : e, s = r.le, o = s === void 0 ? !1 : s;
  t = Oe(t);
  var u = o ? "reduce" : "reduceRight", l = t[u] ? t[u] : Array.prototype[u], d = l.call(t, function(f, _, v) {
    var y = o ? v : Math.abs(v + 1 - t.length);
    return f + Qt(_) * Zl[y];
  }, Qt(0));
  if (a) {
    var h = Zl[t.length] / Qt(2) - Qt(1);
    d = Qt(d), d > h && (d -= h, d -= h, d -= Qt(2));
  }
  return Number(d);
}, d0 = function(t, i) {
  var r = i === void 0 ? {} : i, e = r.le, a = e === void 0 ? !1 : e;
  (typeof t != "bigint" && typeof t != "number" || typeof t == "number" && t !== t) && (t = 0), t = Qt(t);
  for (var s = o0(t), o = new Uint8Array(new ArrayBuffer(s)), u = 0; u < s; u++) {
    var l = a ? u : Math.abs(u + 1 - o.length);
    o[l] = Number(t / Zl[u] & Qt(255)), t < 0 && (o[l] = Math.abs(~o[l]), o[l] -= u === 0 ? 1 : 2);
  }
  return o;
}, tm = function(t, i) {
  if (typeof t != "string" && t && typeof t.toString == "function" && (t = t.toString()), typeof t != "string")
    return new Uint8Array();
  i || (t = unescape(encodeURIComponent(t)));
  for (var r = new Uint8Array(t.length), e = 0; e < t.length; e++)
    r[e] = t.charCodeAt(e);
  return r;
}, c0 = function() {
  for (var t = arguments.length, i = new Array(t), r = 0; r < t; r++)
    i[r] = arguments[r];
  if (i = i.filter(function(o) {
    return o && (o.byteLength || o.length) && typeof o != "string";
  }), i.length <= 1)
    return Oe(i[0]);
  var e = i.reduce(function(o, u, l) {
    return o + (u.byteLength || u.length);
  }, 0), a = new Uint8Array(e), s = 0;
  return i.forEach(function(o) {
    o = Oe(o), a.set(o, s), s += o.byteLength;
  }), a;
}, At = function(t, i, r) {
  var e = r === void 0 ? {} : r, a = e.offset, s = a === void 0 ? 0 : a, o = e.mask, u = o === void 0 ? [] : o;
  t = Oe(t), i = Oe(i);
  var l = i.every ? i.every : Array.prototype.every;
  return i.length && t.length - s >= i.length && l.call(i, function(d, h) {
    var f = u[h] ? u[h] & t[s + h] : t[s + h];
    return d === f;
  });
}, f0 = function(t, i, r) {
  i.forEach(function(e) {
    for (var a in t.mediaGroups[e])
      for (var s in t.mediaGroups[e][a]) {
        var o = t.mediaGroups[e][a][s];
        r(o, e, a, s);
      }
  });
}, Fr = {}, ln = {};
function Fd(n, t) {
  return t === void 0 && (t = Object), t && typeof t.freeze == "function" ? t.freeze(n) : n;
}
var im = Fd({
  HTML: "text/html",
  isHTML: function(n) {
    return n === im.HTML;
  },
  XML_APPLICATION: "application/xml",
  XML_TEXT: "text/xml",
  XML_XHTML_APPLICATION: "application/xhtml+xml",
  XML_SVG_IMAGE: "image/svg+xml"
}), rm = Fd({
  HTML: "http://www.w3.org/1999/xhtml",
  isHTML: function(n) {
    return n === rm.HTML;
  },
  SVG: "http://www.w3.org/2000/svg",
  XML: "http://www.w3.org/XML/1998/namespace",
  XMLNS: "http://www.w3.org/2000/xmlns/"
});
ln.freeze = Fd;
ln.MIME_TYPE = im;
ln.NAMESPACE = rm;
var h0 = ln, za = h0.NAMESPACE;
function p0(n) {
  return n !== "";
}
function m0(n) {
  return n ? n.split(/[\t\n\f\r ]+/).filter(p0) : [];
}
function g0(n, t) {
  return n.hasOwnProperty(t) || (n[t] = !0), n;
}
function wf(n) {
  if (!n)
    return [];
  var t = m0(n);
  return Object.keys(t.reduce(g0, {}));
}
function v0(n) {
  return function(t) {
    return n && n.indexOf(t) !== -1;
  };
}
function rs(n, t) {
  for (var i in n)
    t[i] = n[i];
}
function Si(n, t) {
  var i = n.prototype;
  if (!(i instanceof t)) {
    let r = function() {
    };
    r.prototype = t.prototype, r = new r(), rs(i, r), n.prototype = i = r;
  }
  i.constructor != n && (typeof n != "function" && console.error("unknown Class:" + n), i.constructor = n);
}
var Ei = {}, ji = Ei.ELEMENT_NODE = 1, Gn = Ei.ATTRIBUTE_NODE = 2, oo = Ei.TEXT_NODE = 3, nm = Ei.CDATA_SECTION_NODE = 4, am = Ei.ENTITY_REFERENCE_NODE = 5, _0 = Ei.ENTITY_NODE = 6, sm = Ei.PROCESSING_INSTRUCTION_NODE = 7, om = Ei.COMMENT_NODE = 8, um = Ei.DOCUMENT_NODE = 9, lm = Ei.DOCUMENT_TYPE_NODE = 10, Tr = Ei.DOCUMENT_FRAGMENT_NODE = 11, y0 = Ei.NOTATION_NODE = 12, ti = {}, Kt = {};
ti.INDEX_SIZE_ERR = (Kt[1] = "Index size error", 1);
ti.DOMSTRING_SIZE_ERR = (Kt[2] = "DOMString size error", 2);
var T0 = ti.HIERARCHY_REQUEST_ERR = (Kt[3] = "Hierarchy request error", 3);
ti.WRONG_DOCUMENT_ERR = (Kt[4] = "Wrong document", 4);
ti.INVALID_CHARACTER_ERR = (Kt[5] = "Invalid character", 5);
ti.NO_DATA_ALLOWED_ERR = (Kt[6] = "No data allowed", 6);
ti.NO_MODIFICATION_ALLOWED_ERR = (Kt[7] = "No modification allowed", 7);
var b0 = ti.NOT_FOUND_ERR = (Kt[8] = "Not found", 8);
ti.NOT_SUPPORTED_ERR = (Kt[9] = "Not supported", 9);
var Af = ti.INUSE_ATTRIBUTE_ERR = (Kt[10] = "Attribute in use", 10);
ti.INVALID_STATE_ERR = (Kt[11] = "Invalid state", 11);
ti.SYNTAX_ERR = (Kt[12] = "Syntax error", 12);
ti.INVALID_MODIFICATION_ERR = (Kt[13] = "Invalid modification", 13);
ti.NAMESPACE_ERR = (Kt[14] = "Invalid namespace", 14);
ti.INVALID_ACCESS_ERR = (Kt[15] = "Invalid access", 15);
function an(n, t) {
  if (t instanceof Error)
    var i = t;
  else
    i = this, Error.call(this, Kt[n]), this.message = Kt[n], Error.captureStackTrace && Error.captureStackTrace(this, an);
  return i.code = n, t && (this.message = this.message + ": " + t), i;
}
an.prototype = Error.prototype;
rs(ti, an);
function gr() {
}
gr.prototype = {
  length: 0,
  item: function(n) {
    return this[n] || null;
  },
  toString: function(n, t) {
    for (var i = [], r = 0; r < this.length; r++)
      Mn(this[r], i, n, t);
    return i.join("");
  }
};
function $n(n, t) {
  this._node = n, this._refresh = t, Bd(this);
}
function Bd(n) {
  var t = n._node._inc || n._node.ownerDocument._inc;
  if (n._inc != t) {
    var i = n._refresh(n._node);
    bm(n, "length", i.length), rs(i, n), n._inc = t;
  }
}
$n.prototype.item = function(n) {
  return Bd(this), this[n];
};
Si($n, gr);
function uo() {
}
function dm(n, t) {
  for (var i = n.length; i--; )
    if (n[i] === t)
      return i;
}
function Cf(n, t, i, r) {
  if (r ? t[dm(t, r)] = i : t[t.length++] = i, n) {
    i.ownerElement = n;
    var e = n.ownerDocument;
    e && (r && hm(e, n, r), S0(e, n, i));
  }
}
function kf(n, t, i) {
  var r = dm(t, i);
  if (r >= 0) {
    for (var e = t.length - 1; r < e; )
      t[r] = t[++r];
    if (t.length = e, n) {
      var a = n.ownerDocument;
      a && (hm(a, n, i), i.ownerElement = null);
    }
  } else
    throw an(b0, new Error(n.tagName + "@" + i));
}
uo.prototype = {
  length: 0,
  item: gr.prototype.item,
  getNamedItem: function(n) {
    for (var t = this.length; t--; ) {
      var i = this[t];
      if (i.nodeName == n)
        return i;
    }
  },
  setNamedItem: function(n) {
    var t = n.ownerElement;
    if (t && t != this._ownerElement)
      throw new an(Af);
    var i = this.getNamedItem(n.nodeName);
    return Cf(this._ownerElement, this, n, i), i;
  },
  setNamedItemNS: function(n) {
    var t = n.ownerElement, i;
    if (t && t != this._ownerElement)
      throw new an(Af);
    return i = this.getNamedItemNS(n.namespaceURI, n.localName), Cf(this._ownerElement, this, n, i), i;
  },
  removeNamedItem: function(n) {
    var t = this.getNamedItem(n);
    return kf(this._ownerElement, this, t), t;
  },
  removeNamedItemNS: function(n, t) {
    var i = this.getNamedItemNS(n, t);
    return kf(this._ownerElement, this, i), i;
  },
  getNamedItemNS: function(n, t) {
    for (var i = this.length; i--; ) {
      var r = this[i];
      if (r.localName == t && r.namespaceURI == n)
        return r;
    }
    return null;
  }
};
function cm() {
}
cm.prototype = {
  hasFeature: function(n, t) {
    return !0;
  },
  createDocument: function(n, t, i) {
    var r = new ns();
    if (r.implementation = this, r.childNodes = new gr(), r.doctype = i || null, i && r.appendChild(i), t) {
      var e = r.createElementNS(n, t);
      r.appendChild(e);
    }
    return r;
  },
  createDocumentType: function(n, t, i) {
    var r = new Fo();
    return r.name = n, r.nodeName = n, r.publicId = t || "", r.systemId = i || "", r;
  }
};
function ii() {
}
ii.prototype = {
  firstChild: null,
  lastChild: null,
  previousSibling: null,
  nextSibling: null,
  attributes: null,
  parentNode: null,
  childNodes: null,
  ownerDocument: null,
  nodeValue: null,
  namespaceURI: null,
  prefix: null,
  localName: null,
  insertBefore: function(n, t) {
    return mm(this, n, t);
  },
  replaceChild: function(n, t) {
    this.insertBefore(n, t), t && this.removeChild(t);
  },
  removeChild: function(n) {
    return pm(this, n);
  },
  appendChild: function(n) {
    return this.insertBefore(n, null);
  },
  hasChildNodes: function() {
    return this.firstChild != null;
  },
  cloneNode: function(n) {
    return ed(this.ownerDocument || this, this, n);
  },
  normalize: function() {
    for (var n = this.firstChild; n; ) {
      var t = n.nextSibling;
      t && t.nodeType == oo && n.nodeType == oo ? (this.removeChild(t), n.appendData(t.data)) : (n.normalize(), n = t);
    }
  },
  isSupported: function(n, t) {
    return this.ownerDocument.implementation.hasFeature(n, t);
  },
  hasAttributes: function() {
    return this.attributes.length > 0;
  },
  lookupPrefix: function(n) {
    for (var t = this; t; ) {
      var i = t._nsMap;
      if (i) {
        for (var r in i)
          if (i[r] == n)
            return r;
      }
      t = t.nodeType == Gn ? t.ownerDocument : t.parentNode;
    }
    return null;
  },
  lookupNamespaceURI: function(n) {
    for (var t = this; t; ) {
      var i = t._nsMap;
      if (i && n in i)
        return i[n];
      t = t.nodeType == Gn ? t.ownerDocument : t.parentNode;
    }
    return null;
  },
  isDefaultNamespace: function(n) {
    var t = this.lookupPrefix(n);
    return t == null;
  }
};
function fm(n) {
  return n == "<" && "&lt;" || n == ">" && "&gt;" || n == "&" && "&amp;" || n == '"' && "&quot;" || "&#" + n.charCodeAt() + ";";
}
rs(Ei, ii);
rs(Ei, ii.prototype);
function Ka(n, t) {
  if (t(n))
    return !0;
  if (n = n.firstChild)
    do
      if (Ka(n, t))
        return !0;
    while (n = n.nextSibling);
}
function ns() {
}
function S0(n, t, i) {
  n && n._inc++;
  var r = i.namespaceURI;
  r === za.XMLNS && (t._nsMap[i.prefix ? i.localName : ""] = i.value);
}
function hm(n, t, i, r) {
  n && n._inc++;
  var e = i.namespaceURI;
  e === za.XMLNS && delete t._nsMap[i.prefix ? i.localName : ""];
}
function Ud(n, t, i) {
  if (n && n._inc) {
    n._inc++;
    var r = t.childNodes;
    if (i)
      r[r.length++] = i;
    else {
      for (var e = t.firstChild, a = 0; e; )
        r[a++] = e, e = e.nextSibling;
      r.length = a;
    }
  }
}
function pm(n, t) {
  var i = t.previousSibling, r = t.nextSibling;
  return i ? i.nextSibling = r : n.firstChild = r, r ? r.previousSibling = i : n.lastChild = i, Ud(n.ownerDocument, n), t;
}
function mm(n, t, i) {
  var r = t.parentNode;
  if (r && r.removeChild(t), t.nodeType === Tr) {
    var e = t.firstChild;
    if (e == null)
      return t;
    var a = t.lastChild;
  } else
    e = a = t;
  var s = i ? i.previousSibling : n.lastChild;
  e.previousSibling = s, a.nextSibling = i, s ? s.nextSibling = e : n.firstChild = e, i == null ? n.lastChild = a : i.previousSibling = a;
  do
    e.parentNode = n;
  while (e !== a && (e = e.nextSibling));
  return Ud(n.ownerDocument || n, n), t.nodeType == Tr && (t.firstChild = t.lastChild = null), t;
}
function E0(n, t) {
  var i = t.parentNode;
  if (i) {
    var r = n.lastChild;
    i.removeChild(t);
    var r = n.lastChild;
  }
  var r = n.lastChild;
  return t.parentNode = n, t.previousSibling = r, t.nextSibling = null, r ? r.nextSibling = t : n.firstChild = t, n.lastChild = t, Ud(n.ownerDocument, n, t), t;
}
ns.prototype = {
  nodeName: "#document",
  nodeType: um,
  doctype: null,
  documentElement: null,
  _inc: 1,
  insertBefore: function(n, t) {
    if (n.nodeType == Tr) {
      for (var i = n.firstChild; i; ) {
        var r = i.nextSibling;
        this.insertBefore(i, t), i = r;
      }
      return n;
    }
    return this.documentElement == null && n.nodeType == ji && (this.documentElement = n), mm(this, n, t), n.ownerDocument = this, n;
  },
  removeChild: function(n) {
    return this.documentElement == n && (this.documentElement = null), pm(this, n);
  },
  importNode: function(n, t) {
    return Tm(this, n, t);
  },
  getElementById: function(n) {
    var t = null;
    return Ka(this.documentElement, function(i) {
      if (i.nodeType == ji && i.getAttribute("id") == n)
        return t = i, !0;
    }), t;
  },
  getElementsByClassName: function(n) {
    var t = wf(n);
    return new $n(this, function(i) {
      var r = [];
      return t.length > 0 && Ka(i.documentElement, function(e) {
        if (e !== i && e.nodeType === ji) {
          var a = e.getAttribute("class");
          if (a) {
            var s = n === a;
            if (!s) {
              var o = wf(a);
              s = t.every(v0(o));
            }
            s && r.push(e);
          }
        }
      }), r;
    });
  },
  createElement: function(n) {
    var t = new sn();
    t.ownerDocument = this, t.nodeName = n, t.tagName = n, t.localName = n, t.childNodes = new gr();
    var i = t.attributes = new uo();
    return i._ownerElement = t, t;
  },
  createDocumentFragment: function() {
    var n = new Bo();
    return n.ownerDocument = this, n.childNodes = new gr(), n;
  },
  createTextNode: function(n) {
    var t = new qd();
    return t.ownerDocument = this, t.appendData(n), t;
  },
  createComment: function(n) {
    var t = new Vd();
    return t.ownerDocument = this, t.appendData(n), t;
  },
  createCDATASection: function(n) {
    var t = new jd();
    return t.ownerDocument = this, t.appendData(n), t;
  },
  createProcessingInstruction: function(n, t) {
    var i = new Wd();
    return i.ownerDocument = this, i.tagName = i.target = n, i.nodeValue = i.data = t, i;
  },
  createAttribute: function(n) {
    var t = new lo();
    return t.ownerDocument = this, t.name = n, t.nodeName = n, t.localName = n, t.specified = !0, t;
  },
  createEntityReference: function(n) {
    var t = new Hd();
    return t.ownerDocument = this, t.nodeName = n, t;
  },
  createElementNS: function(n, t) {
    var i = new sn(), r = t.split(":"), e = i.attributes = new uo();
    return i.childNodes = new gr(), i.ownerDocument = this, i.nodeName = t, i.tagName = t, i.namespaceURI = n, r.length == 2 ? (i.prefix = r[0], i.localName = r[1]) : i.localName = t, e._ownerElement = i, i;
  },
  createAttributeNS: function(n, t) {
    var i = new lo(), r = t.split(":");
    return i.ownerDocument = this, i.nodeName = t, i.name = t, i.namespaceURI = n, i.specified = !0, r.length == 2 ? (i.prefix = r[0], i.localName = r[1]) : i.localName = t, i;
  }
};
Si(ns, ii);
function sn() {
  this._nsMap = {};
}
sn.prototype = {
  nodeType: ji,
  hasAttribute: function(n) {
    return this.getAttributeNode(n) != null;
  },
  getAttribute: function(n) {
    var t = this.getAttributeNode(n);
    return t && t.value || "";
  },
  getAttributeNode: function(n) {
    return this.attributes.getNamedItem(n);
  },
  setAttribute: function(n, t) {
    var i = this.ownerDocument.createAttribute(n);
    i.value = i.nodeValue = "" + t, this.setAttributeNode(i);
  },
  removeAttribute: function(n) {
    var t = this.getAttributeNode(n);
    t && this.removeAttributeNode(t);
  },
  appendChild: function(n) {
    return n.nodeType === Tr ? this.insertBefore(n, null) : E0(this, n);
  },
  setAttributeNode: function(n) {
    return this.attributes.setNamedItem(n);
  },
  setAttributeNodeNS: function(n) {
    return this.attributes.setNamedItemNS(n);
  },
  removeAttributeNode: function(n) {
    return this.attributes.removeNamedItem(n.nodeName);
  },
  removeAttributeNS: function(n, t) {
    var i = this.getAttributeNodeNS(n, t);
    i && this.removeAttributeNode(i);
  },
  hasAttributeNS: function(n, t) {
    return this.getAttributeNodeNS(n, t) != null;
  },
  getAttributeNS: function(n, t) {
    var i = this.getAttributeNodeNS(n, t);
    return i && i.value || "";
  },
  setAttributeNS: function(n, t, i) {
    var r = this.ownerDocument.createAttributeNS(n, t);
    r.value = r.nodeValue = "" + i, this.setAttributeNode(r);
  },
  getAttributeNodeNS: function(n, t) {
    return this.attributes.getNamedItemNS(n, t);
  },
  getElementsByTagName: function(n) {
    return new $n(this, function(t) {
      var i = [];
      return Ka(t, function(r) {
        r !== t && r.nodeType == ji && (n === "*" || r.tagName == n) && i.push(r);
      }), i;
    });
  },
  getElementsByTagNameNS: function(n, t) {
    return new $n(this, function(i) {
      var r = [];
      return Ka(i, function(e) {
        e !== i && e.nodeType === ji && (n === "*" || e.namespaceURI === n) && (t === "*" || e.localName == t) && r.push(e);
      }), r;
    });
  }
};
ns.prototype.getElementsByTagName = sn.prototype.getElementsByTagName;
ns.prototype.getElementsByTagNameNS = sn.prototype.getElementsByTagNameNS;
Si(sn, ii);
function lo() {
}
lo.prototype.nodeType = Gn;
Si(lo, ii);
function as() {
}
as.prototype = {
  data: "",
  substringData: function(n, t) {
    return this.data.substring(n, n + t);
  },
  appendData: function(n) {
    n = this.data + n, this.nodeValue = this.data = n, this.length = n.length;
  },
  insertData: function(n, t) {
    this.replaceData(n, 0, t);
  },
  appendChild: function(n) {
    throw new Error(Kt[T0]);
  },
  deleteData: function(n, t) {
    this.replaceData(n, t, "");
  },
  replaceData: function(n, t, i) {
    var r = this.data.substring(0, n), e = this.data.substring(n + t);
    i = r + i + e, this.nodeValue = this.data = i, this.length = i.length;
  }
};
Si(as, ii);
function qd() {
}
qd.prototype = {
  nodeName: "#text",
  nodeType: oo,
  splitText: function(n) {
    var t = this.data, i = t.substring(n);
    t = t.substring(0, n), this.data = this.nodeValue = t, this.length = t.length;
    var r = this.ownerDocument.createTextNode(i);
    return this.parentNode && this.parentNode.insertBefore(r, this.nextSibling), r;
  }
};
Si(qd, as);
function Vd() {
}
Vd.prototype = {
  nodeName: "#comment",
  nodeType: om
};
Si(Vd, as);
function jd() {
}
jd.prototype = {
  nodeName: "#cdata-section",
  nodeType: nm
};
Si(jd, as);
function Fo() {
}
Fo.prototype.nodeType = lm;
Si(Fo, ii);
function gm() {
}
gm.prototype.nodeType = y0;
Si(gm, ii);
function vm() {
}
vm.prototype.nodeType = _0;
Si(vm, ii);
function Hd() {
}
Hd.prototype.nodeType = am;
Si(Hd, ii);
function Bo() {
}
Bo.prototype.nodeName = "#document-fragment";
Bo.prototype.nodeType = Tr;
Si(Bo, ii);
function Wd() {
}
Wd.prototype.nodeType = sm;
Si(Wd, ii);
function _m() {
}
_m.prototype.serializeToString = function(n, t, i) {
  return ym.call(n, t, i);
};
ii.prototype.toString = ym;
function ym(n, t) {
  var i = [], r = this.nodeType == 9 && this.documentElement || this, e = r.prefix, a = r.namespaceURI;
  if (a && e == null) {
    var e = r.lookupPrefix(a);
    if (e == null)
      var s = [
        { namespace: a, prefix: null }
      ];
  }
  return Mn(this, i, n, t, s), i.join("");
}
function Pf(n, t, i) {
  var r = n.prefix || "", e = n.namespaceURI;
  if (!e || r === "xml" && e === za.XML || e === za.XMLNS)
    return !1;
  for (var a = i.length; a--; ) {
    var s = i[a];
    if (s.prefix === r)
      return s.namespace !== e;
  }
  return !0;
}
function Ou(n, t, i) {
  n.push(" ", t, '="', i.replace(/[<&"]/g, fm), '"');
}
function Mn(n, t, i, r, e) {
  if (e || (e = []), r)
    if (n = r(n), n) {
      if (typeof n == "string") {
        t.push(n);
        return;
      }
    } else
      return;
  switch (n.nodeType) {
    case ji:
      var a = n.attributes, s = a.length, I = n.firstChild, o = n.tagName;
      i = za.isHTML(n.namespaceURI) || i;
      var u = o;
      if (!i && !n.prefix && n.namespaceURI) {
        for (var l, d = 0; d < a.length; d++)
          if (a.item(d).name === "xmlns") {
            l = a.item(d).value;
            break;
          }
        if (!l)
          for (var h = e.length - 1; h >= 0; h--) {
            var f = e[h];
            if (f.prefix === "" && f.namespace === n.namespaceURI) {
              l = f.namespace;
              break;
            }
          }
        if (l !== n.namespaceURI)
          for (var h = e.length - 1; h >= 0; h--) {
            var f = e[h];
            if (f.namespace === n.namespaceURI) {
              f.prefix && (u = f.prefix + ":" + o);
              break;
            }
          }
      }
      t.push("<", u);
      for (var _ = 0; _ < s; _++) {
        var v = a.item(_);
        v.prefix == "xmlns" ? e.push({ prefix: v.localName, namespace: v.value }) : v.nodeName == "xmlns" && e.push({ prefix: "", namespace: v.value });
      }
      for (var _ = 0; _ < s; _++) {
        var v = a.item(_);
        if (Pf(v, i, e)) {
          var y = v.prefix || "", T = v.namespaceURI;
          Ou(t, y ? "xmlns:" + y : "xmlns", T), e.push({ prefix: y, namespace: T });
        }
        Mn(v, t, i, r, e);
      }
      if (o === u && Pf(n, i, e)) {
        var y = n.prefix || "", T = n.namespaceURI;
        Ou(t, y ? "xmlns:" + y : "xmlns", T), e.push({ prefix: y, namespace: T });
      }
      if (I || i && !/^(?:meta|link|img|br|hr|input)$/i.test(o)) {
        if (t.push(">"), i && /^script$/i.test(o))
          for (; I; )
            I.data ? t.push(I.data) : Mn(I, t, i, r, e.slice()), I = I.nextSibling;
        else
          for (; I; )
            Mn(I, t, i, r, e.slice()), I = I.nextSibling;
        t.push("</", u, ">");
      } else
        t.push("/>");
      return;
    case um:
    case Tr:
      for (var I = n.firstChild; I; )
        Mn(I, t, i, r, e.slice()), I = I.nextSibling;
      return;
    case Gn:
      return Ou(t, n.name, n.value);
    case oo:
      return t.push(
        n.data.replace(/[<&]/g, fm).replace(/]]>/g, "]]&gt;")
      );
    case nm:
      return t.push("<![CDATA[", n.data, "]]>");
    case om:
      return t.push("<!--", n.data, "-->");
    case lm:
      var V = n.publicId, $ = n.systemId;
      if (t.push("<!DOCTYPE ", n.name), V)
        t.push(" PUBLIC ", V), $ && $ != "." && t.push(" ", $), t.push(">");
      else if ($ && $ != ".")
        t.push(" SYSTEM ", $, ">");
      else {
        var k = n.internalSubset;
        k && t.push(" [", k, "]"), t.push(">");
      }
      return;
    case sm:
      return t.push("<?", n.target, " ", n.data, "?>");
    case am:
      return t.push("&", n.nodeName, ";");
    default:
      t.push("??", n.nodeName);
  }
}
function Tm(n, t, i) {
  var r;
  switch (t.nodeType) {
    case ji:
      r = t.cloneNode(!1), r.ownerDocument = n;
    case Tr:
      break;
    case Gn:
      i = !0;
      break;
  }
  if (r || (r = t.cloneNode(!1)), r.ownerDocument = n, r.parentNode = null, i)
    for (var e = t.firstChild; e; )
      r.appendChild(Tm(n, e, i)), e = e.nextSibling;
  return r;
}
function ed(n, t, i) {
  var r = new t.constructor();
  for (var e in t) {
    var a = t[e];
    typeof a != "object" && a != r[e] && (r[e] = a);
  }
  switch (t.childNodes && (r.childNodes = new gr()), r.ownerDocument = n, r.nodeType) {
    case ji:
      var s = t.attributes, o = r.attributes = new uo(), u = s.length;
      o._ownerElement = r;
      for (var l = 0; l < u; l++)
        r.setAttributeNode(ed(n, s.item(l), !0));
      break;
    case Gn:
      i = !0;
  }
  if (i)
    for (var d = t.firstChild; d; )
      r.appendChild(ed(n, d, i)), d = d.nextSibling;
  return r;
}
function bm(n, t, i) {
  n[t] = i;
}
try {
  if (Object.defineProperty) {
    let n = function(t) {
      switch (t.nodeType) {
        case ji:
        case Tr:
          var i = [];
          for (t = t.firstChild; t; )
            t.nodeType !== 7 && t.nodeType !== 8 && i.push(n(t)), t = t.nextSibling;
          return i.join("");
        default:
          return t.nodeValue;
      }
    };
    Object.defineProperty($n.prototype, "length", {
      get: function() {
        return Bd(this), this.$$length;
      }
    }), Object.defineProperty(ii.prototype, "textContent", {
      get: function() {
        return n(this);
      },
      set: function(t) {
        switch (this.nodeType) {
          case ji:
          case Tr:
            for (; this.firstChild; )
              this.removeChild(this.firstChild);
            (t || String(t)) && this.appendChild(this.ownerDocument.createTextNode(t));
            break;
          default:
            this.data = t, this.value = t, this.nodeValue = t;
        }
      }
    }), bm = function(t, i, r) {
      t["$$" + i] = r;
    };
  }
} catch {
}
Fr.DocumentType = Fo;
Fr.DOMException = an;
Fr.DOMImplementation = cm;
Fr.Element = sn;
Fr.Node = ii;
Fr.NodeList = gr;
Fr.XMLSerializer = _m;
var ss = {}, Sm = {};
(function(n) {
  var t = ln.freeze;
  n.XML_ENTITIES = t({ amp: "&", apos: "'", gt: ">", lt: "<", quot: '"' }), n.HTML_ENTITIES = t({
    lt: "<",
    gt: ">",
    amp: "&",
    quot: '"',
    apos: "'",
    Agrave: "\xC0",
    Aacute: "\xC1",
    Acirc: "\xC2",
    Atilde: "\xC3",
    Auml: "\xC4",
    Aring: "\xC5",
    AElig: "\xC6",
    Ccedil: "\xC7",
    Egrave: "\xC8",
    Eacute: "\xC9",
    Ecirc: "\xCA",
    Euml: "\xCB",
    Igrave: "\xCC",
    Iacute: "\xCD",
    Icirc: "\xCE",
    Iuml: "\xCF",
    ETH: "\xD0",
    Ntilde: "\xD1",
    Ograve: "\xD2",
    Oacute: "\xD3",
    Ocirc: "\xD4",
    Otilde: "\xD5",
    Ouml: "\xD6",
    Oslash: "\xD8",
    Ugrave: "\xD9",
    Uacute: "\xDA",
    Ucirc: "\xDB",
    Uuml: "\xDC",
    Yacute: "\xDD",
    THORN: "\xDE",
    szlig: "\xDF",
    agrave: "\xE0",
    aacute: "\xE1",
    acirc: "\xE2",
    atilde: "\xE3",
    auml: "\xE4",
    aring: "\xE5",
    aelig: "\xE6",
    ccedil: "\xE7",
    egrave: "\xE8",
    eacute: "\xE9",
    ecirc: "\xEA",
    euml: "\xEB",
    igrave: "\xEC",
    iacute: "\xED",
    icirc: "\xEE",
    iuml: "\xEF",
    eth: "\xF0",
    ntilde: "\xF1",
    ograve: "\xF2",
    oacute: "\xF3",
    ocirc: "\xF4",
    otilde: "\xF5",
    ouml: "\xF6",
    oslash: "\xF8",
    ugrave: "\xF9",
    uacute: "\xFA",
    ucirc: "\xFB",
    uuml: "\xFC",
    yacute: "\xFD",
    thorn: "\xFE",
    yuml: "\xFF",
    nbsp: "\xA0",
    iexcl: "\xA1",
    cent: "\xA2",
    pound: "\xA3",
    curren: "\xA4",
    yen: "\xA5",
    brvbar: "\xA6",
    sect: "\xA7",
    uml: "\xA8",
    copy: "\xA9",
    ordf: "\xAA",
    laquo: "\xAB",
    not: "\xAC",
    shy: "\xAD\xAD",
    reg: "\xAE",
    macr: "\xAF",
    deg: "\xB0",
    plusmn: "\xB1",
    sup2: "\xB2",
    sup3: "\xB3",
    acute: "\xB4",
    micro: "\xB5",
    para: "\xB6",
    middot: "\xB7",
    cedil: "\xB8",
    sup1: "\xB9",
    ordm: "\xBA",
    raquo: "\xBB",
    frac14: "\xBC",
    frac12: "\xBD",
    frac34: "\xBE",
    iquest: "\xBF",
    times: "\xD7",
    divide: "\xF7",
    forall: "\u2200",
    part: "\u2202",
    exist: "\u2203",
    empty: "\u2205",
    nabla: "\u2207",
    isin: "\u2208",
    notin: "\u2209",
    ni: "\u220B",
    prod: "\u220F",
    sum: "\u2211",
    minus: "\u2212",
    lowast: "\u2217",
    radic: "\u221A",
    prop: "\u221D",
    infin: "\u221E",
    ang: "\u2220",
    and: "\u2227",
    or: "\u2228",
    cap: "\u2229",
    cup: "\u222A",
    int: "\u222B",
    there4: "\u2234",
    sim: "\u223C",
    cong: "\u2245",
    asymp: "\u2248",
    ne: "\u2260",
    equiv: "\u2261",
    le: "\u2264",
    ge: "\u2265",
    sub: "\u2282",
    sup: "\u2283",
    nsub: "\u2284",
    sube: "\u2286",
    supe: "\u2287",
    oplus: "\u2295",
    otimes: "\u2297",
    perp: "\u22A5",
    sdot: "\u22C5",
    Alpha: "\u0391",
    Beta: "\u0392",
    Gamma: "\u0393",
    Delta: "\u0394",
    Epsilon: "\u0395",
    Zeta: "\u0396",
    Eta: "\u0397",
    Theta: "\u0398",
    Iota: "\u0399",
    Kappa: "\u039A",
    Lambda: "\u039B",
    Mu: "\u039C",
    Nu: "\u039D",
    Xi: "\u039E",
    Omicron: "\u039F",
    Pi: "\u03A0",
    Rho: "\u03A1",
    Sigma: "\u03A3",
    Tau: "\u03A4",
    Upsilon: "\u03A5",
    Phi: "\u03A6",
    Chi: "\u03A7",
    Psi: "\u03A8",
    Omega: "\u03A9",
    alpha: "\u03B1",
    beta: "\u03B2",
    gamma: "\u03B3",
    delta: "\u03B4",
    epsilon: "\u03B5",
    zeta: "\u03B6",
    eta: "\u03B7",
    theta: "\u03B8",
    iota: "\u03B9",
    kappa: "\u03BA",
    lambda: "\u03BB",
    mu: "\u03BC",
    nu: "\u03BD",
    xi: "\u03BE",
    omicron: "\u03BF",
    pi: "\u03C0",
    rho: "\u03C1",
    sigmaf: "\u03C2",
    sigma: "\u03C3",
    tau: "\u03C4",
    upsilon: "\u03C5",
    phi: "\u03C6",
    chi: "\u03C7",
    psi: "\u03C8",
    omega: "\u03C9",
    thetasym: "\u03D1",
    upsih: "\u03D2",
    piv: "\u03D6",
    OElig: "\u0152",
    oelig: "\u0153",
    Scaron: "\u0160",
    scaron: "\u0161",
    Yuml: "\u0178",
    fnof: "\u0192",
    circ: "\u02C6",
    tilde: "\u02DC",
    ensp: "\u2002",
    emsp: "\u2003",
    thinsp: "\u2009",
    zwnj: "\u200C",
    zwj: "\u200D",
    lrm: "\u200E",
    rlm: "\u200F",
    ndash: "\u2013",
    mdash: "\u2014",
    lsquo: "\u2018",
    rsquo: "\u2019",
    sbquo: "\u201A",
    ldquo: "\u201C",
    rdquo: "\u201D",
    bdquo: "\u201E",
    dagger: "\u2020",
    Dagger: "\u2021",
    bull: "\u2022",
    hellip: "\u2026",
    permil: "\u2030",
    prime: "\u2032",
    Prime: "\u2033",
    lsaquo: "\u2039",
    rsaquo: "\u203A",
    oline: "\u203E",
    euro: "\u20AC",
    trade: "\u2122",
    larr: "\u2190",
    uarr: "\u2191",
    rarr: "\u2192",
    darr: "\u2193",
    harr: "\u2194",
    crarr: "\u21B5",
    lceil: "\u2308",
    rceil: "\u2309",
    lfloor: "\u230A",
    rfloor: "\u230B",
    loz: "\u25CA",
    spades: "\u2660",
    clubs: "\u2663",
    hearts: "\u2665",
    diams: "\u2666"
  }), n.entityMap = n.HTML_ENTITIES;
})(Sm);
var Gd = {}, Xa = ln.NAMESPACE, td = /[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/, If = new RegExp("[\\-\\.0-9" + td.source.slice(1, -1) + "\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"), Df = new RegExp("^" + td.source + If.source + "*(?::" + td.source + If.source + "*)?$"), xa = 0, Or = 1, Cn = 2, wa = 3, kn = 4, Pn = 5, Aa = 6, Ms = 7;
function zn(n, t) {
  this.message = n, this.locator = t, Error.captureStackTrace && Error.captureStackTrace(this, zn);
}
zn.prototype = new Error();
zn.prototype.name = zn.name;
function Em() {
}
Em.prototype = {
  parse: function(n, t, i) {
    var r = this.domBuilder;
    r.startDocument(), xm(t, t = {}), x0(
      n,
      t,
      i,
      r,
      this.errorHandler
    ), r.endDocument();
  }
};
function x0(n, t, i, r, e) {
  function a(fe) {
    if (fe > 65535) {
      fe -= 65536;
      var pe = 55296 + (fe >> 10), H = 56320 + (fe & 1023);
      return String.fromCharCode(pe, H);
    } else
      return String.fromCharCode(fe);
  }
  function s(fe) {
    var pe = fe.slice(1, -1);
    return pe in i ? i[pe] : pe.charAt(0) === "#" ? a(parseInt(pe.substr(1).replace("x", "0x"))) : (e.error("entity not found:" + fe), fe);
  }
  function o(fe) {
    if (fe > y) {
      var pe = n.substring(y, fe).replace(/&#?\w+;/g, s);
      f && u(y), r.characters(pe, 0, fe - y), y = fe;
    }
  }
  function u(fe, pe) {
    for (; fe >= d && (pe = h.exec(n)); )
      l = pe.index, d = l + pe[0].length, f.lineNumber++;
    f.columnNumber = fe - l + 1;
  }
  for (var l = 0, d = 0, h = /.*(?:\r\n?|\n)|.*$/g, f = r.locator, _ = [{ currentNSMap: t }], v = {}, y = 0; ; ) {
    try {
      var T = n.indexOf("<", y);
      if (T < 0) {
        if (!n.substr(y).match(/^\s*$/)) {
          var I = r.doc, V = I.createTextNode(n.substr(y));
          I.appendChild(V), r.currentElement = V;
        }
        return;
      }
      switch (T > y && o(T), n.charAt(T + 1)) {
        case "/":
          var le = n.indexOf(">", T + 3), $ = n.substring(T + 2, le).replace(/[ \t\n\r]+$/g, ""), k = _.pop();
          le < 0 ? ($ = n.substring(T + 2).replace(/[\s<].*/, ""), e.error("end tag name: " + $ + " is not complete:" + k.tagName), le = T + 1 + $.length) : $.match(/\s</) && ($ = $.replace(/[\s<].*/, ""), e.error("end tag name: " + $ + " maybe not complete"), le = T + 1 + $.length);
          var P = k.localNSMap, L = k.tagName == $, O = L || k.tagName && k.tagName.toLowerCase() == $.toLowerCase();
          if (O) {
            if (r.endElement(k.uri, k.localName, $), P)
              for (var U in P)
                r.endPrefixMapping(U);
            L || e.fatalError("end tag name: " + $ + " is not match the current start tagName:" + k.tagName);
          } else
            _.push(k);
          le++;
          break;
        case "?":
          f && u(T), le = P0(n, T, r);
          break;
        case "!":
          f && u(T), le = k0(n, T, r, e);
          break;
        default:
          f && u(T);
          var ie = new wm(), z = _[_.length - 1].currentNSMap, le = w0(n, T, ie, z, s, e), se = ie.length;
          if (!ie.closed && C0(n, le, ie.tagName, v) && (ie.closed = !0, i.nbsp || e.warning("unclosed xml attribute")), f && se) {
            for (var me = Lf(f, {}), M = 0; M < se; M++) {
              var ne = ie[M];
              u(ne.offset), ne.locator = Lf(f, {});
            }
            r.locator = me, Of(ie, r, z) && _.push(ie), r.locator = f;
          } else
            Of(ie, r, z) && _.push(ie);
          Xa.isHTML(ie.uri) && !ie.closed ? le = A0(n, le, ie.tagName, s, r) : le++;
      }
    } catch (fe) {
      if (fe instanceof zn)
        throw fe;
      e.error("element parse error: " + fe), le = -1;
    }
    le > y ? y = le : o(Math.max(T, y) + 1);
  }
}
function Lf(n, t) {
  return t.lineNumber = n.lineNumber, t.columnNumber = n.columnNumber, t;
}
function w0(n, t, i, r, e, a) {
  function s(f, _, v) {
    i.attributeNames.hasOwnProperty(f) && a.fatalError("Attribute " + f + " redefined"), i.addValue(f, _, v);
  }
  for (var o, u, l = ++t, d = xa; ; ) {
    var h = n.charAt(l);
    switch (h) {
      case "=":
        if (d === Or)
          o = n.slice(t, l), d = wa;
        else if (d === Cn)
          d = wa;
        else
          throw new Error("attribute equal must after attrName");
        break;
      case "'":
      case '"':
        if (d === wa || d === Or)
          if (d === Or && (a.warning('attribute value must after "="'), o = n.slice(t, l)), t = l + 1, l = n.indexOf(h, t), l > 0)
            u = n.slice(t, l).replace(/&#?\w+;/g, e), s(o, u, t - 1), d = Pn;
          else
            throw new Error("attribute value no end '" + h + "' match");
        else if (d == kn)
          u = n.slice(t, l).replace(/&#?\w+;/g, e), s(o, u, t), a.warning('attribute "' + o + '" missed start quot(' + h + ")!!"), t = l + 1, d = Pn;
        else
          throw new Error('attribute value must after "="');
        break;
      case "/":
        switch (d) {
          case xa:
            i.setTagName(n.slice(t, l));
          case Pn:
          case Aa:
          case Ms:
            d = Ms, i.closed = !0;
          case kn:
          case Or:
          case Cn:
            break;
          default:
            throw new Error("attribute invalid close char('/')");
        }
        break;
      case "":
        return a.error("unexpected end of input"), d == xa && i.setTagName(n.slice(t, l)), l;
      case ">":
        switch (d) {
          case xa:
            i.setTagName(n.slice(t, l));
          case Pn:
          case Aa:
          case Ms:
            break;
          case kn:
          case Or:
            u = n.slice(t, l), u.slice(-1) === "/" && (i.closed = !0, u = u.slice(0, -1));
          case Cn:
            d === Cn && (u = o), d == kn ? (a.warning('attribute "' + u + '" missed quot(")!'), s(o, u.replace(/&#?\w+;/g, e), t)) : ((!Xa.isHTML(r[""]) || !u.match(/^(?:disabled|checked|selected)$/i)) && a.warning('attribute "' + u + '" missed value!! "' + u + '" instead!!'), s(u, u, t));
            break;
          case wa:
            throw new Error("attribute value missed!!");
        }
        return l;
      case "\x80":
        h = " ";
      default:
        if (h <= " ")
          switch (d) {
            case xa:
              i.setTagName(n.slice(t, l)), d = Aa;
              break;
            case Or:
              o = n.slice(t, l), d = Cn;
              break;
            case kn:
              var u = n.slice(t, l).replace(/&#?\w+;/g, e);
              a.warning('attribute "' + u + '" missed quot(")!!'), s(o, u, t);
            case Pn:
              d = Aa;
              break;
          }
        else
          switch (d) {
            case Cn:
              i.tagName, (!Xa.isHTML(r[""]) || !o.match(/^(?:disabled|checked|selected)$/i)) && a.warning('attribute "' + o + '" missed value!! "' + o + '" instead2!!'), s(o, o, t), t = l, d = Or;
              break;
            case Pn:
              a.warning('attribute space is required"' + o + '"!!');
            case Aa:
              d = Or, t = l;
              break;
            case wa:
              d = kn, t = l;
              break;
            case Ms:
              throw new Error("elements closed character '/' and '>' must be connected to");
          }
    }
    l++;
  }
}
function Of(n, t, i) {
  for (var r = n.tagName, e = null, h = n.length; h--; ) {
    var a = n[h], s = a.qName, o = a.value, f = s.indexOf(":");
    if (f > 0)
      var u = a.prefix = s.slice(0, f), l = s.slice(f + 1), d = u === "xmlns" && l;
    else
      l = s, u = null, d = s === "xmlns" && "";
    a.localName = l, d !== !1 && (e == null && (e = {}, xm(i, i = {})), i[d] = e[d] = o, a.uri = Xa.XMLNS, t.startPrefixMapping(d, o));
  }
  for (var h = n.length; h--; ) {
    a = n[h];
    var u = a.prefix;
    u && (u === "xml" && (a.uri = Xa.XML), u !== "xmlns" && (a.uri = i[u || ""]));
  }
  var f = r.indexOf(":");
  f > 0 ? (u = n.prefix = r.slice(0, f), l = n.localName = r.slice(f + 1)) : (u = null, l = n.localName = r);
  var _ = n.uri = i[u || ""];
  if (t.startElement(_, l, r, n), n.closed) {
    if (t.endElement(_, l, r), e)
      for (u in e)
        t.endPrefixMapping(u);
  } else
    return n.currentNSMap = i, n.localNSMap = e, !0;
}
function A0(n, t, i, r, e) {
  if (/^(?:script|textarea)$/i.test(i)) {
    var a = n.indexOf("</" + i + ">", t), s = n.substring(t + 1, a);
    if (/[&<]/.test(s))
      return /^script$/i.test(i) ? (e.characters(s, 0, s.length), a) : (s = s.replace(/&#?\w+;/g, r), e.characters(s, 0, s.length), a);
  }
  return t + 1;
}
function C0(n, t, i, r) {
  var e = r[i];
  return e == null && (e = n.lastIndexOf("</" + i + ">"), e < t && (e = n.lastIndexOf("</" + i)), r[i] = e), e < t;
}
function xm(n, t) {
  for (var i in n)
    t[i] = n[i];
}
function k0(n, t, i, r) {
  var e = n.charAt(t + 2);
  switch (e) {
    case "-":
      if (n.charAt(t + 3) === "-") {
        var a = n.indexOf("-->", t + 4);
        return a > t ? (i.comment(n, t + 4, a - t - 4), a + 3) : (r.error("Unclosed comment"), -1);
      } else
        return -1;
    default:
      if (n.substr(t + 3, 6) == "CDATA[") {
        var a = n.indexOf("]]>", t + 9);
        return i.startCDATA(), i.characters(n, t + 9, a - t - 9), i.endCDATA(), a + 3;
      }
      var s = I0(n, t), o = s.length;
      if (o > 1 && /!doctype/i.test(s[0][0])) {
        var u = s[1][0], l = !1, d = !1;
        o > 3 && (/^public$/i.test(s[2][0]) ? (l = s[3][0], d = o > 4 && s[4][0]) : /^system$/i.test(s[2][0]) && (d = s[3][0]));
        var h = s[o - 1];
        return i.startDTD(u, l, d), i.endDTD(), h.index + h[0].length;
      }
  }
  return -1;
}
function P0(n, t, i) {
  var r = n.indexOf("?>", t);
  if (r) {
    var e = n.substring(t, r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);
    return e ? (e[0].length, i.processingInstruction(e[1], e[2]), r + 2) : -1;
  }
  return -1;
}
function wm() {
  this.attributeNames = {};
}
wm.prototype = {
  setTagName: function(n) {
    if (!Df.test(n))
      throw new Error("invalid tagName:" + n);
    this.tagName = n;
  },
  addValue: function(n, t, i) {
    if (!Df.test(n))
      throw new Error("invalid attribute:" + n);
    this.attributeNames[n] = this.length, this[this.length++] = { qName: n, value: t, offset: i };
  },
  length: 0,
  getLocalName: function(n) {
    return this[n].localName;
  },
  getLocator: function(n) {
    return this[n].locator;
  },
  getQName: function(n) {
    return this[n].qName;
  },
  getURI: function(n) {
    return this[n].uri;
  },
  getValue: function(n) {
    return this[n].value;
  }
};
function I0(n, t) {
  var i, r = [], e = /'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;
  for (e.lastIndex = t, e.exec(n); i = e.exec(n); )
    if (r.push(i), i[1])
      return r;
}
Gd.XMLReader = Em;
Gd.ParseError = zn;
var D0 = ln, $d = Fr, Rf = Sm, Am = Gd, L0 = $d.DOMImplementation, Nf = D0.NAMESPACE, O0 = Am.ParseError, R0 = Am.XMLReader;
function Cm(n) {
  this.options = n || { locator: {} };
}
Cm.prototype.parseFromString = function(n, t) {
  var i = this.options, r = new R0(), e = i.domBuilder || new os(), a = i.errorHandler, s = i.locator, o = i.xmlns || {}, u = /\/x?html?$/.test(t), l = u ? Rf.HTML_ENTITIES : Rf.XML_ENTITIES;
  return s && e.setDocumentLocator(s), r.errorHandler = N0(a, e, s), r.domBuilder = i.domBuilder || e, u && (o[""] = Nf.HTML), o.xml = o.xml || Nf.XML, n && typeof n == "string" ? r.parse(n, o, l) : r.errorHandler.error("invalid doc source"), e.doc;
};
function N0(n, t, i) {
  if (!n) {
    if (t instanceof os)
      return t;
    n = t;
  }
  var r = {}, e = n instanceof Function;
  i = i || {};
  function a(s) {
    var o = n[s];
    !o && e && (o = n.length == 2 ? function(u) {
      n(s, u);
    } : n), r[s] = o && function(u) {
      o("[xmldom " + s + "]	" + u + id(i));
    } || function() {
    };
  }
  return a("warning"), a("error"), a("fatalError"), r;
}
function os() {
  this.cdata = !1;
}
function In(n, t) {
  t.lineNumber = n.lineNumber, t.columnNumber = n.columnNumber;
}
os.prototype = {
  startDocument: function() {
    this.doc = new L0().createDocument(null, null, null), this.locator && (this.doc.documentURI = this.locator.systemId);
  },
  startElement: function(n, t, i, r) {
    var e = this.doc, a = e.createElementNS(n, i || t), s = r.length;
    Fs(this, a), this.currentElement = a, this.locator && In(this.locator, a);
    for (var o = 0; o < s; o++) {
      var n = r.getURI(o), u = r.getValue(o), i = r.getQName(o), l = e.createAttributeNS(n, i);
      this.locator && In(r.getLocator(o), l), l.value = l.nodeValue = u, a.setAttributeNode(l);
    }
  },
  endElement: function(n, t, i) {
    var r = this.currentElement;
    r.tagName, this.currentElement = r.parentNode;
  },
  startPrefixMapping: function(n, t) {
  },
  endPrefixMapping: function(n) {
  },
  processingInstruction: function(n, t) {
    var i = this.doc.createProcessingInstruction(n, t);
    this.locator && In(this.locator, i), Fs(this, i);
  },
  ignorableWhitespace: function(n, t, i) {
  },
  characters: function(n, t, i) {
    if (n = Mf.apply(this, arguments), n) {
      if (this.cdata)
        var r = this.doc.createCDATASection(n);
      else
        var r = this.doc.createTextNode(n);
      this.currentElement ? this.currentElement.appendChild(r) : /^\s*$/.test(n) && this.doc.appendChild(r), this.locator && In(this.locator, r);
    }
  },
  skippedEntity: function(n) {
  },
  endDocument: function() {
    this.doc.normalize();
  },
  setDocumentLocator: function(n) {
    (this.locator = n) && (n.lineNumber = 0);
  },
  comment: function(n, t, i) {
    n = Mf.apply(this, arguments);
    var r = this.doc.createComment(n);
    this.locator && In(this.locator, r), Fs(this, r);
  },
  startCDATA: function() {
    this.cdata = !0;
  },
  endCDATA: function() {
    this.cdata = !1;
  },
  startDTD: function(n, t, i) {
    var r = this.doc.implementation;
    if (r && r.createDocumentType) {
      var e = r.createDocumentType(n, t, i);
      this.locator && In(this.locator, e), Fs(this, e), this.doc.doctype = e;
    }
  },
  warning: function(n) {
    console.warn("[xmldom warning]	" + n, id(this.locator));
  },
  error: function(n) {
    console.error("[xmldom error]	" + n, id(this.locator));
  },
  fatalError: function(n) {
    throw new O0(n, this.locator);
  }
};
function id(n) {
  if (n)
    return `
@` + (n.systemId || "") + "#[line:" + n.lineNumber + ",col:" + n.columnNumber + "]";
}
function Mf(n, t, i) {
  return typeof n == "string" ? n.substr(t, i) : n.length >= t + i || t ? new java.lang.String(n, t, i) + "" : n;
}
"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g, function(n) {
  os.prototype[n] = function() {
    return null;
  };
});
function Fs(n, t) {
  n.currentElement ? n.currentElement.appendChild(t) : n.doc.appendChild(t);
}
ss.__DOMHandler = os;
ss.DOMParser = Cm;
ss.DOMImplementation = $d.DOMImplementation;
ss.XMLSerializer = $d.XMLSerializer;
var M0 = ss.DOMParser;
/*! @name mpd-parser @version 0.21.1 @license Apache-2.0 */
var Ff = function(t) {
  return !!t && typeof t == "object";
}, di = function n() {
  for (var t = arguments.length, i = new Array(t), r = 0; r < t; r++)
    i[r] = arguments[r];
  return i.reduce(function(e, a) {
    return typeof a != "object" || Object.keys(a).forEach(function(s) {
      Array.isArray(e[s]) && Array.isArray(a[s]) ? e[s] = e[s].concat(a[s]) : Ff(e[s]) && Ff(a[s]) ? e[s] = n(e[s], a[s]) : e[s] = a[s];
    }), e;
  }, {});
}, km = function(t) {
  return Object.keys(t).map(function(i) {
    return t[i];
  });
}, F0 = function(t, i) {
  for (var r = [], e = t; e < i; e++)
    r.push(e);
  return r;
}, Uo = function(t) {
  return t.reduce(function(i, r) {
    return i.concat(r);
  }, []);
}, Pm = function(t) {
  if (!t.length)
    return [];
  for (var i = [], r = 0; r < t.length; r++)
    i.push(t[r]);
  return i;
}, B0 = function(t, i) {
  return t.reduce(function(r, e, a) {
    return e[i] && r.push(a), r;
  }, []);
}, rd = function(t, i) {
  for (var r = 0; r < t.length; r++)
    if (i(t[r]))
      return r;
  return -1;
}, U0 = function(t, i) {
  return km(t.reduce(function(r, e) {
    return e.forEach(function(a) {
      r[i(a)] = a;
    }), r;
  }, {}));
}, Kn = {
  INVALID_NUMBER_OF_PERIOD: "INVALID_NUMBER_OF_PERIOD",
  DASH_EMPTY_MANIFEST: "DASH_EMPTY_MANIFEST",
  DASH_INVALID_XML: "DASH_INVALID_XML",
  NO_BASE_URL: "NO_BASE_URL",
  MISSING_SEGMENT_INFORMATION: "MISSING_SEGMENT_INFORMATION",
  SEGMENT_TIME_UNSPECIFIED: "SEGMENT_TIME_UNSPECIFIED",
  UNSUPPORTED_UTC_TIMING_SCHEME: "UNSUPPORTED_UTC_TIMING_SCHEME"
}, Qa = function(t) {
  var i = t.baseUrl, r = i === void 0 ? "" : i, e = t.source, a = e === void 0 ? "" : e, s = t.range, o = s === void 0 ? "" : s, u = t.indexRange, l = u === void 0 ? "" : u, d = {
    uri: a,
    resolvedUri: Mo(r || "", a)
  };
  if (o || l) {
    var h = o || l, f = h.split("-"), _ = B.BigInt ? B.BigInt(f[0]) : parseInt(f[0], 10), v = B.BigInt ? B.BigInt(f[1]) : parseInt(f[1], 10);
    _ < Number.MAX_SAFE_INTEGER && typeof _ == "bigint" && (_ = Number(_)), v < Number.MAX_SAFE_INTEGER && typeof v == "bigint" && (v = Number(v));
    var y;
    typeof v == "bigint" || typeof _ == "bigint" ? y = B.BigInt(v) - B.BigInt(_) + B.BigInt(1) : y = v - _ + 1, typeof y == "bigint" && y < Number.MAX_SAFE_INTEGER && (y = Number(y)), d.byterange = {
      length: y,
      offset: _
    };
  }
  return d;
}, q0 = function(t) {
  var i;
  return typeof t.offset == "bigint" || typeof t.length == "bigint" ? i = B.BigInt(t.offset) + B.BigInt(t.length) - B.BigInt(1) : i = t.offset + t.length - 1, t.offset + "-" + i;
}, Bf = function(t) {
  return t && typeof t != "number" && (t = parseInt(t, 10)), isNaN(t) ? null : t;
}, V0 = {
  static: function(t) {
    var i = t.duration, r = t.timescale, e = r === void 0 ? 1 : r, a = t.sourceDuration, s = t.periodDuration, o = Bf(t.endNumber), u = i / e;
    return typeof o == "number" ? {
      start: 0,
      end: o
    } : typeof s == "number" ? {
      start: 0,
      end: s / u
    } : {
      start: 0,
      end: a / u
    };
  },
  dynamic: function(t) {
    var i = t.NOW, r = t.clientOffset, e = t.availabilityStartTime, a = t.timescale, s = a === void 0 ? 1 : a, o = t.duration, u = t.periodStart, l = u === void 0 ? 0 : u, d = t.minimumUpdatePeriod, h = d === void 0 ? 0 : d, f = t.timeShiftBufferDepth, _ = f === void 0 ? 1 / 0 : f, v = Bf(t.endNumber), y = (i + r) / 1e3, T = e + l, I = y + h, V = I - T, $ = Math.ceil(V * s / o), k = Math.floor((y - T - _) * s / o), P = Math.floor((y - T) * s / o);
    return {
      start: Math.max(0, k),
      end: typeof v == "number" ? v : Math.min($, P)
    };
  }
}, j0 = function(t) {
  return function(i) {
    var r = t.duration, e = t.timescale, a = e === void 0 ? 1 : e, s = t.periodStart, o = t.startNumber, u = o === void 0 ? 1 : o;
    return {
      number: u + i,
      duration: r / a,
      timeline: s,
      time: i * r
    };
  };
}, zd = function(t) {
  var i = t.type, r = t.duration, e = t.timescale, a = e === void 0 ? 1 : e, s = t.periodDuration, o = t.sourceDuration, u = V0[i](t), l = u.start, d = u.end, h = F0(l, d).map(j0(t));
  if (i === "static") {
    var f = h.length - 1, _ = typeof s == "number" ? s : o;
    h[f].duration = _ - r / a * f;
  }
  return h;
}, Im = function(t) {
  var i = t.baseUrl, r = t.initialization, e = r === void 0 ? {} : r, a = t.sourceDuration, s = t.indexRange, o = s === void 0 ? "" : s, u = t.periodStart, l = t.presentationTime, d = t.number, h = d === void 0 ? 0 : d, f = t.duration;
  if (!i)
    throw new Error(Kn.NO_BASE_URL);
  var _ = Qa({
    baseUrl: i,
    source: e.sourceURL,
    range: e.range
  }), v = Qa({
    baseUrl: i,
    source: i,
    indexRange: o
  });
  if (v.map = _, f) {
    var y = zd(t);
    y.length && (v.duration = y[0].duration, v.timeline = y[0].timeline);
  } else
    a && (v.duration = a, v.timeline = u);
  return v.presentationTime = l || u, v.number = h, [v];
}, Kd = function(t, i, r) {
  var e = t.sidx.map ? t.sidx.map : null, a = t.sidx.duration, s = t.timeline || 0, o = t.sidx.byterange, u = o.offset + o.length, l = i.timescale, d = i.references.filter(function(ie) {
    return ie.referenceType !== 1;
  }), h = [], f = t.endList ? "static" : "dynamic", _ = t.sidx.timeline, v = _, y = t.mediaSequence || 0, T;
  typeof i.firstOffset == "bigint" ? T = B.BigInt(u) + i.firstOffset : T = u + i.firstOffset;
  for (var I = 0; I < d.length; I++) {
    var V = i.references[I], $ = V.referencedSize, k = V.subsegmentDuration, P = void 0;
    typeof T == "bigint" ? P = T + B.BigInt($) - B.BigInt(1) : P = T + $ - 1;
    var L = T + "-" + P, O = {
      baseUrl: r,
      timescale: l,
      timeline: s,
      periodStart: _,
      presentationTime: v,
      number: y,
      duration: k,
      sourceDuration: a,
      indexRange: L,
      type: f
    }, U = Im(O)[0];
    e && (U.map = e), h.push(U), typeof T == "bigint" ? T += B.BigInt($) : T += $, v += k / l, y++;
  }
  return t.segments = h, t;
}, H0 = ["AUDIO", "SUBTITLES"], W0 = 1 / 60, Dm = function(t) {
  return U0(t, function(i) {
    var r = i.timeline;
    return r;
  }).sort(function(i, r) {
    return i.timeline > r.timeline ? 1 : -1;
  });
}, G0 = function(t, i) {
  for (var r = 0; r < t.length; r++)
    if (t[r].attributes.NAME === i)
      return t[r];
  return null;
}, Uf = function(t) {
  var i = [];
  return f0(t, H0, function(r, e, a, s) {
    i = i.concat(r.playlists || []);
  }), i;
}, qf = function(t) {
  var i = t.playlist, r = t.mediaSequence;
  i.mediaSequence = r, i.segments.forEach(function(e, a) {
    e.number = i.mediaSequence + a;
  });
}, $0 = function(t) {
  var i = t.oldPlaylists, r = t.newPlaylists, e = t.timelineStarts;
  r.forEach(function(a) {
    a.discontinuitySequence = rd(e, function(d) {
      var h = d.timeline;
      return h === a.timeline;
    });
    var s = G0(i, a.attributes.NAME);
    if (!!s && !a.sidx) {
      var o = a.segments[0], u = rd(s.segments, function(d) {
        return Math.abs(d.presentationTime - o.presentationTime) < W0;
      });
      if (u === -1) {
        qf({
          playlist: a,
          mediaSequence: s.mediaSequence + s.segments.length
        }), a.segments[0].discontinuity = !0, a.discontinuityStarts.unshift(0), (!s.segments.length && a.timeline > s.timeline || s.segments.length && a.timeline > s.segments[s.segments.length - 1].timeline) && a.discontinuitySequence--;
        return;
      }
      var l = s.segments[u];
      l.discontinuity && !o.discontinuity && (o.discontinuity = !0, a.discontinuityStarts.unshift(0), a.discontinuitySequence--), qf({
        playlist: a,
        mediaSequence: s.segments[u].number
      });
    }
  });
}, z0 = function(t) {
  var i = t.oldManifest, r = t.newManifest, e = i.playlists.concat(Uf(i)), a = r.playlists.concat(Uf(r));
  return r.timelineStarts = Dm([i.timelineStarts, r.timelineStarts]), $0({
    oldPlaylists: e,
    newPlaylists: a,
    timelineStarts: r.timelineStarts
  }), r;
}, qo = function(t) {
  return t && t.uri + "-" + q0(t.byterange);
}, Ru = function(t) {
  var i = km(t.reduce(function(r, e) {
    var a = e.attributes.id + (e.attributes.lang || "");
    if (!r[a])
      r[a] = e, r[a].attributes.timelineStarts = [];
    else {
      if (e.segments) {
        var s;
        e.segments[0] && (e.segments[0].discontinuity = !0), (s = r[a].segments).push.apply(s, e.segments);
      }
      e.attributes.contentProtection && (r[a].attributes.contentProtection = e.attributes.contentProtection);
    }
    return r[a].attributes.timelineStarts.push({
      start: e.attributes.periodStart,
      timeline: e.attributes.periodStart
    }), r;
  }, {}));
  return i.map(function(r) {
    return r.discontinuityStarts = B0(r.segments || [], "discontinuity"), r;
  });
}, Xd = function(t, i) {
  var r = qo(t.sidx), e = r && i[r] && i[r].sidx;
  return e && Kd(t, e, t.sidx.resolvedUri), t;
}, K0 = function(t, i) {
  if (i === void 0 && (i = {}), !Object.keys(i).length)
    return t;
  for (var r in t)
    t[r] = Xd(t[r], i);
  return t;
}, X0 = function(t, i) {
  var r, e = t.attributes, a = t.segments, s = t.sidx, o = t.mediaSequence, u = t.discontinuitySequence, l = t.discontinuityStarts, d = {
    attributes: (r = {
      NAME: e.id,
      BANDWIDTH: e.bandwidth,
      CODECS: e.codecs
    }, r["PROGRAM-ID"] = 1, r),
    uri: "",
    endList: e.type === "static",
    timeline: e.periodStart,
    resolvedUri: "",
    targetDuration: e.duration,
    discontinuitySequence: u,
    discontinuityStarts: l,
    timelineStarts: e.timelineStarts,
    mediaSequence: o,
    segments: a
  };
  return e.contentProtection && (d.contentProtection = e.contentProtection), s && (d.sidx = s), i && (d.attributes.AUDIO = "audio", d.attributes.SUBTITLES = "subs"), d;
}, Q0 = function(t) {
  var i, r = t.attributes, e = t.segments, a = t.mediaSequence, s = t.discontinuityStarts, o = t.discontinuitySequence;
  typeof e > "u" && (e = [{
    uri: r.baseUrl,
    timeline: r.periodStart,
    resolvedUri: r.baseUrl || "",
    duration: r.sourceDuration,
    number: 0
  }], r.duration = r.sourceDuration);
  var u = (i = {
    NAME: r.id,
    BANDWIDTH: r.bandwidth
  }, i["PROGRAM-ID"] = 1, i);
  return r.codecs && (u.CODECS = r.codecs), {
    attributes: u,
    uri: "",
    endList: r.type === "static",
    timeline: r.periodStart,
    resolvedUri: r.baseUrl || "",
    targetDuration: r.duration,
    timelineStarts: r.timelineStarts,
    discontinuityStarts: s,
    discontinuitySequence: o,
    mediaSequence: a,
    segments: e
  };
}, Y0 = function(t, i, r) {
  i === void 0 && (i = {}), r === void 0 && (r = !1);
  var e, a = t.reduce(function(o, u) {
    var l = u.attributes.role && u.attributes.role.value || "", d = u.attributes.lang || "", h = u.attributes.label || "main";
    if (d && !u.attributes.label) {
      var f = l ? " (" + l + ")" : "";
      h = "" + u.attributes.lang + f;
    }
    o[h] || (o[h] = {
      language: d,
      autoselect: !0,
      default: l === "main",
      playlists: [],
      uri: ""
    });
    var _ = Xd(X0(u, r), i);
    return o[h].playlists.push(_), typeof e > "u" && l === "main" && (e = u, e.default = !0), o;
  }, {});
  if (!e) {
    var s = Object.keys(a)[0];
    a[s].default = !0;
  }
  return a;
}, J0 = function(t, i) {
  return i === void 0 && (i = {}), t.reduce(function(r, e) {
    var a = e.attributes.lang || "text";
    return r[a] || (r[a] = {
      language: a,
      default: !1,
      autoselect: !1,
      playlists: [],
      uri: ""
    }), r[a].playlists.push(Xd(Q0(e), i)), r;
  }, {});
}, Z0 = function(t) {
  return t.reduce(function(i, r) {
    return r && r.forEach(function(e) {
      var a = e.channel, s = e.language;
      i[s] = {
        autoselect: !1,
        default: !1,
        instreamId: a,
        language: s
      }, e.hasOwnProperty("aspectRatio") && (i[s].aspectRatio = e.aspectRatio), e.hasOwnProperty("easyReader") && (i[s].easyReader = e.easyReader), e.hasOwnProperty("3D") && (i[s]["3D"] = e["3D"]);
    }), i;
  }, {});
}, eT = function(t) {
  var i, r = t.attributes, e = t.segments, a = t.sidx, s = t.discontinuityStarts, o = {
    attributes: (i = {
      NAME: r.id,
      AUDIO: "audio",
      SUBTITLES: "subs",
      RESOLUTION: {
        width: r.width,
        height: r.height
      },
      CODECS: r.codecs,
      BANDWIDTH: r.bandwidth
    }, i["PROGRAM-ID"] = 1, i),
    uri: "",
    endList: r.type === "static",
    timeline: r.periodStart,
    resolvedUri: "",
    targetDuration: r.duration,
    discontinuityStarts: s,
    timelineStarts: r.timelineStarts,
    segments: e
  };
  return r.contentProtection && (o.contentProtection = r.contentProtection), a && (o.sidx = a), o;
}, tT = function(t) {
  var i = t.attributes;
  return i.mimeType === "video/mp4" || i.mimeType === "video/webm" || i.contentType === "video";
}, iT = function(t) {
  var i = t.attributes;
  return i.mimeType === "audio/mp4" || i.mimeType === "audio/webm" || i.contentType === "audio";
}, rT = function(t) {
  var i = t.attributes;
  return i.mimeType === "text/vtt" || i.contentType === "text";
}, nT = function(t, i) {
  t.forEach(function(r) {
    r.mediaSequence = 0, r.discontinuitySequence = rd(i, function(e) {
      var a = e.timeline;
      return a === r.timeline;
    }), r.segments && r.segments.forEach(function(e, a) {
      e.number = a;
    });
  });
}, Vf = function(t) {
  return t ? Object.keys(t).reduce(function(i, r) {
    var e = t[r];
    return i.concat(e.playlists);
  }, []) : [];
}, aT = function(t) {
  var i, r = t.dashPlaylists, e = t.locations, a = t.sidxMapping, s = a === void 0 ? {} : a, o = t.previousManifest;
  if (!r.length)
    return {};
  var u = r[0].attributes, l = u.sourceDuration, d = u.type, h = u.suggestedPresentationDelay, f = u.minimumUpdatePeriod, _ = Ru(r.filter(tT)).map(eT), v = Ru(r.filter(iT)), y = Ru(r.filter(rT)), T = r.map(function(O) {
    return O.attributes.captionServices;
  }).filter(Boolean), I = {
    allowCache: !0,
    discontinuityStarts: [],
    segments: [],
    endList: !0,
    mediaGroups: (i = {
      AUDIO: {},
      VIDEO: {}
    }, i["CLOSED-CAPTIONS"] = {}, i.SUBTITLES = {}, i),
    uri: "",
    duration: l,
    playlists: K0(_, s)
  };
  f >= 0 && (I.minimumUpdatePeriod = f * 1e3), e && (I.locations = e), d === "dynamic" && (I.suggestedPresentationDelay = h);
  var V = I.playlists.length === 0, $ = v.length ? Y0(v, s, V) : null, k = y.length ? J0(y, s) : null, P = _.concat(Vf($), Vf(k)), L = P.map(function(O) {
    var U = O.timelineStarts;
    return U;
  });
  return I.timelineStarts = Dm(L), nT(P, I.timelineStarts), $ && (I.mediaGroups.AUDIO.audio = $), k && (I.mediaGroups.SUBTITLES.subs = k), T.length && (I.mediaGroups["CLOSED-CAPTIONS"].cc = Z0(T)), o ? z0({
    oldManifest: o,
    newManifest: I
  }) : I;
}, sT = function(t, i, r) {
  var e = t.NOW, a = t.clientOffset, s = t.availabilityStartTime, o = t.timescale, u = o === void 0 ? 1 : o, l = t.periodStart, d = l === void 0 ? 0 : l, h = t.minimumUpdatePeriod, f = h === void 0 ? 0 : h, _ = (e + a) / 1e3, v = s + d, y = _ + f, T = y - v;
  return Math.ceil((T * u - i) / r);
}, Lm = function(t, i) {
  for (var r = t.type, e = t.minimumUpdatePeriod, a = e === void 0 ? 0 : e, s = t.media, o = s === void 0 ? "" : s, u = t.sourceDuration, l = t.timescale, d = l === void 0 ? 1 : l, h = t.startNumber, f = h === void 0 ? 1 : h, _ = t.periodStart, v = [], y = -1, T = 0; T < i.length; T++) {
    var I = i[T], V = I.d, $ = I.r || 0, k = I.t || 0;
    y < 0 && (y = k), k && k > y && (y = k);
    var P = void 0;
    if ($ < 0) {
      var L = T + 1;
      L === i.length ? r === "dynamic" && a > 0 && o.indexOf("$Number$") > 0 ? P = sT(t, y, V) : P = (u * d - y) / V : P = (i[L].t - y) / V;
    } else
      P = $ + 1;
    for (var O = f + v.length + P, U = f + v.length; U < O; )
      v.push({
        number: U,
        duration: V / d,
        time: y,
        timeline: _
      }), y += V, U++;
  }
  return v;
}, oT = /\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g, uT = function(t) {
  return function(i, r, e, a) {
    if (i === "$$")
      return "$";
    if (typeof t[r] > "u")
      return i;
    var s = "" + t[r];
    return r === "RepresentationID" || (e ? a = parseInt(a, 10) : a = 1, s.length >= a) ? s : "" + new Array(a - s.length + 1).join("0") + s;
  };
}, jf = function(t, i) {
  return t.replace(oT, uT(i));
}, lT = function(t, i) {
  return !t.duration && !i ? [{
    number: t.startNumber || 1,
    duration: t.sourceDuration,
    time: 0,
    timeline: t.periodStart
  }] : t.duration ? zd(t) : Lm(t, i);
}, dT = function(t, i) {
  var r = {
    RepresentationID: t.id,
    Bandwidth: t.bandwidth || 0
  }, e = t.initialization, a = e === void 0 ? {
    sourceURL: "",
    range: ""
  } : e, s = Qa({
    baseUrl: t.baseUrl,
    source: jf(a.sourceURL, r),
    range: a.range
  }), o = lT(t, i);
  return o.map(function(u) {
    r.Number = u.number, r.Time = u.time;
    var l = jf(t.media || "", r), d = t.timescale || 1, h = t.presentationTimeOffset || 0, f = t.periodStart + (u.time - h) / d, _ = {
      uri: l,
      timeline: u.timeline,
      duration: u.duration,
      resolvedUri: Mo(t.baseUrl || "", l),
      map: s,
      number: u.number,
      presentationTime: f
    };
    return _;
  });
}, cT = function(t, i) {
  var r = t.baseUrl, e = t.initialization, a = e === void 0 ? {} : e, s = Qa({
    baseUrl: r,
    source: a.sourceURL,
    range: a.range
  }), o = Qa({
    baseUrl: r,
    source: i.media,
    range: i.mediaRange
  });
  return o.map = s, o;
}, fT = function(t, i) {
  var r = t.duration, e = t.segmentUrls, a = e === void 0 ? [] : e, s = t.periodStart;
  if (!r && !i || r && i)
    throw new Error(Kn.SEGMENT_TIME_UNSPECIFIED);
  var o = a.map(function(d) {
    return cT(t, d);
  }), u;
  r && (u = zd(t)), i && (u = Lm(t, i));
  var l = u.map(function(d, h) {
    if (o[h]) {
      var f = o[h], _ = t.timescale || 1, v = t.presentationTimeOffset || 0;
      return f.timeline = d.timeline, f.duration = d.duration, f.number = d.number, f.presentationTime = s + (d.time - v) / _, f;
    }
  }).filter(function(d) {
    return d;
  });
  return l;
}, hT = function(t) {
  var i = t.attributes, r = t.segmentInfo, e, a;
  r.template ? (a = dT, e = di(i, r.template)) : r.base ? (a = Im, e = di(i, r.base)) : r.list && (a = fT, e = di(i, r.list));
  var s = {
    attributes: i
  };
  if (!a)
    return s;
  var o = a(e, r.segmentTimeline);
  if (e.duration) {
    var u = e, l = u.duration, d = u.timescale, h = d === void 0 ? 1 : d;
    e.duration = l / h;
  } else
    o.length ? e.duration = o.reduce(function(f, _) {
      return Math.max(f, Math.ceil(_.duration));
    }, 0) : e.duration = 0;
  return s.attributes = e, s.segments = o, r.base && e.indexRange && (s.sidx = o[0], s.segments = []), s;
}, pT = function(t) {
  return t.map(hT);
}, Rt = function(t, i) {
  return Pm(t.childNodes).filter(function(r) {
    var e = r.tagName;
    return e === i;
  });
}, Qd = function(t) {
  return t.textContent.trim();
}, Dn = function(t) {
  var i = 31536e3, r = 30 * 24 * 60 * 60, e = 24 * 60 * 60, a = 60 * 60, s = 60, o = /P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/, u = o.exec(t);
  if (!u)
    return 0;
  var l = u.slice(1), d = l[0], h = l[1], f = l[2], _ = l[3], v = l[4], y = l[5];
  return parseFloat(d || 0) * i + parseFloat(h || 0) * r + parseFloat(f || 0) * e + parseFloat(_ || 0) * a + parseFloat(v || 0) * s + parseFloat(y || 0);
}, mT = function(t) {
  var i = /^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;
  return i.test(t) && (t += "Z"), Date.parse(t);
}, Hf = {
  mediaPresentationDuration: function(t) {
    return Dn(t);
  },
  availabilityStartTime: function(t) {
    return mT(t) / 1e3;
  },
  minimumUpdatePeriod: function(t) {
    return Dn(t);
  },
  suggestedPresentationDelay: function(t) {
    return Dn(t);
  },
  type: function(t) {
    return t;
  },
  timeShiftBufferDepth: function(t) {
    return Dn(t);
  },
  start: function(t) {
    return Dn(t);
  },
  width: function(t) {
    return parseInt(t, 10);
  },
  height: function(t) {
    return parseInt(t, 10);
  },
  bandwidth: function(t) {
    return parseInt(t, 10);
  },
  startNumber: function(t) {
    return parseInt(t, 10);
  },
  timescale: function(t) {
    return parseInt(t, 10);
  },
  presentationTimeOffset: function(t) {
    return parseInt(t, 10);
  },
  duration: function(t) {
    var i = parseInt(t, 10);
    return isNaN(i) ? Dn(t) : i;
  },
  d: function(t) {
    return parseInt(t, 10);
  },
  t: function(t) {
    return parseInt(t, 10);
  },
  r: function(t) {
    return parseInt(t, 10);
  },
  DEFAULT: function(t) {
    return t;
  }
}, Zt = function(t) {
  return t && t.attributes ? Pm(t.attributes).reduce(function(i, r) {
    var e = Hf[r.name] || Hf.DEFAULT;
    return i[r.name] = e(r.value), i;
  }, {}) : {};
}, gT = {
  "urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b": "org.w3.clearkey",
  "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed": "com.widevine.alpha",
  "urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95": "com.microsoft.playready",
  "urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb": "com.adobe.primetime"
}, Vo = function(t, i) {
  return i.length ? Uo(t.map(function(r) {
    return i.map(function(e) {
      return Mo(r, Qd(e));
    });
  })) : t;
}, Yd = function(t) {
  var i = Rt(t, "SegmentTemplate")[0], r = Rt(t, "SegmentList")[0], e = r && Rt(r, "SegmentURL").map(function(f) {
    return di({
      tag: "SegmentURL"
    }, Zt(f));
  }), a = Rt(t, "SegmentBase")[0], s = r || i, o = s && Rt(s, "SegmentTimeline")[0], u = r || a || i, l = u && Rt(u, "Initialization")[0], d = i && Zt(i);
  d && l ? d.initialization = l && Zt(l) : d && d.initialization && (d.initialization = {
    sourceURL: d.initialization
  });
  var h = {
    template: d,
    segmentTimeline: o && Rt(o, "S").map(function(f) {
      return Zt(f);
    }),
    list: r && di(Zt(r), {
      segmentUrls: e,
      initialization: Zt(l)
    }),
    base: a && di(Zt(a), {
      initialization: Zt(l)
    })
  };
  return Object.keys(h).forEach(function(f) {
    h[f] || delete h[f];
  }), h;
}, vT = function(t, i, r) {
  return function(e) {
    var a = Rt(e, "BaseURL"), s = Vo(i, a), o = di(t, Zt(e)), u = Yd(e);
    return s.map(function(l) {
      return {
        segmentInfo: di(r, u),
        attributes: di(o, {
          baseUrl: l
        })
      };
    });
  };
}, _T = function(t) {
  return t.reduce(function(i, r) {
    var e = Zt(r);
    e.schemeIdUri && (e.schemeIdUri = e.schemeIdUri.toLowerCase());
    var a = gT[e.schemeIdUri];
    if (a) {
      i[a] = {
        attributes: e
      };
      var s = Rt(r, "cenc:pssh")[0];
      if (s) {
        var o = Qd(s);
        i[a].pssh = o && Qp(o);
      }
    }
    return i;
  }, {});
}, yT = function(t) {
  if (t.schemeIdUri === "urn:scte:dash:cc:cea-608:2015") {
    var i = typeof t.value != "string" ? [] : t.value.split(";");
    return i.map(function(e) {
      var a, s;
      if (s = e, /^CC\d=/.test(e)) {
        var o = e.split("=");
        a = o[0], s = o[1];
      } else
        /^CC\d$/.test(e) && (a = e);
      return {
        channel: a,
        language: s
      };
    });
  } else if (t.schemeIdUri === "urn:scte:dash:cc:cea-708:2015") {
    var r = typeof t.value != "string" ? [] : t.value.split(";");
    return r.map(function(e) {
      var a = {
        channel: void 0,
        language: void 0,
        aspectRatio: 1,
        easyReader: 0,
        "3D": 0
      };
      if (/=/.test(e)) {
        var s = e.split("="), o = s[0], u = s[1], l = u === void 0 ? "" : u;
        a.channel = o, a.language = e, l.split(",").forEach(function(d) {
          var h = d.split(":"), f = h[0], _ = h[1];
          f === "lang" ? a.language = _ : f === "er" ? a.easyReader = Number(_) : f === "war" ? a.aspectRatio = Number(_) : f === "3D" && (a["3D"] = Number(_));
        });
      } else
        a.language = e;
      return a.channel && (a.channel = "SERVICE" + a.channel), a;
    });
  }
}, TT = function(t, i, r) {
  return function(e) {
    var a = Zt(e), s = Vo(i, Rt(e, "BaseURL")), o = Rt(e, "Role")[0], u = {
      role: Zt(o)
    }, l = di(t, a, u), d = Rt(e, "Accessibility")[0], h = yT(Zt(d));
    h && (l = di(l, {
      captionServices: h
    }));
    var f = Rt(e, "Label")[0];
    if (f && f.childNodes.length) {
      var _ = f.childNodes[0].nodeValue.trim();
      l = di(l, {
        label: _
      });
    }
    var v = _T(Rt(e, "ContentProtection"));
    Object.keys(v).length && (l = di(l, {
      contentProtection: v
    }));
    var y = Yd(e), T = Rt(e, "Representation"), I = di(r, y);
    return Uo(T.map(vT(l, s, I)));
  };
}, bT = function(t, i) {
  return function(r, e) {
    var a = Vo(i, Rt(r.node, "BaseURL")), s = di(t, {
      periodStart: r.attributes.start
    });
    typeof r.attributes.duration == "number" && (s.periodDuration = r.attributes.duration);
    var o = Rt(r.node, "AdaptationSet"), u = Yd(r.node);
    return Uo(o.map(TT(s, a, u)));
  };
}, ST = function(t) {
  var i = t.attributes, r = t.priorPeriodAttributes, e = t.mpdType;
  return typeof i.start == "number" ? i.start : r && typeof r.start == "number" && typeof r.duration == "number" ? r.start + r.duration : !r && e === "static" ? 0 : null;
}, ET = function(t, i) {
  i === void 0 && (i = {});
  var r = i, e = r.manifestUri, a = e === void 0 ? "" : e, s = r.NOW, o = s === void 0 ? Date.now() : s, u = r.clientOffset, l = u === void 0 ? 0 : u, d = Rt(t, "Period");
  if (!d.length)
    throw new Error(Kn.INVALID_NUMBER_OF_PERIOD);
  var h = Rt(t, "Location"), f = Zt(t), _ = Vo([a], Rt(t, "BaseURL"));
  f.type = f.type || "static", f.sourceDuration = f.mediaPresentationDuration || 0, f.NOW = o, f.clientOffset = l, h.length && (f.locations = h.map(Qd));
  var v = [];
  return d.forEach(function(y, T) {
    var I = Zt(y), V = v[T - 1];
    I.start = ST({
      attributes: I,
      priorPeriodAttributes: V ? V.attributes : null,
      mpdType: f.type
    }), v.push({
      node: y,
      attributes: I
    });
  }), {
    locations: f.locations,
    representationInfo: Uo(v.map(bT(f, _)))
  };
}, Om = function(t) {
  if (t === "")
    throw new Error(Kn.DASH_EMPTY_MANIFEST);
  var i = new M0(), r, e;
  try {
    r = i.parseFromString(t, "application/xml"), e = r && r.documentElement.tagName === "MPD" ? r.documentElement : null;
  } catch {
  }
  if (!e || e && e.getElementsByTagName("parsererror").length > 0)
    throw new Error(Kn.DASH_INVALID_XML);
  return e;
}, xT = function(t) {
  var i = Rt(t, "UTCTiming")[0];
  if (!i)
    return null;
  var r = Zt(i);
  switch (r.schemeIdUri) {
    case "urn:mpeg:dash:utc:http-head:2014":
    case "urn:mpeg:dash:utc:http-head:2012":
      r.method = "HEAD";
      break;
    case "urn:mpeg:dash:utc:http-xsdate:2014":
    case "urn:mpeg:dash:utc:http-iso:2014":
    case "urn:mpeg:dash:utc:http-xsdate:2012":
    case "urn:mpeg:dash:utc:http-iso:2012":
      r.method = "GET";
      break;
    case "urn:mpeg:dash:utc:direct:2014":
    case "urn:mpeg:dash:utc:direct:2012":
      r.method = "DIRECT", r.value = Date.parse(r.value);
      break;
    case "urn:mpeg:dash:utc:http-ntp:2014":
    case "urn:mpeg:dash:utc:ntp:2014":
    case "urn:mpeg:dash:utc:sntp:2014":
    default:
      throw new Error(Kn.UNSUPPORTED_UTC_TIMING_SCHEME);
  }
  return r;
}, wT = function(t, i) {
  i === void 0 && (i = {});
  var r = ET(Om(t), i), e = pT(r.representationInfo);
  return aT({
    dashPlaylists: e,
    locations: r.locations,
    sidxMapping: i.sidxMapping,
    previousManifest: i.previousManifest
  });
}, AT = function(t) {
  return xT(Om(t));
}, Rm = Math.pow(2, 32), CT = function(n) {
  var t = new DataView(n.buffer, n.byteOffset, n.byteLength), i;
  return t.getBigUint64 ? (i = t.getBigUint64(0), i < Number.MAX_SAFE_INTEGER ? Number(i) : i) : t.getUint32(0) * Rm + t.getUint32(4);
}, kT = {
  getUint64: CT,
  MAX_UINT32: Rm
}, Wf = kT.getUint64, PT = function(n) {
  var t = new DataView(n.buffer, n.byteOffset, n.byteLength), i = {
    version: n[0],
    flags: new Uint8Array(n.subarray(1, 4)),
    references: [],
    referenceId: t.getUint32(4),
    timescale: t.getUint32(8)
  }, r = 12;
  i.version === 0 ? (i.earliestPresentationTime = t.getUint32(r), i.firstOffset = t.getUint32(r + 4), r += 8) : (i.earliestPresentationTime = Wf(n.subarray(r)), i.firstOffset = Wf(n.subarray(r + 8)), r += 16), r += 2;
  var e = t.getUint16(r);
  for (r += 2; e > 0; r += 12, e--)
    i.references.push({
      referenceType: (n[r] & 128) >>> 7,
      referencedSize: t.getUint32(r) & 2147483647,
      subsegmentDuration: t.getUint32(r + 4),
      startsWithSap: !!(n[r + 8] & 128),
      sapType: (n[r + 8] & 112) >>> 4,
      sapDeltaTime: t.getUint32(r + 8) & 268435455
    });
  return i;
}, IT = PT, DT = Oe([73, 68, 51]), LT = function(t, i) {
  i === void 0 && (i = 0), t = Oe(t);
  var r = t[i + 5], e = t[i + 6] << 21 | t[i + 7] << 14 | t[i + 8] << 7 | t[i + 9], a = (r & 16) >> 4;
  return a ? e + 20 : e + 10;
}, Na = function n(t, i) {
  return i === void 0 && (i = 0), t = Oe(t), t.length - i < 10 || !At(t, DT, {
    offset: i
  }) ? i : (i += LT(t, i), n(t, i));
}, Gf = function(t) {
  return typeof t == "string" ? tm(t) : t;
}, OT = function(t) {
  return Array.isArray(t) ? t.map(function(i) {
    return Gf(i);
  }) : [Gf(t)];
}, RT = function n(t, i, r) {
  r === void 0 && (r = !1), i = OT(i), t = Oe(t);
  var e = [];
  if (!i.length)
    return e;
  for (var a = 0; a < t.length; ) {
    var s = (t[a] << 24 | t[a + 1] << 16 | t[a + 2] << 8 | t[a + 3]) >>> 0, o = t.subarray(a + 4, a + 8);
    if (s === 0)
      break;
    var u = a + s;
    if (u > t.length) {
      if (r)
        break;
      u = t.length;
    }
    var l = t.subarray(a + 8, u);
    At(o, i[0]) && (i.length === 1 ? e.push(l) : e.push.apply(e, n(l, i.slice(1), r))), a = u;
  }
  return e;
}, Bs = {
  EBML: Oe([26, 69, 223, 163]),
  DocType: Oe([66, 130]),
  Segment: Oe([24, 83, 128, 103]),
  SegmentInfo: Oe([21, 73, 169, 102]),
  Tracks: Oe([22, 84, 174, 107]),
  Track: Oe([174]),
  TrackNumber: Oe([215]),
  DefaultDuration: Oe([35, 227, 131]),
  TrackEntry: Oe([174]),
  TrackType: Oe([131]),
  FlagDefault: Oe([136]),
  CodecID: Oe([134]),
  CodecPrivate: Oe([99, 162]),
  VideoTrack: Oe([224]),
  AudioTrack: Oe([225]),
  Cluster: Oe([31, 67, 182, 117]),
  Timestamp: Oe([231]),
  TimestampScale: Oe([42, 215, 177]),
  BlockGroup: Oe([160]),
  BlockDuration: Oe([155]),
  Block: Oe([161]),
  SimpleBlock: Oe([163])
}, nd = [128, 64, 32, 16, 8, 4, 2, 1], NT = function(t) {
  for (var i = 1, r = 0; r < nd.length && !(t & nd[r]); r++)
    i++;
  return i;
}, co = function(t, i, r, e) {
  r === void 0 && (r = !0), e === void 0 && (e = !1);
  var a = NT(t[i]), s = t.subarray(i, i + a);
  return r && (s = Array.prototype.slice.call(t, i, i + a), s[0] ^= nd[a - 1]), {
    length: a,
    value: l0(s, {
      signed: e
    }),
    bytes: s
  };
}, $f = function n(t) {
  return typeof t == "string" ? t.match(/.{1,2}/g).map(function(i) {
    return n(i);
  }) : typeof t == "number" ? d0(t) : t;
}, MT = function(t) {
  return Array.isArray(t) ? t.map(function(i) {
    return $f(i);
  }) : [$f(t)];
}, FT = function n(t, i, r) {
  if (r >= i.length)
    return i.length;
  var e = co(i, r, !1);
  if (At(t.bytes, e.bytes))
    return r;
  var a = co(i, r + e.length);
  return n(t, i, r + a.length + a.value + e.length);
}, zf = function n(t, i) {
  i = MT(i), t = Oe(t);
  var r = [];
  if (!i.length)
    return r;
  for (var e = 0; e < t.length; ) {
    var a = co(t, e, !1), s = co(t, e + a.length), o = e + a.length + s.length;
    s.value === 127 && (s.value = FT(a, t, o), s.value !== t.length && (s.value -= o));
    var u = o + s.value > t.length ? t.length : o + s.value, l = t.subarray(o, u);
    At(i[0], a.bytes) && (i.length === 1 ? r.push(l) : r = r.concat(n(l, i.slice(1))));
    var d = a.length + s.length + l.length;
    e += d;
  }
  return r;
}, BT = Oe([0, 0, 0, 1]), UT = Oe([0, 0, 1]), qT = Oe([0, 0, 3]), VT = function(t) {
  for (var i = [], r = 1; r < t.length - 2; )
    At(t.subarray(r, r + 3), qT) && (i.push(r + 2), r++), r++;
  if (i.length === 0)
    return t;
  var e = t.length - i.length, a = new Uint8Array(e), s = 0;
  for (r = 0; r < e; s++, r++)
    s === i[0] && (s++, i.shift()), a[r] = t[s];
  return a;
}, Nm = function(t, i, r, e) {
  e === void 0 && (e = 1 / 0), t = Oe(t), r = [].concat(r);
  for (var a = 0, s, o = 0; a < t.length && (o < e || s); ) {
    var u = void 0;
    if (At(t.subarray(a), BT) ? u = 4 : At(t.subarray(a), UT) && (u = 3), !u) {
      a++;
      continue;
    }
    if (o++, s)
      return VT(t.subarray(s, a));
    var l = void 0;
    i === "h264" ? l = t[a + u] & 31 : i === "h265" && (l = t[a + u] >> 1 & 63), r.indexOf(l) !== -1 && (s = a + u), a += u + (i === "h264" ? 1 : 2);
  }
  return t.subarray(0, 0);
}, jT = function(t, i, r) {
  return Nm(t, "h264", i, r);
}, HT = function(t, i, r) {
  return Nm(t, "h265", i, r);
}, oi = {
  webm: Oe([119, 101, 98, 109]),
  matroska: Oe([109, 97, 116, 114, 111, 115, 107, 97]),
  flac: Oe([102, 76, 97, 67]),
  ogg: Oe([79, 103, 103, 83]),
  ac3: Oe([11, 119]),
  riff: Oe([82, 73, 70, 70]),
  avi: Oe([65, 86, 73]),
  wav: Oe([87, 65, 86, 69]),
  "3gp": Oe([102, 116, 121, 112, 51, 103]),
  mp4: Oe([102, 116, 121, 112]),
  fmp4: Oe([115, 116, 121, 112]),
  mov: Oe([102, 116, 121, 112, 113, 116]),
  moov: Oe([109, 111, 111, 118]),
  moof: Oe([109, 111, 111, 102])
}, Xn = {
  aac: function(t) {
    var i = Na(t);
    return At(t, [255, 16], {
      offset: i,
      mask: [255, 22]
    });
  },
  mp3: function(t) {
    var i = Na(t);
    return At(t, [255, 2], {
      offset: i,
      mask: [255, 6]
    });
  },
  webm: function(t) {
    var i = zf(t, [Bs.EBML, Bs.DocType])[0];
    return At(i, oi.webm);
  },
  mkv: function(t) {
    var i = zf(t, [Bs.EBML, Bs.DocType])[0];
    return At(i, oi.matroska);
  },
  mp4: function(t) {
    if (Xn["3gp"](t) || Xn.mov(t))
      return !1;
    if (At(t, oi.mp4, {
      offset: 4
    }) || At(t, oi.fmp4, {
      offset: 4
    }) || At(t, oi.moof, {
      offset: 4
    }) || At(t, oi.moov, {
      offset: 4
    }))
      return !0;
  },
  mov: function(t) {
    return At(t, oi.mov, {
      offset: 4
    });
  },
  "3gp": function(t) {
    return At(t, oi["3gp"], {
      offset: 4
    });
  },
  ac3: function(t) {
    var i = Na(t);
    return At(t, oi.ac3, {
      offset: i
    });
  },
  ts: function(t) {
    if (t.length < 189 && t.length >= 1)
      return t[0] === 71;
    for (var i = 0; i + 188 < t.length && i < 188; ) {
      if (t[i] === 71 && t[i + 188] === 71)
        return !0;
      i += 1;
    }
    return !1;
  },
  flac: function(t) {
    var i = Na(t);
    return At(t, oi.flac, {
      offset: i
    });
  },
  ogg: function(t) {
    return At(t, oi.ogg);
  },
  avi: function(t) {
    return At(t, oi.riff) && At(t, oi.avi, {
      offset: 8
    });
  },
  wav: function(t) {
    return At(t, oi.riff) && At(t, oi.wav, {
      offset: 8
    });
  },
  h264: function(t) {
    return jT(t, 7, 3).length;
  },
  h265: function(t) {
    return HT(t, [32, 33], 3).length;
  }
}, ad = Object.keys(Xn).filter(function(n) {
  return n !== "ts" && n !== "h264" && n !== "h265";
}).concat(["ts", "h264", "h265"]);
ad.forEach(function(n) {
  var t = Xn[n];
  Xn[n] = function(i) {
    return t(Oe(i));
  };
});
var WT = Xn, Jd = function(t) {
  t = Oe(t);
  for (var i = 0; i < ad.length; i++) {
    var r = ad[i];
    if (WT[r](t))
      return r;
  }
  return "";
}, GT = function(t) {
  return RT(t, ["moof"]).length > 0;
}, Zd = 9e4, ec, tc, jo, ic, Mm, Fm, Bm;
ec = function(n) {
  return n * Zd;
};
tc = function(n, t) {
  return n * t;
};
jo = function(n) {
  return n / Zd;
};
ic = function(n, t) {
  return n / t;
};
Mm = function(n, t) {
  return ec(ic(n, t));
};
Fm = function(n, t) {
  return tc(jo(n), t);
};
Bm = function(n, t, i) {
  return jo(i ? n : n - t);
};
var fo = {
  ONE_SECOND_IN_TS: Zd,
  secondsToVideoTs: ec,
  secondsToAudioTs: tc,
  videoTsToSeconds: jo,
  audioTsToSeconds: ic,
  audioTsToVideoTs: Mm,
  videoTsToAudioTs: Fm,
  metadataTsToSeconds: Bm
};
/**
 * @license
 * Video.js 7.20.2 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */
var Um = "7.20.2", pr = {}, Rr = function(t, i) {
  return pr[t] = pr[t] || [], i && (pr[t] = pr[t].concat(i)), pr[t];
}, $T = function(t, i) {
  Rr(t, i);
}, qm = function(t, i) {
  var r = Rr(t).indexOf(i);
  return r <= -1 ? !1 : (pr[t] = pr[t].slice(), pr[t].splice(r, 1), !0);
}, zT = function(t, i) {
  Rr(t, [].concat(i).map(function(r) {
    var e = function a() {
      return qm(t, a), r.apply(void 0, arguments);
    };
    return e;
  }));
}, ho = {
  prefixed: !0
}, Zs = [
  ["requestFullscreen", "exitFullscreen", "fullscreenElement", "fullscreenEnabled", "fullscreenchange", "fullscreenerror", "fullscreen"],
  ["webkitRequestFullscreen", "webkitExitFullscreen", "webkitFullscreenElement", "webkitFullscreenEnabled", "webkitfullscreenchange", "webkitfullscreenerror", "-webkit-full-screen"],
  ["mozRequestFullScreen", "mozCancelFullScreen", "mozFullScreenElement", "mozFullScreenEnabled", "mozfullscreenchange", "mozfullscreenerror", "-moz-full-screen"],
  ["msRequestFullscreen", "msExitFullscreen", "msFullscreenElement", "msFullscreenEnabled", "MSFullscreenChange", "MSFullscreenError", "-ms-fullscreen"]
], Kf = Zs[0], Ma;
for (var Us = 0; Us < Zs.length; Us++)
  if (Zs[Us][1] in Te) {
    Ma = Zs[Us];
    break;
  }
if (Ma) {
  for (var qs = 0; qs < Ma.length; qs++)
    ho[Kf[qs]] = Ma[qs];
  ho.prefixed = Ma[0] !== Kf[0];
}
var yi = [], KT = function(t, i) {
  return function(r, e, a) {
    var s = i.levels[e], o = new RegExp("^(" + s + ")$");
    if (r !== "log" && a.unshift(r.toUpperCase() + ":"), a.unshift(t + ":"), yi) {
      yi.push([].concat(a));
      var u = yi.length - 1e3;
      yi.splice(0, u > 0 ? u : 0);
    }
    if (!!B.console) {
      var l = B.console[r];
      !l && r === "debug" && (l = B.console.info || B.console.log), !(!l || !s || !o.test(r)) && l[Array.isArray(a) ? "apply" : "call"](B.console, a);
    }
  };
};
function Vm(n) {
  var t = "info", i, r = function() {
    for (var a = arguments.length, s = new Array(a), o = 0; o < a; o++)
      s[o] = arguments[o];
    i("log", t, s);
  };
  return i = KT(n, r), r.createLogger = function(e) {
    return Vm(n + ": " + e);
  }, r.levels = {
    all: "debug|log|warn|error",
    off: "",
    debug: "debug|log|warn|error",
    info: "log|warn|error",
    warn: "warn|error",
    error: "error",
    DEFAULT: t
  }, r.level = function(e) {
    if (typeof e == "string") {
      if (!r.levels.hasOwnProperty(e))
        throw new Error('"' + e + '" in not a valid log level');
      t = e;
    }
    return t;
  }, r.history = function() {
    return yi ? [].concat(yi) : [];
  }, r.history.filter = function(e) {
    return (yi || []).filter(function(a) {
      return new RegExp(".*" + e + ".*").test(a[0]);
    });
  }, r.history.clear = function() {
    yi && (yi.length = 0);
  }, r.history.disable = function() {
    yi !== null && (yi.length = 0, yi = null);
  }, r.history.enable = function() {
    yi === null && (yi = []);
  }, r.error = function() {
    for (var e = arguments.length, a = new Array(e), s = 0; s < e; s++)
      a[s] = arguments[s];
    return i("error", t, a);
  }, r.warn = function() {
    for (var e = arguments.length, a = new Array(e), s = 0; s < e; s++)
      a[s] = arguments[s];
    return i("warn", t, a);
  }, r.debug = function() {
    for (var e = arguments.length, a = new Array(e), s = 0; s < e; s++)
      a[s] = arguments[s];
    return i("debug", t, a);
  }, r;
}
var Ze = Vm("VIDEOJS"), jm = Ze.createLogger, XT = Object.prototype.toString, Hm = function(t) {
  return br(t) ? Object.keys(t) : [];
};
function jn(n, t) {
  Hm(n).forEach(function(i) {
    return t(n[i], i);
  });
}
function QT(n, t, i) {
  return i === void 0 && (i = 0), Hm(n).reduce(function(r, e) {
    return t(r, n[e], e);
  }, i);
}
function It(n) {
  for (var t = arguments.length, i = new Array(t > 1 ? t - 1 : 0), r = 1; r < t; r++)
    i[r - 1] = arguments[r];
  return Object.assign ? Ri.apply(void 0, [n].concat(i)) : (i.forEach(function(e) {
    !e || jn(e, function(a, s) {
      n[s] = a;
    });
  }), n);
}
function br(n) {
  return !!n && typeof n == "object";
}
function Ya(n) {
  return br(n) && XT.call(n) === "[object Object]" && n.constructor === Object;
}
function Ja(n, t) {
  if (!n || !t)
    return "";
  if (typeof B.getComputedStyle == "function") {
    var i;
    try {
      i = B.getComputedStyle(n);
    } catch {
      return "";
    }
    return i ? i.getPropertyValue(t) || i[t] : "";
  }
  return "";
}
var zt = B.navigator && B.navigator.userAgent || "", Xf = /AppleWebKit\/([\d.]+)/i.exec(zt), YT = Xf ? parseFloat(Xf.pop()) : null, Wm = /iPod/i.test(zt), JT = function() {
  var n = zt.match(/OS (\d+)_/i);
  return n && n[1] ? n[1] : null;
}(), Er = /Android/i.test(zt), rc = function() {
  var n = zt.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);
  if (!n)
    return null;
  var t = n[1] && parseFloat(n[1]), i = n[2] && parseFloat(n[2]);
  return t && i ? parseFloat(n[1] + "." + n[2]) : t || null;
}(), Gm = Er && rc < 5 && YT < 537, $m = /Firefox/i.test(zt), us = /Edg/i.test(zt), xr = !us && (/Chrome/i.test(zt) || /CriOS/i.test(zt)), zm = function() {
  var n = zt.match(/(Chrome|CriOS)\/(\d+)/);
  return n && n[2] ? parseFloat(n[2]) : null;
}(), ls = function() {
  var n = /MSIE\s(\d+)\.\d/.exec(zt), t = n && parseFloat(n[1]);
  return !t && /Trident\/7.0/i.test(zt) && /rv:11.0/.test(zt) && (t = 11), t;
}(), nc = /Safari/i.test(zt) && !xr && !Er && !us, Km = /Windows/i.test(zt), Qn = Boolean(ra() && ("ontouchstart" in B || B.navigator.maxTouchPoints || B.DocumentTouch && B.document instanceof B.DocumentTouch)), ac = /iPad/i.test(zt) || nc && Qn && !/iPhone/i.test(zt), sc = /iPhone/i.test(zt) && !ac, hi = sc || ac || Wm, Ho = (nc || hi) && !xr, ZT = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  IS_IPOD: Wm,
  IOS_VERSION: JT,
  IS_ANDROID: Er,
  ANDROID_VERSION: rc,
  IS_NATIVE_ANDROID: Gm,
  IS_FIREFOX: $m,
  IS_EDGE: us,
  IS_CHROME: xr,
  CHROME_VERSION: zm,
  IE_VERSION: ls,
  IS_SAFARI: nc,
  IS_WINDOWS: Km,
  TOUCH_ENABLED: Qn,
  IS_IPAD: ac,
  IS_IPHONE: sc,
  IS_IOS: hi,
  IS_ANY_SAFARI: Ho
});
function Qf(n) {
  return typeof n == "string" && Boolean(n.trim());
}
function Xm(n) {
  if (n.indexOf(" ") >= 0)
    throw new Error("class has illegal whitespace characters");
}
function eb(n) {
  return new RegExp("(^|\\s)" + n + "($|\\s)");
}
function ra() {
  return Te === B.document;
}
function na(n) {
  return br(n) && n.nodeType === 1;
}
function Qm() {
  try {
    return B.parent !== B.self;
  } catch {
    return !0;
  }
}
function Ym(n) {
  return function(t, i) {
    if (!Qf(t))
      return Te[n](null);
    Qf(i) && (i = Te.querySelector(i));
    var r = na(i) ? i : Te;
    return r[n] && r[n](t);
  };
}
function nt(n, t, i, r) {
  n === void 0 && (n = "div"), t === void 0 && (t = {}), i === void 0 && (i = {});
  var e = Te.createElement(n);
  return Object.getOwnPropertyNames(t).forEach(function(a) {
    var s = t[a];
    a.indexOf("aria-") !== -1 || a === "role" || a === "type" ? (Ze.warn(`Setting attributes in the second argument of createEl()
has been deprecated. Use the third argument instead.
` + ("createEl(type, properties, attributes). Attempting to set " + a + " to " + s + ".")), e.setAttribute(a, s)) : a === "textContent" ? dn(e, s) : (e[a] !== s || a === "tabIndex") && (e[a] = s);
  }), Object.getOwnPropertyNames(i).forEach(function(a) {
    e.setAttribute(a, i[a]);
  }), r && uc(e, r), e;
}
function dn(n, t) {
  return typeof n.textContent > "u" ? n.innerText = t : n.textContent = t, n;
}
function sd(n, t) {
  t.firstChild ? t.insertBefore(n, t.firstChild) : t.appendChild(n);
}
function tn(n, t) {
  return Xm(t), n.classList ? n.classList.contains(t) : eb(t).test(n.className);
}
function vr(n, t) {
  return n.classList ? n.classList.add(t) : tn(n, t) || (n.className = (n.className + " " + t).trim()), n;
}
function ds(n, t) {
  return n ? (n.classList ? n.classList.remove(t) : (Xm(t), n.className = n.className.split(/\s+/).filter(function(i) {
    return i !== t;
  }).join(" ")), n) : (Ze.warn("removeClass was called with an element that doesn't exist"), null);
}
function Jm(n, t, i) {
  var r = tn(n, t);
  if (typeof i == "function" && (i = i(n, t)), typeof i != "boolean" && (i = !r), i !== r)
    return i ? vr(n, t) : ds(n, t), n;
}
function Zm(n, t) {
  Object.getOwnPropertyNames(t).forEach(function(i) {
    var r = t[i];
    r === null || typeof r > "u" || r === !1 ? n.removeAttribute(i) : n.setAttribute(i, r === !0 ? "" : r);
  });
}
function hr(n) {
  var t = {}, i = ",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";
  if (n && n.attributes && n.attributes.length > 0)
    for (var r = n.attributes, e = r.length - 1; e >= 0; e--) {
      var a = r[e].name, s = r[e].value;
      (typeof n[a] == "boolean" || i.indexOf("," + a + ",") !== -1) && (s = s !== null), t[a] = s;
    }
  return t;
}
function eg(n, t) {
  return n.getAttribute(t);
}
function Yn(n, t, i) {
  n.setAttribute(t, i);
}
function Wo(n, t) {
  n.removeAttribute(t);
}
function tg() {
  Te.body.focus(), Te.onselectstart = function() {
    return !1;
  };
}
function ig() {
  Te.onselectstart = function() {
    return !0;
  };
}
function Jn(n) {
  if (n && n.getBoundingClientRect && n.parentNode) {
    var t = n.getBoundingClientRect(), i = {};
    return ["bottom", "height", "left", "right", "top", "width"].forEach(function(r) {
      t[r] !== void 0 && (i[r] = t[r]);
    }), i.height || (i.height = parseFloat(Ja(n, "height"))), i.width || (i.width = parseFloat(Ja(n, "width"))), i;
  }
}
function Za(n) {
  if (!n || n && !n.offsetParent)
    return {
      left: 0,
      top: 0,
      width: 0,
      height: 0
    };
  for (var t = n.offsetWidth, i = n.offsetHeight, r = 0, e = 0; n.offsetParent && n !== Te[ho.fullscreenElement]; )
    r += n.offsetLeft, e += n.offsetTop, n = n.offsetParent;
  return {
    left: r,
    top: e,
    width: t,
    height: i
  };
}
function Go(n, t) {
  var i = {
    x: 0,
    y: 0
  };
  if (hi)
    for (var r = n; r && r.nodeName.toLowerCase() !== "html"; ) {
      var e = Ja(r, "transform");
      if (/^matrix/.test(e)) {
        var a = e.slice(7, -1).split(/,\s/).map(Number);
        i.x += a[4], i.y += a[5];
      } else if (/^matrix3d/.test(e)) {
        var s = e.slice(9, -1).split(/,\s/).map(Number);
        i.x += s[12], i.y += s[13];
      }
      r = r.parentNode;
    }
  var o = {}, u = Za(t.target), l = Za(n), d = l.width, h = l.height, f = t.offsetY - (l.top - u.top), _ = t.offsetX - (l.left - u.left);
  return t.changedTouches && (_ = t.changedTouches[0].pageX - l.left, f = t.changedTouches[0].pageY + l.top, hi && (_ -= i.x, f -= i.y)), o.y = 1 - Math.max(0, Math.min(1, f / h)), o.x = Math.max(0, Math.min(1, _ / d)), o;
}
function rg(n) {
  return br(n) && n.nodeType === 3;
}
function oc(n) {
  for (; n.firstChild; )
    n.removeChild(n.firstChild);
  return n;
}
function ng(n) {
  return typeof n == "function" && (n = n()), (Array.isArray(n) ? n : [n]).map(function(t) {
    if (typeof t == "function" && (t = t()), na(t) || rg(t))
      return t;
    if (typeof t == "string" && /\S/.test(t))
      return Te.createTextNode(t);
  }).filter(function(t) {
    return t;
  });
}
function uc(n, t) {
  return ng(t).forEach(function(i) {
    return n.appendChild(i);
  }), n;
}
function ag(n, t) {
  return uc(oc(n), t);
}
function es(n) {
  return n.button === void 0 && n.buttons === void 0 || n.button === 0 && n.buttons === void 0 || n.type === "mouseup" && n.button === 0 && n.buttons === 0 ? !0 : !(n.button !== 0 || n.buttons !== 1);
}
var Nr = Ym("querySelector"), sg = Ym("querySelectorAll"), og = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  isReal: ra,
  isEl: na,
  isInFrame: Qm,
  createEl: nt,
  textContent: dn,
  prependTo: sd,
  hasClass: tn,
  addClass: vr,
  removeClass: ds,
  toggleClass: Jm,
  setAttributes: Zm,
  getAttributes: hr,
  getAttribute: eg,
  setAttribute: Yn,
  removeAttribute: Wo,
  blockTextSelection: tg,
  unblockTextSelection: ig,
  getBoundingClientRect: Jn,
  findPosition: Za,
  getPointerPosition: Go,
  isTextNode: rg,
  emptyEl: oc,
  normalizeContent: ng,
  appendContent: uc,
  insertContent: ag,
  isSingleLeftClick: es,
  $: Nr,
  $$: sg
}), ug = !1, od, tb = function() {
  if (od.options.autoSetup !== !1) {
    var t = Array.prototype.slice.call(Te.getElementsByTagName("video")), i = Array.prototype.slice.call(Te.getElementsByTagName("audio")), r = Array.prototype.slice.call(Te.getElementsByTagName("video-js")), e = t.concat(i, r);
    if (e && e.length > 0)
      for (var a = 0, s = e.length; a < s; a++) {
        var o = e[a];
        if (o && o.getAttribute) {
          if (o.player === void 0) {
            var u = o.getAttribute("data-setup");
            u !== null && od(o);
          }
        } else {
          ud(1);
          break;
        }
      }
    else
      ug || ud(1);
  }
};
function ud(n, t) {
  !ra() || (t && (od = t), B.setTimeout(tb, n));
}
function ld() {
  ug = !0, B.removeEventListener("load", ld);
}
ra() && (Te.readyState === "complete" ? ld() : B.addEventListener("load", ld));
var lg = function(t) {
  var i = Te.createElement("style");
  return i.className = t, i;
}, dg = function(t, i) {
  t.styleSheet ? t.styleSheet.cssText = i : t.textContent = i;
}, ib = 3, rb = ib;
function wr() {
  return rb++;
}
var cg;
B.WeakMap || (cg = /* @__PURE__ */ function() {
  function n() {
    this.vdata = "vdata" + Math.floor(B.performance && B.performance.now() || Date.now()), this.data = {};
  }
  var t = n.prototype;
  return t.set = function(r, e) {
    var a = r[this.vdata] || wr();
    return r[this.vdata] || (r[this.vdata] = a), this.data[a] = e, this;
  }, t.get = function(r) {
    var e = r[this.vdata];
    if (e)
      return this.data[e];
    Ze("We have no data for this element", r);
  }, t.has = function(r) {
    var e = r[this.vdata];
    return e in this.data;
  }, t.delete = function(r) {
    var e = r[this.vdata];
    e && (delete this.data[e], delete r[this.vdata]);
  }, n;
}());
var ci = B.WeakMap ? /* @__PURE__ */ new WeakMap() : new cg();
function Yf(n, t) {
  if (!!ci.has(n)) {
    var i = ci.get(n);
    i.handlers[t].length === 0 && (delete i.handlers[t], n.removeEventListener ? n.removeEventListener(t, i.dispatcher, !1) : n.detachEvent && n.detachEvent("on" + t, i.dispatcher)), Object.getOwnPropertyNames(i.handlers).length <= 0 && (delete i.handlers, delete i.dispatcher, delete i.disabled), Object.getOwnPropertyNames(i).length === 0 && ci.delete(n);
  }
}
function lc(n, t, i, r) {
  i.forEach(function(e) {
    n(t, e, r);
  });
}
function $o(n) {
  if (n.fixed_)
    return n;
  function t() {
    return !0;
  }
  function i() {
    return !1;
  }
  if (!n || !n.isPropagationStopped || !n.isImmediatePropagationStopped) {
    var r = n || B.event;
    n = {};
    for (var e in r)
      e !== "layerX" && e !== "layerY" && e !== "keyLocation" && e !== "webkitMovementX" && e !== "webkitMovementY" && e !== "path" && (e === "returnValue" && r.preventDefault || (n[e] = r[e]));
    if (n.target || (n.target = n.srcElement || Te), n.relatedTarget || (n.relatedTarget = n.fromElement === n.target ? n.toElement : n.fromElement), n.preventDefault = function() {
      r.preventDefault && r.preventDefault(), n.returnValue = !1, r.returnValue = !1, n.defaultPrevented = !0;
    }, n.defaultPrevented = !1, n.stopPropagation = function() {
      r.stopPropagation && r.stopPropagation(), n.cancelBubble = !0, r.cancelBubble = !0, n.isPropagationStopped = t;
    }, n.isPropagationStopped = i, n.stopImmediatePropagation = function() {
      r.stopImmediatePropagation && r.stopImmediatePropagation(), n.isImmediatePropagationStopped = t, n.stopPropagation();
    }, n.isImmediatePropagationStopped = i, n.clientX !== null && n.clientX !== void 0) {
      var a = Te.documentElement, s = Te.body;
      n.pageX = n.clientX + (a && a.scrollLeft || s && s.scrollLeft || 0) - (a && a.clientLeft || s && s.clientLeft || 0), n.pageY = n.clientY + (a && a.scrollTop || s && s.scrollTop || 0) - (a && a.clientTop || s && s.clientTop || 0);
    }
    n.which = n.charCode || n.keyCode, n.button !== null && n.button !== void 0 && (n.button = n.button & 1 ? 0 : n.button & 4 ? 1 : n.button & 2 ? 2 : 0);
  }
  return n.fixed_ = !0, n;
}
var Vs, nb = function() {
  if (typeof Vs != "boolean") {
    Vs = !1;
    try {
      var t = Object.defineProperty({}, "passive", {
        get: function() {
          Vs = !0;
        }
      });
      B.addEventListener("test", null, t), B.removeEventListener("test", null, t);
    } catch {
    }
  }
  return Vs;
}, ab = ["touchstart", "touchmove"];
function Pi(n, t, i) {
  if (Array.isArray(t))
    return lc(Pi, n, t, i);
  ci.has(n) || ci.set(n, {});
  var r = ci.get(n);
  if (r.handlers || (r.handlers = {}), r.handlers[t] || (r.handlers[t] = []), i.guid || (i.guid = wr()), r.handlers[t].push(i), r.dispatcher || (r.disabled = !1, r.dispatcher = function(a, s) {
    if (!r.disabled) {
      a = $o(a);
      var o = r.handlers[a.type];
      if (o)
        for (var u = o.slice(0), l = 0, d = u.length; l < d && !a.isImmediatePropagationStopped(); l++)
          try {
            u[l].call(n, a, s);
          } catch (h) {
            Ze.error(h);
          }
    }
  }), r.handlers[t].length === 1)
    if (n.addEventListener) {
      var e = !1;
      nb() && ab.indexOf(t) > -1 && (e = {
        passive: !0
      }), n.addEventListener(t, r.dispatcher, e);
    } else
      n.attachEvent && n.attachEvent("on" + t, r.dispatcher);
}
function ei(n, t, i) {
  if (!!ci.has(n)) {
    var r = ci.get(n);
    if (!!r.handlers) {
      if (Array.isArray(t))
        return lc(ei, n, t, i);
      var e = function(l, d) {
        r.handlers[d] = [], Yf(l, d);
      };
      if (t === void 0) {
        for (var a in r.handlers)
          Object.prototype.hasOwnProperty.call(r.handlers || {}, a) && e(n, a);
        return;
      }
      var s = r.handlers[t];
      if (!!s) {
        if (!i) {
          e(n, t);
          return;
        }
        if (i.guid)
          for (var o = 0; o < s.length; o++)
            s[o].guid === i.guid && s.splice(o--, 1);
        Yf(n, t);
      }
    }
  }
}
function aa(n, t, i) {
  var r = ci.has(n) ? ci.get(n) : {}, e = n.parentNode || n.ownerDocument;
  if (typeof t == "string" ? t = {
    type: t,
    target: n
  } : t.target || (t.target = n), t = $o(t), r.dispatcher && r.dispatcher.call(n, t, i), e && !t.isPropagationStopped() && t.bubbles === !0)
    aa.call(null, e, t, i);
  else if (!e && !t.defaultPrevented && t.target && t.target[t.type]) {
    ci.has(t.target) || ci.set(t.target, {});
    var a = ci.get(t.target);
    t.target[t.type] && (a.disabled = !0, typeof t.target[t.type] == "function" && t.target[t.type](), a.disabled = !1);
  }
  return !t.defaultPrevented;
}
function zo(n, t, i) {
  if (Array.isArray(t))
    return lc(zo, n, t, i);
  var r = function e() {
    ei(n, t, e), i.apply(this, arguments);
  };
  r.guid = i.guid = i.guid || wr(), Pi(n, t, r);
}
function fg(n, t, i) {
  var r = function e() {
    ei(n, t, e), i.apply(this, arguments);
  };
  r.guid = i.guid = i.guid || wr(), Pi(n, t, r);
}
var sb = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  fixEvent: $o,
  on: Pi,
  off: ei,
  trigger: aa,
  one: zo,
  any: fg
}), Wi = 30, Et = function(t, i, r) {
  i.guid || (i.guid = wr());
  var e = i.bind(t);
  return e.guid = r ? r + "_" + i.guid : i.guid, e;
}, Sr = function(t, i) {
  var r = B.performance.now(), e = function() {
    var s = B.performance.now();
    s - r >= i && (t.apply(void 0, arguments), r = s);
  };
  return e;
}, ob = function(t, i, r, e) {
  e === void 0 && (e = B);
  var a, s = function() {
    e.clearTimeout(a), a = null;
  }, o = function() {
    var l = this, d = arguments, h = function() {
      a = null, h = null, r || t.apply(l, d);
    };
    !a && r && t.apply(l, d), e.clearTimeout(a), a = e.setTimeout(h, i);
  };
  return o.cancel = s, o;
}, Xt = function() {
};
Xt.prototype.allowedEvents_ = {};
Xt.prototype.on = function(n, t) {
  var i = this.addEventListener;
  this.addEventListener = function() {
  }, Pi(this, n, t), this.addEventListener = i;
};
Xt.prototype.addEventListener = Xt.prototype.on;
Xt.prototype.off = function(n, t) {
  ei(this, n, t);
};
Xt.prototype.removeEventListener = Xt.prototype.off;
Xt.prototype.one = function(n, t) {
  var i = this.addEventListener;
  this.addEventListener = function() {
  }, zo(this, n, t), this.addEventListener = i;
};
Xt.prototype.any = function(n, t) {
  var i = this.addEventListener;
  this.addEventListener = function() {
  }, fg(this, n, t), this.addEventListener = i;
};
Xt.prototype.trigger = function(n) {
  var t = n.type || n;
  typeof n == "string" && (n = {
    type: t
  }), n = $o(n), this.allowedEvents_[t] && this["on" + t] && this["on" + t](n), aa(this, n);
};
Xt.prototype.dispatchEvent = Xt.prototype.trigger;
var Ca;
Xt.prototype.queueTrigger = function(n) {
  var t = this;
  Ca || (Ca = /* @__PURE__ */ new Map());
  var i = n.type || n, r = Ca.get(this);
  r || (r = /* @__PURE__ */ new Map(), Ca.set(this, r));
  var e = r.get(i);
  r.delete(i), B.clearTimeout(e);
  var a = B.setTimeout(function() {
    r.size === 0 && (r = null, Ca.delete(t)), t.trigger(n);
  }, 0);
  r.set(i, a);
};
var Ko = function(t) {
  return typeof t.name == "function" ? t.name() : typeof t.name == "string" ? t.name : t.name_ ? t.name_ : t.constructor && t.constructor.name ? t.constructor.name : typeof t;
}, _r = function(t) {
  return t instanceof Xt || !!t.eventBusEl_ && ["on", "one", "off", "trigger"].every(function(i) {
    return typeof t[i] == "function";
  });
}, ub = function(t, i) {
  _r(t) ? i() : (t.eventedCallbacks || (t.eventedCallbacks = []), t.eventedCallbacks.push(i));
}, dd = function(t) {
  return typeof t == "string" && /\S/.test(t) || Array.isArray(t) && !!t.length;
}, po = function(t, i, r) {
  if (!t || !t.nodeName && !_r(t))
    throw new Error("Invalid target for " + Ko(i) + "#" + r + "; must be a DOM node or evented object.");
}, hg = function(t, i, r) {
  if (!dd(t))
    throw new Error("Invalid event type for " + Ko(i) + "#" + r + "; must be a non-empty string or array.");
}, pg = function(t, i, r) {
  if (typeof t != "function")
    throw new Error("Invalid listener for " + Ko(i) + "#" + r + "; must be a function.");
}, Nu = function(t, i, r) {
  var e = i.length < 3 || i[0] === t || i[0] === t.eventBusEl_, a, s, o;
  return e ? (a = t.eventBusEl_, i.length >= 3 && i.shift(), s = i[0], o = i[1]) : (a = i[0], s = i[1], o = i[2]), po(a, t, r), hg(s, t, r), pg(o, t, r), o = Et(t, o), {
    isTargetingSelf: e,
    target: a,
    type: s,
    listener: o
  };
}, Kr = function(t, i, r, e) {
  po(t, t, i), t.nodeName ? sb[i](t, r, e) : t[i](r, e);
}, lb = {
  on: function() {
    for (var t = this, i = arguments.length, r = new Array(i), e = 0; e < i; e++)
      r[e] = arguments[e];
    var a = Nu(this, r, "on"), s = a.isTargetingSelf, o = a.target, u = a.type, l = a.listener;
    if (Kr(o, "on", u, l), !s) {
      var d = function() {
        return t.off(o, u, l);
      };
      d.guid = l.guid;
      var h = function() {
        return t.off("dispose", d);
      };
      h.guid = l.guid, Kr(this, "on", "dispose", d), Kr(o, "on", "dispose", h);
    }
  },
  one: function() {
    for (var t = this, i = arguments.length, r = new Array(i), e = 0; e < i; e++)
      r[e] = arguments[e];
    var a = Nu(this, r, "one"), s = a.isTargetingSelf, o = a.target, u = a.type, l = a.listener;
    if (s)
      Kr(o, "one", u, l);
    else {
      var d = function h() {
        t.off(o, u, h);
        for (var f = arguments.length, _ = new Array(f), v = 0; v < f; v++)
          _[v] = arguments[v];
        l.apply(null, _);
      };
      d.guid = l.guid, Kr(o, "one", u, d);
    }
  },
  any: function() {
    for (var t = this, i = arguments.length, r = new Array(i), e = 0; e < i; e++)
      r[e] = arguments[e];
    var a = Nu(this, r, "any"), s = a.isTargetingSelf, o = a.target, u = a.type, l = a.listener;
    if (s)
      Kr(o, "any", u, l);
    else {
      var d = function h() {
        t.off(o, u, h);
        for (var f = arguments.length, _ = new Array(f), v = 0; v < f; v++)
          _[v] = arguments[v];
        l.apply(null, _);
      };
      d.guid = l.guid, Kr(o, "any", u, d);
    }
  },
  off: function(t, i, r) {
    if (!t || dd(t))
      ei(this.eventBusEl_, t, i);
    else {
      var e = t, a = i;
      po(e, this, "off"), hg(a, this, "off"), pg(r, this, "off"), r = Et(this, r), this.off("dispose", r), e.nodeName ? (ei(e, a, r), ei(e, "dispose", r)) : _r(e) && (e.off(a, r), e.off("dispose", r));
    }
  },
  trigger: function(t, i) {
    po(this.eventBusEl_, this, "trigger");
    var r = t && typeof t != "string" ? t.type : t;
    if (!dd(r)) {
      var e = "Invalid event type for " + Ko(this) + "#trigger; must be a non-empty string or object with a type key that has a non-empty value.";
      if (t)
        (this.log || Ze).error(e);
      else
        throw new Error(e);
    }
    return aa(this.eventBusEl_, t, i);
  }
};
function dc(n, t) {
  t === void 0 && (t = {});
  var i = t, r = i.eventBusKey;
  if (r) {
    if (!n[r].nodeName)
      throw new Error('The eventBusKey "' + r + '" does not refer to an element.');
    n.eventBusEl_ = n[r];
  } else
    n.eventBusEl_ = nt("span", {
      className: "vjs-event-bus"
    });
  return It(n, lb), n.eventedCallbacks && n.eventedCallbacks.forEach(function(e) {
    e();
  }), n.on("dispose", function() {
    n.off(), [n, n.el_, n.eventBusEl_].forEach(function(e) {
      e && ci.has(e) && ci.delete(e);
    }), B.setTimeout(function() {
      n.eventBusEl_ = null;
    }, 0);
  }), n;
}
var db = {
  state: {},
  setState: function(t) {
    var i = this;
    typeof t == "function" && (t = t());
    var r;
    return jn(t, function(e, a) {
      i.state[a] !== e && (r = r || {}, r[a] = {
        from: i.state[a],
        to: e
      }), i.state[a] = e;
    }), r && _r(this) && this.trigger({
      changes: r,
      type: "statechanged"
    }), r;
  }
};
function mg(n, t) {
  return It(n, db), n.state = It({}, n.state, t), typeof n.handleStateChanged == "function" && _r(n) && n.on("statechanged", n.handleStateChanged), n;
}
var eo = function(t) {
  return typeof t != "string" ? t : t.replace(/./, function(i) {
    return i.toLowerCase();
  });
}, Nt = function(t) {
  return typeof t != "string" ? t : t.replace(/./, function(i) {
    return i.toUpperCase();
  });
}, cb = function(t, i) {
  return Nt(t) === Nt(i);
};
function St() {
  for (var n = {}, t = arguments.length, i = new Array(t), r = 0; r < t; r++)
    i[r] = arguments[r];
  return i.forEach(function(e) {
    !e || jn(e, function(a, s) {
      if (!Ya(a)) {
        n[s] = a;
        return;
      }
      Ya(n[s]) || (n[s] = {}), n[s] = St(n[s], a);
    });
  }), n;
}
var fb = /* @__PURE__ */ function() {
  function n() {
    this.map_ = {};
  }
  var t = n.prototype;
  return t.has = function(r) {
    return r in this.map_;
  }, t.delete = function(r) {
    var e = this.has(r);
    return delete this.map_[r], e;
  }, t.set = function(r, e) {
    return this.map_[r] = e, this;
  }, t.forEach = function(r, e) {
    for (var a in this.map_)
      r.call(e, this.map_[a], a, this);
  }, n;
}(), hb = B.Map ? B.Map : fb, pb = /* @__PURE__ */ function() {
  function n() {
    this.set_ = {};
  }
  var t = n.prototype;
  return t.has = function(r) {
    return r in this.set_;
  }, t.delete = function(r) {
    var e = this.has(r);
    return delete this.set_[r], e;
  }, t.add = function(r) {
    return this.set_[r] = 1, this;
  }, t.forEach = function(r, e) {
    for (var a in this.set_)
      r.call(e, a, a, this);
  }, n;
}(), Mu = B.Set ? B.Set : pb, ve = /* @__PURE__ */ function() {
  function n(i, r, e) {
    var a = this;
    if (!i && this.play ? this.player_ = i = this : this.player_ = i, this.isDisposed_ = !1, this.parentComponent_ = null, this.options_ = St({}, this.options_), r = this.options_ = St(this.options_, r), this.id_ = r.id || r.el && r.el.id, !this.id_) {
      var s = i && i.id && i.id() || "no_player";
      this.id_ = s + "_component_" + wr();
    }
    this.name_ = r.name || null, r.el ? this.el_ = r.el : r.createEl !== !1 && (this.el_ = this.createEl()), r.className && this.el_ && r.className.split(" ").forEach(function(o) {
      return a.addClass(o);
    }), r.evented !== !1 && (dc(this, {
      eventBusKey: this.el_ ? "el_" : null
    }), this.handleLanguagechange = this.handleLanguagechange.bind(this), this.on(this.player_, "languagechange", this.handleLanguagechange)), mg(this, this.constructor.defaultState), this.children_ = [], this.childIndex_ = {}, this.childNameIndex_ = {}, this.setTimeoutIds_ = new Mu(), this.setIntervalIds_ = new Mu(), this.rafIds_ = new Mu(), this.namedRafs_ = new hb(), this.clearingTimersOnDispose_ = !1, r.initChildren !== !1 && this.initChildren(), this.ready(e), r.reportTouchActivity !== !1 && this.enableTouchActivity();
  }
  var t = n.prototype;
  return t.dispose = function(r) {
    if (r === void 0 && (r = {}), !this.isDisposed_) {
      if (this.readyQueue_ && (this.readyQueue_.length = 0), this.trigger({
        type: "dispose",
        bubbles: !1
      }), this.isDisposed_ = !0, this.children_)
        for (var e = this.children_.length - 1; e >= 0; e--)
          this.children_[e].dispose && this.children_[e].dispose();
      this.children_ = null, this.childIndex_ = null, this.childNameIndex_ = null, this.parentComponent_ = null, this.el_ && (this.el_.parentNode && (r.restoreEl ? this.el_.parentNode.replaceChild(r.restoreEl, this.el_) : this.el_.parentNode.removeChild(this.el_)), this.el_ = null), this.player_ = null;
    }
  }, t.isDisposed = function() {
    return Boolean(this.isDisposed_);
  }, t.player = function() {
    return this.player_;
  }, t.options = function(r) {
    return r ? (this.options_ = St(this.options_, r), this.options_) : this.options_;
  }, t.el = function() {
    return this.el_;
  }, t.createEl = function(r, e, a) {
    return nt(r, e, a);
  }, t.localize = function(r, e, a) {
    a === void 0 && (a = r);
    var s = this.player_.language && this.player_.language(), o = this.player_.languages && this.player_.languages(), u = o && o[s], l = s && s.split("-")[0], d = o && o[l], h = a;
    return u && u[r] ? h = u[r] : d && d[r] && (h = d[r]), e && (h = h.replace(/\{(\d+)\}/g, function(f, _) {
      var v = e[_ - 1], y = v;
      return typeof v > "u" && (y = f), y;
    })), h;
  }, t.handleLanguagechange = function() {
  }, t.contentEl = function() {
    return this.contentEl_ || this.el_;
  }, t.id = function() {
    return this.id_;
  }, t.name = function() {
    return this.name_;
  }, t.children = function() {
    return this.children_;
  }, t.getChildById = function(r) {
    return this.childIndex_[r];
  }, t.getChild = function(r) {
    if (!!r)
      return this.childNameIndex_[r];
  }, t.getDescendant = function() {
    for (var r = arguments.length, e = new Array(r), a = 0; a < r; a++)
      e[a] = arguments[a];
    e = e.reduce(function(u, l) {
      return u.concat(l);
    }, []);
    for (var s = this, o = 0; o < e.length; o++)
      if (s = s.getChild(e[o]), !s || !s.getChild)
        return;
    return s;
  }, t.addChild = function(r, e, a) {
    e === void 0 && (e = {}), a === void 0 && (a = this.children_.length);
    var s, o;
    if (typeof r == "string") {
      o = Nt(r);
      var u = e.componentClass || o;
      e.name = o;
      var l = n.getComponent(u);
      if (!l)
        throw new Error("Component " + u + " does not exist");
      if (typeof l != "function")
        return null;
      s = new l(this.player_ || this, e);
    } else
      s = r;
    if (s.parentComponent_ && s.parentComponent_.removeChild(s), this.children_.splice(a, 0, s), s.parentComponent_ = this, typeof s.id == "function" && (this.childIndex_[s.id()] = s), o = o || s.name && Nt(s.name()), o && (this.childNameIndex_[o] = s, this.childNameIndex_[eo(o)] = s), typeof s.el == "function" && s.el()) {
      var d = null;
      this.children_[a + 1] && (this.children_[a + 1].el_ ? d = this.children_[a + 1].el_ : na(this.children_[a + 1]) && (d = this.children_[a + 1])), this.contentEl().insertBefore(s.el(), d);
    }
    return s;
  }, t.removeChild = function(r) {
    if (typeof r == "string" && (r = this.getChild(r)), !(!r || !this.children_)) {
      for (var e = !1, a = this.children_.length - 1; a >= 0; a--)
        if (this.children_[a] === r) {
          e = !0, this.children_.splice(a, 1);
          break;
        }
      if (!!e) {
        r.parentComponent_ = null, this.childIndex_[r.id()] = null, this.childNameIndex_[Nt(r.name())] = null, this.childNameIndex_[eo(r.name())] = null;
        var s = r.el();
        s && s.parentNode === this.contentEl() && this.contentEl().removeChild(r.el());
      }
    }
  }, t.initChildren = function() {
    var r = this, e = this.options_.children;
    if (e) {
      var a = this.options_, s = function(d) {
        var h = d.name, f = d.opts;
        if (a[h] !== void 0 && (f = a[h]), f !== !1) {
          f === !0 && (f = {}), f.playerOptions = r.options_.playerOptions;
          var _ = r.addChild(h, f);
          _ && (r[h] = _);
        }
      }, o, u = n.getComponent("Tech");
      Array.isArray(e) ? o = e : o = Object.keys(e), o.concat(Object.keys(this.options_).filter(function(l) {
        return !o.some(function(d) {
          return typeof d == "string" ? l === d : l === d.name;
        });
      })).map(function(l) {
        var d, h;
        return typeof l == "string" ? (d = l, h = e[d] || r.options_[d] || {}) : (d = l.name, h = l), {
          name: d,
          opts: h
        };
      }).filter(function(l) {
        var d = n.getComponent(l.opts.componentClass || Nt(l.name));
        return d && !u.isTech(d);
      }).forEach(s);
    }
  }, t.buildCSSClass = function() {
    return "";
  }, t.ready = function(r, e) {
    if (e === void 0 && (e = !1), !!r) {
      if (!this.isReady_) {
        this.readyQueue_ = this.readyQueue_ || [], this.readyQueue_.push(r);
        return;
      }
      e ? r.call(this) : this.setTimeout(r, 1);
    }
  }, t.triggerReady = function() {
    this.isReady_ = !0, this.setTimeout(function() {
      var r = this.readyQueue_;
      this.readyQueue_ = [], r && r.length > 0 && r.forEach(function(e) {
        e.call(this);
      }, this), this.trigger("ready");
    }, 1);
  }, t.$ = function(r, e) {
    return Nr(r, e || this.contentEl());
  }, t.$$ = function(r, e) {
    return sg(r, e || this.contentEl());
  }, t.hasClass = function(r) {
    return tn(this.el_, r);
  }, t.addClass = function(r) {
    vr(this.el_, r);
  }, t.removeClass = function(r) {
    ds(this.el_, r);
  }, t.toggleClass = function(r, e) {
    Jm(this.el_, r, e);
  }, t.show = function() {
    this.removeClass("vjs-hidden");
  }, t.hide = function() {
    this.addClass("vjs-hidden");
  }, t.lockShowing = function() {
    this.addClass("vjs-lock-showing");
  }, t.unlockShowing = function() {
    this.removeClass("vjs-lock-showing");
  }, t.getAttribute = function(r) {
    return eg(this.el_, r);
  }, t.setAttribute = function(r, e) {
    Yn(this.el_, r, e);
  }, t.removeAttribute = function(r) {
    Wo(this.el_, r);
  }, t.width = function(r, e) {
    return this.dimension("width", r, e);
  }, t.height = function(r, e) {
    return this.dimension("height", r, e);
  }, t.dimensions = function(r, e) {
    this.width(r, !0), this.height(e);
  }, t.dimension = function(r, e, a) {
    if (e !== void 0) {
      (e === null || e !== e) && (e = 0), ("" + e).indexOf("%") !== -1 || ("" + e).indexOf("px") !== -1 ? this.el_.style[r] = e : e === "auto" ? this.el_.style[r] = "" : this.el_.style[r] = e + "px", a || this.trigger("componentresize");
      return;
    }
    if (!this.el_)
      return 0;
    var s = this.el_.style[r], o = s.indexOf("px");
    return parseInt(o !== -1 ? s.slice(0, o) : this.el_["offset" + Nt(r)], 10);
  }, t.currentDimension = function(r) {
    var e = 0;
    if (r !== "width" && r !== "height")
      throw new Error("currentDimension only accepts width or height value");
    if (e = Ja(this.el_, r), e = parseFloat(e), e === 0 || isNaN(e)) {
      var a = "offset" + Nt(r);
      e = this.el_[a];
    }
    return e;
  }, t.currentDimensions = function() {
    return {
      width: this.currentDimension("width"),
      height: this.currentDimension("height")
    };
  }, t.currentWidth = function() {
    return this.currentDimension("width");
  }, t.currentHeight = function() {
    return this.currentDimension("height");
  }, t.focus = function() {
    this.el_.focus();
  }, t.blur = function() {
    this.el_.blur();
  }, t.handleKeyDown = function(r) {
    this.player_ && (ze.isEventKey(r, "Tab") || r.stopPropagation(), this.player_.handleKeyDown(r));
  }, t.handleKeyPress = function(r) {
    this.handleKeyDown(r);
  }, t.emitTapEvents = function() {
    var r = 0, e = null, a = 10, s = 200, o;
    this.on("touchstart", function(l) {
      l.touches.length === 1 && (e = {
        pageX: l.touches[0].pageX,
        pageY: l.touches[0].pageY
      }, r = B.performance.now(), o = !0);
    }), this.on("touchmove", function(l) {
      if (l.touches.length > 1)
        o = !1;
      else if (e) {
        var d = l.touches[0].pageX - e.pageX, h = l.touches[0].pageY - e.pageY, f = Math.sqrt(d * d + h * h);
        f > a && (o = !1);
      }
    });
    var u = function() {
      o = !1;
    };
    this.on("touchleave", u), this.on("touchcancel", u), this.on("touchend", function(l) {
      if (e = null, o === !0) {
        var d = B.performance.now() - r;
        d < s && (l.preventDefault(), this.trigger("tap"));
      }
    });
  }, t.enableTouchActivity = function() {
    if (!(!this.player() || !this.player().reportUserActivity)) {
      var r = Et(this.player(), this.player().reportUserActivity), e;
      this.on("touchstart", function() {
        r(), this.clearInterval(e), e = this.setInterval(r, 250);
      });
      var a = function(o) {
        r(), this.clearInterval(e);
      };
      this.on("touchmove", r), this.on("touchend", a), this.on("touchcancel", a);
    }
  }, t.setTimeout = function(r, e) {
    var a = this, s;
    return r = Et(this, r), this.clearTimersOnDispose_(), s = B.setTimeout(function() {
      a.setTimeoutIds_.has(s) && a.setTimeoutIds_.delete(s), r();
    }, e), this.setTimeoutIds_.add(s), s;
  }, t.clearTimeout = function(r) {
    return this.setTimeoutIds_.has(r) && (this.setTimeoutIds_.delete(r), B.clearTimeout(r)), r;
  }, t.setInterval = function(r, e) {
    r = Et(this, r), this.clearTimersOnDispose_();
    var a = B.setInterval(r, e);
    return this.setIntervalIds_.add(a), a;
  }, t.clearInterval = function(r) {
    return this.setIntervalIds_.has(r) && (this.setIntervalIds_.delete(r), B.clearInterval(r)), r;
  }, t.requestAnimationFrame = function(r) {
    var e = this;
    if (!this.supportsRaf_)
      return this.setTimeout(r, 1e3 / 60);
    this.clearTimersOnDispose_();
    var a;
    return r = Et(this, r), a = B.requestAnimationFrame(function() {
      e.rafIds_.has(a) && e.rafIds_.delete(a), r();
    }), this.rafIds_.add(a), a;
  }, t.requestNamedAnimationFrame = function(r, e) {
    var a = this;
    if (!this.namedRafs_.has(r)) {
      this.clearTimersOnDispose_(), e = Et(this, e);
      var s = this.requestAnimationFrame(function() {
        e(), a.namedRafs_.has(r) && a.namedRafs_.delete(r);
      });
      return this.namedRafs_.set(r, s), r;
    }
  }, t.cancelNamedAnimationFrame = function(r) {
    !this.namedRafs_.has(r) || (this.cancelAnimationFrame(this.namedRafs_.get(r)), this.namedRafs_.delete(r));
  }, t.cancelAnimationFrame = function(r) {
    return this.supportsRaf_ ? (this.rafIds_.has(r) && (this.rafIds_.delete(r), B.cancelAnimationFrame(r)), r) : this.clearTimeout(r);
  }, t.clearTimersOnDispose_ = function() {
    var r = this;
    this.clearingTimersOnDispose_ || (this.clearingTimersOnDispose_ = !0, this.one("dispose", function() {
      [["namedRafs_", "cancelNamedAnimationFrame"], ["rafIds_", "cancelAnimationFrame"], ["setTimeoutIds_", "clearTimeout"], ["setIntervalIds_", "clearInterval"]].forEach(function(e) {
        var a = e[0], s = e[1];
        r[a].forEach(function(o, u) {
          return r[s](u);
        });
      }), r.clearingTimersOnDispose_ = !1;
    }));
  }, n.registerComponent = function(r, e) {
    if (typeof r != "string" || !r)
      throw new Error('Illegal component name, "' + r + '"; must be a non-empty string.');
    var a = n.getComponent("Tech"), s = a && a.isTech(e), o = n === e || n.prototype.isPrototypeOf(e.prototype);
    if (s || !o) {
      var u;
      throw s ? u = "techs must be registered using Tech.registerTech()" : u = "must be a Component subclass", new Error('Illegal component, "' + r + '"; ' + u + ".");
    }
    r = Nt(r), n.components_ || (n.components_ = {});
    var l = n.getComponent("Player");
    if (r === "Player" && l && l.players) {
      var d = l.players, h = Object.keys(d);
      if (d && h.length > 0 && h.map(function(f) {
        return d[f];
      }).every(Boolean))
        throw new Error("Can not register Player component after player has been created.");
    }
    return n.components_[r] = e, n.components_[eo(r)] = e, e;
  }, n.getComponent = function(r) {
    if (!(!r || !n.components_))
      return n.components_[r];
  }, n;
}();
ve.prototype.supportsRaf_ = typeof B.requestAnimationFrame == "function" && typeof B.cancelAnimationFrame == "function";
ve.registerComponent("Component", ve);
function mb(n, t, i) {
  if (typeof t != "number" || t < 0 || t > i)
    throw new Error("Failed to execute '" + n + "' on 'TimeRanges': The index provided (" + t + ") is non-numeric or out of bounds (0-" + i + ").");
}
function Jf(n, t, i, r) {
  return mb(n, r, i.length - 1), i[r][t];
}
function Fu(n) {
  var t;
  return n === void 0 || n.length === 0 ? t = {
    length: 0,
    start: function() {
      throw new Error("This TimeRanges object is empty");
    },
    end: function() {
      throw new Error("This TimeRanges object is empty");
    }
  } : t = {
    length: n.length,
    start: Jf.bind(null, "start", 0, n),
    end: Jf.bind(null, "end", 1, n)
  }, B.Symbol && B.Symbol.iterator && (t[B.Symbol.iterator] = function() {
    return (n || []).values();
  }), t;
}
function rn(n, t) {
  return Array.isArray(n) ? Fu(n) : n === void 0 || t === void 0 ? Fu() : Fu([[n, t]]);
}
function gg(n, t) {
  var i = 0, r, e;
  if (!t)
    return 0;
  (!n || !n.length) && (n = rn(0, 0));
  for (var a = 0; a < n.length; a++)
    r = n.start(a), e = n.end(a), e > t && (e = t), i += e - r;
  return i / t;
}
function fi(n) {
  if (n instanceof fi)
    return n;
  typeof n == "number" ? this.code = n : typeof n == "string" ? this.message = n : br(n) && (typeof n.code == "number" && (this.code = n.code), It(this, n)), this.message || (this.message = fi.defaultMessages[this.code] || "");
}
fi.prototype.code = 0;
fi.prototype.message = "";
fi.prototype.status = null;
fi.errorTypes = ["MEDIA_ERR_CUSTOM", "MEDIA_ERR_ABORTED", "MEDIA_ERR_NETWORK", "MEDIA_ERR_DECODE", "MEDIA_ERR_SRC_NOT_SUPPORTED", "MEDIA_ERR_ENCRYPTED"];
fi.defaultMessages = {
  1: "You aborted the media playback",
  2: "A network error caused the media download to fail part-way.",
  3: "The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",
  4: "The media could not be loaded, either because the server or network failed or because the format is not supported.",
  5: "The media is encrypted and we do not have the keys to decrypt it."
};
for (var Ln = 0; Ln < fi.errorTypes.length; Ln++)
  fi[fi.errorTypes[Ln]] = Ln, fi.prototype[fi.errorTypes[Ln]] = Ln;
function Va(n) {
  return n != null && typeof n.then == "function";
}
function Ji(n) {
  Va(n) && n.then(null, function(t) {
  });
}
var cd = function(t) {
  var i = ["kind", "label", "language", "id", "inBandMetadataTrackDispatchType", "mode", "src"].reduce(function(r, e, a) {
    return t[e] && (r[e] = t[e]), r;
  }, {
    cues: t.cues && Array.prototype.map.call(t.cues, function(r) {
      return {
        startTime: r.startTime,
        endTime: r.endTime,
        text: r.text,
        id: r.id
      };
    })
  });
  return i;
}, gb = function(t) {
  var i = t.$$("track"), r = Array.prototype.map.call(i, function(a) {
    return a.track;
  }), e = Array.prototype.map.call(i, function(a) {
    var s = cd(a.track);
    return a.src && (s.src = a.src), s;
  });
  return e.concat(Array.prototype.filter.call(t.textTracks(), function(a) {
    return r.indexOf(a) === -1;
  }).map(cd));
}, vb = function(t, i) {
  return t.forEach(function(r) {
    var e = i.addRemoteTextTrack(r).track;
    !r.src && r.cues && r.cues.forEach(function(a) {
      return e.addCue(a);
    });
  }), i.textTracks();
}, Zf = {
  textTracksToJson: gb,
  jsonToTextTracks: vb,
  trackToJson_: cd
}, Bu = "vjs-modal-dialog", sa = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.handleKeyDown_ = function(s) {
      return a.handleKeyDown(s);
    }, a.close_ = function(s) {
      return a.close(s);
    }, a.opened_ = a.hasBeenOpened_ = a.hasBeenFilled_ = !1, a.closeable(!a.options_.uncloseable), a.content(a.options_.content), a.contentEl_ = nt("div", {
      className: Bu + "-content"
    }, {
      role: "document"
    }), a.descEl_ = nt("p", {
      className: Bu + "-description vjs-control-text",
      id: a.el().getAttribute("aria-describedby")
    }), dn(a.descEl_, a.description()), a.el_.appendChild(a.descEl_), a.el_.appendChild(a.contentEl_), a;
  }
  var i = t.prototype;
  return i.createEl = function() {
    return n.prototype.createEl.call(this, "div", {
      className: this.buildCSSClass(),
      tabIndex: -1
    }, {
      "aria-describedby": this.id() + "_description",
      "aria-hidden": "true",
      "aria-label": this.label(),
      role: "dialog"
    });
  }, i.dispose = function() {
    this.contentEl_ = null, this.descEl_ = null, this.previouslyActiveEl_ = null, n.prototype.dispose.call(this);
  }, i.buildCSSClass = function() {
    return Bu + " vjs-hidden " + n.prototype.buildCSSClass.call(this);
  }, i.label = function() {
    return this.localize(this.options_.label || "Modal Window");
  }, i.description = function() {
    var e = this.options_.description || this.localize("This is a modal window.");
    return this.closeable() && (e += " " + this.localize("This modal can be closed by pressing the Escape key or activating the close button.")), e;
  }, i.open = function() {
    if (!this.opened_) {
      var e = this.player();
      this.trigger("beforemodalopen"), this.opened_ = !0, (this.options_.fillAlways || !this.hasBeenOpened_ && !this.hasBeenFilled_) && this.fill(), this.wasPlaying_ = !e.paused(), this.options_.pauseOnOpen && this.wasPlaying_ && e.pause(), this.on("keydown", this.handleKeyDown_), this.hadControls_ = e.controls(), e.controls(!1), this.show(), this.conditionalFocus_(), this.el().setAttribute("aria-hidden", "false"), this.trigger("modalopen"), this.hasBeenOpened_ = !0;
    }
  }, i.opened = function(e) {
    return typeof e == "boolean" && this[e ? "open" : "close"](), this.opened_;
  }, i.close = function() {
    if (!!this.opened_) {
      var e = this.player();
      this.trigger("beforemodalclose"), this.opened_ = !1, this.wasPlaying_ && this.options_.pauseOnOpen && e.play(), this.off("keydown", this.handleKeyDown_), this.hadControls_ && e.controls(!0), this.hide(), this.el().setAttribute("aria-hidden", "true"), this.trigger("modalclose"), this.conditionalBlur_(), this.options_.temporary && this.dispose();
    }
  }, i.closeable = function(e) {
    if (typeof e == "boolean") {
      var a = this.closeable_ = !!e, s = this.getChild("closeButton");
      if (a && !s) {
        var o = this.contentEl_;
        this.contentEl_ = this.el_, s = this.addChild("closeButton", {
          controlText: "Close Modal Dialog"
        }), this.contentEl_ = o, this.on(s, "close", this.close_);
      }
      !a && s && (this.off(s, "close", this.close_), this.removeChild(s), s.dispose());
    }
    return this.closeable_;
  }, i.fill = function() {
    this.fillWith(this.content());
  }, i.fillWith = function(e) {
    var a = this.contentEl(), s = a.parentNode, o = a.nextSibling;
    this.trigger("beforemodalfill"), this.hasBeenFilled_ = !0, s.removeChild(a), this.empty(), ag(a, e), this.trigger("modalfill"), o ? s.insertBefore(a, o) : s.appendChild(a);
    var u = this.getChild("closeButton");
    u && s.appendChild(u.el_);
  }, i.empty = function() {
    this.trigger("beforemodalempty"), oc(this.contentEl()), this.trigger("modalempty");
  }, i.content = function(e) {
    return typeof e < "u" && (this.content_ = e), this.content_;
  }, i.conditionalFocus_ = function() {
    var e = Te.activeElement, a = this.player_.el_;
    this.previouslyActiveEl_ = null, (a.contains(e) || a === e) && (this.previouslyActiveEl_ = e, this.focus());
  }, i.conditionalBlur_ = function() {
    this.previouslyActiveEl_ && (this.previouslyActiveEl_.focus(), this.previouslyActiveEl_ = null);
  }, i.handleKeyDown = function(e) {
    if (e.stopPropagation(), ze.isEventKey(e, "Escape") && this.closeable()) {
      e.preventDefault(), this.close();
      return;
    }
    if (!!ze.isEventKey(e, "Tab")) {
      for (var a = this.focusableEls_(), s = this.el_.querySelector(":focus"), o, u = 0; u < a.length; u++)
        if (s === a[u]) {
          o = u;
          break;
        }
      Te.activeElement === this.el_ && (o = 0), e.shiftKey && o === 0 ? (a[a.length - 1].focus(), e.preventDefault()) : !e.shiftKey && o === a.length - 1 && (a[0].focus(), e.preventDefault());
    }
  }, i.focusableEls_ = function() {
    var e = this.el_.querySelectorAll("*");
    return Array.prototype.filter.call(e, function(a) {
      return (a instanceof B.HTMLAnchorElement || a instanceof B.HTMLAreaElement) && a.hasAttribute("href") || (a instanceof B.HTMLInputElement || a instanceof B.HTMLSelectElement || a instanceof B.HTMLTextAreaElement || a instanceof B.HTMLButtonElement) && !a.hasAttribute("disabled") || a instanceof B.HTMLIFrameElement || a instanceof B.HTMLObjectElement || a instanceof B.HTMLEmbedElement || a.hasAttribute("tabindex") && a.getAttribute("tabindex") !== -1 || a.hasAttribute("contenteditable");
    });
  }, t;
}(ve);
sa.prototype.options_ = {
  pauseOnOpen: !0,
  temporary: !0
};
ve.registerComponent("ModalDialog", sa);
var Zn = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r) {
    var e;
    r === void 0 && (r = []), e = n.call(this) || this, e.tracks_ = [], Object.defineProperty(Ge(e), "length", {
      get: function() {
        return this.tracks_.length;
      }
    });
    for (var a = 0; a < r.length; a++)
      e.addTrack(r[a]);
    return e;
  }
  var i = t.prototype;
  return i.addTrack = function(e) {
    var a = this, s = this.tracks_.length;
    "" + s in this || Object.defineProperty(this, s, {
      get: function() {
        return this.tracks_[s];
      }
    }), this.tracks_.indexOf(e) === -1 && (this.tracks_.push(e), this.trigger({
      track: e,
      type: "addtrack",
      target: this
    })), e.labelchange_ = function() {
      a.trigger({
        track: e,
        type: "labelchange",
        target: a
      });
    }, _r(e) && e.addEventListener("labelchange", e.labelchange_);
  }, i.removeTrack = function(e) {
    for (var a, s = 0, o = this.length; s < o; s++)
      if (this[s] === e) {
        a = this[s], a.off && a.off(), this.tracks_.splice(s, 1);
        break;
      }
    !a || this.trigger({
      track: a,
      type: "removetrack",
      target: this
    });
  }, i.getTrackById = function(e) {
    for (var a = null, s = 0, o = this.length; s < o; s++) {
      var u = this[s];
      if (u.id === e) {
        a = u;
        break;
      }
    }
    return a;
  }, t;
}(Xt);
Zn.prototype.allowedEvents_ = {
  change: "change",
  addtrack: "addtrack",
  removetrack: "removetrack",
  labelchange: "labelchange"
};
for (var _b in Zn.prototype.allowedEvents_)
  Zn.prototype["on" + _b] = null;
var Uu = function(t, i) {
  for (var r = 0; r < t.length; r++)
    !Object.keys(t[r]).length || i.id === t[r].id || (t[r].enabled = !1);
}, yb = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r) {
    var e;
    r === void 0 && (r = []);
    for (var a = r.length - 1; a >= 0; a--)
      if (r[a].enabled) {
        Uu(r, r[a]);
        break;
      }
    return e = n.call(this, r) || this, e.changing_ = !1, e;
  }
  var i = t.prototype;
  return i.addTrack = function(e) {
    var a = this;
    e.enabled && Uu(this, e), n.prototype.addTrack.call(this, e), e.addEventListener && (e.enabledChange_ = function() {
      a.changing_ || (a.changing_ = !0, Uu(a, e), a.changing_ = !1, a.trigger("change"));
    }, e.addEventListener("enabledchange", e.enabledChange_));
  }, i.removeTrack = function(e) {
    n.prototype.removeTrack.call(this, e), e.removeEventListener && e.enabledChange_ && (e.removeEventListener("enabledchange", e.enabledChange_), e.enabledChange_ = null);
  }, t;
}(Zn), qu = function(t, i) {
  for (var r = 0; r < t.length; r++)
    !Object.keys(t[r]).length || i.id === t[r].id || (t[r].selected = !1);
}, Tb = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r) {
    var e;
    r === void 0 && (r = []);
    for (var a = r.length - 1; a >= 0; a--)
      if (r[a].selected) {
        qu(r, r[a]);
        break;
      }
    return e = n.call(this, r) || this, e.changing_ = !1, Object.defineProperty(Ge(e), "selectedIndex", {
      get: function() {
        for (var o = 0; o < this.length; o++)
          if (this[o].selected)
            return o;
        return -1;
      },
      set: function() {
      }
    }), e;
  }
  var i = t.prototype;
  return i.addTrack = function(e) {
    var a = this;
    e.selected && qu(this, e), n.prototype.addTrack.call(this, e), e.addEventListener && (e.selectedChange_ = function() {
      a.changing_ || (a.changing_ = !0, qu(a, e), a.changing_ = !1, a.trigger("change"));
    }, e.addEventListener("selectedchange", e.selectedChange_));
  }, i.removeTrack = function(e) {
    n.prototype.removeTrack.call(this, e), e.removeEventListener && e.selectedChange_ && (e.removeEventListener("selectedchange", e.selectedChange_), e.selectedChange_ = null);
  }, t;
}(Zn), vg = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t() {
    return n.apply(this, arguments) || this;
  }
  var i = t.prototype;
  return i.addTrack = function(e) {
    var a = this;
    n.prototype.addTrack.call(this, e), this.queueChange_ || (this.queueChange_ = function() {
      return a.queueTrigger("change");
    }), this.triggerSelectedlanguagechange || (this.triggerSelectedlanguagechange_ = function() {
      return a.trigger("selectedlanguagechange");
    }), e.addEventListener("modechange", this.queueChange_);
    var s = ["metadata", "chapters"];
    s.indexOf(e.kind) === -1 && e.addEventListener("modechange", this.triggerSelectedlanguagechange_);
  }, i.removeTrack = function(e) {
    n.prototype.removeTrack.call(this, e), e.removeEventListener && (this.queueChange_ && e.removeEventListener("modechange", this.queueChange_), this.selectedlanguagechange_ && e.removeEventListener("modechange", this.triggerSelectedlanguagechange_));
  }, t;
}(Zn), bb = /* @__PURE__ */ function() {
  function n(i) {
    i === void 0 && (i = []), this.trackElements_ = [], Object.defineProperty(this, "length", {
      get: function() {
        return this.trackElements_.length;
      }
    });
    for (var r = 0, e = i.length; r < e; r++)
      this.addTrackElement_(i[r]);
  }
  var t = n.prototype;
  return t.addTrackElement_ = function(r) {
    var e = this.trackElements_.length;
    "" + e in this || Object.defineProperty(this, e, {
      get: function() {
        return this.trackElements_[e];
      }
    }), this.trackElements_.indexOf(r) === -1 && this.trackElements_.push(r);
  }, t.getTrackElementByTrack_ = function(r) {
    for (var e, a = 0, s = this.trackElements_.length; a < s; a++)
      if (r === this.trackElements_[a].track) {
        e = this.trackElements_[a];
        break;
      }
    return e;
  }, t.removeTrackElement_ = function(r) {
    for (var e = 0, a = this.trackElements_.length; e < a; e++)
      if (r === this.trackElements_[e]) {
        this.trackElements_[e].track && typeof this.trackElements_[e].track.off == "function" && this.trackElements_[e].track.off(), typeof this.trackElements_[e].off == "function" && this.trackElements_[e].off(), this.trackElements_.splice(e, 1);
        break;
      }
  }, n;
}(), eh = /* @__PURE__ */ function() {
  function n(i) {
    n.prototype.setCues_.call(this, i), Object.defineProperty(this, "length", {
      get: function() {
        return this.length_;
      }
    });
  }
  var t = n.prototype;
  return t.setCues_ = function(r) {
    var e = this.length || 0, a = 0, s = r.length;
    this.cues_ = r, this.length_ = r.length;
    var o = function(l) {
      "" + l in this || Object.defineProperty(this, "" + l, {
        get: function() {
          return this.cues_[l];
        }
      });
    };
    if (e < s)
      for (a = e; a < s; a++)
        o.call(this, a);
  }, t.getCueById = function(r) {
    for (var e = null, a = 0, s = this.length; a < s; a++) {
      var o = this[a];
      if (o.id === r) {
        e = o;
        break;
      }
    }
    return e;
  }, n;
}(), Sb = {
  alternative: "alternative",
  captions: "captions",
  main: "main",
  sign: "sign",
  subtitles: "subtitles",
  commentary: "commentary"
}, Eb = {
  alternative: "alternative",
  descriptions: "descriptions",
  main: "main",
  "main-desc": "main-desc",
  translation: "translation",
  commentary: "commentary"
}, xb = {
  subtitles: "subtitles",
  captions: "captions",
  descriptions: "descriptions",
  chapters: "chapters",
  metadata: "metadata"
}, th = {
  disabled: "disabled",
  hidden: "hidden",
  showing: "showing"
}, cc = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(i) {
    var r;
    i === void 0 && (i = {}), r = n.call(this) || this;
    var e = {
      id: i.id || "vjs_track_" + wr(),
      kind: i.kind || "",
      language: i.language || ""
    }, a = i.label || "", s = function(l) {
      Object.defineProperty(Ge(r), l, {
        get: function() {
          return e[l];
        },
        set: function() {
        }
      });
    };
    for (var o in e)
      s(o);
    return Object.defineProperty(Ge(r), "label", {
      get: function() {
        return a;
      },
      set: function(l) {
        l !== a && (a = l, this.trigger("labelchange"));
      }
    }), r;
  }
  return t;
}(Xt), fc = function(t) {
  var i = ["protocol", "hostname", "port", "pathname", "search", "hash", "host"], r = Te.createElement("a");
  r.href = t;
  for (var e = {}, a = 0; a < i.length; a++)
    e[i[a]] = r[i[a]];
  return e.protocol === "http:" && (e.host = e.host.replace(/:80$/, "")), e.protocol === "https:" && (e.host = e.host.replace(/:443$/, "")), e.protocol || (e.protocol = B.location.protocol), e.host || (e.host = B.location.host), e;
}, _g = function(t) {
  if (!t.match(/^https?:\/\//)) {
    var i = Te.createElement("a");
    i.href = t, t = i.href;
  }
  return t;
}, hc = function(t) {
  if (typeof t == "string") {
    var i = /^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/, r = i.exec(t);
    if (r)
      return r.pop().toLowerCase();
  }
  return "";
}, Xo = function(t, i) {
  i === void 0 && (i = B.location);
  var r = fc(t), e = r.protocol === ":" ? i.protocol : r.protocol, a = e + r.host !== i.protocol + i.host;
  return a;
}, wb = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  parseUrl: fc,
  getAbsoluteURL: _g,
  getFileExtension: hc,
  isCrossOrigin: Xo
}), ih = function(t, i) {
  var r = new B.WebVTT.Parser(B, B.vttjs, B.WebVTT.StringDecoder()), e = [];
  r.oncue = function(a) {
    i.addCue(a);
  }, r.onparsingerror = function(a) {
    e.push(a);
  }, r.onflush = function() {
    i.trigger({
      type: "loadeddata",
      target: i
    });
  }, r.parse(t), e.length > 0 && (B.console && B.console.groupCollapsed && B.console.groupCollapsed("Text Track parsing errors for " + i.src), e.forEach(function(a) {
    return Ze.error(a);
  }), B.console && B.console.groupEnd && B.console.groupEnd()), r.flush();
}, rh = function(t, i) {
  var r = {
    uri: t
  }, e = Xo(t);
  e && (r.cors = e);
  var a = i.tech_.crossOrigin() === "use-credentials";
  a && (r.withCredentials = a), Ro.exports(r, Et(this, function(s, o, u) {
    if (s)
      return Ze.error(s, o);
    i.loaded_ = !0, typeof B.WebVTT != "function" ? i.tech_ && i.tech_.any(["vttjsloaded", "vttjserror"], function(l) {
      if (l.type === "vttjserror") {
        Ze.error("vttjs failed to load, stopping trying to process " + i.src);
        return;
      }
      return ih(u, i);
    }) : ih(u, i);
  }));
}, cs = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r) {
    var e;
    if (r === void 0 && (r = {}), !r.tech)
      throw new Error("A tech was not provided.");
    var a = St(r, {
      kind: xb[r.kind] || "subtitles",
      language: r.language || r.srclang || ""
    }), s = th[a.mode] || "disabled", o = a.default;
    (a.kind === "metadata" || a.kind === "chapters") && (s = "hidden"), e = n.call(this, a) || this, e.tech_ = a.tech, e.cues_ = [], e.activeCues_ = [], e.preload_ = e.tech_.preloadTextTracks !== !1;
    var u = new eh(e.cues_), l = new eh(e.activeCues_), d = !1;
    e.timeupdateHandler = Et(Ge(e), function() {
      if (!this.tech_.isDisposed()) {
        if (!this.tech_.isReady_) {
          this.rvf_ = this.tech_.requestVideoFrameCallback(this.timeupdateHandler);
          return;
        }
        this.activeCues = this.activeCues, d && (this.trigger("cuechange"), d = !1), this.rvf_ = this.tech_.requestVideoFrameCallback(this.timeupdateHandler);
      }
    });
    var h = function() {
      e.stopTracking();
    };
    return e.tech_.one("dispose", h), s !== "disabled" && e.startTracking(), Object.defineProperties(Ge(e), {
      default: {
        get: function() {
          return o;
        },
        set: function() {
        }
      },
      mode: {
        get: function() {
          return s;
        },
        set: function(_) {
          !th[_] || s !== _ && (s = _, !this.preload_ && s !== "disabled" && this.cues.length === 0 && rh(this.src, this), this.stopTracking(), s !== "disabled" && this.startTracking(), this.trigger("modechange"));
        }
      },
      cues: {
        get: function() {
          return this.loaded_ ? u : null;
        },
        set: function() {
        }
      },
      activeCues: {
        get: function() {
          if (!this.loaded_)
            return null;
          if (this.cues.length === 0)
            return l;
          for (var _ = this.tech_.currentTime(), v = [], y = 0, T = this.cues.length; y < T; y++) {
            var I = this.cues[y];
            (I.startTime <= _ && I.endTime >= _ || I.startTime === I.endTime && I.startTime <= _ && I.startTime + 0.5 >= _) && v.push(I);
          }
          if (d = !1, v.length !== this.activeCues_.length)
            d = !0;
          else
            for (var V = 0; V < v.length; V++)
              this.activeCues_.indexOf(v[V]) === -1 && (d = !0);
          return this.activeCues_ = v, l.setCues_(this.activeCues_), l;
        },
        set: function() {
        }
      }
    }), a.src ? (e.src = a.src, e.preload_ || (e.loaded_ = !0), (e.preload_ || a.kind !== "subtitles" && a.kind !== "captions") && rh(e.src, Ge(e))) : e.loaded_ = !0, e;
  }
  var i = t.prototype;
  return i.startTracking = function() {
    this.rvf_ = this.tech_.requestVideoFrameCallback(this.timeupdateHandler);
  }, i.stopTracking = function() {
    this.rvf_ && (this.tech_.cancelVideoFrameCallback(this.rvf_), this.rvf_ = void 0);
  }, i.addCue = function(e) {
    var a = e;
    if (B.vttjs && !(e instanceof B.vttjs.VTTCue)) {
      a = new B.vttjs.VTTCue(e.startTime, e.endTime, e.text);
      for (var s in e)
        s in a || (a[s] = e[s]);
      a.id = e.id, a.originalCue_ = e;
    }
    for (var o = this.tech_.textTracks(), u = 0; u < o.length; u++)
      o[u] !== this && o[u].removeCue(a);
    this.cues_.push(a), this.cues.setCues_(this.cues_);
  }, i.removeCue = function(e) {
    for (var a = this.cues_.length; a--; ) {
      var s = this.cues_[a];
      if (s === e || s.originalCue_ && s.originalCue_ === e) {
        this.cues_.splice(a, 1), this.cues.setCues_(this.cues_);
        break;
      }
    }
  }, t;
}(cc);
cs.prototype.allowedEvents_ = {
  cuechange: "cuechange"
};
var yg = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(i) {
    var r;
    i === void 0 && (i = {});
    var e = St(i, {
      kind: Eb[i.kind] || ""
    });
    r = n.call(this, e) || this;
    var a = !1;
    return Object.defineProperty(Ge(r), "enabled", {
      get: function() {
        return a;
      },
      set: function(o) {
        typeof o != "boolean" || o === a || (a = o, this.trigger("enabledchange"));
      }
    }), e.enabled && (r.enabled = e.enabled), r.loaded_ = !0, r;
  }
  return t;
}(cc), Tg = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(i) {
    var r;
    i === void 0 && (i = {});
    var e = St(i, {
      kind: Sb[i.kind] || ""
    });
    r = n.call(this, e) || this;
    var a = !1;
    return Object.defineProperty(Ge(r), "selected", {
      get: function() {
        return a;
      },
      set: function(o) {
        typeof o != "boolean" || o === a || (a = o, this.trigger("selectedchange"));
      }
    }), e.selected && (r.selected = e.selected), r;
  }
  return t;
}(cc), bg = 0, Ab = 1, Sg = 2, Cb = 3, oa = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(i) {
    var r;
    i === void 0 && (i = {}), r = n.call(this) || this;
    var e, a = new cs(i);
    return r.kind = a.kind, r.src = a.src, r.srclang = a.language, r.label = a.label, r.default = a.default, Object.defineProperties(Ge(r), {
      readyState: {
        get: function() {
          return e;
        }
      },
      track: {
        get: function() {
          return a;
        }
      }
    }), e = bg, a.addEventListener("loadeddata", function() {
      e = Sg, r.trigger({
        type: "load",
        target: Ge(r)
      });
    }), r;
  }
  return t;
}(Xt);
oa.prototype.allowedEvents_ = {
  load: "load"
};
oa.NONE = bg;
oa.LOADING = Ab;
oa.LOADED = Sg;
oa.ERROR = Cb;
var Oi = {
  audio: {
    ListClass: yb,
    TrackClass: yg,
    capitalName: "Audio"
  },
  video: {
    ListClass: Tb,
    TrackClass: Tg,
    capitalName: "Video"
  },
  text: {
    ListClass: vg,
    TrackClass: cs,
    capitalName: "Text"
  }
};
Object.keys(Oi).forEach(function(n) {
  Oi[n].getterName = n + "Tracks", Oi[n].privateName = n + "Tracks_";
});
var ea = {
  remoteText: {
    ListClass: vg,
    TrackClass: cs,
    capitalName: "RemoteText",
    getterName: "remoteTextTracks",
    privateName: "remoteTextTracks_"
  },
  remoteTextEl: {
    ListClass: bb,
    TrackClass: oa,
    capitalName: "RemoteTextTrackEls",
    getterName: "remoteTextTrackEls",
    privateName: "remoteTextTrackEls_"
  }
}, ui = Ri({}, Oi, ea);
ea.names = Object.keys(ea);
Oi.names = Object.keys(Oi);
ui.names = [].concat(ea.names).concat(Oi.names);
function kb(n, t, i, r, e) {
  e === void 0 && (e = {});
  var a = n.textTracks();
  e.kind = t, i && (e.label = i), r && (e.language = r), e.tech = n;
  var s = new ui.text.TrackClass(e);
  return a.addTrack(s), s;
}
var yt = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return r === void 0 && (r = {}), e === void 0 && (e = function() {
    }), r.reportTouchActivity = !1, a = n.call(this, null, r, e) || this, a.onDurationChange_ = function(s) {
      return a.onDurationChange(s);
    }, a.trackProgress_ = function(s) {
      return a.trackProgress(s);
    }, a.trackCurrentTime_ = function(s) {
      return a.trackCurrentTime(s);
    }, a.stopTrackingCurrentTime_ = function(s) {
      return a.stopTrackingCurrentTime(s);
    }, a.disposeSourceHandler_ = function(s) {
      return a.disposeSourceHandler(s);
    }, a.queuedHanders_ = /* @__PURE__ */ new Set(), a.hasStarted_ = !1, a.on("playing", function() {
      this.hasStarted_ = !0;
    }), a.on("loadstart", function() {
      this.hasStarted_ = !1;
    }), ui.names.forEach(function(s) {
      var o = ui[s];
      r && r[o.getterName] && (a[o.privateName] = r[o.getterName]);
    }), a.featuresProgressEvents || a.manualProgressOn(), a.featuresTimeupdateEvents || a.manualTimeUpdatesOn(), ["Text", "Audio", "Video"].forEach(function(s) {
      r["native" + s + "Tracks"] === !1 && (a["featuresNative" + s + "Tracks"] = !1);
    }), r.nativeCaptions === !1 || r.nativeTextTracks === !1 ? a.featuresNativeTextTracks = !1 : (r.nativeCaptions === !0 || r.nativeTextTracks === !0) && (a.featuresNativeTextTracks = !0), a.featuresNativeTextTracks || a.emulateTextTracks(), a.preloadTextTracks = r.preloadTextTracks !== !1, a.autoRemoteTextTracks_ = new ui.text.ListClass(), a.initTrackListeners(), r.nativeControlsForTouch || a.emitTapEvents(), a.constructor && (a.name_ = a.constructor.name || "Unknown Tech"), a;
  }
  var i = t.prototype;
  return i.triggerSourceset = function(e) {
    var a = this;
    this.isReady_ || this.one("ready", function() {
      return a.setTimeout(function() {
        return a.triggerSourceset(e);
      }, 1);
    }), this.trigger({
      src: e,
      type: "sourceset"
    });
  }, i.manualProgressOn = function() {
    this.on("durationchange", this.onDurationChange_), this.manualProgress = !0, this.one("ready", this.trackProgress_);
  }, i.manualProgressOff = function() {
    this.manualProgress = !1, this.stopTrackingProgress(), this.off("durationchange", this.onDurationChange_);
  }, i.trackProgress = function(e) {
    this.stopTrackingProgress(), this.progressInterval = this.setInterval(Et(this, function() {
      var a = this.bufferedPercent();
      this.bufferedPercent_ !== a && this.trigger("progress"), this.bufferedPercent_ = a, a === 1 && this.stopTrackingProgress();
    }), 500);
  }, i.onDurationChange = function(e) {
    this.duration_ = this.duration();
  }, i.buffered = function() {
    return rn(0, 0);
  }, i.bufferedPercent = function() {
    return gg(this.buffered(), this.duration_);
  }, i.stopTrackingProgress = function() {
    this.clearInterval(this.progressInterval);
  }, i.manualTimeUpdatesOn = function() {
    this.manualTimeUpdates = !0, this.on("play", this.trackCurrentTime_), this.on("pause", this.stopTrackingCurrentTime_);
  }, i.manualTimeUpdatesOff = function() {
    this.manualTimeUpdates = !1, this.stopTrackingCurrentTime(), this.off("play", this.trackCurrentTime_), this.off("pause", this.stopTrackingCurrentTime_);
  }, i.trackCurrentTime = function() {
    this.currentTimeInterval && this.stopTrackingCurrentTime(), this.currentTimeInterval = this.setInterval(function() {
      this.trigger({
        type: "timeupdate",
        target: this,
        manuallyTriggered: !0
      });
    }, 250);
  }, i.stopTrackingCurrentTime = function() {
    this.clearInterval(this.currentTimeInterval), this.trigger({
      type: "timeupdate",
      target: this,
      manuallyTriggered: !0
    });
  }, i.dispose = function() {
    this.clearTracks(Oi.names), this.manualProgress && this.manualProgressOff(), this.manualTimeUpdates && this.manualTimeUpdatesOff(), n.prototype.dispose.call(this);
  }, i.clearTracks = function(e) {
    var a = this;
    e = [].concat(e), e.forEach(function(s) {
      for (var o = a[s + "Tracks"]() || [], u = o.length; u--; ) {
        var l = o[u];
        s === "text" && a.removeRemoteTextTrack(l), o.removeTrack(l);
      }
    });
  }, i.cleanupAutoTextTracks = function() {
    for (var e = this.autoRemoteTextTracks_ || [], a = e.length; a--; ) {
      var s = e[a];
      this.removeRemoteTextTrack(s);
    }
  }, i.reset = function() {
  }, i.crossOrigin = function() {
  }, i.setCrossOrigin = function() {
  }, i.error = function(e) {
    return e !== void 0 && (this.error_ = new fi(e), this.trigger("error")), this.error_;
  }, i.played = function() {
    return this.hasStarted_ ? rn(0, 0) : rn();
  }, i.play = function() {
  }, i.setScrubbing = function() {
  }, i.scrubbing = function() {
  }, i.setCurrentTime = function() {
    this.manualTimeUpdates && this.trigger({
      type: "timeupdate",
      target: this,
      manuallyTriggered: !0
    });
  }, i.initTrackListeners = function() {
    var e = this;
    Oi.names.forEach(function(a) {
      var s = Oi[a], o = function() {
        e.trigger(a + "trackchange");
      }, u = e[s.getterName]();
      u.addEventListener("removetrack", o), u.addEventListener("addtrack", o), e.on("dispose", function() {
        u.removeEventListener("removetrack", o), u.removeEventListener("addtrack", o);
      });
    });
  }, i.addWebVttScript_ = function() {
    var e = this;
    if (!B.WebVTT)
      if (Te.body.contains(this.el())) {
        if (!this.options_["vtt.js"] && Ya(Jl.exports) && Object.keys(Jl.exports).length > 0) {
          this.trigger("vttjsloaded");
          return;
        }
        var a = Te.createElement("script");
        a.src = this.options_["vtt.js"] || "https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js", a.onload = function() {
          e.trigger("vttjsloaded");
        }, a.onerror = function() {
          e.trigger("vttjserror");
        }, this.on("dispose", function() {
          a.onload = null, a.onerror = null;
        }), B.WebVTT = !0, this.el().parentNode.appendChild(a);
      } else
        this.ready(this.addWebVttScript_);
  }, i.emulateTextTracks = function() {
    var e = this, a = this.textTracks(), s = this.remoteTextTracks(), o = function(f) {
      return a.addTrack(f.track);
    }, u = function(f) {
      return a.removeTrack(f.track);
    };
    s.on("addtrack", o), s.on("removetrack", u), this.addWebVttScript_();
    var l = function() {
      return e.trigger("texttrackchange");
    }, d = function() {
      l();
      for (var f = 0; f < a.length; f++) {
        var _ = a[f];
        _.removeEventListener("cuechange", l), _.mode === "showing" && _.addEventListener("cuechange", l);
      }
    };
    d(), a.addEventListener("change", d), a.addEventListener("addtrack", d), a.addEventListener("removetrack", d), this.on("dispose", function() {
      s.off("addtrack", o), s.off("removetrack", u), a.removeEventListener("change", d), a.removeEventListener("addtrack", d), a.removeEventListener("removetrack", d);
      for (var h = 0; h < a.length; h++) {
        var f = a[h];
        f.removeEventListener("cuechange", l);
      }
    });
  }, i.addTextTrack = function(e, a, s) {
    if (!e)
      throw new Error("TextTrack kind is required but was not provided");
    return kb(this, e, a, s);
  }, i.createRemoteTextTrack = function(e) {
    var a = St(e, {
      tech: this
    });
    return new ea.remoteTextEl.TrackClass(a);
  }, i.addRemoteTextTrack = function(e, a) {
    var s = this;
    e === void 0 && (e = {});
    var o = this.createRemoteTextTrack(e);
    return a !== !0 && a !== !1 && (Ze.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'), a = !0), this.remoteTextTrackEls().addTrackElement_(o), this.remoteTextTracks().addTrack(o.track), a !== !0 && this.ready(function() {
      return s.autoRemoteTextTracks_.addTrack(o.track);
    }), o;
  }, i.removeRemoteTextTrack = function(e) {
    var a = this.remoteTextTrackEls().getTrackElementByTrack_(e);
    this.remoteTextTrackEls().removeTrackElement_(a), this.remoteTextTracks().removeTrack(e), this.autoRemoteTextTracks_.removeTrack(e);
  }, i.getVideoPlaybackQuality = function() {
    return {};
  }, i.requestPictureInPicture = function() {
    var e = this.options_.Promise || B.Promise;
    if (e)
      return e.reject();
  }, i.disablePictureInPicture = function() {
    return !0;
  }, i.setDisablePictureInPicture = function() {
  }, i.requestVideoFrameCallback = function(e) {
    var a = this, s = wr();
    return this.paused() ? (this.queuedHanders_.add(s), this.one("playing", function() {
      a.queuedHanders_.has(s) && (a.queuedHanders_.delete(s), e());
    })) : this.requestNamedAnimationFrame(s, e), s;
  }, i.cancelVideoFrameCallback = function(e) {
    this.queuedHanders_.has(e) ? this.queuedHanders_.delete(e) : this.cancelNamedAnimationFrame(e);
  }, i.setPoster = function() {
  }, i.playsinline = function() {
  }, i.setPlaysinline = function() {
  }, i.overrideNativeAudioTracks = function() {
  }, i.overrideNativeVideoTracks = function() {
  }, i.canPlayType = function() {
    return "";
  }, t.canPlayType = function() {
    return "";
  }, t.canPlaySource = function(e, a) {
    return t.canPlayType(e.type);
  }, t.isTech = function(e) {
    return e.prototype instanceof t || e instanceof t || e === t;
  }, t.registerTech = function(e, a) {
    if (t.techs_ || (t.techs_ = {}), !t.isTech(a))
      throw new Error("Tech " + e + " must be a Tech");
    if (!t.canPlayType)
      throw new Error("Techs must have a static canPlayType method on them");
    if (!t.canPlaySource)
      throw new Error("Techs must have a static canPlaySource method on them");
    return e = Nt(e), t.techs_[e] = a, t.techs_[eo(e)] = a, e !== "Tech" && t.defaultTechOrder_.push(e), a;
  }, t.getTech = function(e) {
    if (!!e) {
      if (t.techs_ && t.techs_[e])
        return t.techs_[e];
      if (e = Nt(e), B && B.videojs && B.videojs[e])
        return Ze.warn("The " + e + " tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"), B.videojs[e];
    }
  }, t;
}(ve);
ui.names.forEach(function(n) {
  var t = ui[n];
  yt.prototype[t.getterName] = function() {
    return this[t.privateName] = this[t.privateName] || new t.ListClass(), this[t.privateName];
  };
});
yt.prototype.featuresVolumeControl = !0;
yt.prototype.featuresMuteControl = !0;
yt.prototype.featuresFullscreenResize = !1;
yt.prototype.featuresPlaybackRate = !1;
yt.prototype.featuresProgressEvents = !1;
yt.prototype.featuresSourceset = !1;
yt.prototype.featuresTimeupdateEvents = !1;
yt.prototype.featuresNativeTextTracks = !1;
yt.prototype.featuresVideoFrameCallback = !1;
yt.withSourceHandlers = function(n) {
  n.registerSourceHandler = function(i, r) {
    var e = n.sourceHandlers;
    e || (e = n.sourceHandlers = []), r === void 0 && (r = e.length), e.splice(r, 0, i);
  }, n.canPlayType = function(i) {
    for (var r = n.sourceHandlers || [], e, a = 0; a < r.length; a++)
      if (e = r[a].canPlayType(i), e)
        return e;
    return "";
  }, n.selectSourceHandler = function(i, r) {
    for (var e = n.sourceHandlers || [], a, s = 0; s < e.length; s++)
      if (a = e[s].canHandleSource(i, r), a)
        return e[s];
    return null;
  }, n.canPlaySource = function(i, r) {
    var e = n.selectSourceHandler(i, r);
    return e ? e.canHandleSource(i, r) : "";
  };
  var t = ["seekable", "seeking", "duration"];
  t.forEach(function(i) {
    var r = this[i];
    typeof r == "function" && (this[i] = function() {
      return this.sourceHandler_ && this.sourceHandler_[i] ? this.sourceHandler_[i].apply(this.sourceHandler_, arguments) : r.apply(this, arguments);
    });
  }, n.prototype), n.prototype.setSource = function(i) {
    var r = n.selectSourceHandler(i, this.options_);
    r || (n.nativeSourceHandler ? r = n.nativeSourceHandler : Ze.error("No source handler found for the current source.")), this.disposeSourceHandler(), this.off("dispose", this.disposeSourceHandler_), r !== n.nativeSourceHandler && (this.currentSource_ = i), this.sourceHandler_ = r.handleSource(i, this, this.options_), this.one("dispose", this.disposeSourceHandler_);
  }, n.prototype.disposeSourceHandler = function() {
    this.currentSource_ && (this.clearTracks(["audio", "video"]), this.currentSource_ = null), this.cleanupAutoTextTracks(), this.sourceHandler_ && (this.sourceHandler_.dispose && this.sourceHandler_.dispose(), this.sourceHandler_ = null);
  };
};
ve.registerComponent("Tech", yt);
yt.registerTech("Tech", yt);
yt.defaultTechOrder_ = [];
var nn = {}, fd = {}, mo = {};
function Pb(n, t) {
  nn[n] = nn[n] || [], nn[n].push(t);
}
function Ib(n, t, i) {
  n.setTimeout(function() {
    return Qr(t, nn[t.type], i, n);
  }, 1);
}
function Db(n, t) {
  n.forEach(function(i) {
    return i.setTech && i.setTech(t);
  });
}
function Lb(n, t, i) {
  return n.reduceRight(pc(i), t[i]());
}
function Ob(n, t, i, r) {
  return t[i](n.reduce(pc(i), r));
}
function nh(n, t, i, r) {
  r === void 0 && (r = null);
  var e = "call" + Nt(i), a = n.reduce(pc(e), r), s = a === mo, o = s ? null : t[i](a);
  return Mb(n, i, o, s), o;
}
var Rb = {
  buffered: 1,
  currentTime: 1,
  duration: 1,
  muted: 1,
  played: 1,
  paused: 1,
  seekable: 1,
  volume: 1,
  ended: 1
}, Nb = {
  setCurrentTime: 1,
  setMuted: 1,
  setVolume: 1
}, ah = {
  play: 1,
  pause: 1
};
function pc(n) {
  return function(t, i) {
    return t === mo ? mo : i[n] ? i[n](t) : t;
  };
}
function Mb(n, t, i, r) {
  for (var e = n.length - 1; e >= 0; e--) {
    var a = n[e];
    a[t] && a[t](r, i);
  }
}
function Fb(n) {
  fd[n.id()] = null;
}
function Bb(n, t) {
  var i = fd[n.id()], r = null;
  if (i == null)
    return r = t(n), fd[n.id()] = [[t, r]], r;
  for (var e = 0; e < i.length; e++) {
    var a = i[e], s = a[0], o = a[1];
    s === t && (r = o);
  }
  return r === null && (r = t(n), i.push([t, r])), r;
}
function Qr(n, t, i, r, e, a) {
  n === void 0 && (n = {}), t === void 0 && (t = []), e === void 0 && (e = []), a === void 0 && (a = !1);
  var s = t, o = s[0], u = s.slice(1);
  if (typeof o == "string")
    Qr(n, nn[o], i, r, e, a);
  else if (o) {
    var l = Bb(r, o);
    if (!l.setSource)
      return e.push(l), Qr(n, u, i, r, e, a);
    l.setSource(It({}, n), function(d, h) {
      if (d)
        return Qr(n, u, i, r, e, a);
      e.push(l), Qr(h, n.type === h.type ? u : nn[h.type], i, r, e, a);
    });
  } else
    u.length ? Qr(n, u, i, r, e, a) : a ? i(n, e) : Qr(n, nn["*"], i, r, e, !0);
}
var Ub = {
  opus: "video/ogg",
  ogv: "video/ogg",
  mp4: "video/mp4",
  mov: "video/mp4",
  m4v: "video/mp4",
  mkv: "video/x-matroska",
  m4a: "audio/mp4",
  mp3: "audio/mpeg",
  aac: "audio/aac",
  caf: "audio/x-caf",
  flac: "audio/flac",
  oga: "audio/ogg",
  wav: "audio/wav",
  m3u8: "application/x-mpegURL",
  mpd: "application/dash+xml",
  jpg: "image/jpeg",
  jpeg: "image/jpeg",
  gif: "image/gif",
  png: "image/png",
  svg: "image/svg+xml",
  webp: "image/webp"
}, go = function(t) {
  t === void 0 && (t = "");
  var i = hc(t), r = Ub[i.toLowerCase()];
  return r || "";
}, qb = function(t, i) {
  if (!i)
    return "";
  if (t.cache_.source.src === i && t.cache_.source.type)
    return t.cache_.source.type;
  var r = t.cache_.sources.filter(function(o) {
    return o.src === i;
  });
  if (r.length)
    return r[0].type;
  for (var e = t.$$("source"), a = 0; a < e.length; a++) {
    var s = e[a];
    if (s.type && s.src && s.src === i)
      return s.type;
  }
  return go(i);
}, Vb = function n(t) {
  if (Array.isArray(t)) {
    var i = [];
    t.forEach(function(r) {
      r = n(r), Array.isArray(r) ? i = i.concat(r) : br(r) && i.push(r);
    }), t = i;
  } else
    typeof t == "string" && t.trim() ? t = [sh({
      src: t
    })] : br(t) && typeof t.src == "string" && t.src && t.src.trim() ? t = [sh(t)] : t = [];
  return t;
};
function sh(n) {
  if (!n.type) {
    var t = go(n.src);
    t && (n.type = t);
  }
  return n;
}
var jb = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(i, r, e) {
    var a, s = St({
      createEl: !1
    }, r);
    if (a = n.call(this, i, s, e) || this, !r.playerOptions.sources || r.playerOptions.sources.length === 0)
      for (var o = 0, u = r.playerOptions.techOrder; o < u.length; o++) {
        var l = Nt(u[o]), d = yt.getTech(l);
        if (l || (d = ve.getComponent(l)), d && d.isSupported()) {
          i.loadTech_(l);
          break;
        }
      }
    else
      i.src(r.playerOptions.sources);
    return a;
  }
  return t;
}(ve);
ve.registerComponent("MediaLoader", jb);
var Qo = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.options_.controlText && a.controlText(a.options_.controlText), a.handleMouseOver_ = function(s) {
      return a.handleMouseOver(s);
    }, a.handleMouseOut_ = function(s) {
      return a.handleMouseOut(s);
    }, a.handleClick_ = function(s) {
      return a.handleClick(s);
    }, a.handleKeyDown_ = function(s) {
      return a.handleKeyDown(s);
    }, a.emitTapEvents(), a.enable(), a;
  }
  var i = t.prototype;
  return i.createEl = function(e, a, s) {
    e === void 0 && (e = "div"), a === void 0 && (a = {}), s === void 0 && (s = {}), a = It({
      className: this.buildCSSClass(),
      tabIndex: 0
    }, a), e === "button" && Ze.error("Creating a ClickableComponent with an HTML element of " + e + " is not supported; use a Button instead."), s = It({
      role: "button"
    }, s), this.tabIndex_ = a.tabIndex;
    var o = nt(e, a, s);
    return o.appendChild(nt("span", {
      className: "vjs-icon-placeholder"
    }, {
      "aria-hidden": !0
    })), this.createControlTextEl(o), o;
  }, i.dispose = function() {
    this.controlTextEl_ = null, n.prototype.dispose.call(this);
  }, i.createControlTextEl = function(e) {
    return this.controlTextEl_ = nt("span", {
      className: "vjs-control-text"
    }, {
      "aria-live": "polite"
    }), e && e.appendChild(this.controlTextEl_), this.controlText(this.controlText_, e), this.controlTextEl_;
  }, i.controlText = function(e, a) {
    if (a === void 0 && (a = this.el()), e === void 0)
      return this.controlText_ || "Need Text";
    var s = this.localize(e);
    this.controlText_ = e, dn(this.controlTextEl_, s), !this.nonIconControl && !this.player_.options_.noUITitleAttributes && a.setAttribute("title", s);
  }, i.buildCSSClass = function() {
    return "vjs-control vjs-button " + n.prototype.buildCSSClass.call(this);
  }, i.enable = function() {
    this.enabled_ || (this.enabled_ = !0, this.removeClass("vjs-disabled"), this.el_.setAttribute("aria-disabled", "false"), typeof this.tabIndex_ < "u" && this.el_.setAttribute("tabIndex", this.tabIndex_), this.on(["tap", "click"], this.handleClick_), this.on("keydown", this.handleKeyDown_));
  }, i.disable = function() {
    this.enabled_ = !1, this.addClass("vjs-disabled"), this.el_.setAttribute("aria-disabled", "true"), typeof this.tabIndex_ < "u" && this.el_.removeAttribute("tabIndex"), this.off("mouseover", this.handleMouseOver_), this.off("mouseout", this.handleMouseOut_), this.off(["tap", "click"], this.handleClick_), this.off("keydown", this.handleKeyDown_);
  }, i.handleLanguagechange = function() {
    this.controlText(this.controlText_);
  }, i.handleClick = function(e) {
    this.options_.clickHandler && this.options_.clickHandler.call(this, arguments);
  }, i.handleKeyDown = function(e) {
    ze.isEventKey(e, "Space") || ze.isEventKey(e, "Enter") ? (e.preventDefault(), e.stopPropagation(), this.trigger("click")) : n.prototype.handleKeyDown.call(this, e);
  }, t;
}(ve);
ve.registerComponent("ClickableComponent", Qo);
var Hb = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.update(), a.update_ = function(s) {
      return a.update(s);
    }, r.on("posterchange", a.update_), a;
  }
  var i = t.prototype;
  return i.dispose = function() {
    this.player().off("posterchange", this.update_), n.prototype.dispose.call(this);
  }, i.createEl = function() {
    var e = nt("div", {
      className: "vjs-poster",
      tabIndex: -1
    });
    return e;
  }, i.update = function(e) {
    var a = this.player().poster();
    this.setSrc(a), a ? this.show() : this.hide();
  }, i.setSrc = function(e) {
    var a = "";
    e && (a = 'url("' + e + '")'), this.el_.style.backgroundImage = a;
  }, i.handleClick = function(e) {
    if (!!this.player_.controls()) {
      var a = this.player_.usingPlugin("eme") && this.player_.eme.sessions && this.player_.eme.sessions.length > 0;
      this.player_.tech(!0) && !((ls || us) && a) && this.player_.tech(!0).focus(), this.player_.paused() ? Ji(this.player_.play()) : this.player_.pause();
    }
  }, t;
}(Qo);
ve.registerComponent("PosterImage", Hb);
var Di = "#222", oh = "#ccc", Wb = {
  monospace: "monospace",
  sansSerif: "sans-serif",
  serif: "serif",
  monospaceSansSerif: '"Andale Mono", "Lucida Console", monospace',
  monospaceSerif: '"Courier New", monospace',
  proportionalSansSerif: "sans-serif",
  proportionalSerif: "serif",
  casual: '"Comic Sans MS", Impact, fantasy',
  script: '"Monotype Corsiva", cursive',
  smallcaps: '"Andale Mono", "Lucida Console", monospace, sans-serif'
};
function Vu(n, t) {
  var i;
  if (n.length === 4)
    i = n[1] + n[1] + n[2] + n[2] + n[3] + n[3];
  else if (n.length === 7)
    i = n.slice(1);
  else
    throw new Error("Invalid color code provided, " + n + "; must be formatted as e.g. #f0e or #f604e2.");
  return "rgba(" + parseInt(i.slice(0, 2), 16) + "," + parseInt(i.slice(2, 4), 16) + "," + parseInt(i.slice(4, 6), 16) + "," + t + ")";
}
function ju(n, t, i) {
  try {
    n.style[t] = i;
  } catch {
    return;
  }
}
var Gb = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e, a) {
    var s;
    s = n.call(this, r, e, a) || this;
    var o = function(l) {
      return s.updateDisplay(l);
    };
    return r.on("loadstart", function(u) {
      return s.toggleDisplay(u);
    }), r.on("texttrackchange", o), r.on("loadedmetadata", function(u) {
      return s.preselectTrack(u);
    }), r.ready(Et(Ge(s), function() {
      if (r.tech_ && r.tech_.featuresNativeTextTracks) {
        this.hide();
        return;
      }
      r.on("fullscreenchange", o), r.on("playerresize", o), B.addEventListener("orientationchange", o), r.on("dispose", function() {
        return B.removeEventListener("orientationchange", o);
      });
      for (var u = this.options_.playerOptions.tracks || [], l = 0; l < u.length; l++)
        this.player_.addRemoteTextTrack(u[l], !0);
      this.preselectTrack();
    })), s;
  }
  var i = t.prototype;
  return i.preselectTrack = function() {
    for (var e = {
      captions: 1,
      subtitles: 1
    }, a = this.player_.textTracks(), s = this.player_.cache_.selectedLanguage, o, u, l, d = 0; d < a.length; d++) {
      var h = a[d];
      s && s.enabled && s.language && s.language === h.language && h.kind in e ? h.kind === s.kind ? l = h : l || (l = h) : s && !s.enabled ? (l = null, o = null, u = null) : h.default && (h.kind === "descriptions" && !o ? o = h : h.kind in e && !u && (u = h));
    }
    l ? l.mode = "showing" : u ? u.mode = "showing" : o && (o.mode = "showing");
  }, i.toggleDisplay = function() {
    this.player_.tech_ && this.player_.tech_.featuresNativeTextTracks ? this.hide() : this.show();
  }, i.createEl = function() {
    return n.prototype.createEl.call(this, "div", {
      className: "vjs-text-track-display"
    }, {
      translate: "yes",
      "aria-live": "off",
      "aria-atomic": "true"
    });
  }, i.clearDisplay = function() {
    typeof B.WebVTT == "function" && B.WebVTT.processCues(B, [], this.el_);
  }, i.updateDisplay = function() {
    var e = this.player_.textTracks(), a = this.options_.allowMultipleShowingTracks;
    if (this.clearDisplay(), a) {
      for (var s = [], o = 0; o < e.length; ++o) {
        var u = e[o];
        u.mode === "showing" && s.push(u);
      }
      this.updateForTrack(s);
      return;
    }
    for (var l = null, d = null, h = e.length; h--; ) {
      var f = e[h];
      f.mode === "showing" && (f.kind === "descriptions" ? l = f : d = f);
    }
    d ? (this.getAttribute("aria-live") !== "off" && this.setAttribute("aria-live", "off"), this.updateForTrack(d)) : l && (this.getAttribute("aria-live") !== "assertive" && this.setAttribute("aria-live", "assertive"), this.updateForTrack(l));
  }, i.updateDisplayState = function(e) {
    for (var a = this.player_.textTrackSettings.getValues(), s = e.activeCues, o = s.length; o--; ) {
      var u = s[o];
      if (!!u) {
        var l = u.displayState;
        if (a.color && (l.firstChild.style.color = a.color), a.textOpacity && ju(l.firstChild, "color", Vu(a.color || "#fff", a.textOpacity)), a.backgroundColor && (l.firstChild.style.backgroundColor = a.backgroundColor), a.backgroundOpacity && ju(l.firstChild, "backgroundColor", Vu(a.backgroundColor || "#000", a.backgroundOpacity)), a.windowColor && (a.windowOpacity ? ju(l, "backgroundColor", Vu(a.windowColor, a.windowOpacity)) : l.style.backgroundColor = a.windowColor), a.edgeStyle && (a.edgeStyle === "dropshadow" ? l.firstChild.style.textShadow = "2px 2px 3px " + Di + ", 2px 2px 4px " + Di + ", 2px 2px 5px " + Di : a.edgeStyle === "raised" ? l.firstChild.style.textShadow = "1px 1px " + Di + ", 2px 2px " + Di + ", 3px 3px " + Di : a.edgeStyle === "depressed" ? l.firstChild.style.textShadow = "1px 1px " + oh + ", 0 1px " + oh + ", -1px -1px " + Di + ", 0 -1px " + Di : a.edgeStyle === "uniform" && (l.firstChild.style.textShadow = "0 0 4px " + Di + ", 0 0 4px " + Di + ", 0 0 4px " + Di + ", 0 0 4px " + Di)), a.fontPercent && a.fontPercent !== 1) {
          var d = B.parseFloat(l.style.fontSize);
          l.style.fontSize = d * a.fontPercent + "px", l.style.height = "auto", l.style.top = "auto";
        }
        a.fontFamily && a.fontFamily !== "default" && (a.fontFamily === "small-caps" ? l.firstChild.style.fontVariant = "small-caps" : l.firstChild.style.fontFamily = Wb[a.fontFamily]);
      }
    }
  }, i.updateForTrack = function(e) {
    if (Array.isArray(e) || (e = [e]), !(typeof B.WebVTT != "function" || e.every(function(_) {
      return !_.activeCues;
    }))) {
      for (var a = [], s = 0; s < e.length; ++s)
        for (var o = e[s], u = 0; u < o.activeCues.length; ++u)
          a.push(o.activeCues[u]);
      B.WebVTT.processCues(B, a, this.el_);
      for (var l = 0; l < e.length; ++l) {
        for (var d = e[l], h = 0; h < d.activeCues.length; ++h) {
          var f = d.activeCues[h].displayState;
          vr(f, "vjs-text-track-cue"), vr(f, "vjs-text-track-cue-" + (d.language ? d.language : l)), d.language && Yn(f, "lang", d.language);
        }
        this.player_.textTrackSettings && this.updateDisplayState(d);
      }
    }
  }, t;
}(ve);
ve.registerComponent("TextTrackDisplay", Gb);
var $b = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t() {
    return n.apply(this, arguments) || this;
  }
  var i = t.prototype;
  return i.createEl = function() {
    var e = this.player_.isAudio(), a = this.localize(e ? "Audio Player" : "Video Player"), s = nt("span", {
      className: "vjs-control-text",
      textContent: this.localize("{1} is loading.", [a])
    }), o = n.prototype.createEl.call(this, "div", {
      className: "vjs-loading-spinner",
      dir: "ltr"
    });
    return o.appendChild(s), o;
  }, t;
}(ve);
ve.registerComponent("LoadingSpinner", $b);
var Hi = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t() {
    return n.apply(this, arguments) || this;
  }
  var i = t.prototype;
  return i.createEl = function(e, a, s) {
    a === void 0 && (a = {}), s === void 0 && (s = {}), e = "button", a = It({
      className: this.buildCSSClass()
    }, a), s = It({
      type: "button"
    }, s);
    var o = nt(e, a, s);
    return o.appendChild(nt("span", {
      className: "vjs-icon-placeholder"
    }, {
      "aria-hidden": !0
    })), this.createControlTextEl(o), o;
  }, i.addChild = function(e, a) {
    a === void 0 && (a = {});
    var s = this.constructor.name;
    return Ze.warn("Adding an actionable (user controllable) child to a Button (" + s + ") is not supported; use a ClickableComponent instead."), ve.prototype.addChild.call(this, e, a);
  }, i.enable = function() {
    n.prototype.enable.call(this), this.el_.removeAttribute("disabled");
  }, i.disable = function() {
    n.prototype.disable.call(this), this.el_.setAttribute("disabled", "disabled");
  }, i.handleKeyDown = function(e) {
    if (ze.isEventKey(e, "Space") || ze.isEventKey(e, "Enter")) {
      e.stopPropagation();
      return;
    }
    n.prototype.handleKeyDown.call(this, e);
  }, t;
}(Qo);
ve.registerComponent("Button", Hi);
var Eg = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.mouseused_ = !1, a.on("mousedown", function(s) {
      return a.handleMouseDown(s);
    }), a;
  }
  var i = t.prototype;
  return i.buildCSSClass = function() {
    return "vjs-big-play-button";
  }, i.handleClick = function(e) {
    var a = this.player_.play();
    if (this.mouseused_ && e.clientX && e.clientY) {
      var s = this.player_.usingPlugin("eme") && this.player_.eme.sessions && this.player_.eme.sessions.length > 0;
      Ji(a), this.player_.tech(!0) && !((ls || us) && s) && this.player_.tech(!0).focus();
      return;
    }
    var o = this.player_.getChild("controlBar"), u = o && o.getChild("playToggle");
    if (!u) {
      this.player_.tech(!0).focus();
      return;
    }
    var l = function() {
      return u.focus();
    };
    Va(a) ? a.then(l, function() {
    }) : this.setTimeout(l, 1);
  }, i.handleKeyDown = function(e) {
    this.mouseused_ = !1, n.prototype.handleKeyDown.call(this, e);
  }, i.handleMouseDown = function(e) {
    this.mouseused_ = !0;
  }, t;
}(Hi);
Eg.prototype.controlText_ = "Play Video";
ve.registerComponent("BigPlayButton", Eg);
var zb = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.controlText(e && e.controlText || a.localize("Close")), a;
  }
  var i = t.prototype;
  return i.buildCSSClass = function() {
    return "vjs-close-button " + n.prototype.buildCSSClass.call(this);
  }, i.handleClick = function(e) {
    this.trigger({
      type: "close",
      bubbles: !1
    });
  }, i.handleKeyDown = function(e) {
    ze.isEventKey(e, "Esc") ? (e.preventDefault(), e.stopPropagation(), this.trigger("click")) : n.prototype.handleKeyDown.call(this, e);
  }, t;
}(Hi);
ve.registerComponent("CloseButton", zb);
var xg = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return e === void 0 && (e = {}), a = n.call(this, r, e) || this, e.replay = e.replay === void 0 || e.replay, a.on(r, "play", function(s) {
      return a.handlePlay(s);
    }), a.on(r, "pause", function(s) {
      return a.handlePause(s);
    }), e.replay && a.on(r, "ended", function(s) {
      return a.handleEnded(s);
    }), a;
  }
  var i = t.prototype;
  return i.buildCSSClass = function() {
    return "vjs-play-control " + n.prototype.buildCSSClass.call(this);
  }, i.handleClick = function(e) {
    this.player_.paused() ? Ji(this.player_.play()) : this.player_.pause();
  }, i.handleSeeked = function(e) {
    this.removeClass("vjs-ended"), this.player_.paused() ? this.handlePause(e) : this.handlePlay(e);
  }, i.handlePlay = function(e) {
    this.removeClass("vjs-ended"), this.removeClass("vjs-paused"), this.addClass("vjs-playing"), this.controlText("Pause");
  }, i.handlePause = function(e) {
    this.removeClass("vjs-playing"), this.addClass("vjs-paused"), this.controlText("Play");
  }, i.handleEnded = function(e) {
    var a = this;
    this.removeClass("vjs-playing"), this.addClass("vjs-ended"), this.controlText("Replay"), this.one(this.player_, "seeked", function(s) {
      return a.handleSeeked(s);
    });
  }, t;
}(Hi);
xg.prototype.controlText_ = "Play";
ve.registerComponent("PlayToggle", xg);
var wg = function(t, i) {
  t = t < 0 ? 0 : t;
  var r = Math.floor(t % 60), e = Math.floor(t / 60 % 60), a = Math.floor(t / 3600), s = Math.floor(i / 60 % 60), o = Math.floor(i / 3600);
  return (isNaN(t) || t === 1 / 0) && (a = e = r = "-"), a = a > 0 || o > 0 ? a + ":" : "", e = ((a || s >= 10) && e < 10 ? "0" + e : e) + ":", r = r < 10 ? "0" + r : r, a + e + r;
}, mc = wg;
function Kb(n) {
  mc = n;
}
function Xb() {
  mc = wg;
}
function ta(n, t) {
  return t === void 0 && (t = n), mc(n, t);
}
var ua = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.on(r, ["timeupdate", "ended"], function(s) {
      return a.updateContent(s);
    }), a.updateTextNode_(), a;
  }
  var i = t.prototype;
  return i.createEl = function() {
    var e = this.buildCSSClass(), a = n.prototype.createEl.call(this, "div", {
      className: e + " vjs-time-control vjs-control"
    }), s = nt("span", {
      className: "vjs-control-text",
      textContent: this.localize(this.labelText_) + "\xA0"
    }, {
      role: "presentation"
    });
    return a.appendChild(s), this.contentEl_ = nt("span", {
      className: e + "-display"
    }, {
      "aria-live": "off",
      role: "presentation"
    }), a.appendChild(this.contentEl_), a;
  }, i.dispose = function() {
    this.contentEl_ = null, this.textNode_ = null, n.prototype.dispose.call(this);
  }, i.updateTextNode_ = function(e) {
    var a = this;
    e === void 0 && (e = 0), e = ta(e), this.formattedTime_ !== e && (this.formattedTime_ = e, this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_", function() {
      if (!!a.contentEl_) {
        var s = a.textNode_;
        s && a.contentEl_.firstChild !== s && (s = null, Ze.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")), a.textNode_ = Te.createTextNode(a.formattedTime_), a.textNode_ && (s ? a.contentEl_.replaceChild(a.textNode_, s) : a.contentEl_.appendChild(a.textNode_));
      }
    }));
  }, i.updateContent = function(e) {
  }, t;
}(ve);
ua.prototype.labelText_ = "Time";
ua.prototype.controlText_ = "Time";
ve.registerComponent("TimeDisplay", ua);
var gc = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t() {
    return n.apply(this, arguments) || this;
  }
  var i = t.prototype;
  return i.buildCSSClass = function() {
    return "vjs-current-time";
  }, i.updateContent = function(e) {
    var a;
    this.player_.ended() ? a = this.player_.duration() : a = this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime(), this.updateTextNode_(a);
  }, t;
}(ua);
gc.prototype.labelText_ = "Current Time";
gc.prototype.controlText_ = "Current Time";
ve.registerComponent("CurrentTimeDisplay", gc);
var vc = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    a = n.call(this, r, e) || this;
    var s = function(u) {
      return a.updateContent(u);
    };
    return a.on(r, "durationchange", s), a.on(r, "loadstart", s), a.on(r, "loadedmetadata", s), a;
  }
  var i = t.prototype;
  return i.buildCSSClass = function() {
    return "vjs-duration";
  }, i.updateContent = function(e) {
    var a = this.player_.duration();
    this.updateTextNode_(a);
  }, t;
}(ua);
vc.prototype.labelText_ = "Duration";
vc.prototype.controlText_ = "Duration";
ve.registerComponent("DurationDisplay", vc);
var Qb = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t() {
    return n.apply(this, arguments) || this;
  }
  var i = t.prototype;
  return i.createEl = function() {
    var e = n.prototype.createEl.call(this, "div", {
      className: "vjs-time-control vjs-time-divider"
    }, {
      "aria-hidden": !0
    }), a = n.prototype.createEl.call(this, "div"), s = n.prototype.createEl.call(this, "span", {
      textContent: "/"
    });
    return a.appendChild(s), e.appendChild(a), e;
  }, t;
}(ve);
ve.registerComponent("TimeDivider", Qb);
var _c = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.on(r, "durationchange", function(s) {
      return a.updateContent(s);
    }), a;
  }
  var i = t.prototype;
  return i.buildCSSClass = function() {
    return "vjs-remaining-time";
  }, i.createEl = function() {
    var e = n.prototype.createEl.call(this);
    return this.options_.displayNegative !== !1 && e.insertBefore(nt("span", {}, {
      "aria-hidden": !0
    }, "-"), this.contentEl_), e;
  }, i.updateContent = function(e) {
    if (typeof this.player_.duration() == "number") {
      var a;
      this.player_.ended() ? a = 0 : this.player_.remainingTimeDisplay ? a = this.player_.remainingTimeDisplay() : a = this.player_.remainingTime(), this.updateTextNode_(a);
    }
  }, t;
}(ua);
_c.prototype.labelText_ = "Remaining Time";
_c.prototype.controlText_ = "Remaining Time";
ve.registerComponent("RemainingTimeDisplay", _c);
var Yb = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.updateShowing(), a.on(a.player(), "durationchange", function(s) {
      return a.updateShowing(s);
    }), a;
  }
  var i = t.prototype;
  return i.createEl = function() {
    var e = n.prototype.createEl.call(this, "div", {
      className: "vjs-live-control vjs-control"
    });
    return this.contentEl_ = nt("div", {
      className: "vjs-live-display"
    }, {
      "aria-live": "off"
    }), this.contentEl_.appendChild(nt("span", {
      className: "vjs-control-text",
      textContent: this.localize("Stream Type") + "\xA0"
    })), this.contentEl_.appendChild(Te.createTextNode(this.localize("LIVE"))), e.appendChild(this.contentEl_), e;
  }, i.dispose = function() {
    this.contentEl_ = null, n.prototype.dispose.call(this);
  }, i.updateShowing = function(e) {
    this.player().duration() === 1 / 0 ? this.show() : this.hide();
  }, t;
}(ve);
ve.registerComponent("LiveDisplay", Yb);
var Ag = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.updateLiveEdgeStatus(), a.player_.liveTracker && (a.updateLiveEdgeStatusHandler_ = function(s) {
      return a.updateLiveEdgeStatus(s);
    }, a.on(a.player_.liveTracker, "liveedgechange", a.updateLiveEdgeStatusHandler_)), a;
  }
  var i = t.prototype;
  return i.createEl = function() {
    var e = n.prototype.createEl.call(this, "button", {
      className: "vjs-seek-to-live-control vjs-control"
    });
    return this.textEl_ = nt("span", {
      className: "vjs-seek-to-live-text",
      textContent: this.localize("LIVE")
    }, {
      "aria-hidden": "true"
    }), e.appendChild(this.textEl_), e;
  }, i.updateLiveEdgeStatus = function() {
    !this.player_.liveTracker || this.player_.liveTracker.atLiveEdge() ? (this.setAttribute("aria-disabled", !0), this.addClass("vjs-at-live-edge"), this.controlText("Seek to live, currently playing live")) : (this.setAttribute("aria-disabled", !1), this.removeClass("vjs-at-live-edge"), this.controlText("Seek to live, currently behind live"));
  }, i.handleClick = function() {
    this.player_.liveTracker.seekToLiveEdge();
  }, i.dispose = function() {
    this.player_.liveTracker && this.off(this.player_.liveTracker, "liveedgechange", this.updateLiveEdgeStatusHandler_), this.textEl_ = null, n.prototype.dispose.call(this);
  }, t;
}(Hi);
Ag.prototype.controlText_ = "Seek to live, currently playing live";
ve.registerComponent("SeekToLive", Ag);
var Yo = function(t, i, r) {
  return t = Number(t), Math.min(r, Math.max(i, isNaN(t) ? i : t));
}, yc = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.handleMouseDown_ = function(s) {
      return a.handleMouseDown(s);
    }, a.handleMouseUp_ = function(s) {
      return a.handleMouseUp(s);
    }, a.handleKeyDown_ = function(s) {
      return a.handleKeyDown(s);
    }, a.handleClick_ = function(s) {
      return a.handleClick(s);
    }, a.handleMouseMove_ = function(s) {
      return a.handleMouseMove(s);
    }, a.update_ = function(s) {
      return a.update(s);
    }, a.bar = a.getChild(a.options_.barName), a.vertical(!!a.options_.vertical), a.enable(), a;
  }
  var i = t.prototype;
  return i.enabled = function() {
    return this.enabled_;
  }, i.enable = function() {
    this.enabled() || (this.on("mousedown", this.handleMouseDown_), this.on("touchstart", this.handleMouseDown_), this.on("keydown", this.handleKeyDown_), this.on("click", this.handleClick_), this.on(this.player_, "controlsvisible", this.update), this.playerEvent && this.on(this.player_, this.playerEvent, this.update), this.removeClass("disabled"), this.setAttribute("tabindex", 0), this.enabled_ = !0);
  }, i.disable = function() {
    if (!!this.enabled()) {
      var e = this.bar.el_.ownerDocument;
      this.off("mousedown", this.handleMouseDown_), this.off("touchstart", this.handleMouseDown_), this.off("keydown", this.handleKeyDown_), this.off("click", this.handleClick_), this.off(this.player_, "controlsvisible", this.update_), this.off(e, "mousemove", this.handleMouseMove_), this.off(e, "mouseup", this.handleMouseUp_), this.off(e, "touchmove", this.handleMouseMove_), this.off(e, "touchend", this.handleMouseUp_), this.removeAttribute("tabindex"), this.addClass("disabled"), this.playerEvent && this.off(this.player_, this.playerEvent, this.update), this.enabled_ = !1;
    }
  }, i.createEl = function(e, a, s) {
    return a === void 0 && (a = {}), s === void 0 && (s = {}), a.className = a.className + " vjs-slider", a = It({
      tabIndex: 0
    }, a), s = It({
      role: "slider",
      "aria-valuenow": 0,
      "aria-valuemin": 0,
      "aria-valuemax": 100,
      tabIndex: 0
    }, s), n.prototype.createEl.call(this, e, a, s);
  }, i.handleMouseDown = function(e) {
    var a = this.bar.el_.ownerDocument;
    e.type === "mousedown" && e.preventDefault(), e.type === "touchstart" && !xr && e.preventDefault(), tg(), this.addClass("vjs-sliding"), this.trigger("slideractive"), this.on(a, "mousemove", this.handleMouseMove_), this.on(a, "mouseup", this.handleMouseUp_), this.on(a, "touchmove", this.handleMouseMove_), this.on(a, "touchend", this.handleMouseUp_), this.handleMouseMove(e, !0);
  }, i.handleMouseMove = function(e) {
  }, i.handleMouseUp = function() {
    var e = this.bar.el_.ownerDocument;
    ig(), this.removeClass("vjs-sliding"), this.trigger("sliderinactive"), this.off(e, "mousemove", this.handleMouseMove_), this.off(e, "mouseup", this.handleMouseUp_), this.off(e, "touchmove", this.handleMouseMove_), this.off(e, "touchend", this.handleMouseUp_), this.update();
  }, i.update = function() {
    var e = this;
    if (!(!this.el_ || !this.bar)) {
      var a = this.getProgress();
      return a === this.progress_ || (this.progress_ = a, this.requestNamedAnimationFrame("Slider#update", function() {
        var s = e.vertical() ? "height" : "width";
        e.bar.el().style[s] = (a * 100).toFixed(2) + "%";
      })), a;
    }
  }, i.getProgress = function() {
    return Number(Yo(this.getPercent(), 0, 1).toFixed(4));
  }, i.calculateDistance = function(e) {
    var a = Go(this.el_, e);
    return this.vertical() ? a.y : a.x;
  }, i.handleKeyDown = function(e) {
    ze.isEventKey(e, "Left") || ze.isEventKey(e, "Down") ? (e.preventDefault(), e.stopPropagation(), this.stepBack()) : ze.isEventKey(e, "Right") || ze.isEventKey(e, "Up") ? (e.preventDefault(), e.stopPropagation(), this.stepForward()) : n.prototype.handleKeyDown.call(this, e);
  }, i.handleClick = function(e) {
    e.stopPropagation(), e.preventDefault();
  }, i.vertical = function(e) {
    if (e === void 0)
      return this.vertical_ || !1;
    this.vertical_ = !!e, this.vertical_ ? this.addClass("vjs-slider-vertical") : this.addClass("vjs-slider-horizontal");
  }, t;
}(ve);
ve.registerComponent("Slider", yc);
var Hu = function(t, i) {
  return Yo(t / i * 100, 0, 100).toFixed(2) + "%";
}, Jb = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.partEls_ = [], a.on(r, "progress", function(s) {
      return a.update(s);
    }), a;
  }
  var i = t.prototype;
  return i.createEl = function() {
    var e = n.prototype.createEl.call(this, "div", {
      className: "vjs-load-progress"
    }), a = nt("span", {
      className: "vjs-control-text"
    }), s = nt("span", {
      textContent: this.localize("Loaded")
    }), o = Te.createTextNode(": ");
    return this.percentageEl_ = nt("span", {
      className: "vjs-control-text-loaded-percentage",
      textContent: "0%"
    }), e.appendChild(a), a.appendChild(s), a.appendChild(o), a.appendChild(this.percentageEl_), e;
  }, i.dispose = function() {
    this.partEls_ = null, this.percentageEl_ = null, n.prototype.dispose.call(this);
  }, i.update = function(e) {
    var a = this;
    this.requestNamedAnimationFrame("LoadProgressBar#update", function() {
      var s = a.player_.liveTracker, o = a.player_.buffered(), u = s && s.isLive() ? s.seekableEnd() : a.player_.duration(), l = a.player_.bufferedEnd(), d = a.partEls_, h = Hu(l, u);
      a.percent_ !== h && (a.el_.style.width = h, dn(a.percentageEl_, h), a.percent_ = h);
      for (var f = 0; f < o.length; f++) {
        var _ = o.start(f), v = o.end(f), y = d[f];
        y || (y = a.el_.appendChild(nt()), d[f] = y), !(y.dataset.start === _ && y.dataset.end === v) && (y.dataset.start = _, y.dataset.end = v, y.style.left = Hu(_, l), y.style.width = Hu(v - _, l));
      }
      for (var T = d.length; T > o.length; T--)
        a.el_.removeChild(d[T - 1]);
      d.length = o.length;
    });
  }, t;
}(ve);
ve.registerComponent("LoadProgressBar", Jb);
var Zb = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.update = Sr(Et(Ge(a), a.update), Wi), a;
  }
  var i = t.prototype;
  return i.createEl = function() {
    return n.prototype.createEl.call(this, "div", {
      className: "vjs-time-tooltip"
    }, {
      "aria-hidden": "true"
    });
  }, i.update = function(e, a, s) {
    var o = Za(this.el_), u = Jn(this.player_.el()), l = e.width * a;
    if (!(!u || !o)) {
      var d = e.left - u.left + l, h = e.width - l + (u.right - e.right), f = o.width / 2;
      d < f ? f += f - d : h < f && (f = h), f < 0 ? f = 0 : f > o.width && (f = o.width), f = Math.round(f), this.el_.style.right = "-" + f + "px", this.write(s);
    }
  }, i.write = function(e) {
    dn(this.el_, e);
  }, i.updateTime = function(e, a, s, o) {
    var u = this;
    this.requestNamedAnimationFrame("TimeTooltip#updateTime", function() {
      var l, d = u.player_.duration();
      if (u.player_.liveTracker && u.player_.liveTracker.isLive()) {
        var h = u.player_.liveTracker.liveWindow(), f = h - a * h;
        l = (f < 1 ? "" : "-") + ta(f, h);
      } else
        l = ta(s, d);
      u.update(e, a, l), o && o();
    });
  }, t;
}(ve);
ve.registerComponent("TimeTooltip", Zb);
var Tc = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.update = Sr(Et(Ge(a), a.update), Wi), a;
  }
  var i = t.prototype;
  return i.createEl = function() {
    return n.prototype.createEl.call(this, "div", {
      className: "vjs-play-progress vjs-slider-bar"
    }, {
      "aria-hidden": "true"
    });
  }, i.update = function(e, a) {
    var s = this.getChild("timeTooltip");
    if (!!s) {
      var o = this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime();
      s.updateTime(e, a, o);
    }
  }, t;
}(ve);
Tc.prototype.options_ = {
  children: []
};
!hi && !Er && Tc.prototype.options_.children.push("timeTooltip");
ve.registerComponent("PlayProgressBar", Tc);
var Cg = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.update = Sr(Et(Ge(a), a.update), Wi), a;
  }
  var i = t.prototype;
  return i.createEl = function() {
    return n.prototype.createEl.call(this, "div", {
      className: "vjs-mouse-display"
    });
  }, i.update = function(e, a) {
    var s = this, o = a * this.player_.duration();
    this.getChild("timeTooltip").updateTime(e, a, o, function() {
      s.el_.style.left = e.width * a + "px";
    });
  }, t;
}(ve);
Cg.prototype.options_ = {
  children: ["timeTooltip"]
};
ve.registerComponent("MouseTimeDisplay", Cg);
var js = 5, uh = 12, bc = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.setEventHandlers_(), a;
  }
  var i = t.prototype;
  return i.setEventHandlers_ = function() {
    var e = this;
    this.update_ = Et(this, this.update), this.update = Sr(this.update_, Wi), this.on(this.player_, ["ended", "durationchange", "timeupdate"], this.update), this.player_.liveTracker && this.on(this.player_.liveTracker, "liveedgechange", this.update), this.updateInterval = null, this.enableIntervalHandler_ = function(a) {
      return e.enableInterval_(a);
    }, this.disableIntervalHandler_ = function(a) {
      return e.disableInterval_(a);
    }, this.on(this.player_, ["playing"], this.enableIntervalHandler_), this.on(this.player_, ["ended", "pause", "waiting"], this.disableIntervalHandler_), "hidden" in Te && "visibilityState" in Te && this.on(Te, "visibilitychange", this.toggleVisibility_);
  }, i.toggleVisibility_ = function(e) {
    Te.visibilityState === "hidden" ? (this.cancelNamedAnimationFrame("SeekBar#update"), this.cancelNamedAnimationFrame("Slider#update"), this.disableInterval_(e)) : (!this.player_.ended() && !this.player_.paused() && this.enableInterval_(), this.update());
  }, i.enableInterval_ = function() {
    this.updateInterval || (this.updateInterval = this.setInterval(this.update, Wi));
  }, i.disableInterval_ = function(e) {
    this.player_.liveTracker && this.player_.liveTracker.isLive() && e && e.type !== "ended" || !this.updateInterval || (this.clearInterval(this.updateInterval), this.updateInterval = null);
  }, i.createEl = function() {
    return n.prototype.createEl.call(this, "div", {
      className: "vjs-progress-holder"
    }, {
      "aria-label": this.localize("Progress Bar")
    });
  }, i.update = function(e) {
    var a = this;
    if (Te.visibilityState !== "hidden") {
      var s = n.prototype.update.call(this);
      return this.requestNamedAnimationFrame("SeekBar#update", function() {
        var o = a.player_.ended() ? a.player_.duration() : a.getCurrentTime_(), u = a.player_.liveTracker, l = a.player_.duration();
        u && u.isLive() && (l = a.player_.liveTracker.liveCurrentTime()), a.percent_ !== s && (a.el_.setAttribute("aria-valuenow", (s * 100).toFixed(2)), a.percent_ = s), (a.currentTime_ !== o || a.duration_ !== l) && (a.el_.setAttribute("aria-valuetext", a.localize("progress bar timing: currentTime={1} duration={2}", [ta(o, l), ta(l, l)], "{1} of {2}")), a.currentTime_ = o, a.duration_ = l), a.bar && a.bar.update(Jn(a.el()), a.getProgress());
      }), s;
    }
  }, i.userSeek_ = function(e) {
    this.player_.liveTracker && this.player_.liveTracker.isLive() && this.player_.liveTracker.nextSeekedFromUser(), this.player_.currentTime(e);
  }, i.getCurrentTime_ = function() {
    return this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime();
  }, i.getPercent = function() {
    var e = this.getCurrentTime_(), a, s = this.player_.liveTracker;
    return s && s.isLive() ? (a = (e - s.seekableStart()) / s.liveWindow(), s.atLiveEdge() && (a = 1)) : a = e / this.player_.duration(), a;
  }, i.handleMouseDown = function(e) {
    !es(e) || (e.stopPropagation(), this.videoWasPlaying = !this.player_.paused(), this.player_.pause(), n.prototype.handleMouseDown.call(this, e));
  }, i.handleMouseMove = function(e, a) {
    if (a === void 0 && (a = !1), !!es(e)) {
      !a && !this.player_.scrubbing() && this.player_.scrubbing(!0);
      var s, o = this.calculateDistance(e), u = this.player_.liveTracker;
      if (!u || !u.isLive())
        s = o * this.player_.duration(), s === this.player_.duration() && (s = s - 0.1);
      else {
        if (o >= 0.99) {
          u.seekToLiveEdge();
          return;
        }
        var l = u.seekableStart(), d = u.liveCurrentTime();
        if (s = l + o * u.liveWindow(), s >= d && (s = d), s <= l && (s = l + 0.1), s === 1 / 0)
          return;
      }
      this.userSeek_(s);
    }
  }, i.enable = function() {
    n.prototype.enable.call(this);
    var e = this.getChild("mouseTimeDisplay");
    !e || e.show();
  }, i.disable = function() {
    n.prototype.disable.call(this);
    var e = this.getChild("mouseTimeDisplay");
    !e || e.hide();
  }, i.handleMouseUp = function(e) {
    n.prototype.handleMouseUp.call(this, e), e && e.stopPropagation(), this.player_.scrubbing(!1), this.player_.trigger({
      type: "timeupdate",
      target: this,
      manuallyTriggered: !0
    }), this.videoWasPlaying ? Ji(this.player_.play()) : this.update_();
  }, i.stepForward = function() {
    this.userSeek_(this.player_.currentTime() + js);
  }, i.stepBack = function() {
    this.userSeek_(this.player_.currentTime() - js);
  }, i.handleAction = function(e) {
    this.player_.paused() ? this.player_.play() : this.player_.pause();
  }, i.handleKeyDown = function(e) {
    var a = this.player_.liveTracker;
    if (ze.isEventKey(e, "Space") || ze.isEventKey(e, "Enter"))
      e.preventDefault(), e.stopPropagation(), this.handleAction(e);
    else if (ze.isEventKey(e, "Home"))
      e.preventDefault(), e.stopPropagation(), this.userSeek_(0);
    else if (ze.isEventKey(e, "End"))
      e.preventDefault(), e.stopPropagation(), a && a.isLive() ? this.userSeek_(a.liveCurrentTime()) : this.userSeek_(this.player_.duration());
    else if (/^[0-9]$/.test(ze(e))) {
      e.preventDefault(), e.stopPropagation();
      var s = (ze.codes[ze(e)] - ze.codes[0]) * 10 / 100;
      a && a.isLive() ? this.userSeek_(a.seekableStart() + a.liveWindow() * s) : this.userSeek_(this.player_.duration() * s);
    } else
      ze.isEventKey(e, "PgDn") ? (e.preventDefault(), e.stopPropagation(), this.userSeek_(this.player_.currentTime() - js * uh)) : ze.isEventKey(e, "PgUp") ? (e.preventDefault(), e.stopPropagation(), this.userSeek_(this.player_.currentTime() + js * uh)) : n.prototype.handleKeyDown.call(this, e);
  }, i.dispose = function() {
    this.disableInterval_(), this.off(this.player_, ["ended", "durationchange", "timeupdate"], this.update), this.player_.liveTracker && this.off(this.player_.liveTracker, "liveedgechange", this.update), this.off(this.player_, ["playing"], this.enableIntervalHandler_), this.off(this.player_, ["ended", "pause", "waiting"], this.disableIntervalHandler_), "hidden" in Te && "visibilityState" in Te && this.off(Te, "visibilitychange", this.toggleVisibility_), n.prototype.dispose.call(this);
  }, t;
}(yc);
bc.prototype.options_ = {
  children: ["loadProgressBar", "playProgressBar"],
  barName: "playProgressBar"
};
!hi && !Er && bc.prototype.options_.children.splice(1, 0, "mouseTimeDisplay");
ve.registerComponent("SeekBar", bc);
var kg = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.handleMouseMove = Sr(Et(Ge(a), a.handleMouseMove), Wi), a.throttledHandleMouseSeek = Sr(Et(Ge(a), a.handleMouseSeek), Wi), a.handleMouseUpHandler_ = function(s) {
      return a.handleMouseUp(s);
    }, a.handleMouseDownHandler_ = function(s) {
      return a.handleMouseDown(s);
    }, a.enable(), a;
  }
  var i = t.prototype;
  return i.createEl = function() {
    return n.prototype.createEl.call(this, "div", {
      className: "vjs-progress-control vjs-control"
    });
  }, i.handleMouseMove = function(e) {
    var a = this.getChild("seekBar");
    if (!!a) {
      var s = a.getChild("playProgressBar"), o = a.getChild("mouseTimeDisplay");
      if (!(!s && !o)) {
        var u = a.el(), l = Za(u), d = Go(u, e).x;
        d = Yo(d, 0, 1), o && o.update(l, d), s && s.update(l, a.getProgress());
      }
    }
  }, i.handleMouseSeek = function(e) {
    var a = this.getChild("seekBar");
    a && a.handleMouseMove(e);
  }, i.enabled = function() {
    return this.enabled_;
  }, i.disable = function() {
    if (this.children().forEach(function(a) {
      return a.disable && a.disable();
    }), !!this.enabled() && (this.off(["mousedown", "touchstart"], this.handleMouseDownHandler_), this.off(this.el_, "mousemove", this.handleMouseMove), this.removeListenersAddedOnMousedownAndTouchstart(), this.addClass("disabled"), this.enabled_ = !1, this.player_.scrubbing())) {
      var e = this.getChild("seekBar");
      this.player_.scrubbing(!1), e.videoWasPlaying && Ji(this.player_.play());
    }
  }, i.enable = function() {
    this.children().forEach(function(e) {
      return e.enable && e.enable();
    }), !this.enabled() && (this.on(["mousedown", "touchstart"], this.handleMouseDownHandler_), this.on(this.el_, "mousemove", this.handleMouseMove), this.removeClass("disabled"), this.enabled_ = !0);
  }, i.removeListenersAddedOnMousedownAndTouchstart = function() {
    var e = this.el_.ownerDocument;
    this.off(e, "mousemove", this.throttledHandleMouseSeek), this.off(e, "touchmove", this.throttledHandleMouseSeek), this.off(e, "mouseup", this.handleMouseUpHandler_), this.off(e, "touchend", this.handleMouseUpHandler_);
  }, i.handleMouseDown = function(e) {
    var a = this.el_.ownerDocument, s = this.getChild("seekBar");
    s && s.handleMouseDown(e), this.on(a, "mousemove", this.throttledHandleMouseSeek), this.on(a, "touchmove", this.throttledHandleMouseSeek), this.on(a, "mouseup", this.handleMouseUpHandler_), this.on(a, "touchend", this.handleMouseUpHandler_);
  }, i.handleMouseUp = function(e) {
    var a = this.getChild("seekBar");
    a && a.handleMouseUp(e), this.removeListenersAddedOnMousedownAndTouchstart();
  }, t;
}(ve);
kg.prototype.options_ = {
  children: ["seekBar"]
};
ve.registerComponent("ProgressControl", kg);
var Pg = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.on(r, ["enterpictureinpicture", "leavepictureinpicture"], function(s) {
      return a.handlePictureInPictureChange(s);
    }), a.on(r, ["disablepictureinpicturechanged", "loadedmetadata"], function(s) {
      return a.handlePictureInPictureEnabledChange(s);
    }), a.on(r, ["loadedmetadata", "audioonlymodechange", "audiopostermodechange"], function() {
      var s = r.currentType().substring(0, 5) === "audio";
      s || r.audioPosterMode() || r.audioOnlyMode() ? (r.isInPictureInPicture() && r.exitPictureInPicture(), a.hide()) : a.show();
    }), a.disable(), a;
  }
  var i = t.prototype;
  return i.buildCSSClass = function() {
    return "vjs-picture-in-picture-control " + n.prototype.buildCSSClass.call(this);
  }, i.handlePictureInPictureEnabledChange = function() {
    Te.pictureInPictureEnabled && this.player_.disablePictureInPicture() === !1 ? this.enable() : this.disable();
  }, i.handlePictureInPictureChange = function(e) {
    this.player_.isInPictureInPicture() ? this.controlText("Exit Picture-in-Picture") : this.controlText("Picture-in-Picture"), this.handlePictureInPictureEnabledChange();
  }, i.handleClick = function(e) {
    this.player_.isInPictureInPicture() ? this.player_.exitPictureInPicture() : this.player_.requestPictureInPicture();
  }, t;
}(Hi);
Pg.prototype.controlText_ = "Picture-in-Picture";
ve.registerComponent("PictureInPictureToggle", Pg);
var Ig = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.on(r, "fullscreenchange", function(s) {
      return a.handleFullscreenChange(s);
    }), Te[r.fsApi_.fullscreenEnabled] === !1 && a.disable(), a;
  }
  var i = t.prototype;
  return i.buildCSSClass = function() {
    return "vjs-fullscreen-control " + n.prototype.buildCSSClass.call(this);
  }, i.handleFullscreenChange = function(e) {
    this.player_.isFullscreen() ? this.controlText("Non-Fullscreen") : this.controlText("Fullscreen");
  }, i.handleClick = function(e) {
    this.player_.isFullscreen() ? this.player_.exitFullscreen() : this.player_.requestFullscreen();
  }, t;
}(Hi);
Ig.prototype.controlText_ = "Fullscreen";
ve.registerComponent("FullscreenToggle", Ig);
var eS = function(t, i) {
  i.tech_ && !i.tech_.featuresVolumeControl && t.addClass("vjs-hidden"), t.on(i, "loadstart", function() {
    i.tech_.featuresVolumeControl ? t.removeClass("vjs-hidden") : t.addClass("vjs-hidden");
  });
}, tS = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t() {
    return n.apply(this, arguments) || this;
  }
  var i = t.prototype;
  return i.createEl = function() {
    var e = n.prototype.createEl.call(this, "div", {
      className: "vjs-volume-level"
    });
    return e.appendChild(n.prototype.createEl.call(this, "span", {
      className: "vjs-control-text"
    })), e;
  }, t;
}(ve);
ve.registerComponent("VolumeLevel", tS);
var iS = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.update = Sr(Et(Ge(a), a.update), Wi), a;
  }
  var i = t.prototype;
  return i.createEl = function() {
    return n.prototype.createEl.call(this, "div", {
      className: "vjs-volume-tooltip"
    }, {
      "aria-hidden": "true"
    });
  }, i.update = function(e, a, s, o) {
    if (!s) {
      var u = Jn(this.el_), l = Jn(this.player_.el()), d = e.width * a;
      if (!l || !u)
        return;
      var h = e.left - l.left + d, f = e.width - d + (l.right - e.right), _ = u.width / 2;
      h < _ ? _ += _ - h : f < _ && (_ = f), _ < 0 ? _ = 0 : _ > u.width && (_ = u.width), this.el_.style.right = "-" + _ + "px";
    }
    this.write(o + "%");
  }, i.write = function(e) {
    dn(this.el_, e);
  }, i.updateVolume = function(e, a, s, o, u) {
    var l = this;
    this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume", function() {
      l.update(e, a, s, o.toFixed(0)), u && u();
    });
  }, t;
}(ve);
ve.registerComponent("VolumeLevelTooltip", iS);
var Dg = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.update = Sr(Et(Ge(a), a.update), Wi), a;
  }
  var i = t.prototype;
  return i.createEl = function() {
    return n.prototype.createEl.call(this, "div", {
      className: "vjs-mouse-display"
    });
  }, i.update = function(e, a, s) {
    var o = this, u = 100 * a;
    this.getChild("volumeLevelTooltip").updateVolume(e, a, s, u, function() {
      s ? o.el_.style.bottom = e.height * a + "px" : o.el_.style.left = e.width * a + "px";
    });
  }, t;
}(ve);
Dg.prototype.options_ = {
  children: ["volumeLevelTooltip"]
};
ve.registerComponent("MouseVolumeLevelDisplay", Dg);
var Jo = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.on("slideractive", function(s) {
      return a.updateLastVolume_(s);
    }), a.on(r, "volumechange", function(s) {
      return a.updateARIAAttributes(s);
    }), r.ready(function() {
      return a.updateARIAAttributes();
    }), a;
  }
  var i = t.prototype;
  return i.createEl = function() {
    return n.prototype.createEl.call(this, "div", {
      className: "vjs-volume-bar vjs-slider-bar"
    }, {
      "aria-label": this.localize("Volume Level"),
      "aria-live": "polite"
    });
  }, i.handleMouseDown = function(e) {
    !es(e) || n.prototype.handleMouseDown.call(this, e);
  }, i.handleMouseMove = function(e) {
    var a = this.getChild("mouseVolumeLevelDisplay");
    if (a) {
      var s = this.el(), o = Jn(s), u = this.vertical(), l = Go(s, e);
      l = u ? l.y : l.x, l = Yo(l, 0, 1), a.update(o, l, u);
    }
    !es(e) || (this.checkMuted(), this.player_.volume(this.calculateDistance(e)));
  }, i.checkMuted = function() {
    this.player_.muted() && this.player_.muted(!1);
  }, i.getPercent = function() {
    return this.player_.muted() ? 0 : this.player_.volume();
  }, i.stepForward = function() {
    this.checkMuted(), this.player_.volume(this.player_.volume() + 0.1);
  }, i.stepBack = function() {
    this.checkMuted(), this.player_.volume(this.player_.volume() - 0.1);
  }, i.updateARIAAttributes = function(e) {
    var a = this.player_.muted() ? 0 : this.volumeAsPercentage_();
    this.el_.setAttribute("aria-valuenow", a), this.el_.setAttribute("aria-valuetext", a + "%");
  }, i.volumeAsPercentage_ = function() {
    return Math.round(this.player_.volume() * 100);
  }, i.updateLastVolume_ = function() {
    var e = this, a = this.player_.volume();
    this.one("sliderinactive", function() {
      e.player_.volume() === 0 && e.player_.lastVolume_(a);
    });
  }, t;
}(yc);
Jo.prototype.options_ = {
  children: ["volumeLevel"],
  barName: "volumeLevel"
};
!hi && !Er && Jo.prototype.options_.children.splice(0, 0, "mouseVolumeLevelDisplay");
Jo.prototype.playerEvent = "volumechange";
ve.registerComponent("VolumeBar", Jo);
var Lg = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return e === void 0 && (e = {}), e.vertical = e.vertical || !1, (typeof e.volumeBar > "u" || Ya(e.volumeBar)) && (e.volumeBar = e.volumeBar || {}, e.volumeBar.vertical = e.vertical), a = n.call(this, r, e) || this, eS(Ge(a), r), a.throttledHandleMouseMove = Sr(Et(Ge(a), a.handleMouseMove), Wi), a.handleMouseUpHandler_ = function(s) {
      return a.handleMouseUp(s);
    }, a.on("mousedown", function(s) {
      return a.handleMouseDown(s);
    }), a.on("touchstart", function(s) {
      return a.handleMouseDown(s);
    }), a.on("mousemove", function(s) {
      return a.handleMouseMove(s);
    }), a.on(a.volumeBar, ["focus", "slideractive"], function() {
      a.volumeBar.addClass("vjs-slider-active"), a.addClass("vjs-slider-active"), a.trigger("slideractive");
    }), a.on(a.volumeBar, ["blur", "sliderinactive"], function() {
      a.volumeBar.removeClass("vjs-slider-active"), a.removeClass("vjs-slider-active"), a.trigger("sliderinactive");
    }), a;
  }
  var i = t.prototype;
  return i.createEl = function() {
    var e = "vjs-volume-horizontal";
    return this.options_.vertical && (e = "vjs-volume-vertical"), n.prototype.createEl.call(this, "div", {
      className: "vjs-volume-control vjs-control " + e
    });
  }, i.handleMouseDown = function(e) {
    var a = this.el_.ownerDocument;
    this.on(a, "mousemove", this.throttledHandleMouseMove), this.on(a, "touchmove", this.throttledHandleMouseMove), this.on(a, "mouseup", this.handleMouseUpHandler_), this.on(a, "touchend", this.handleMouseUpHandler_);
  }, i.handleMouseUp = function(e) {
    var a = this.el_.ownerDocument;
    this.off(a, "mousemove", this.throttledHandleMouseMove), this.off(a, "touchmove", this.throttledHandleMouseMove), this.off(a, "mouseup", this.handleMouseUpHandler_), this.off(a, "touchend", this.handleMouseUpHandler_);
  }, i.handleMouseMove = function(e) {
    this.volumeBar.handleMouseMove(e);
  }, t;
}(ve);
Lg.prototype.options_ = {
  children: ["volumeBar"]
};
ve.registerComponent("VolumeControl", Lg);
var rS = function(t, i) {
  i.tech_ && !i.tech_.featuresMuteControl && t.addClass("vjs-hidden"), t.on(i, "loadstart", function() {
    i.tech_.featuresMuteControl ? t.removeClass("vjs-hidden") : t.addClass("vjs-hidden");
  });
}, Og = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, rS(Ge(a), r), a.on(r, ["loadstart", "volumechange"], function(s) {
      return a.update(s);
    }), a;
  }
  var i = t.prototype;
  return i.buildCSSClass = function() {
    return "vjs-mute-control " + n.prototype.buildCSSClass.call(this);
  }, i.handleClick = function(e) {
    var a = this.player_.volume(), s = this.player_.lastVolume_();
    if (a === 0) {
      var o = s < 0.1 ? 0.1 : s;
      this.player_.volume(o), this.player_.muted(!1);
    } else
      this.player_.muted(!this.player_.muted());
  }, i.update = function(e) {
    this.updateIcon_(), this.updateControlText_();
  }, i.updateIcon_ = function() {
    var e = this.player_.volume(), a = 3;
    hi && this.player_.tech_ && this.player_.tech_.el_ && this.player_.muted(this.player_.tech_.el_.muted), e === 0 || this.player_.muted() ? a = 0 : e < 0.33 ? a = 1 : e < 0.67 && (a = 2);
    for (var s = 0; s < 4; s++)
      ds(this.el_, "vjs-vol-" + s);
    vr(this.el_, "vjs-vol-" + a);
  }, i.updateControlText_ = function() {
    var e = this.player_.muted() || this.player_.volume() === 0, a = e ? "Unmute" : "Mute";
    this.controlText() !== a && this.controlText(a);
  }, t;
}(Hi);
Og.prototype.controlText_ = "Mute";
ve.registerComponent("MuteToggle", Og);
var Rg = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return e === void 0 && (e = {}), typeof e.inline < "u" ? e.inline = e.inline : e.inline = !0, (typeof e.volumeControl > "u" || Ya(e.volumeControl)) && (e.volumeControl = e.volumeControl || {}, e.volumeControl.vertical = !e.inline), a = n.call(this, r, e) || this, a.handleKeyPressHandler_ = function(s) {
      return a.handleKeyPress(s);
    }, a.on(r, ["loadstart"], function(s) {
      return a.volumePanelState_(s);
    }), a.on(a.muteToggle, "keyup", function(s) {
      return a.handleKeyPress(s);
    }), a.on(a.volumeControl, "keyup", function(s) {
      return a.handleVolumeControlKeyUp(s);
    }), a.on("keydown", function(s) {
      return a.handleKeyPress(s);
    }), a.on("mouseover", function(s) {
      return a.handleMouseOver(s);
    }), a.on("mouseout", function(s) {
      return a.handleMouseOut(s);
    }), a.on(a.volumeControl, ["slideractive"], a.sliderActive_), a.on(a.volumeControl, ["sliderinactive"], a.sliderInactive_), a;
  }
  var i = t.prototype;
  return i.sliderActive_ = function() {
    this.addClass("vjs-slider-active");
  }, i.sliderInactive_ = function() {
    this.removeClass("vjs-slider-active");
  }, i.volumePanelState_ = function() {
    this.volumeControl.hasClass("vjs-hidden") && this.muteToggle.hasClass("vjs-hidden") && this.addClass("vjs-hidden"), this.volumeControl.hasClass("vjs-hidden") && !this.muteToggle.hasClass("vjs-hidden") && this.addClass("vjs-mute-toggle-only");
  }, i.createEl = function() {
    var e = "vjs-volume-panel-horizontal";
    return this.options_.inline || (e = "vjs-volume-panel-vertical"), n.prototype.createEl.call(this, "div", {
      className: "vjs-volume-panel vjs-control " + e
    });
  }, i.dispose = function() {
    this.handleMouseOut(), n.prototype.dispose.call(this);
  }, i.handleVolumeControlKeyUp = function(e) {
    ze.isEventKey(e, "Esc") && this.muteToggle.focus();
  }, i.handleMouseOver = function(e) {
    this.addClass("vjs-hover"), Pi(Te, "keyup", this.handleKeyPressHandler_);
  }, i.handleMouseOut = function(e) {
    this.removeClass("vjs-hover"), ei(Te, "keyup", this.handleKeyPressHandler_);
  }, i.handleKeyPress = function(e) {
    ze.isEventKey(e, "Esc") && this.handleMouseOut();
  }, t;
}(ve);
Rg.prototype.options_ = {
  children: ["muteToggle", "volumeControl"]
};
ve.registerComponent("VolumePanel", Rg);
var Ng = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, e && (a.menuButton_ = e.menuButton), a.focusedChild_ = -1, a.on("keydown", function(s) {
      return a.handleKeyDown(s);
    }), a.boundHandleBlur_ = function(s) {
      return a.handleBlur(s);
    }, a.boundHandleTapClick_ = function(s) {
      return a.handleTapClick(s);
    }, a;
  }
  var i = t.prototype;
  return i.addEventListenerForItem = function(e) {
    e instanceof ve && (this.on(e, "blur", this.boundHandleBlur_), this.on(e, ["tap", "click"], this.boundHandleTapClick_));
  }, i.removeEventListenerForItem = function(e) {
    e instanceof ve && (this.off(e, "blur", this.boundHandleBlur_), this.off(e, ["tap", "click"], this.boundHandleTapClick_));
  }, i.removeChild = function(e) {
    typeof e == "string" && (e = this.getChild(e)), this.removeEventListenerForItem(e), n.prototype.removeChild.call(this, e);
  }, i.addItem = function(e) {
    var a = this.addChild(e);
    a && this.addEventListenerForItem(a);
  }, i.createEl = function() {
    var e = this.options_.contentElType || "ul";
    this.contentEl_ = nt(e, {
      className: "vjs-menu-content"
    }), this.contentEl_.setAttribute("role", "menu");
    var a = n.prototype.createEl.call(this, "div", {
      append: this.contentEl_,
      className: "vjs-menu"
    });
    return a.appendChild(this.contentEl_), Pi(a, "click", function(s) {
      s.preventDefault(), s.stopImmediatePropagation();
    }), a;
  }, i.dispose = function() {
    this.contentEl_ = null, this.boundHandleBlur_ = null, this.boundHandleTapClick_ = null, n.prototype.dispose.call(this);
  }, i.handleBlur = function(e) {
    var a = e.relatedTarget || Te.activeElement;
    if (!this.children().some(function(o) {
      return o.el() === a;
    })) {
      var s = this.menuButton_;
      s && s.buttonPressed_ && a !== s.el().firstChild && s.unpressButton();
    }
  }, i.handleTapClick = function(e) {
    if (this.menuButton_) {
      this.menuButton_.unpressButton();
      var a = this.children();
      if (!Array.isArray(a))
        return;
      var s = a.filter(function(o) {
        return o.el() === e.target;
      })[0];
      if (!s)
        return;
      s.name() !== "CaptionSettingsMenuItem" && this.menuButton_.focus();
    }
  }, i.handleKeyDown = function(e) {
    ze.isEventKey(e, "Left") || ze.isEventKey(e, "Down") ? (e.preventDefault(), e.stopPropagation(), this.stepForward()) : (ze.isEventKey(e, "Right") || ze.isEventKey(e, "Up")) && (e.preventDefault(), e.stopPropagation(), this.stepBack());
  }, i.stepForward = function() {
    var e = 0;
    this.focusedChild_ !== void 0 && (e = this.focusedChild_ + 1), this.focus(e);
  }, i.stepBack = function() {
    var e = 0;
    this.focusedChild_ !== void 0 && (e = this.focusedChild_ - 1), this.focus(e);
  }, i.focus = function(e) {
    e === void 0 && (e = 0);
    var a = this.children().slice(), s = a.length && a[0].hasClass("vjs-menu-title");
    s && a.shift(), a.length > 0 && (e < 0 ? e = 0 : e >= a.length && (e = a.length - 1), this.focusedChild_ = e, a[e].el_.focus());
  }, t;
}(ve);
ve.registerComponent("Menu", Ng);
var Sc = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    e === void 0 && (e = {}), a = n.call(this, r, e) || this, a.menuButton_ = new Hi(r, e), a.menuButton_.controlText(a.controlText_), a.menuButton_.el_.setAttribute("aria-haspopup", "true");
    var s = Hi.prototype.buildCSSClass();
    a.menuButton_.el_.className = a.buildCSSClass() + " " + s, a.menuButton_.removeClass("vjs-control"), a.addChild(a.menuButton_), a.update(), a.enabled_ = !0;
    var o = function(l) {
      return a.handleClick(l);
    };
    return a.handleMenuKeyUp_ = function(u) {
      return a.handleMenuKeyUp(u);
    }, a.on(a.menuButton_, "tap", o), a.on(a.menuButton_, "click", o), a.on(a.menuButton_, "keydown", function(u) {
      return a.handleKeyDown(u);
    }), a.on(a.menuButton_, "mouseenter", function() {
      a.addClass("vjs-hover"), a.menu.show(), Pi(Te, "keyup", a.handleMenuKeyUp_);
    }), a.on("mouseleave", function(u) {
      return a.handleMouseLeave(u);
    }), a.on("keydown", function(u) {
      return a.handleSubmenuKeyDown(u);
    }), a;
  }
  var i = t.prototype;
  return i.update = function() {
    var e = this.createMenu();
    this.menu && (this.menu.dispose(), this.removeChild(this.menu)), this.menu = e, this.addChild(e), this.buttonPressed_ = !1, this.menuButton_.el_.setAttribute("aria-expanded", "false"), this.items && this.items.length <= this.hideThreshold_ ? (this.hide(), this.menu.contentEl_.removeAttribute("role")) : (this.show(), this.menu.contentEl_.setAttribute("role", "menu"));
  }, i.createMenu = function() {
    var e = new Ng(this.player_, {
      menuButton: this
    });
    if (this.hideThreshold_ = 0, this.options_.title) {
      var a = nt("li", {
        className: "vjs-menu-title",
        textContent: Nt(this.options_.title),
        tabIndex: -1
      }), s = new ve(this.player_, {
        el: a
      });
      e.addItem(s);
    }
    if (this.items = this.createItems(), this.items)
      for (var o = 0; o < this.items.length; o++)
        e.addItem(this.items[o]);
    return e;
  }, i.createItems = function() {
  }, i.createEl = function() {
    return n.prototype.createEl.call(this, "div", {
      className: this.buildWrapperCSSClass()
    }, {});
  }, i.buildWrapperCSSClass = function() {
    var e = "vjs-menu-button";
    this.options_.inline === !0 ? e += "-inline" : e += "-popup";
    var a = Hi.prototype.buildCSSClass();
    return "vjs-menu-button " + e + " " + a + " " + n.prototype.buildCSSClass.call(this);
  }, i.buildCSSClass = function() {
    var e = "vjs-menu-button";
    return this.options_.inline === !0 ? e += "-inline" : e += "-popup", "vjs-menu-button " + e + " " + n.prototype.buildCSSClass.call(this);
  }, i.controlText = function(e, a) {
    return a === void 0 && (a = this.menuButton_.el()), this.menuButton_.controlText(e, a);
  }, i.dispose = function() {
    this.handleMouseLeave(), n.prototype.dispose.call(this);
  }, i.handleClick = function(e) {
    this.buttonPressed_ ? this.unpressButton() : this.pressButton();
  }, i.handleMouseLeave = function(e) {
    this.removeClass("vjs-hover"), ei(Te, "keyup", this.handleMenuKeyUp_);
  }, i.focus = function() {
    this.menuButton_.focus();
  }, i.blur = function() {
    this.menuButton_.blur();
  }, i.handleKeyDown = function(e) {
    ze.isEventKey(e, "Esc") || ze.isEventKey(e, "Tab") ? (this.buttonPressed_ && this.unpressButton(), ze.isEventKey(e, "Tab") || (e.preventDefault(), this.menuButton_.focus())) : (ze.isEventKey(e, "Up") || ze.isEventKey(e, "Down")) && (this.buttonPressed_ || (e.preventDefault(), this.pressButton()));
  }, i.handleMenuKeyUp = function(e) {
    (ze.isEventKey(e, "Esc") || ze.isEventKey(e, "Tab")) && this.removeClass("vjs-hover");
  }, i.handleSubmenuKeyPress = function(e) {
    this.handleSubmenuKeyDown(e);
  }, i.handleSubmenuKeyDown = function(e) {
    (ze.isEventKey(e, "Esc") || ze.isEventKey(e, "Tab")) && (this.buttonPressed_ && this.unpressButton(), ze.isEventKey(e, "Tab") || (e.preventDefault(), this.menuButton_.focus()));
  }, i.pressButton = function() {
    if (this.enabled_) {
      if (this.buttonPressed_ = !0, this.menu.show(), this.menu.lockShowing(), this.menuButton_.el_.setAttribute("aria-expanded", "true"), hi && Qm())
        return;
      this.menu.focus();
    }
  }, i.unpressButton = function() {
    this.enabled_ && (this.buttonPressed_ = !1, this.menu.unlockShowing(), this.menu.hide(), this.menuButton_.el_.setAttribute("aria-expanded", "false"));
  }, i.disable = function() {
    this.unpressButton(), this.enabled_ = !1, this.addClass("vjs-disabled"), this.menuButton_.disable();
  }, i.enable = function() {
    this.enabled_ = !0, this.removeClass("vjs-disabled"), this.menuButton_.enable();
  }, t;
}(ve);
ve.registerComponent("MenuButton", Sc);
var Ec = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(i, r) {
    var e, a = r.tracks;
    if (e = n.call(this, i, r) || this, e.items.length <= 1 && e.hide(), !a)
      return Ge(e);
    var s = Et(Ge(e), e.update);
    return a.addEventListener("removetrack", s), a.addEventListener("addtrack", s), a.addEventListener("labelchange", s), e.player_.on("ready", s), e.player_.on("dispose", function() {
      a.removeEventListener("removetrack", s), a.removeEventListener("addtrack", s), a.removeEventListener("labelchange", s);
    }), e;
  }
  return t;
}(Sc);
ve.registerComponent("TrackButton", Ec);
var nS = ["Tab", "Esc", "Up", "Down", "Right", "Left"], fs = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.selectable = e.selectable, a.isSelected_ = e.selected || !1, a.multiSelectable = e.multiSelectable, a.selected(a.isSelected_), a.selectable ? a.multiSelectable ? a.el_.setAttribute("role", "menuitemcheckbox") : a.el_.setAttribute("role", "menuitemradio") : a.el_.setAttribute("role", "menuitem"), a;
  }
  var i = t.prototype;
  return i.createEl = function(e, a, s) {
    this.nonIconControl = !0;
    var o = n.prototype.createEl.call(this, "li", It({
      className: "vjs-menu-item",
      tabIndex: -1
    }, a), s);
    return o.replaceChild(nt("span", {
      className: "vjs-menu-item-text",
      textContent: this.localize(this.options_.label)
    }), o.querySelector(".vjs-icon-placeholder")), o;
  }, i.handleKeyDown = function(e) {
    nS.some(function(a) {
      return ze.isEventKey(e, a);
    }) || n.prototype.handleKeyDown.call(this, e);
  }, i.handleClick = function(e) {
    this.selected(!0);
  }, i.selected = function(e) {
    this.selectable && (e ? (this.addClass("vjs-selected"), this.el_.setAttribute("aria-checked", "true"), this.controlText(", selected"), this.isSelected_ = !0) : (this.removeClass("vjs-selected"), this.el_.setAttribute("aria-checked", "false"), this.controlText(""), this.isSelected_ = !1));
  }, t;
}(Qo);
ve.registerComponent("MenuItem", fs);
var hs = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a, s = e.track, o = r.textTracks();
    e.label = s.label || s.language || "Unknown", e.selected = s.mode === "showing", a = n.call(this, r, e) || this, a.track = s, a.kinds = (e.kinds || [e.kind || a.track.kind]).filter(Boolean);
    var u = function() {
      for (var f = arguments.length, _ = new Array(f), v = 0; v < f; v++)
        _[v] = arguments[v];
      a.handleTracksChange.apply(Ge(a), _);
    }, l = function() {
      for (var f = arguments.length, _ = new Array(f), v = 0; v < f; v++)
        _[v] = arguments[v];
      a.handleSelectedLanguageChange.apply(Ge(a), _);
    };
    if (r.on(["loadstart", "texttrackchange"], u), o.addEventListener("change", u), o.addEventListener("selectedlanguagechange", l), a.on("dispose", function() {
      r.off(["loadstart", "texttrackchange"], u), o.removeEventListener("change", u), o.removeEventListener("selectedlanguagechange", l);
    }), o.onchange === void 0) {
      var d;
      a.on(["tap", "click"], function() {
        if (typeof B.Event != "object")
          try {
            d = new B.Event("change");
          } catch {
          }
        d || (d = Te.createEvent("Event"), d.initEvent("change", !0, !0)), o.dispatchEvent(d);
      });
    }
    return a.handleTracksChange(), a;
  }
  var i = t.prototype;
  return i.handleClick = function(e) {
    var a = this.track, s = this.player_.textTracks();
    if (n.prototype.handleClick.call(this, e), !!s)
      for (var o = 0; o < s.length; o++) {
        var u = s[o];
        this.kinds.indexOf(u.kind) !== -1 && (u === a ? u.mode !== "showing" && (u.mode = "showing") : u.mode !== "disabled" && (u.mode = "disabled"));
      }
  }, i.handleTracksChange = function(e) {
    var a = this.track.mode === "showing";
    a !== this.isSelected_ && this.selected(a);
  }, i.handleSelectedLanguageChange = function(e) {
    if (this.track.mode === "showing") {
      var a = this.player_.cache_.selectedLanguage;
      if (a && a.enabled && a.language === this.track.language && a.kind !== this.track.kind)
        return;
      this.player_.cache_.selectedLanguage = {
        enabled: !0,
        language: this.track.language,
        kind: this.track.kind
      };
    }
  }, i.dispose = function() {
    this.track = null, n.prototype.dispose.call(this);
  }, t;
}(fs);
ve.registerComponent("TextTrackMenuItem", hs);
var Mg = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    return e.track = {
      player: r,
      kind: e.kind,
      kinds: e.kinds,
      default: !1,
      mode: "disabled"
    }, e.kinds || (e.kinds = [e.kind]), e.label ? e.track.label = e.label : e.track.label = e.kinds.join(" and ") + " off", e.selectable = !0, e.multiSelectable = !1, n.call(this, r, e) || this;
  }
  var i = t.prototype;
  return i.handleTracksChange = function(e) {
    for (var a = this.player().textTracks(), s = !0, o = 0, u = a.length; o < u; o++) {
      var l = a[o];
      if (this.options_.kinds.indexOf(l.kind) > -1 && l.mode === "showing") {
        s = !1;
        break;
      }
    }
    s !== this.isSelected_ && this.selected(s);
  }, i.handleSelectedLanguageChange = function(e) {
    for (var a = this.player().textTracks(), s = !0, o = 0, u = a.length; o < u; o++) {
      var l = a[o];
      if (["captions", "descriptions", "subtitles"].indexOf(l.kind) > -1 && l.mode === "showing") {
        s = !1;
        break;
      }
    }
    s && (this.player_.cache_.selectedLanguage = {
      enabled: !1
    });
  }, t;
}(hs);
ve.registerComponent("OffTextTrackMenuItem", Mg);
var la = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    return e === void 0 && (e = {}), e.tracks = r.textTracks(), n.call(this, r, e) || this;
  }
  var i = t.prototype;
  return i.createItems = function(e, a) {
    e === void 0 && (e = []), a === void 0 && (a = hs);
    var s;
    this.label_ && (s = this.label_ + " off"), e.push(new Mg(this.player_, {
      kinds: this.kinds_,
      kind: this.kind_,
      label: s
    })), this.hideThreshold_ += 1;
    var o = this.player_.textTracks();
    Array.isArray(this.kinds_) || (this.kinds_ = [this.kind_]);
    for (var u = 0; u < o.length; u++) {
      var l = o[u];
      if (this.kinds_.indexOf(l.kind) > -1) {
        var d = new a(this.player_, {
          track: l,
          kinds: this.kinds_,
          kind: this.kind_,
          selectable: !0,
          multiSelectable: !1
        });
        d.addClass("vjs-" + l.kind + "-menu-item"), e.push(d);
      }
    }
    return e;
  }, t;
}(Ec);
ve.registerComponent("TextTrackButton", la);
var Fg = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a, s = e.track, o = e.cue, u = r.currentTime();
    return e.selectable = !0, e.multiSelectable = !1, e.label = o.text, e.selected = o.startTime <= u && u < o.endTime, a = n.call(this, r, e) || this, a.track = s, a.cue = o, a;
  }
  var i = t.prototype;
  return i.handleClick = function(e) {
    n.prototype.handleClick.call(this), this.player_.currentTime(this.cue.startTime);
  }, t;
}(fs);
ve.registerComponent("ChaptersTrackMenuItem", Fg);
var xc = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e, a) {
    var s;
    return s = n.call(this, r, e, a) || this, s.selectCurrentItem_ = function() {
      s.items.forEach(function(o) {
        o.selected(s.track_.activeCues[0] === o.cue);
      });
    }, s;
  }
  var i = t.prototype;
  return i.buildCSSClass = function() {
    return "vjs-chapters-button " + n.prototype.buildCSSClass.call(this);
  }, i.buildWrapperCSSClass = function() {
    return "vjs-chapters-button " + n.prototype.buildWrapperCSSClass.call(this);
  }, i.update = function(e) {
    if (!(e && e.track && e.track.kind !== "chapters")) {
      var a = this.findChaptersTrack();
      a !== this.track_ ? (this.setTrack(a), n.prototype.update.call(this)) : (!this.items || a && a.cues && a.cues.length !== this.items.length) && n.prototype.update.call(this);
    }
  }, i.setTrack = function(e) {
    if (this.track_ !== e) {
      if (this.updateHandler_ || (this.updateHandler_ = this.update.bind(this)), this.track_) {
        var a = this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);
        a && a.removeEventListener("load", this.updateHandler_), this.track_.removeEventListener("cuechange", this.selectCurrentItem_), this.track_ = null;
      }
      if (this.track_ = e, this.track_) {
        this.track_.mode = "hidden";
        var s = this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);
        s && s.addEventListener("load", this.updateHandler_), this.track_.addEventListener("cuechange", this.selectCurrentItem_);
      }
    }
  }, i.findChaptersTrack = function() {
    for (var e = this.player_.textTracks() || [], a = e.length - 1; a >= 0; a--) {
      var s = e[a];
      if (s.kind === this.kind_)
        return s;
    }
  }, i.getMenuCaption = function() {
    return this.track_ && this.track_.label ? this.track_.label : this.localize(Nt(this.kind_));
  }, i.createMenu = function() {
    return this.options_.title = this.getMenuCaption(), n.prototype.createMenu.call(this);
  }, i.createItems = function() {
    var e = [];
    if (!this.track_)
      return e;
    var a = this.track_.cues;
    if (!a)
      return e;
    for (var s = 0, o = a.length; s < o; s++) {
      var u = a[s], l = new Fg(this.player_, {
        track: this.track_,
        cue: u
      });
      e.push(l);
    }
    return e;
  }, t;
}(la);
xc.prototype.kind_ = "chapters";
xc.prototype.controlText_ = "Chapters";
ve.registerComponent("ChaptersButton", xc);
var wc = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e, a) {
    var s;
    s = n.call(this, r, e, a) || this;
    var o = r.textTracks(), u = Et(Ge(s), s.handleTracksChange);
    return o.addEventListener("change", u), s.on("dispose", function() {
      o.removeEventListener("change", u);
    }), s;
  }
  var i = t.prototype;
  return i.handleTracksChange = function(e) {
    for (var a = this.player().textTracks(), s = !1, o = 0, u = a.length; o < u; o++) {
      var l = a[o];
      if (l.kind !== this.kind_ && l.mode === "showing") {
        s = !0;
        break;
      }
    }
    s ? this.disable() : this.enable();
  }, i.buildCSSClass = function() {
    return "vjs-descriptions-button " + n.prototype.buildCSSClass.call(this);
  }, i.buildWrapperCSSClass = function() {
    return "vjs-descriptions-button " + n.prototype.buildWrapperCSSClass.call(this);
  }, t;
}(la);
wc.prototype.kind_ = "descriptions";
wc.prototype.controlText_ = "Descriptions";
ve.registerComponent("DescriptionsButton", wc);
var Ac = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e, a) {
    return n.call(this, r, e, a) || this;
  }
  var i = t.prototype;
  return i.buildCSSClass = function() {
    return "vjs-subtitles-button " + n.prototype.buildCSSClass.call(this);
  }, i.buildWrapperCSSClass = function() {
    return "vjs-subtitles-button " + n.prototype.buildWrapperCSSClass.call(this);
  }, t;
}(la);
Ac.prototype.kind_ = "subtitles";
Ac.prototype.controlText_ = "Subtitles";
ve.registerComponent("SubtitlesButton", Ac);
var Cc = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return e.track = {
      player: r,
      kind: e.kind,
      label: e.kind + " settings",
      selectable: !1,
      default: !1,
      mode: "disabled"
    }, e.selectable = !1, e.name = "CaptionSettingsMenuItem", a = n.call(this, r, e) || this, a.addClass("vjs-texttrack-settings"), a.controlText(", opens " + e.kind + " settings dialog"), a;
  }
  var i = t.prototype;
  return i.handleClick = function(e) {
    this.player().getChild("textTrackSettings").open();
  }, t;
}(hs);
ve.registerComponent("CaptionSettingsMenuItem", Cc);
var kc = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e, a) {
    return n.call(this, r, e, a) || this;
  }
  var i = t.prototype;
  return i.buildCSSClass = function() {
    return "vjs-captions-button " + n.prototype.buildCSSClass.call(this);
  }, i.buildWrapperCSSClass = function() {
    return "vjs-captions-button " + n.prototype.buildWrapperCSSClass.call(this);
  }, i.createItems = function() {
    var e = [];
    return !(this.player().tech_ && this.player().tech_.featuresNativeTextTracks) && this.player().getChild("textTrackSettings") && (e.push(new Cc(this.player_, {
      kind: this.kind_
    })), this.hideThreshold_ += 1), n.prototype.createItems.call(this, e);
  }, t;
}(la);
kc.prototype.kind_ = "captions";
kc.prototype.controlText_ = "Captions";
ve.registerComponent("CaptionsButton", kc);
var Bg = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t() {
    return n.apply(this, arguments) || this;
  }
  var i = t.prototype;
  return i.createEl = function(e, a, s) {
    var o = n.prototype.createEl.call(this, e, a, s), u = o.querySelector(".vjs-menu-item-text");
    return this.options_.track.kind === "captions" && (u.appendChild(nt("span", {
      className: "vjs-icon-placeholder"
    }, {
      "aria-hidden": !0
    })), u.appendChild(nt("span", {
      className: "vjs-control-text",
      textContent: " " + this.localize("Captions")
    }))), o;
  }, t;
}(hs);
ve.registerComponent("SubsCapsMenuItem", Bg);
var Pc = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return e === void 0 && (e = {}), a = n.call(this, r, e) || this, a.label_ = "subtitles", ["en", "en-us", "en-ca", "fr-ca"].indexOf(a.player_.language_) > -1 && (a.label_ = "captions"), a.menuButton_.controlText(Nt(a.label_)), a;
  }
  var i = t.prototype;
  return i.buildCSSClass = function() {
    return "vjs-subs-caps-button " + n.prototype.buildCSSClass.call(this);
  }, i.buildWrapperCSSClass = function() {
    return "vjs-subs-caps-button " + n.prototype.buildWrapperCSSClass.call(this);
  }, i.createItems = function() {
    var e = [];
    return !(this.player().tech_ && this.player().tech_.featuresNativeTextTracks) && this.player().getChild("textTrackSettings") && (e.push(new Cc(this.player_, {
      kind: this.label_
    })), this.hideThreshold_ += 1), e = n.prototype.createItems.call(this, e, Bg), e;
  }, t;
}(la);
Pc.prototype.kinds_ = ["captions", "subtitles"];
Pc.prototype.controlText_ = "Subtitles";
ve.registerComponent("SubsCapsButton", Pc);
var Ug = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a, s = e.track, o = r.audioTracks();
    e.label = s.label || s.language || "Unknown", e.selected = s.enabled, a = n.call(this, r, e) || this, a.track = s, a.addClass("vjs-" + s.kind + "-menu-item");
    var u = function() {
      for (var d = arguments.length, h = new Array(d), f = 0; f < d; f++)
        h[f] = arguments[f];
      a.handleTracksChange.apply(Ge(a), h);
    };
    return o.addEventListener("change", u), a.on("dispose", function() {
      o.removeEventListener("change", u);
    }), a;
  }
  var i = t.prototype;
  return i.createEl = function(e, a, s) {
    var o = n.prototype.createEl.call(this, e, a, s), u = o.querySelector(".vjs-menu-item-text");
    return this.options_.track.kind === "main-desc" && (u.appendChild(nt("span", {
      className: "vjs-icon-placeholder"
    }, {
      "aria-hidden": !0
    })), u.appendChild(nt("span", {
      className: "vjs-control-text",
      textContent: " " + this.localize("Descriptions")
    }))), o;
  }, i.handleClick = function(e) {
    if (n.prototype.handleClick.call(this, e), this.track.enabled = !0, this.player_.tech_.featuresNativeAudioTracks)
      for (var a = this.player_.audioTracks(), s = 0; s < a.length; s++) {
        var o = a[s];
        o !== this.track && (o.enabled = o === this.track);
      }
  }, i.handleTracksChange = function(e) {
    this.selected(this.track.enabled);
  }, t;
}(fs);
ve.registerComponent("AudioTrackMenuItem", Ug);
var qg = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    return e === void 0 && (e = {}), e.tracks = r.audioTracks(), n.call(this, r, e) || this;
  }
  var i = t.prototype;
  return i.buildCSSClass = function() {
    return "vjs-audio-button " + n.prototype.buildCSSClass.call(this);
  }, i.buildWrapperCSSClass = function() {
    return "vjs-audio-button " + n.prototype.buildWrapperCSSClass.call(this);
  }, i.createItems = function(e) {
    e === void 0 && (e = []), this.hideThreshold_ = 1;
    for (var a = this.player_.audioTracks(), s = 0; s < a.length; s++) {
      var o = a[s];
      e.push(new Ug(this.player_, {
        track: o,
        selectable: !0,
        multiSelectable: !1
      }));
    }
    return e;
  }, t;
}(Ec);
qg.prototype.controlText_ = "Audio Track";
ve.registerComponent("AudioTrackButton", qg);
var Ic = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a, s = e.rate, o = parseFloat(s, 10);
    return e.label = s, e.selected = o === r.playbackRate(), e.selectable = !0, e.multiSelectable = !1, a = n.call(this, r, e) || this, a.label = s, a.rate = o, a.on(r, "ratechange", function(u) {
      return a.update(u);
    }), a;
  }
  var i = t.prototype;
  return i.handleClick = function(e) {
    n.prototype.handleClick.call(this), this.player().playbackRate(this.rate);
  }, i.update = function(e) {
    this.selected(this.player().playbackRate() === this.rate);
  }, t;
}(fs);
Ic.prototype.contentElType = "button";
ve.registerComponent("PlaybackRateMenuItem", Ic);
var Vg = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.menuButton_.el_.setAttribute("aria-describedby", a.labelElId_), a.updateVisibility(), a.updateLabel(), a.on(r, "loadstart", function(s) {
      return a.updateVisibility(s);
    }), a.on(r, "ratechange", function(s) {
      return a.updateLabel(s);
    }), a.on(r, "playbackrateschange", function(s) {
      return a.handlePlaybackRateschange(s);
    }), a;
  }
  var i = t.prototype;
  return i.createEl = function() {
    var e = n.prototype.createEl.call(this);
    return this.labelElId_ = "vjs-playback-rate-value-label-" + this.id_, this.labelEl_ = nt("div", {
      className: "vjs-playback-rate-value",
      id: this.labelElId_,
      textContent: "1x"
    }), e.appendChild(this.labelEl_), e;
  }, i.dispose = function() {
    this.labelEl_ = null, n.prototype.dispose.call(this);
  }, i.buildCSSClass = function() {
    return "vjs-playback-rate " + n.prototype.buildCSSClass.call(this);
  }, i.buildWrapperCSSClass = function() {
    return "vjs-playback-rate " + n.prototype.buildWrapperCSSClass.call(this);
  }, i.createItems = function() {
    for (var e = this.playbackRates(), a = [], s = e.length - 1; s >= 0; s--)
      a.push(new Ic(this.player(), {
        rate: e[s] + "x"
      }));
    return a;
  }, i.updateARIAAttributes = function() {
    this.el().setAttribute("aria-valuenow", this.player().playbackRate());
  }, i.handleClick = function(e) {
    var a = this.player().playbackRate(), s = this.playbackRates(), o = s.indexOf(a), u = (o + 1) % s.length;
    this.player().playbackRate(s[u]);
  }, i.handlePlaybackRateschange = function(e) {
    this.update();
  }, i.playbackRates = function() {
    var e = this.player();
    return e.playbackRates && e.playbackRates() || [];
  }, i.playbackRateSupported = function() {
    return this.player().tech_ && this.player().tech_.featuresPlaybackRate && this.playbackRates() && this.playbackRates().length > 0;
  }, i.updateVisibility = function(e) {
    this.playbackRateSupported() ? this.removeClass("vjs-hidden") : this.addClass("vjs-hidden");
  }, i.updateLabel = function(e) {
    this.playbackRateSupported() && (this.labelEl_.textContent = this.player().playbackRate() + "x");
  }, t;
}(Sc);
Vg.prototype.controlText_ = "Playback Rate";
ve.registerComponent("PlaybackRateMenuButton", Vg);
var jg = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t() {
    return n.apply(this, arguments) || this;
  }
  var i = t.prototype;
  return i.buildCSSClass = function() {
    return "vjs-spacer " + n.prototype.buildCSSClass.call(this);
  }, i.createEl = function(e, a, s) {
    return e === void 0 && (e = "div"), a === void 0 && (a = {}), s === void 0 && (s = {}), a.className || (a.className = this.buildCSSClass()), n.prototype.createEl.call(this, e, a, s);
  }, t;
}(ve);
ve.registerComponent("Spacer", jg);
var aS = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t() {
    return n.apply(this, arguments) || this;
  }
  var i = t.prototype;
  return i.buildCSSClass = function() {
    return "vjs-custom-control-spacer " + n.prototype.buildCSSClass.call(this);
  }, i.createEl = function() {
    return n.prototype.createEl.call(this, "div", {
      className: this.buildCSSClass(),
      textContent: "\xA0"
    });
  }, t;
}(jg);
ve.registerComponent("CustomControlSpacer", aS);
var vo = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t() {
    return n.apply(this, arguments) || this;
  }
  var i = t.prototype;
  return i.createEl = function() {
    return n.prototype.createEl.call(this, "div", {
      className: "vjs-control-bar",
      dir: "ltr"
    });
  }, t;
}(ve);
vo.prototype.options_ = {
  children: ["playToggle", "volumePanel", "currentTimeDisplay", "timeDivider", "durationDisplay", "progressControl", "liveDisplay", "seekToLive", "remainingTimeDisplay", "customControlSpacer", "playbackRateMenuButton", "chaptersButton", "descriptionsButton", "subsCapsButton", "audioTrackButton", "fullscreenToggle"]
};
"exitPictureInPicture" in Te && vo.prototype.options_.children.splice(vo.prototype.options_.children.length - 1, 0, "pictureInPictureToggle");
ve.registerComponent("ControlBar", vo);
var Hg = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return a = n.call(this, r, e) || this, a.on(r, "error", function(s) {
      return a.open(s);
    }), a;
  }
  var i = t.prototype;
  return i.buildCSSClass = function() {
    return "vjs-error-display " + n.prototype.buildCSSClass.call(this);
  }, i.content = function() {
    var e = this.player().error();
    return e ? this.localize(e.message) : "";
  }, t;
}(sa);
Hg.prototype.options_ = Ri({}, sa.prototype.options_, {
  pauseOnOpen: !1,
  fillAlways: !0,
  temporary: !1,
  uncloseable: !0
});
ve.registerComponent("ErrorDisplay", Hg);
var Wu = "vjs-text-track-settings", lh = ["#000", "Black"], dh = ["#00F", "Blue"], ch = ["#0FF", "Cyan"], fh = ["#0F0", "Green"], hh = ["#F0F", "Magenta"], ph = ["#F00", "Red"], mh = ["#FFF", "White"], gh = ["#FF0", "Yellow"], Gu = ["1", "Opaque"], $u = ["0.5", "Semi-Transparent"], vh = ["0", "Transparent"], Jr = {
  backgroundColor: {
    selector: ".vjs-bg-color > select",
    id: "captions-background-color-%s",
    label: "Color",
    options: [lh, mh, ph, fh, dh, gh, hh, ch]
  },
  backgroundOpacity: {
    selector: ".vjs-bg-opacity > select",
    id: "captions-background-opacity-%s",
    label: "Transparency",
    options: [Gu, $u, vh]
  },
  color: {
    selector: ".vjs-fg-color > select",
    id: "captions-foreground-color-%s",
    label: "Color",
    options: [mh, lh, ph, fh, dh, gh, hh, ch]
  },
  edgeStyle: {
    selector: ".vjs-edge-style > select",
    id: "%s",
    label: "Text Edge Style",
    options: [["none", "None"], ["raised", "Raised"], ["depressed", "Depressed"], ["uniform", "Uniform"], ["dropshadow", "Dropshadow"]]
  },
  fontFamily: {
    selector: ".vjs-font-family > select",
    id: "captions-font-family-%s",
    label: "Font Family",
    options: [["proportionalSansSerif", "Proportional Sans-Serif"], ["monospaceSansSerif", "Monospace Sans-Serif"], ["proportionalSerif", "Proportional Serif"], ["monospaceSerif", "Monospace Serif"], ["casual", "Casual"], ["script", "Script"], ["small-caps", "Small Caps"]]
  },
  fontPercent: {
    selector: ".vjs-font-percent > select",
    id: "captions-font-size-%s",
    label: "Font Size",
    options: [["0.50", "50%"], ["0.75", "75%"], ["1.00", "100%"], ["1.25", "125%"], ["1.50", "150%"], ["1.75", "175%"], ["2.00", "200%"], ["3.00", "300%"], ["4.00", "400%"]],
    default: 2,
    parser: function(t) {
      return t === "1.00" ? null : Number(t);
    }
  },
  textOpacity: {
    selector: ".vjs-text-opacity > select",
    id: "captions-foreground-opacity-%s",
    label: "Transparency",
    options: [Gu, $u]
  },
  windowColor: {
    selector: ".vjs-window-color > select",
    id: "captions-window-color-%s",
    label: "Color"
  },
  windowOpacity: {
    selector: ".vjs-window-opacity > select",
    id: "captions-window-opacity-%s",
    label: "Transparency",
    options: [vh, $u, Gu]
  }
};
Jr.windowColor.options = Jr.backgroundColor.options;
function Wg(n, t) {
  if (t && (n = t(n)), n && n !== "none")
    return n;
}
function sS(n, t) {
  var i = n.options[n.options.selectedIndex].value;
  return Wg(i, t);
}
function oS(n, t, i) {
  if (!!t) {
    for (var r = 0; r < n.options.length; r++)
      if (Wg(n.options[r].value, i) === t) {
        n.selectedIndex = r;
        break;
      }
  }
}
var uS = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return e.temporary = !1, a = n.call(this, r, e) || this, a.updateDisplay = a.updateDisplay.bind(Ge(a)), a.fill(), a.hasBeenOpened_ = a.hasBeenFilled_ = !0, a.endDialog = nt("p", {
      className: "vjs-control-text",
      textContent: a.localize("End of dialog window.")
    }), a.el().appendChild(a.endDialog), a.setDefaults(), e.persistTextTrackSettings === void 0 && (a.options_.persistTextTrackSettings = a.options_.playerOptions.persistTextTrackSettings), a.on(a.$(".vjs-done-button"), "click", function() {
      a.saveSettings(), a.close();
    }), a.on(a.$(".vjs-default-button"), "click", function() {
      a.setDefaults(), a.updateDisplay();
    }), jn(Jr, function(s) {
      a.on(a.$(s.selector), "change", a.updateDisplay);
    }), a.options_.persistTextTrackSettings && a.restoreSettings(), a;
  }
  var i = t.prototype;
  return i.dispose = function() {
    this.endDialog = null, n.prototype.dispose.call(this);
  }, i.createElSelect_ = function(e, a, s) {
    var o = this;
    a === void 0 && (a = ""), s === void 0 && (s = "label");
    var u = Jr[e], l = u.id.replace("%s", this.id_), d = [a, l].join(" ").trim();
    return ["<" + s + ' id="' + l + '" class="' + (s === "label" ? "vjs-label" : "") + '">', this.localize(u.label), "</" + s + ">", '<select aria-labelledby="' + d + '">'].concat(u.options.map(function(h) {
      var f = l + "-" + h[1].replace(/\W+/g, "");
      return ['<option id="' + f + '" value="' + h[0] + '" ', 'aria-labelledby="' + d + " " + f + '">', o.localize(h[1]), "</option>"].join("");
    })).concat("</select>").join("");
  }, i.createElFgColor_ = function() {
    var e = "captions-text-legend-" + this.id_;
    return ['<fieldset class="vjs-fg-color vjs-track-setting">', '<legend id="' + e + '">', this.localize("Text"), "</legend>", this.createElSelect_("color", e), '<span class="vjs-text-opacity vjs-opacity">', this.createElSelect_("textOpacity", e), "</span>", "</fieldset>"].join("");
  }, i.createElBgColor_ = function() {
    var e = "captions-background-" + this.id_;
    return ['<fieldset class="vjs-bg-color vjs-track-setting">', '<legend id="' + e + '">', this.localize("Background"), "</legend>", this.createElSelect_("backgroundColor", e), '<span class="vjs-bg-opacity vjs-opacity">', this.createElSelect_("backgroundOpacity", e), "</span>", "</fieldset>"].join("");
  }, i.createElWinColor_ = function() {
    var e = "captions-window-" + this.id_;
    return ['<fieldset class="vjs-window-color vjs-track-setting">', '<legend id="' + e + '">', this.localize("Window"), "</legend>", this.createElSelect_("windowColor", e), '<span class="vjs-window-opacity vjs-opacity">', this.createElSelect_("windowOpacity", e), "</span>", "</fieldset>"].join("");
  }, i.createElColors_ = function() {
    return nt("div", {
      className: "vjs-track-settings-colors",
      innerHTML: [this.createElFgColor_(), this.createElBgColor_(), this.createElWinColor_()].join("")
    });
  }, i.createElFont_ = function() {
    return nt("div", {
      className: "vjs-track-settings-font",
      innerHTML: ['<fieldset class="vjs-font-percent vjs-track-setting">', this.createElSelect_("fontPercent", "", "legend"), "</fieldset>", '<fieldset class="vjs-edge-style vjs-track-setting">', this.createElSelect_("edgeStyle", "", "legend"), "</fieldset>", '<fieldset class="vjs-font-family vjs-track-setting">', this.createElSelect_("fontFamily", "", "legend"), "</fieldset>"].join("")
    });
  }, i.createElControls_ = function() {
    var e = this.localize("restore all settings to the default values");
    return nt("div", {
      className: "vjs-track-settings-controls",
      innerHTML: ['<button type="button" class="vjs-default-button" title="' + e + '">', this.localize("Reset"), '<span class="vjs-control-text"> ' + e + "</span>", "</button>", '<button type="button" class="vjs-done-button">' + this.localize("Done") + "</button>"].join("")
    });
  }, i.content = function() {
    return [this.createElColors_(), this.createElFont_(), this.createElControls_()];
  }, i.label = function() {
    return this.localize("Caption Settings Dialog");
  }, i.description = function() {
    return this.localize("Beginning of dialog window. Escape will cancel and close the window.");
  }, i.buildCSSClass = function() {
    return n.prototype.buildCSSClass.call(this) + " vjs-text-track-settings";
  }, i.getValues = function() {
    var e = this;
    return QT(Jr, function(a, s, o) {
      var u = sS(e.$(s.selector), s.parser);
      return u !== void 0 && (a[o] = u), a;
    }, {});
  }, i.setValues = function(e) {
    var a = this;
    jn(Jr, function(s, o) {
      oS(a.$(s.selector), e[o], s.parser);
    });
  }, i.setDefaults = function() {
    var e = this;
    jn(Jr, function(a) {
      var s = a.hasOwnProperty("default") ? a.default : 0;
      e.$(a.selector).selectedIndex = s;
    });
  }, i.restoreSettings = function() {
    var e;
    try {
      e = JSON.parse(B.localStorage.getItem(Wu));
    } catch (a) {
      Ze.warn(a);
    }
    e && this.setValues(e);
  }, i.saveSettings = function() {
    if (!!this.options_.persistTextTrackSettings) {
      var e = this.getValues();
      try {
        Object.keys(e).length ? B.localStorage.setItem(Wu, JSON.stringify(e)) : B.localStorage.removeItem(Wu);
      } catch (a) {
        Ze.warn(a);
      }
    }
  }, i.updateDisplay = function() {
    var e = this.player_.getChild("textTrackDisplay");
    e && e.updateDisplay();
  }, i.conditionalBlur_ = function() {
    this.previouslyActiveEl_ = null;
    var e = this.player_.controlBar, a = e && e.subsCapsButton, s = e && e.captionsButton;
    a ? a.focus() : s && s.focus();
  }, t;
}(sa);
ve.registerComponent("TextTrackSettings", uS);
var lS = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a, s = e.ResizeObserver || B.ResizeObserver;
    e.ResizeObserver === null && (s = !1);
    var o = St({
      createEl: !s,
      reportTouchActivity: !1
    }, e);
    return a = n.call(this, r, o) || this, a.ResizeObserver = e.ResizeObserver || B.ResizeObserver, a.loadListener_ = null, a.resizeObserver_ = null, a.debouncedHandler_ = ob(function() {
      a.resizeHandler();
    }, 100, !1, Ge(a)), s ? (a.resizeObserver_ = new a.ResizeObserver(a.debouncedHandler_), a.resizeObserver_.observe(r.el())) : (a.loadListener_ = function() {
      if (!(!a.el_ || !a.el_.contentWindow)) {
        var u = a.debouncedHandler_, l = a.unloadListener_ = function() {
          ei(this, "resize", u), ei(this, "unload", l), l = null;
        };
        Pi(a.el_.contentWindow, "unload", l), Pi(a.el_.contentWindow, "resize", u);
      }
    }, a.one("load", a.loadListener_)), a;
  }
  var i = t.prototype;
  return i.createEl = function() {
    return n.prototype.createEl.call(this, "iframe", {
      className: "vjs-resize-manager",
      tabIndex: -1,
      title: this.localize("No content")
    }, {
      "aria-hidden": "true"
    });
  }, i.resizeHandler = function() {
    !this.player_ || !this.player_.trigger || this.player_.trigger("playerresize");
  }, i.dispose = function() {
    this.debouncedHandler_ && this.debouncedHandler_.cancel(), this.resizeObserver_ && (this.player_.el() && this.resizeObserver_.unobserve(this.player_.el()), this.resizeObserver_.disconnect()), this.loadListener_ && this.off("load", this.loadListener_), this.el_ && this.el_.contentWindow && this.unloadListener_ && this.unloadListener_.call(this.el_.contentWindow), this.ResizeObserver = null, this.resizeObserver = null, this.debouncedHandler_ = null, this.loadListener_ = null, n.prototype.dispose.call(this);
  }, t;
}(ve);
ve.registerComponent("ResizeManager", lS);
var dS = {
  trackingThreshold: 20,
  liveTolerance: 15
}, cS = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a, s = St(dS, e, {
      createEl: !1
    });
    return a = n.call(this, r, s) || this, a.handleVisibilityChange_ = function(o) {
      return a.handleVisibilityChange(o);
    }, a.trackLiveHandler_ = function() {
      return a.trackLive_();
    }, a.handlePlay_ = function(o) {
      return a.handlePlay(o);
    }, a.handleFirstTimeupdate_ = function(o) {
      return a.handleFirstTimeupdate(o);
    }, a.handleSeeked_ = function(o) {
      return a.handleSeeked(o);
    }, a.seekToLiveEdge_ = function(o) {
      return a.seekToLiveEdge(o);
    }, a.reset_(), a.on(a.player_, "durationchange", function(o) {
      return a.handleDurationchange(o);
    }), a.on(a.player_, "canplay", function() {
      return a.toggleTracking();
    }), ls && "hidden" in Te && "visibilityState" in Te && a.on(Te, "visibilitychange", a.handleVisibilityChange_), a;
  }
  var i = t.prototype;
  return i.handleVisibilityChange = function() {
    this.player_.duration() === 1 / 0 && (Te.hidden ? this.stopTracking() : this.startTracking());
  }, i.trackLive_ = function() {
    var e = this.player_.seekable();
    if (!(!e || !e.length)) {
      var a = Number(B.performance.now().toFixed(4)), s = this.lastTime_ === -1 ? 0 : (a - this.lastTime_) / 1e3;
      this.lastTime_ = a, this.pastSeekEnd_ = this.pastSeekEnd() + s;
      var o = this.liveCurrentTime(), u = this.player_.currentTime(), l = this.player_.paused() || this.seekedBehindLive_ || Math.abs(o - u) > this.options_.liveTolerance;
      (!this.timeupdateSeen_ || o === 1 / 0) && (l = !1), l !== this.behindLiveEdge_ && (this.behindLiveEdge_ = l, this.trigger("liveedgechange"));
    }
  }, i.handleDurationchange = function() {
    this.toggleTracking();
  }, i.toggleTracking = function() {
    this.player_.duration() === 1 / 0 && this.liveWindow() >= this.options_.trackingThreshold ? (this.player_.options_.liveui && this.player_.addClass("vjs-liveui"), this.startTracking()) : (this.player_.removeClass("vjs-liveui"), this.stopTracking());
  }, i.startTracking = function() {
    this.isTracking() || (this.timeupdateSeen_ || (this.timeupdateSeen_ = this.player_.hasStarted()), this.trackingInterval_ = this.setInterval(this.trackLiveHandler_, Wi), this.trackLive_(), this.on(this.player_, ["play", "pause"], this.trackLiveHandler_), this.timeupdateSeen_ ? this.on(this.player_, "seeked", this.handleSeeked_) : (this.one(this.player_, "play", this.handlePlay_), this.one(this.player_, "timeupdate", this.handleFirstTimeupdate_)));
  }, i.handleFirstTimeupdate = function() {
    this.timeupdateSeen_ = !0, this.on(this.player_, "seeked", this.handleSeeked_);
  }, i.handleSeeked = function() {
    var e = Math.abs(this.liveCurrentTime() - this.player_.currentTime());
    this.seekedBehindLive_ = this.nextSeekedFromUser_ && e > 2, this.nextSeekedFromUser_ = !1, this.trackLive_();
  }, i.handlePlay = function() {
    this.one(this.player_, "timeupdate", this.seekToLiveEdge_);
  }, i.reset_ = function() {
    this.lastTime_ = -1, this.pastSeekEnd_ = 0, this.lastSeekEnd_ = -1, this.behindLiveEdge_ = !0, this.timeupdateSeen_ = !1, this.seekedBehindLive_ = !1, this.nextSeekedFromUser_ = !1, this.clearInterval(this.trackingInterval_), this.trackingInterval_ = null, this.off(this.player_, ["play", "pause"], this.trackLiveHandler_), this.off(this.player_, "seeked", this.handleSeeked_), this.off(this.player_, "play", this.handlePlay_), this.off(this.player_, "timeupdate", this.handleFirstTimeupdate_), this.off(this.player_, "timeupdate", this.seekToLiveEdge_);
  }, i.nextSeekedFromUser = function() {
    this.nextSeekedFromUser_ = !0;
  }, i.stopTracking = function() {
    !this.isTracking() || (this.reset_(), this.trigger("liveedgechange"));
  }, i.seekableEnd = function() {
    for (var e = this.player_.seekable(), a = [], s = e ? e.length : 0; s--; )
      a.push(e.end(s));
    return a.length ? a.sort()[a.length - 1] : 1 / 0;
  }, i.seekableStart = function() {
    for (var e = this.player_.seekable(), a = [], s = e ? e.length : 0; s--; )
      a.push(e.start(s));
    return a.length ? a.sort()[0] : 0;
  }, i.liveWindow = function() {
    var e = this.liveCurrentTime();
    return e === 1 / 0 ? 0 : e - this.seekableStart();
  }, i.isLive = function() {
    return this.isTracking();
  }, i.atLiveEdge = function() {
    return !this.behindLiveEdge();
  }, i.liveCurrentTime = function() {
    return this.pastSeekEnd() + this.seekableEnd();
  }, i.pastSeekEnd = function() {
    var e = this.seekableEnd();
    return this.lastSeekEnd_ !== -1 && e !== this.lastSeekEnd_ && (this.pastSeekEnd_ = 0), this.lastSeekEnd_ = e, this.pastSeekEnd_;
  }, i.behindLiveEdge = function() {
    return this.behindLiveEdge_;
  }, i.isTracking = function() {
    return typeof this.trackingInterval_ == "number";
  }, i.seekToLiveEdge = function() {
    this.seekedBehindLive_ = !1, !this.atLiveEdge() && (this.nextSeekedFromUser_ = !1, this.player_.currentTime(this.liveCurrentTime()));
  }, i.dispose = function() {
    this.off(Te, "visibilitychange", this.handleVisibilityChange_), this.stopTracking(), n.prototype.dispose.call(this);
  }, t;
}(ve);
ve.registerComponent("LiveTracker", cS);
var hd = function(t) {
  var i = t.el();
  if (i.hasAttribute("src"))
    return t.triggerSourceset(i.src), !0;
  var r = t.$$("source"), e = [], a = "";
  if (!r.length)
    return !1;
  for (var s = 0; s < r.length; s++) {
    var o = r[s].src;
    o && e.indexOf(o) === -1 && e.push(o);
  }
  return e.length ? (e.length === 1 && (a = e[0]), t.triggerSourceset(a), !0) : !1;
}, fS = Object.defineProperty({}, "innerHTML", {
  get: function() {
    return this.cloneNode(!0).innerHTML;
  },
  set: function(t) {
    var i = Te.createElement(this.nodeName.toLowerCase());
    i.innerHTML = t;
    for (var r = Te.createDocumentFragment(); i.childNodes.length; )
      r.appendChild(i.childNodes[0]);
    return this.innerText = "", B.Element.prototype.appendChild.call(this, r), this.innerHTML;
  }
}), Gg = function(t, i) {
  for (var r = {}, e = 0; e < t.length && (r = Object.getOwnPropertyDescriptor(t[e], i), !(r && r.set && r.get)); e++)
    ;
  return r.enumerable = !0, r.configurable = !0, r;
}, hS = function(t) {
  return Gg([t.el(), B.HTMLMediaElement.prototype, B.Element.prototype, fS], "innerHTML");
}, _h = function(t) {
  var i = t.el();
  if (!i.resetSourceWatch_) {
    var r = {}, e = hS(t), a = function(o) {
      return function() {
        for (var u = arguments.length, l = new Array(u), d = 0; d < u; d++)
          l[d] = arguments[d];
        var h = o.apply(i, l);
        return hd(t), h;
      };
    };
    ["append", "appendChild", "insertAdjacentHTML"].forEach(function(s) {
      !i[s] || (r[s] = i[s], i[s] = a(r[s]));
    }), Object.defineProperty(i, "innerHTML", St(e, {
      set: a(e.set)
    })), i.resetSourceWatch_ = function() {
      i.resetSourceWatch_ = null, Object.keys(r).forEach(function(s) {
        i[s] = r[s];
      }), Object.defineProperty(i, "innerHTML", e);
    }, t.one("sourceset", i.resetSourceWatch_);
  }
}, pS = Object.defineProperty({}, "src", {
  get: function() {
    return this.hasAttribute("src") ? _g(B.Element.prototype.getAttribute.call(this, "src")) : "";
  },
  set: function(t) {
    return B.Element.prototype.setAttribute.call(this, "src", t), t;
  }
}), mS = function(t) {
  return Gg([t.el(), B.HTMLMediaElement.prototype, pS], "src");
}, gS = function(t) {
  if (!!t.featuresSourceset) {
    var i = t.el();
    if (!i.resetSourceset_) {
      var r = mS(t), e = i.setAttribute, a = i.load;
      Object.defineProperty(i, "src", St(r, {
        set: function(o) {
          var u = r.set.call(i, o);
          return t.triggerSourceset(i.src), u;
        }
      })), i.setAttribute = function(s, o) {
        var u = e.call(i, s, o);
        return /src/i.test(s) && t.triggerSourceset(i.src), u;
      }, i.load = function() {
        var s = a.call(i);
        return hd(t) || (t.triggerSourceset(""), _h(t)), s;
      }, i.currentSrc ? t.triggerSourceset(i.currentSrc) : hd(t) || _h(t), i.resetSourceset_ = function() {
        i.resetSourceset_ = null, i.load = a, i.setAttribute = e, Object.defineProperty(i, "src", r), i.resetSourceWatch_ && i.resetSourceWatch_();
      };
    }
  }
}, Dc = function(t, i, r, e) {
  e === void 0 && (e = !0);
  var a = function(u) {
    return Object.defineProperty(t, i, {
      value: u,
      enumerable: !0,
      writable: !0
    });
  }, s = {
    configurable: !0,
    enumerable: !0,
    get: function() {
      var u = r();
      return a(u), u;
    }
  };
  return e && (s.set = a), Object.defineProperty(t, i, s);
}, we = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    a = n.call(this, r, e) || this;
    var s = r.source, o = !1;
    if (a.featuresVideoFrameCallback = a.featuresVideoFrameCallback && a.el_.tagName === "VIDEO", s && (a.el_.currentSrc !== s.src || r.tag && r.tag.initNetworkState_ === 3) ? a.setSource(s) : a.handleLateInit_(a.el_), r.enableSourceset && a.setupSourcesetHandling_(), a.isScrubbing_ = !1, a.el_.hasChildNodes()) {
      for (var u = a.el_.childNodes, l = u.length, d = []; l--; ) {
        var h = u[l], f = h.nodeName.toLowerCase();
        f === "track" && (a.featuresNativeTextTracks ? (a.remoteTextTrackEls().addTrackElement_(h), a.remoteTextTracks().addTrack(h.track), a.textTracks().addTrack(h.track), !o && !a.el_.hasAttribute("crossorigin") && Xo(h.src) && (o = !0)) : d.push(h));
      }
      for (var _ = 0; _ < d.length; _++)
        a.el_.removeChild(d[_]);
    }
    return a.proxyNativeTracks_(), a.featuresNativeTextTracks && o && Ze.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`), a.restoreMetadataTracksInIOSNativePlayer_(), (Qn || sc || Gm) && r.nativeControlsForTouch === !0 && a.setControls(!0), a.proxyWebkitFullscreen_(), a.triggerReady(), a;
  }
  var i = t.prototype;
  return i.dispose = function() {
    this.el_ && this.el_.resetSourceset_ && this.el_.resetSourceset_(), t.disposeMediaElement(this.el_), this.options_ = null, n.prototype.dispose.call(this);
  }, i.setupSourcesetHandling_ = function() {
    gS(this);
  }, i.restoreMetadataTracksInIOSNativePlayer_ = function() {
    var e = this.textTracks(), a, s = function() {
      a = [];
      for (var l = 0; l < e.length; l++) {
        var d = e[l];
        d.kind === "metadata" && a.push({
          track: d,
          storedMode: d.mode
        });
      }
    };
    s(), e.addEventListener("change", s), this.on("dispose", function() {
      return e.removeEventListener("change", s);
    });
    var o = function u() {
      for (var l = 0; l < a.length; l++) {
        var d = a[l];
        d.track.mode === "disabled" && d.track.mode !== d.storedMode && (d.track.mode = d.storedMode);
      }
      e.removeEventListener("change", u);
    };
    this.on("webkitbeginfullscreen", function() {
      e.removeEventListener("change", s), e.removeEventListener("change", o), e.addEventListener("change", o);
    }), this.on("webkitendfullscreen", function() {
      e.removeEventListener("change", s), e.addEventListener("change", s), e.removeEventListener("change", o);
    });
  }, i.overrideNative_ = function(e, a) {
    var s = this;
    if (a === this["featuresNative" + e + "Tracks"]) {
      var o = e.toLowerCase();
      this[o + "TracksListeners_"] && Object.keys(this[o + "TracksListeners_"]).forEach(function(u) {
        var l = s.el()[o + "Tracks"];
        l.removeEventListener(u, s[o + "TracksListeners_"][u]);
      }), this["featuresNative" + e + "Tracks"] = !a, this[o + "TracksListeners_"] = null, this.proxyNativeTracksForType_(o);
    }
  }, i.overrideNativeAudioTracks = function(e) {
    this.overrideNative_("Audio", e);
  }, i.overrideNativeVideoTracks = function(e) {
    this.overrideNative_("Video", e);
  }, i.proxyNativeTracksForType_ = function(e) {
    var a = this, s = Oi[e], o = this.el()[s.getterName], u = this[s.getterName]();
    if (!(!this["featuresNative" + s.capitalName + "Tracks"] || !o || !o.addEventListener)) {
      var l = {
        change: function(f) {
          var _ = {
            type: "change",
            target: u,
            currentTarget: u,
            srcElement: u
          };
          u.trigger(_), e === "text" && a[ea.remoteText.getterName]().trigger(_);
        },
        addtrack: function(f) {
          u.addTrack(f.track);
        },
        removetrack: function(f) {
          u.removeTrack(f.track);
        }
      }, d = function() {
        for (var f = [], _ = 0; _ < u.length; _++) {
          for (var v = !1, y = 0; y < o.length; y++)
            if (o[y] === u[_]) {
              v = !0;
              break;
            }
          v || f.push(u[_]);
        }
        for (; f.length; )
          u.removeTrack(f.shift());
      };
      this[s.getterName + "Listeners_"] = l, Object.keys(l).forEach(function(h) {
        var f = l[h];
        o.addEventListener(h, f), a.on("dispose", function(_) {
          return o.removeEventListener(h, f);
        });
      }), this.on("loadstart", d), this.on("dispose", function(h) {
        return a.off("loadstart", d);
      });
    }
  }, i.proxyNativeTracks_ = function() {
    var e = this;
    Oi.names.forEach(function(a) {
      e.proxyNativeTracksForType_(a);
    });
  }, i.createEl = function() {
    var e = this.options_.tag;
    if (!e || !(this.options_.playerElIngest || this.movingMediaElementInDOM)) {
      if (e) {
        var a = e.cloneNode(!0);
        e.parentNode && e.parentNode.insertBefore(a, e), t.disposeMediaElement(e), e = a;
      } else {
        e = Te.createElement("video");
        var s = this.options_.tag && hr(this.options_.tag), o = St({}, s);
        (!Qn || this.options_.nativeControlsForTouch !== !0) && delete o.controls, Zm(e, It(o, {
          id: this.options_.techId,
          class: "vjs-tech"
        }));
      }
      e.playerId = this.options_.playerId;
    }
    typeof this.options_.preload < "u" && Yn(e, "preload", this.options_.preload), this.options_.disablePictureInPicture !== void 0 && (e.disablePictureInPicture = this.options_.disablePictureInPicture);
    for (var u = ["loop", "muted", "playsinline", "autoplay"], l = 0; l < u.length; l++) {
      var d = u[l], h = this.options_[d];
      typeof h < "u" && (h ? Yn(e, d, d) : Wo(e, d), e[d] = h);
    }
    return e;
  }, i.handleLateInit_ = function(e) {
    if (!(e.networkState === 0 || e.networkState === 3)) {
      if (e.readyState === 0) {
        var a = !1, s = function() {
          a = !0;
        };
        this.on("loadstart", s);
        var o = function() {
          a || this.trigger("loadstart");
        };
        this.on("loadedmetadata", o), this.ready(function() {
          this.off("loadstart", s), this.off("loadedmetadata", o), a || this.trigger("loadstart");
        });
        return;
      }
      var u = ["loadstart"];
      u.push("loadedmetadata"), e.readyState >= 2 && u.push("loadeddata"), e.readyState >= 3 && u.push("canplay"), e.readyState >= 4 && u.push("canplaythrough"), this.ready(function() {
        u.forEach(function(l) {
          this.trigger(l);
        }, this);
      });
    }
  }, i.setScrubbing = function(e) {
    this.isScrubbing_ = e;
  }, i.scrubbing = function() {
    return this.isScrubbing_;
  }, i.setCurrentTime = function(e) {
    try {
      this.isScrubbing_ && this.el_.fastSeek && Ho ? this.el_.fastSeek(e) : this.el_.currentTime = e;
    } catch (a) {
      Ze(a, "Video is not ready. (Video.js)");
    }
  }, i.duration = function() {
    var e = this;
    if (this.el_.duration === 1 / 0 && Er && xr && this.el_.currentTime === 0) {
      var a = function s() {
        e.el_.currentTime > 0 && (e.el_.duration === 1 / 0 && e.trigger("durationchange"), e.off("timeupdate", s));
      };
      return this.on("timeupdate", a), NaN;
    }
    return this.el_.duration || NaN;
  }, i.width = function() {
    return this.el_.offsetWidth;
  }, i.height = function() {
    return this.el_.offsetHeight;
  }, i.proxyWebkitFullscreen_ = function() {
    var e = this;
    if ("webkitDisplayingFullscreen" in this.el_) {
      var a = function() {
        this.trigger("fullscreenchange", {
          isFullscreen: !1
        }), this.el_.controls && !this.options_.nativeControlsForTouch && this.controls() && (this.el_.controls = !1);
      }, s = function() {
        "webkitPresentationMode" in this.el_ && this.el_.webkitPresentationMode !== "picture-in-picture" && (this.one("webkitendfullscreen", a), this.trigger("fullscreenchange", {
          isFullscreen: !0,
          nativeIOSFullscreen: !0
        }));
      };
      this.on("webkitbeginfullscreen", s), this.on("dispose", function() {
        e.off("webkitbeginfullscreen", s), e.off("webkitendfullscreen", a);
      });
    }
  }, i.supportsFullScreen = function() {
    if (typeof this.el_.webkitEnterFullScreen == "function") {
      var e = B.navigator && B.navigator.userAgent || "";
      if (/Android/.test(e) || !/Chrome|Mac OS X 10.5/.test(e))
        return !0;
    }
    return !1;
  }, i.enterFullScreen = function() {
    var e = this.el_;
    if (e.paused && e.networkState <= e.HAVE_METADATA)
      Ji(this.el_.play()), this.setTimeout(function() {
        e.pause();
        try {
          e.webkitEnterFullScreen();
        } catch (a) {
          this.trigger("fullscreenerror", a);
        }
      }, 0);
    else
      try {
        e.webkitEnterFullScreen();
      } catch (a) {
        this.trigger("fullscreenerror", a);
      }
  }, i.exitFullScreen = function() {
    if (!this.el_.webkitDisplayingFullscreen) {
      this.trigger("fullscreenerror", new Error("The video is not fullscreen"));
      return;
    }
    this.el_.webkitExitFullScreen();
  }, i.requestPictureInPicture = function() {
    return this.el_.requestPictureInPicture();
  }, i.requestVideoFrameCallback = function(e) {
    return this.featuresVideoFrameCallback && !this.el_.webkitKeys ? this.el_.requestVideoFrameCallback(e) : n.prototype.requestVideoFrameCallback.call(this, e);
  }, i.cancelVideoFrameCallback = function(e) {
    this.featuresVideoFrameCallback && !this.el_.webkitKeys ? this.el_.cancelVideoFrameCallback(e) : n.prototype.cancelVideoFrameCallback.call(this, e);
  }, i.src = function(e) {
    if (e === void 0)
      return this.el_.src;
    this.setSrc(e);
  }, i.reset = function() {
    t.resetMediaElement(this.el_);
  }, i.currentSrc = function() {
    return this.currentSource_ ? this.currentSource_.src : this.el_.currentSrc;
  }, i.setControls = function(e) {
    this.el_.controls = !!e;
  }, i.addTextTrack = function(e, a, s) {
    return this.featuresNativeTextTracks ? this.el_.addTextTrack(e, a, s) : n.prototype.addTextTrack.call(this, e, a, s);
  }, i.createRemoteTextTrack = function(e) {
    if (!this.featuresNativeTextTracks)
      return n.prototype.createRemoteTextTrack.call(this, e);
    var a = Te.createElement("track");
    return e.kind && (a.kind = e.kind), e.label && (a.label = e.label), (e.language || e.srclang) && (a.srclang = e.language || e.srclang), e.default && (a.default = e.default), e.id && (a.id = e.id), e.src && (a.src = e.src), a;
  }, i.addRemoteTextTrack = function(e, a) {
    var s = n.prototype.addRemoteTextTrack.call(this, e, a);
    return this.featuresNativeTextTracks && this.el().appendChild(s), s;
  }, i.removeRemoteTextTrack = function(e) {
    if (n.prototype.removeRemoteTextTrack.call(this, e), this.featuresNativeTextTracks)
      for (var a = this.$$("track"), s = a.length; s--; )
        (e === a[s] || e === a[s].track) && this.el().removeChild(a[s]);
  }, i.getVideoPlaybackQuality = function() {
    if (typeof this.el().getVideoPlaybackQuality == "function")
      return this.el().getVideoPlaybackQuality();
    var e = {};
    return typeof this.el().webkitDroppedFrameCount < "u" && typeof this.el().webkitDecodedFrameCount < "u" && (e.droppedVideoFrames = this.el().webkitDroppedFrameCount, e.totalVideoFrames = this.el().webkitDecodedFrameCount), B.performance && typeof B.performance.now == "function" ? e.creationTime = B.performance.now() : B.performance && B.performance.timing && typeof B.performance.timing.navigationStart == "number" && (e.creationTime = B.Date.now() - B.performance.timing.navigationStart), e;
  }, t;
}(yt);
Dc(we, "TEST_VID", function() {
  if (!!ra()) {
    var n = Te.createElement("video"), t = Te.createElement("track");
    return t.kind = "captions", t.srclang = "en", t.label = "English", n.appendChild(t), n;
  }
});
we.isSupported = function() {
  try {
    we.TEST_VID.volume = 0.5;
  } catch {
    return !1;
  }
  return !!(we.TEST_VID && we.TEST_VID.canPlayType);
};
we.canPlayType = function(n) {
  return we.TEST_VID.canPlayType(n);
};
we.canPlaySource = function(n, t) {
  return we.canPlayType(n.type);
};
we.canControlVolume = function() {
  try {
    var n = we.TEST_VID.volume;
    we.TEST_VID.volume = n / 2 + 0.1;
    var t = n !== we.TEST_VID.volume;
    return t && hi ? (B.setTimeout(function() {
      we && we.prototype && (we.prototype.featuresVolumeControl = n !== we.TEST_VID.volume);
    }), !1) : t;
  } catch {
    return !1;
  }
};
we.canMuteVolume = function() {
  try {
    var n = we.TEST_VID.muted;
    return we.TEST_VID.muted = !n, we.TEST_VID.muted ? Yn(we.TEST_VID, "muted", "muted") : Wo(we.TEST_VID, "muted", "muted"), n !== we.TEST_VID.muted;
  } catch {
    return !1;
  }
};
we.canControlPlaybackRate = function() {
  if (Er && xr && zm < 58)
    return !1;
  try {
    var n = we.TEST_VID.playbackRate;
    return we.TEST_VID.playbackRate = n / 2 + 0.1, n !== we.TEST_VID.playbackRate;
  } catch {
    return !1;
  }
};
we.canOverrideAttributes = function() {
  try {
    var n = function() {
    };
    Object.defineProperty(Te.createElement("video"), "src", {
      get: n,
      set: n
    }), Object.defineProperty(Te.createElement("audio"), "src", {
      get: n,
      set: n
    }), Object.defineProperty(Te.createElement("video"), "innerHTML", {
      get: n,
      set: n
    }), Object.defineProperty(Te.createElement("audio"), "innerHTML", {
      get: n,
      set: n
    });
  } catch {
    return !1;
  }
  return !0;
};
we.supportsNativeTextTracks = function() {
  return Ho || hi && xr;
};
we.supportsNativeVideoTracks = function() {
  return !!(we.TEST_VID && we.TEST_VID.videoTracks);
};
we.supportsNativeAudioTracks = function() {
  return !!(we.TEST_VID && we.TEST_VID.audioTracks);
};
we.Events = ["loadstart", "suspend", "abort", "error", "emptied", "stalled", "loadedmetadata", "loadeddata", "canplay", "canplaythrough", "playing", "waiting", "seeking", "seeked", "ended", "durationchange", "timeupdate", "progress", "play", "pause", "ratechange", "resize", "volumechange"];
[["featuresMuteControl", "canMuteVolume"], ["featuresPlaybackRate", "canControlPlaybackRate"], ["featuresSourceset", "canOverrideAttributes"], ["featuresNativeTextTracks", "supportsNativeTextTracks"], ["featuresNativeVideoTracks", "supportsNativeVideoTracks"], ["featuresNativeAudioTracks", "supportsNativeAudioTracks"]].forEach(function(n) {
  var t = n[0], i = n[1];
  Dc(we.prototype, t, function() {
    return we[i]();
  }, !0);
});
we.prototype.featuresVolumeControl = we.canControlVolume();
we.prototype.movingMediaElementInDOM = !hi;
we.prototype.featuresFullscreenResize = !0;
we.prototype.featuresProgressEvents = !0;
we.prototype.featuresTimeupdateEvents = !0;
we.prototype.featuresVideoFrameCallback = !!(we.TEST_VID && we.TEST_VID.requestVideoFrameCallback);
var _o;
we.patchCanPlayType = function() {
  rc >= 4 && !$m && !xr && (_o = we.TEST_VID && we.TEST_VID.constructor.prototype.canPlayType, we.TEST_VID.constructor.prototype.canPlayType = function(n) {
    var t = /^application\/(?:x-|vnd\.apple\.)mpegurl/i;
    return n && t.test(n) ? "maybe" : _o.call(this, n);
  });
};
we.unpatchCanPlayType = function() {
  var n = we.TEST_VID.constructor.prototype.canPlayType;
  return _o && (we.TEST_VID.constructor.prototype.canPlayType = _o), n;
};
we.patchCanPlayType();
we.disposeMediaElement = function(n) {
  if (!!n) {
    for (n.parentNode && n.parentNode.removeChild(n); n.hasChildNodes(); )
      n.removeChild(n.firstChild);
    n.removeAttribute("src"), typeof n.load == "function" && function() {
      try {
        n.load();
      } catch {
      }
    }();
  }
};
we.resetMediaElement = function(n) {
  if (!!n) {
    for (var t = n.querySelectorAll("source"), i = t.length; i--; )
      n.removeChild(t[i]);
    n.removeAttribute("src"), typeof n.load == "function" && function() {
      try {
        n.load();
      } catch {
      }
    }();
  }
};
[
  "muted",
  "defaultMuted",
  "autoplay",
  "controls",
  "loop",
  "playsinline"
].forEach(function(n) {
  we.prototype[n] = function() {
    return this.el_[n] || this.el_.hasAttribute(n);
  };
});
[
  "muted",
  "defaultMuted",
  "autoplay",
  "loop",
  "playsinline"
].forEach(function(n) {
  we.prototype["set" + Nt(n)] = function(t) {
    this.el_[n] = t, t ? this.el_.setAttribute(n, n) : this.el_.removeAttribute(n);
  };
});
[
  "paused",
  "currentTime",
  "buffered",
  "volume",
  "poster",
  "preload",
  "error",
  "seeking",
  "seekable",
  "ended",
  "playbackRate",
  "defaultPlaybackRate",
  "disablePictureInPicture",
  "played",
  "networkState",
  "readyState",
  "videoWidth",
  "videoHeight",
  "crossOrigin"
].forEach(function(n) {
  we.prototype[n] = function() {
    return this.el_[n];
  };
});
[
  "volume",
  "src",
  "poster",
  "preload",
  "playbackRate",
  "defaultPlaybackRate",
  "disablePictureInPicture",
  "crossOrigin"
].forEach(function(n) {
  we.prototype["set" + Nt(n)] = function(t) {
    this.el_[n] = t;
  };
});
[
  "pause",
  "load",
  "play"
].forEach(function(n) {
  we.prototype[n] = function() {
    return this.el_[n]();
  };
});
yt.withSourceHandlers(we);
we.nativeSourceHandler = {};
we.nativeSourceHandler.canPlayType = function(n) {
  try {
    return we.TEST_VID.canPlayType(n);
  } catch {
    return "";
  }
};
we.nativeSourceHandler.canHandleSource = function(n, t) {
  if (n.type)
    return we.nativeSourceHandler.canPlayType(n.type);
  if (n.src) {
    var i = hc(n.src);
    return we.nativeSourceHandler.canPlayType("video/" + i);
  }
  return "";
};
we.nativeSourceHandler.handleSource = function(n, t, i) {
  t.setSrc(n.src);
};
we.nativeSourceHandler.dispose = function() {
};
we.registerSourceHandler(we.nativeSourceHandler);
yt.registerTech("Html5", we);
var $g = [
  "progress",
  "abort",
  "suspend",
  "emptied",
  "stalled",
  "loadedmetadata",
  "loadeddata",
  "timeupdate",
  "resize",
  "volumechange",
  "texttrackchange"
], zu = {
  canplay: "CanPlay",
  canplaythrough: "CanPlayThrough",
  playing: "Playing",
  seeked: "Seeked"
}, pd = ["tiny", "xsmall", "small", "medium", "large", "xlarge", "huge"], to = {};
pd.forEach(function(n) {
  var t = n.charAt(0) === "x" ? "x-" + n.substring(1) : n;
  to[n] = "vjs-layout-" + t;
});
var vS = {
  tiny: 210,
  xsmall: 320,
  small: 425,
  medium: 768,
  large: 1440,
  xlarge: 2560,
  huge: 1 / 0
}, jt = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e, a) {
    var s;
    if (r.id = r.id || e.id || "vjs_video_" + wr(), e = It(t.getTagSettings(r), e), e.initChildren = !1, e.createEl = !1, e.evented = !1, e.reportTouchActivity = !1, !e.language)
      if (typeof r.closest == "function") {
        var o = r.closest("[lang]");
        o && o.getAttribute && (e.language = o.getAttribute("lang"));
      } else
        for (var u = r; u && u.nodeType === 1; ) {
          if (hr(u).hasOwnProperty("lang")) {
            e.language = u.getAttribute("lang");
            break;
          }
          u = u.parentNode;
        }
    if (s = n.call(this, null, e, a) || this, s.boundDocumentFullscreenChange_ = function(f) {
      return s.documentFullscreenChange_(f);
    }, s.boundFullWindowOnEscKey_ = function(f) {
      return s.fullWindowOnEscKey(f);
    }, s.boundUpdateStyleEl_ = function(f) {
      return s.updateStyleEl_(f);
    }, s.boundApplyInitTime_ = function(f) {
      return s.applyInitTime_(f);
    }, s.boundUpdateCurrentBreakpoint_ = function(f) {
      return s.updateCurrentBreakpoint_(f);
    }, s.boundHandleTechClick_ = function(f) {
      return s.handleTechClick_(f);
    }, s.boundHandleTechDoubleClick_ = function(f) {
      return s.handleTechDoubleClick_(f);
    }, s.boundHandleTechTouchStart_ = function(f) {
      return s.handleTechTouchStart_(f);
    }, s.boundHandleTechTouchMove_ = function(f) {
      return s.handleTechTouchMove_(f);
    }, s.boundHandleTechTouchEnd_ = function(f) {
      return s.handleTechTouchEnd_(f);
    }, s.boundHandleTechTap_ = function(f) {
      return s.handleTechTap_(f);
    }, s.isFullscreen_ = !1, s.log = jm(s.id_), s.fsApi_ = ho, s.isPosterFromTech_ = !1, s.queuedCallbacks_ = [], s.isReady_ = !1, s.hasStarted_ = !1, s.userActive_ = !1, s.debugEnabled_ = !1, s.audioOnlyMode_ = !1, s.audioPosterMode_ = !1, s.audioOnlyCache_ = {
      playerHeight: null,
      hiddenChildren: []
    }, !s.options_ || !s.options_.techOrder || !s.options_.techOrder.length)
      throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");
    if (s.tag = r, s.tagAttributes = r && hr(r), s.language(s.options_.language), e.languages) {
      var l = {};
      Object.getOwnPropertyNames(e.languages).forEach(function(f) {
        l[f.toLowerCase()] = e.languages[f];
      }), s.languages_ = l;
    } else
      s.languages_ = t.prototype.options_.languages;
    s.resetCache_(), s.poster_ = e.poster || "", s.controls_ = !!e.controls, r.controls = !1, r.removeAttribute("controls"), s.changingSrc_ = !1, s.playCallbacks_ = [], s.playTerminatedQueue_ = [], r.hasAttribute("autoplay") ? s.autoplay(!0) : s.autoplay(s.options_.autoplay), e.plugins && Object.keys(e.plugins).forEach(function(f) {
      if (typeof s[f] != "function")
        throw new Error('plugin "' + f + '" does not exist');
    }), s.scrubbing_ = !1, s.el_ = s.createEl(), dc(Ge(s), {
      eventBusKey: "el_"
    }), s.fsApi_.requestFullscreen && (Pi(Te, s.fsApi_.fullscreenchange, s.boundDocumentFullscreenChange_), s.on(s.fsApi_.fullscreenchange, s.boundDocumentFullscreenChange_)), s.fluid_ && s.on(["playerreset", "resize"], s.boundUpdateStyleEl_);
    var d = St(s.options_);
    e.plugins && Object.keys(e.plugins).forEach(function(f) {
      s[f](e.plugins[f]);
    }), e.debug && s.debug(!0), s.options_.playerOptions = d, s.middleware_ = [], s.playbackRates(e.playbackRates), s.initChildren(), s.isAudio(r.nodeName.toLowerCase() === "audio"), s.controls() ? s.addClass("vjs-controls-enabled") : s.addClass("vjs-controls-disabled"), s.el_.setAttribute("role", "region"), s.isAudio() ? s.el_.setAttribute("aria-label", s.localize("Audio Player")) : s.el_.setAttribute("aria-label", s.localize("Video Player")), s.isAudio() && s.addClass("vjs-audio"), s.flexNotSupported_() && s.addClass("vjs-no-flex"), Qn && s.addClass("vjs-touch-enabled"), hi || s.addClass("vjs-workinghover"), t.players[s.id_] = Ge(s);
    var h = Um.split(".")[0];
    return s.addClass("vjs-v" + h), s.userActive(!0), s.reportUserActivity(), s.one("play", function(f) {
      return s.listenForUserActivity_(f);
    }), s.on("stageclick", function(f) {
      return s.handleStageClick_(f);
    }), s.on("keydown", function(f) {
      return s.handleKeyDown(f);
    }), s.on("languagechange", function(f) {
      return s.handleLanguagechange(f);
    }), s.breakpoints(s.options_.breakpoints), s.responsive(s.options_.responsive), s.on("ready", function() {
      s.audioPosterMode(s.options_.audioPosterMode), s.audioOnlyMode(s.options_.audioOnlyMode);
    }), s;
  }
  var i = t.prototype;
  return i.dispose = function() {
    var e = this;
    this.trigger("dispose"), this.off("dispose"), ei(Te, this.fsApi_.fullscreenchange, this.boundDocumentFullscreenChange_), ei(Te, "keydown", this.boundFullWindowOnEscKey_), this.styleEl_ && this.styleEl_.parentNode && (this.styleEl_.parentNode.removeChild(this.styleEl_), this.styleEl_ = null), t.players[this.id_] = null, this.tag && this.tag.player && (this.tag.player = null), this.el_ && this.el_.player && (this.el_.player = null), this.tech_ && (this.tech_.dispose(), this.isPosterFromTech_ = !1, this.poster_ = ""), this.playerElIngest_ && (this.playerElIngest_ = null), this.tag && (this.tag = null), Fb(this), ui.names.forEach(function(a) {
      var s = ui[a], o = e[s.getterName]();
      o && o.off && o.off();
    }), n.prototype.dispose.call(this, {
      restoreEl: this.options_.restoreEl
    });
  }, i.createEl = function() {
    var e = this.tag, a, s = this.playerElIngest_ = e.parentNode && e.parentNode.hasAttribute && e.parentNode.hasAttribute("data-vjs-player"), o = this.tag.tagName.toLowerCase() === "video-js";
    s ? a = this.el_ = e.parentNode : o || (a = this.el_ = n.prototype.createEl.call(this, "div"));
    var u = hr(e);
    if (o) {
      for (a = this.el_ = e, e = this.tag = Te.createElement("video"); a.children.length; )
        e.appendChild(a.firstChild);
      tn(a, "video-js") || vr(a, "video-js"), a.appendChild(e), s = this.playerElIngest_ = a, Object.keys(a).forEach(function(v) {
        try {
          e[v] = a[v];
        } catch {
        }
      });
    }
    if (e.setAttribute("tabindex", "-1"), u.tabindex = "-1", (ls || xr && Km) && (e.setAttribute("role", "application"), u.role = "application"), e.removeAttribute("width"), e.removeAttribute("height"), "width" in u && delete u.width, "height" in u && delete u.height, Object.getOwnPropertyNames(u).forEach(function(v) {
      o && v === "class" || a.setAttribute(v, u[v]), o && e.setAttribute(v, u[v]);
    }), e.playerId = e.id, e.id += "_html5_api", e.className = "vjs-tech", e.player = a.player = this, this.addClass("vjs-paused"), B.VIDEOJS_NO_DYNAMIC_STYLE !== !0) {
      this.styleEl_ = lg("vjs-styles-dimensions");
      var l = Nr(".vjs-styles-defaults"), d = Nr("head");
      d.insertBefore(this.styleEl_, l ? l.nextSibling : d.firstChild);
    }
    this.fill_ = !1, this.fluid_ = !1, this.width(this.options_.width), this.height(this.options_.height), this.fill(this.options_.fill), this.fluid(this.options_.fluid), this.aspectRatio(this.options_.aspectRatio), this.crossOrigin(this.options_.crossOrigin || this.options_.crossorigin);
    for (var h = e.getElementsByTagName("a"), f = 0; f < h.length; f++) {
      var _ = h.item(f);
      vr(_, "vjs-hidden"), _.setAttribute("hidden", "hidden");
    }
    return e.initNetworkState_ = e.networkState, e.parentNode && !s && e.parentNode.insertBefore(a, e), sd(e, a), this.children_.unshift(e), this.el_.setAttribute("lang", this.language_), this.el_.setAttribute("translate", "no"), this.el_ = a, a;
  }, i.crossOrigin = function(e) {
    if (!e)
      return this.techGet_("crossOrigin");
    if (e !== "anonymous" && e !== "use-credentials") {
      Ze.warn('crossOrigin must be "anonymous" or "use-credentials", given "' + e + '"');
      return;
    }
    this.techCall_("setCrossOrigin", e);
  }, i.width = function(e) {
    return this.dimension("width", e);
  }, i.height = function(e) {
    return this.dimension("height", e);
  }, i.dimension = function(e, a) {
    var s = e + "_";
    if (a === void 0)
      return this[s] || 0;
    if (a === "" || a === "auto") {
      this[s] = void 0, this.updateStyleEl_();
      return;
    }
    var o = parseFloat(a);
    if (isNaN(o)) {
      Ze.error('Improper value "' + a + '" supplied for for ' + e);
      return;
    }
    this[s] = o, this.updateStyleEl_();
  }, i.fluid = function(e) {
    var a = this;
    if (e === void 0)
      return !!this.fluid_;
    this.fluid_ = !!e, _r(this) && this.off(["playerreset", "resize"], this.boundUpdateStyleEl_), e ? (this.addClass("vjs-fluid"), this.fill(!1), ub(this, function() {
      a.on(["playerreset", "resize"], a.boundUpdateStyleEl_);
    })) : this.removeClass("vjs-fluid"), this.updateStyleEl_();
  }, i.fill = function(e) {
    if (e === void 0)
      return !!this.fill_;
    this.fill_ = !!e, e ? (this.addClass("vjs-fill"), this.fluid(!1)) : this.removeClass("vjs-fill");
  }, i.aspectRatio = function(e) {
    if (e === void 0)
      return this.aspectRatio_;
    if (!/^\d+\:\d+$/.test(e))
      throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");
    this.aspectRatio_ = e, this.fluid(!0), this.updateStyleEl_();
  }, i.updateStyleEl_ = function() {
    if (B.VIDEOJS_NO_DYNAMIC_STYLE === !0) {
      var e = typeof this.width_ == "number" ? this.width_ : this.options_.width, a = typeof this.height_ == "number" ? this.height_ : this.options_.height, s = this.tech_ && this.tech_.el();
      s && (e >= 0 && (s.width = e), a >= 0 && (s.height = a));
      return;
    }
    var o, u, l, d;
    this.aspectRatio_ !== void 0 && this.aspectRatio_ !== "auto" ? l = this.aspectRatio_ : this.videoWidth() > 0 ? l = this.videoWidth() + ":" + this.videoHeight() : l = "16:9";
    var h = l.split(":"), f = h[1] / h[0];
    this.width_ !== void 0 ? o = this.width_ : this.height_ !== void 0 ? o = this.height_ / f : o = this.videoWidth() || 300, this.height_ !== void 0 ? u = this.height_ : u = o * f, /^[^a-zA-Z]/.test(this.id()) ? d = "dimensions-" + this.id() : d = this.id() + "-dimensions", this.addClass(d), dg(this.styleEl_, `
      .` + d + ` {
        width: ` + o + `px;
        height: ` + u + `px;
      }

      .` + d + `.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ` + f * 100 + `%;
      }
    `);
  }, i.loadTech_ = function(e, a) {
    var s = this;
    this.tech_ && this.unloadTech_();
    var o = Nt(e), u = e.charAt(0).toLowerCase() + e.slice(1);
    o !== "Html5" && this.tag && (yt.getTech("Html5").disposeMediaElement(this.tag), this.tag.player = null, this.tag = null), this.techName_ = o, this.isReady_ = !1;
    var l = this.autoplay();
    (typeof this.autoplay() == "string" || this.autoplay() === !0 && this.options_.normalizeAutoplay) && (l = !1);
    var d = {
      source: a,
      autoplay: l,
      nativeControlsForTouch: this.options_.nativeControlsForTouch,
      playerId: this.id(),
      techId: this.id() + "_" + u + "_api",
      playsinline: this.options_.playsinline,
      preload: this.options_.preload,
      loop: this.options_.loop,
      disablePictureInPicture: this.options_.disablePictureInPicture,
      muted: this.options_.muted,
      poster: this.poster(),
      language: this.language(),
      playerElIngest: this.playerElIngest_ || !1,
      "vtt.js": this.options_["vtt.js"],
      canOverridePoster: !!this.options_.techCanOverridePoster,
      enableSourceset: this.options_.enableSourceset,
      Promise: this.options_.Promise
    };
    ui.names.forEach(function(f) {
      var _ = ui[f];
      d[_.getterName] = s[_.privateName];
    }), It(d, this.options_[o]), It(d, this.options_[u]), It(d, this.options_[e.toLowerCase()]), this.tag && (d.tag = this.tag), a && a.src === this.cache_.src && this.cache_.currentTime > 0 && (d.startTime = this.cache_.currentTime);
    var h = yt.getTech(e);
    if (!h)
      throw new Error("No Tech named '" + o + "' exists! '" + o + "' should be registered using videojs.registerTech()'");
    this.tech_ = new h(d), this.tech_.ready(Et(this, this.handleTechReady_), !0), Zf.jsonToTextTracks(this.textTracksJson_ || [], this.tech_), $g.forEach(function(f) {
      s.on(s.tech_, f, function(_) {
        return s["handleTech" + Nt(f) + "_"](_);
      });
    }), Object.keys(zu).forEach(function(f) {
      s.on(s.tech_, f, function(_) {
        if (s.tech_.playbackRate() === 0 && s.tech_.seeking()) {
          s.queuedCallbacks_.push({
            callback: s["handleTech" + zu[f] + "_"].bind(s),
            event: _
          });
          return;
        }
        s["handleTech" + zu[f] + "_"](_);
      });
    }), this.on(this.tech_, "loadstart", function(f) {
      return s.handleTechLoadStart_(f);
    }), this.on(this.tech_, "sourceset", function(f) {
      return s.handleTechSourceset_(f);
    }), this.on(this.tech_, "waiting", function(f) {
      return s.handleTechWaiting_(f);
    }), this.on(this.tech_, "ended", function(f) {
      return s.handleTechEnded_(f);
    }), this.on(this.tech_, "seeking", function(f) {
      return s.handleTechSeeking_(f);
    }), this.on(this.tech_, "play", function(f) {
      return s.handleTechPlay_(f);
    }), this.on(this.tech_, "firstplay", function(f) {
      return s.handleTechFirstPlay_(f);
    }), this.on(this.tech_, "pause", function(f) {
      return s.handleTechPause_(f);
    }), this.on(this.tech_, "durationchange", function(f) {
      return s.handleTechDurationChange_(f);
    }), this.on(this.tech_, "fullscreenchange", function(f, _) {
      return s.handleTechFullscreenChange_(f, _);
    }), this.on(this.tech_, "fullscreenerror", function(f, _) {
      return s.handleTechFullscreenError_(f, _);
    }), this.on(this.tech_, "enterpictureinpicture", function(f) {
      return s.handleTechEnterPictureInPicture_(f);
    }), this.on(this.tech_, "leavepictureinpicture", function(f) {
      return s.handleTechLeavePictureInPicture_(f);
    }), this.on(this.tech_, "error", function(f) {
      return s.handleTechError_(f);
    }), this.on(this.tech_, "posterchange", function(f) {
      return s.handleTechPosterChange_(f);
    }), this.on(this.tech_, "textdata", function(f) {
      return s.handleTechTextData_(f);
    }), this.on(this.tech_, "ratechange", function(f) {
      return s.handleTechRateChange_(f);
    }), this.on(this.tech_, "loadedmetadata", this.boundUpdateStyleEl_), this.usingNativeControls(this.techGet_("controls")), this.controls() && !this.usingNativeControls() && this.addTechControlsListeners_(), this.tech_.el().parentNode !== this.el() && (o !== "Html5" || !this.tag) && sd(this.tech_.el(), this.el()), this.tag && (this.tag.player = null, this.tag = null);
  }, i.unloadTech_ = function() {
    var e = this;
    ui.names.forEach(function(a) {
      var s = ui[a];
      e[s.privateName] = e[s.getterName]();
    }), this.textTracksJson_ = Zf.textTracksToJson(this.tech_), this.isReady_ = !1, this.tech_.dispose(), this.tech_ = !1, this.isPosterFromTech_ && (this.poster_ = "", this.trigger("posterchange")), this.isPosterFromTech_ = !1;
  }, i.tech = function(e) {
    return e === void 0 && Ze.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`), this.tech_;
  }, i.addTechControlsListeners_ = function() {
    this.removeTechControlsListeners_(), this.on(this.tech_, "click", this.boundHandleTechClick_), this.on(this.tech_, "dblclick", this.boundHandleTechDoubleClick_), this.on(this.tech_, "touchstart", this.boundHandleTechTouchStart_), this.on(this.tech_, "touchmove", this.boundHandleTechTouchMove_), this.on(this.tech_, "touchend", this.boundHandleTechTouchEnd_), this.on(this.tech_, "tap", this.boundHandleTechTap_);
  }, i.removeTechControlsListeners_ = function() {
    this.off(this.tech_, "tap", this.boundHandleTechTap_), this.off(this.tech_, "touchstart", this.boundHandleTechTouchStart_), this.off(this.tech_, "touchmove", this.boundHandleTechTouchMove_), this.off(this.tech_, "touchend", this.boundHandleTechTouchEnd_), this.off(this.tech_, "click", this.boundHandleTechClick_), this.off(this.tech_, "dblclick", this.boundHandleTechDoubleClick_);
  }, i.handleTechReady_ = function() {
    this.triggerReady(), this.cache_.volume && this.techCall_("setVolume", this.cache_.volume), this.handleTechPosterChange_(), this.handleTechDurationChange_();
  }, i.handleTechLoadStart_ = function() {
    this.removeClass("vjs-ended"), this.removeClass("vjs-seeking"), this.error(null), this.handleTechDurationChange_(), this.paused() ? (this.hasStarted(!1), this.trigger("loadstart")) : (this.trigger("loadstart"), this.trigger("firstplay")), this.manualAutoplay_(this.autoplay() === !0 && this.options_.normalizeAutoplay ? "play" : this.autoplay());
  }, i.manualAutoplay_ = function(e) {
    var a = this;
    if (!(!this.tech_ || typeof e != "string")) {
      var s = function() {
        var l = a.muted();
        a.muted(!0);
        var d = function() {
          a.muted(l);
        };
        a.playTerminatedQueue_.push(d);
        var h = a.play();
        if (!!Va(h))
          return h.catch(function(f) {
            throw d(), new Error("Rejection at manualAutoplay. Restoring muted value. " + (f || ""));
          });
      }, o;
      if (e === "any" && !this.muted() ? (o = this.play(), Va(o) && (o = o.catch(s))) : e === "muted" && !this.muted() ? o = s() : o = this.play(), !!Va(o))
        return o.then(function() {
          a.trigger({
            type: "autoplay-success",
            autoplay: e
          });
        }).catch(function() {
          a.trigger({
            type: "autoplay-failure",
            autoplay: e
          });
        });
    }
  }, i.updateSourceCaches_ = function(e) {
    e === void 0 && (e = "");
    var a = e, s = "";
    typeof a != "string" && (a = e.src, s = e.type), this.cache_.source = this.cache_.source || {}, this.cache_.sources = this.cache_.sources || [], a && !s && (s = qb(this, a)), this.cache_.source = St({}, e, {
      src: a,
      type: s
    });
    for (var o = this.cache_.sources.filter(function(_) {
      return _.src && _.src === a;
    }), u = [], l = this.$$("source"), d = [], h = 0; h < l.length; h++) {
      var f = hr(l[h]);
      u.push(f), f.src && f.src === a && d.push(f.src);
    }
    d.length && !o.length ? this.cache_.sources = u : o.length || (this.cache_.sources = [this.cache_.source]), this.cache_.src = a;
  }, i.handleTechSourceset_ = function(e) {
    var a = this;
    if (!this.changingSrc_) {
      var s = function(d) {
        return a.updateSourceCaches_(d);
      }, o = this.currentSource().src, u = e.src;
      o && !/^blob:/.test(o) && /^blob:/.test(u) && (!this.lastSource_ || this.lastSource_.tech !== u && this.lastSource_.player !== o) && (s = function() {
      }), s(u), e.src || this.tech_.any(["sourceset", "loadstart"], function(l) {
        if (l.type !== "sourceset") {
          var d = a.techGet("currentSrc");
          a.lastSource_.tech = d, a.updateSourceCaches_(d);
        }
      });
    }
    this.lastSource_ = {
      player: this.currentSource().src,
      tech: e.src
    }, this.trigger({
      src: e.src,
      type: "sourceset"
    });
  }, i.hasStarted = function(e) {
    if (e === void 0)
      return this.hasStarted_;
    e !== this.hasStarted_ && (this.hasStarted_ = e, this.hasStarted_ ? (this.addClass("vjs-has-started"), this.trigger("firstplay")) : this.removeClass("vjs-has-started"));
  }, i.handleTechPlay_ = function() {
    this.removeClass("vjs-ended"), this.removeClass("vjs-paused"), this.addClass("vjs-playing"), this.hasStarted(!0), this.trigger("play");
  }, i.handleTechRateChange_ = function() {
    this.tech_.playbackRate() > 0 && this.cache_.lastPlaybackRate === 0 && (this.queuedCallbacks_.forEach(function(e) {
      return e.callback(e.event);
    }), this.queuedCallbacks_ = []), this.cache_.lastPlaybackRate = this.tech_.playbackRate(), this.trigger("ratechange");
  }, i.handleTechWaiting_ = function() {
    var e = this;
    this.addClass("vjs-waiting"), this.trigger("waiting");
    var a = this.currentTime(), s = function o() {
      a !== e.currentTime() && (e.removeClass("vjs-waiting"), e.off("timeupdate", o));
    };
    this.on("timeupdate", s);
  }, i.handleTechCanPlay_ = function() {
    this.removeClass("vjs-waiting"), this.trigger("canplay");
  }, i.handleTechCanPlayThrough_ = function() {
    this.removeClass("vjs-waiting"), this.trigger("canplaythrough");
  }, i.handleTechPlaying_ = function() {
    this.removeClass("vjs-waiting"), this.trigger("playing");
  }, i.handleTechSeeking_ = function() {
    this.addClass("vjs-seeking"), this.trigger("seeking");
  }, i.handleTechSeeked_ = function() {
    this.removeClass("vjs-seeking"), this.removeClass("vjs-ended"), this.trigger("seeked");
  }, i.handleTechFirstPlay_ = function() {
    this.options_.starttime && (Ze.warn("Passing the `starttime` option to the player will be deprecated in 6.0"), this.currentTime(this.options_.starttime)), this.addClass("vjs-has-started"), this.trigger("firstplay");
  }, i.handleTechPause_ = function() {
    this.removeClass("vjs-playing"), this.addClass("vjs-paused"), this.trigger("pause");
  }, i.handleTechEnded_ = function() {
    this.addClass("vjs-ended"), this.removeClass("vjs-waiting"), this.options_.loop ? (this.currentTime(0), this.play()) : this.paused() || this.pause(), this.trigger("ended");
  }, i.handleTechDurationChange_ = function() {
    this.duration(this.techGet_("duration"));
  }, i.handleTechClick_ = function(e) {
    !this.controls_ || (this.options_ === void 0 || this.options_.userActions === void 0 || this.options_.userActions.click === void 0 || this.options_.userActions.click !== !1) && (this.options_ !== void 0 && this.options_.userActions !== void 0 && typeof this.options_.userActions.click == "function" ? this.options_.userActions.click.call(this, e) : this.paused() ? Ji(this.play()) : this.pause());
  }, i.handleTechDoubleClick_ = function(e) {
    if (!!this.controls_) {
      var a = Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"), function(s) {
        return s.contains(e.target);
      });
      a || (this.options_ === void 0 || this.options_.userActions === void 0 || this.options_.userActions.doubleClick === void 0 || this.options_.userActions.doubleClick !== !1) && (this.options_ !== void 0 && this.options_.userActions !== void 0 && typeof this.options_.userActions.doubleClick == "function" ? this.options_.userActions.doubleClick.call(this, e) : this.isFullscreen() ? this.exitFullscreen() : this.requestFullscreen());
    }
  }, i.handleTechTap_ = function() {
    this.userActive(!this.userActive());
  }, i.handleTechTouchStart_ = function() {
    this.userWasActive = this.userActive();
  }, i.handleTechTouchMove_ = function() {
    this.userWasActive && this.reportUserActivity();
  }, i.handleTechTouchEnd_ = function(e) {
    e.cancelable && e.preventDefault();
  }, i.handleStageClick_ = function() {
    this.reportUserActivity();
  }, i.toggleFullscreenClass_ = function() {
    this.isFullscreen() ? this.addClass("vjs-fullscreen") : this.removeClass("vjs-fullscreen");
  }, i.documentFullscreenChange_ = function(e) {
    var a = e.target.player;
    if (!(a && a !== this)) {
      var s = this.el(), o = Te[this.fsApi_.fullscreenElement] === s;
      !o && s.matches ? o = s.matches(":" + this.fsApi_.fullscreen) : !o && s.msMatchesSelector && (o = s.msMatchesSelector(":" + this.fsApi_.fullscreen)), this.isFullscreen(o);
    }
  }, i.handleTechFullscreenChange_ = function(e, a) {
    var s = this;
    a && (a.nativeIOSFullscreen && (this.addClass("vjs-ios-native-fs"), this.tech_.one("webkitendfullscreen", function() {
      s.removeClass("vjs-ios-native-fs");
    })), this.isFullscreen(a.isFullscreen));
  }, i.handleTechFullscreenError_ = function(e, a) {
    this.trigger("fullscreenerror", a);
  }, i.togglePictureInPictureClass_ = function() {
    this.isInPictureInPicture() ? this.addClass("vjs-picture-in-picture") : this.removeClass("vjs-picture-in-picture");
  }, i.handleTechEnterPictureInPicture_ = function(e) {
    this.isInPictureInPicture(!0);
  }, i.handleTechLeavePictureInPicture_ = function(e) {
    this.isInPictureInPicture(!1);
  }, i.handleTechError_ = function() {
    var e = this.tech_.error();
    this.error(e);
  }, i.handleTechTextData_ = function() {
    var e = null;
    arguments.length > 1 && (e = arguments[1]), this.trigger("textdata", e);
  }, i.getCache = function() {
    return this.cache_;
  }, i.resetCache_ = function() {
    this.cache_ = {
      currentTime: 0,
      initTime: 0,
      inactivityTimeout: this.options_.inactivityTimeout,
      duration: NaN,
      lastVolume: 1,
      lastPlaybackRate: this.defaultPlaybackRate(),
      media: null,
      src: "",
      source: {},
      sources: [],
      playbackRates: [],
      volume: 1
    };
  }, i.techCall_ = function(e, a) {
    this.ready(function() {
      if (e in Nb)
        return Ob(this.middleware_, this.tech_, e, a);
      if (e in ah)
        return nh(this.middleware_, this.tech_, e, a);
      try {
        this.tech_ && this.tech_[e](a);
      } catch (s) {
        throw Ze(s), s;
      }
    }, !0);
  }, i.techGet_ = function(e) {
    if (!(!this.tech_ || !this.tech_.isReady_)) {
      if (e in Rb)
        return Lb(this.middleware_, this.tech_, e);
      if (e in ah)
        return nh(this.middleware_, this.tech_, e);
      try {
        return this.tech_[e]();
      } catch (a) {
        throw this.tech_[e] === void 0 ? (Ze("Video.js: " + e + " method not defined for " + this.techName_ + " playback technology.", a), a) : a.name === "TypeError" ? (Ze("Video.js: " + e + " unavailable on " + this.techName_ + " playback technology element.", a), this.tech_.isReady_ = !1, a) : (Ze(a), a);
      }
    }
  }, i.play = function() {
    var e = this, a = this.options_.Promise || B.Promise;
    return a ? new a(function(s) {
      e.play_(s);
    }) : this.play_();
  }, i.play_ = function(e) {
    var a = this;
    e === void 0 && (e = Ji), this.playCallbacks_.push(e);
    var s = Boolean(!this.changingSrc_ && (this.src() || this.currentSrc()));
    if (this.waitToPlay_ && (this.off(["ready", "loadstart"], this.waitToPlay_), this.waitToPlay_ = null), !this.isReady_ || !s) {
      this.waitToPlay_ = function(u) {
        a.play_();
      }, this.one(["ready", "loadstart"], this.waitToPlay_), !s && (Ho || hi) && this.load();
      return;
    }
    var o = this.techGet_("play");
    o === null ? this.runPlayTerminatedQueue_() : this.runPlayCallbacks_(o);
  }, i.runPlayTerminatedQueue_ = function() {
    var e = this.playTerminatedQueue_.slice(0);
    this.playTerminatedQueue_ = [], e.forEach(function(a) {
      a();
    });
  }, i.runPlayCallbacks_ = function(e) {
    var a = this.playCallbacks_.slice(0);
    this.playCallbacks_ = [], this.playTerminatedQueue_ = [], a.forEach(function(s) {
      s(e);
    });
  }, i.pause = function() {
    this.techCall_("pause");
  }, i.paused = function() {
    return this.techGet_("paused") !== !1;
  }, i.played = function() {
    return this.techGet_("played") || rn(0, 0);
  }, i.scrubbing = function(e) {
    if (typeof e > "u")
      return this.scrubbing_;
    this.scrubbing_ = !!e, this.techCall_("setScrubbing", this.scrubbing_), e ? this.addClass("vjs-scrubbing") : this.removeClass("vjs-scrubbing");
  }, i.currentTime = function(e) {
    if (typeof e < "u") {
      if (e < 0 && (e = 0), !this.isReady_ || this.changingSrc_ || !this.tech_ || !this.tech_.isReady_) {
        this.cache_.initTime = e, this.off("canplay", this.boundApplyInitTime_), this.one("canplay", this.boundApplyInitTime_);
        return;
      }
      this.techCall_("setCurrentTime", e), this.cache_.initTime = 0;
      return;
    }
    return this.cache_.currentTime = this.techGet_("currentTime") || 0, this.cache_.currentTime;
  }, i.applyInitTime_ = function() {
    this.currentTime(this.cache_.initTime);
  }, i.duration = function(e) {
    if (e === void 0)
      return this.cache_.duration !== void 0 ? this.cache_.duration : NaN;
    e = parseFloat(e), e < 0 && (e = 1 / 0), e !== this.cache_.duration && (this.cache_.duration = e, e === 1 / 0 ? this.addClass("vjs-live") : this.removeClass("vjs-live"), isNaN(e) || this.trigger("durationchange"));
  }, i.remainingTime = function() {
    return this.duration() - this.currentTime();
  }, i.remainingTimeDisplay = function() {
    return Math.floor(this.duration()) - Math.floor(this.currentTime());
  }, i.buffered = function() {
    var e = this.techGet_("buffered");
    return (!e || !e.length) && (e = rn(0, 0)), e;
  }, i.bufferedPercent = function() {
    return gg(this.buffered(), this.duration());
  }, i.bufferedEnd = function() {
    var e = this.buffered(), a = this.duration(), s = e.end(e.length - 1);
    return s > a && (s = a), s;
  }, i.volume = function(e) {
    var a;
    if (e !== void 0) {
      a = Math.max(0, Math.min(1, parseFloat(e))), this.cache_.volume = a, this.techCall_("setVolume", a), a > 0 && this.lastVolume_(a);
      return;
    }
    return a = parseFloat(this.techGet_("volume")), isNaN(a) ? 1 : a;
  }, i.muted = function(e) {
    if (e !== void 0) {
      this.techCall_("setMuted", e);
      return;
    }
    return this.techGet_("muted") || !1;
  }, i.defaultMuted = function(e) {
    return e !== void 0 ? this.techCall_("setDefaultMuted", e) : this.techGet_("defaultMuted") || !1;
  }, i.lastVolume_ = function(e) {
    if (e !== void 0 && e !== 0) {
      this.cache_.lastVolume = e;
      return;
    }
    return this.cache_.lastVolume;
  }, i.supportsFullScreen = function() {
    return this.techGet_("supportsFullScreen") || !1;
  }, i.isFullscreen = function(e) {
    if (e !== void 0) {
      var a = this.isFullscreen_;
      this.isFullscreen_ = Boolean(e), this.isFullscreen_ !== a && this.fsApi_.prefixed && this.trigger("fullscreenchange"), this.toggleFullscreenClass_();
      return;
    }
    return this.isFullscreen_;
  }, i.requestFullscreen = function(e) {
    var a = this.options_.Promise || B.Promise;
    if (a) {
      var s = this;
      return new a(function(o, u) {
        function l() {
          s.off("fullscreenerror", h), s.off("fullscreenchange", d);
        }
        function d() {
          l(), o();
        }
        function h(_, v) {
          l(), u(v);
        }
        s.one("fullscreenchange", d), s.one("fullscreenerror", h);
        var f = s.requestFullscreenHelper_(e);
        f && (f.then(l, l), f.then(o, u));
      });
    }
    return this.requestFullscreenHelper_();
  }, i.requestFullscreenHelper_ = function(e) {
    var a = this, s;
    if (this.fsApi_.prefixed || (s = this.options_.fullscreen && this.options_.fullscreen.options || {}, e !== void 0 && (s = e)), this.fsApi_.requestFullscreen) {
      var o = this.el_[this.fsApi_.requestFullscreen](s);
      return o && o.then(function() {
        return a.isFullscreen(!0);
      }, function() {
        return a.isFullscreen(!1);
      }), o;
    } else
      this.tech_.supportsFullScreen() && !this.options_.preferFullWindow ? this.techCall_("enterFullScreen") : this.enterFullWindow();
  }, i.exitFullscreen = function() {
    var e = this.options_.Promise || B.Promise;
    if (e) {
      var a = this;
      return new e(function(s, o) {
        function u() {
          a.off("fullscreenerror", d), a.off("fullscreenchange", l);
        }
        function l() {
          u(), s();
        }
        function d(f, _) {
          u(), o(_);
        }
        a.one("fullscreenchange", l), a.one("fullscreenerror", d);
        var h = a.exitFullscreenHelper_();
        h && (h.then(u, u), h.then(s, o));
      });
    }
    return this.exitFullscreenHelper_();
  }, i.exitFullscreenHelper_ = function() {
    var e = this;
    if (this.fsApi_.requestFullscreen) {
      var a = Te[this.fsApi_.exitFullscreen]();
      return a && Ji(a.then(function() {
        return e.isFullscreen(!1);
      })), a;
    } else
      this.tech_.supportsFullScreen() && !this.options_.preferFullWindow ? this.techCall_("exitFullScreen") : this.exitFullWindow();
  }, i.enterFullWindow = function() {
    this.isFullscreen(!0), this.isFullWindow = !0, this.docOrigOverflow = Te.documentElement.style.overflow, Pi(Te, "keydown", this.boundFullWindowOnEscKey_), Te.documentElement.style.overflow = "hidden", vr(Te.body, "vjs-full-window"), this.trigger("enterFullWindow");
  }, i.fullWindowOnEscKey = function(e) {
    ze.isEventKey(e, "Esc") && this.isFullscreen() === !0 && (this.isFullWindow ? this.exitFullWindow() : this.exitFullscreen());
  }, i.exitFullWindow = function() {
    this.isFullscreen(!1), this.isFullWindow = !1, ei(Te, "keydown", this.boundFullWindowOnEscKey_), Te.documentElement.style.overflow = this.docOrigOverflow, ds(Te.body, "vjs-full-window"), this.trigger("exitFullWindow");
  }, i.disablePictureInPicture = function(e) {
    if (e === void 0)
      return this.techGet_("disablePictureInPicture");
    this.techCall_("setDisablePictureInPicture", e), this.options_.disablePictureInPicture = e, this.trigger("disablepictureinpicturechanged");
  }, i.isInPictureInPicture = function(e) {
    if (e !== void 0) {
      this.isInPictureInPicture_ = !!e, this.togglePictureInPictureClass_();
      return;
    }
    return !!this.isInPictureInPicture_;
  }, i.requestPictureInPicture = function() {
    if ("pictureInPictureEnabled" in Te && this.disablePictureInPicture() === !1)
      return this.techGet_("requestPictureInPicture");
  }, i.exitPictureInPicture = function() {
    if ("pictureInPictureEnabled" in Te)
      return Te.exitPictureInPicture();
  }, i.handleKeyDown = function(e) {
    var a = this.options_.userActions;
    if (!(!a || !a.hotkeys)) {
      var s = function(u) {
        var l = u.tagName.toLowerCase();
        if (u.isContentEditable)
          return !0;
        var d = ["button", "checkbox", "hidden", "radio", "reset", "submit"];
        if (l === "input")
          return d.indexOf(u.type) === -1;
        var h = ["textarea"];
        return h.indexOf(l) !== -1;
      };
      s(this.el_.ownerDocument.activeElement) || (typeof a.hotkeys == "function" ? a.hotkeys.call(this, e) : this.handleHotkeys(e));
    }
  }, i.handleHotkeys = function(e) {
    var a = this.options_.userActions ? this.options_.userActions.hotkeys : {}, s = a.fullscreenKey, o = s === void 0 ? function(y) {
      return ze.isEventKey(y, "f");
    } : s, u = a.muteKey, l = u === void 0 ? function(y) {
      return ze.isEventKey(y, "m");
    } : u, d = a.playPauseKey, h = d === void 0 ? function(y) {
      return ze.isEventKey(y, "k") || ze.isEventKey(y, "Space");
    } : d;
    if (o.call(this, e)) {
      e.preventDefault(), e.stopPropagation();
      var f = ve.getComponent("FullscreenToggle");
      Te[this.fsApi_.fullscreenEnabled] !== !1 && f.prototype.handleClick.call(this, e);
    } else if (l.call(this, e)) {
      e.preventDefault(), e.stopPropagation();
      var _ = ve.getComponent("MuteToggle");
      _.prototype.handleClick.call(this, e);
    } else if (h.call(this, e)) {
      e.preventDefault(), e.stopPropagation();
      var v = ve.getComponent("PlayToggle");
      v.prototype.handleClick.call(this, e);
    }
  }, i.canPlayType = function(e) {
    for (var a, s = 0, o = this.options_.techOrder; s < o.length; s++) {
      var u = o[s], l = yt.getTech(u);
      if (l || (l = ve.getComponent(u)), !l) {
        Ze.error('The "' + u + '" tech is undefined. Skipped browser support check for that tech.');
        continue;
      }
      if (l.isSupported() && (a = l.canPlayType(e), a))
        return a;
    }
    return "";
  }, i.selectSource = function(e) {
    var a = this, s = this.options_.techOrder.map(function(h) {
      return [h, yt.getTech(h)];
    }).filter(function(h) {
      var f = h[0], _ = h[1];
      return _ ? _.isSupported() : (Ze.error('The "' + f + '" tech is undefined. Skipped browser support check for that tech.'), !1);
    }), o = function(f, _, v) {
      var y;
      return f.some(function(T) {
        return _.some(function(I) {
          if (y = v(T, I), y)
            return !0;
        });
      }), y;
    }, u, l = function(f) {
      return function(_, v) {
        return f(v, _);
      };
    }, d = function(f, _) {
      var v = f[0], y = f[1];
      if (y.canPlaySource(_, a.options_[v.toLowerCase()]))
        return {
          source: _,
          tech: v
        };
    };
    return this.options_.sourceOrder ? u = o(e, s, l(d)) : u = o(s, e, d), u || !1;
  }, i.handleSrc_ = function(e, a) {
    var s = this;
    if (typeof e > "u")
      return this.cache_.src || "";
    this.resetRetryOnError_ && this.resetRetryOnError_();
    var o = Vb(e);
    if (!o.length) {
      this.setTimeout(function() {
        this.error({
          code: 4,
          message: this.options_.notSupportedMessage
        });
      }, 0);
      return;
    }
    if (this.changingSrc_ = !0, a || (this.cache_.sources = o), this.updateSourceCaches_(o[0]), Ib(this, o[0], function(d, h) {
      s.middleware_ = h, a || (s.cache_.sources = o), s.updateSourceCaches_(d);
      var f = s.src_(d);
      if (f) {
        if (o.length > 1)
          return s.handleSrc_(o.slice(1));
        s.changingSrc_ = !1, s.setTimeout(function() {
          this.error({
            code: 4,
            message: this.options_.notSupportedMessage
          });
        }, 0), s.triggerReady();
        return;
      }
      Db(h, s.tech_);
    }), this.options_.retryOnError && o.length > 1) {
      var u = function() {
        s.error(null), s.handleSrc_(o.slice(1), !0);
      }, l = function() {
        s.off("error", u);
      };
      this.one("error", u), this.one("playing", l), this.resetRetryOnError_ = function() {
        s.off("error", u), s.off("playing", l);
      };
    }
  }, i.src = function(e) {
    return this.handleSrc_(e, !1);
  }, i.src_ = function(e) {
    var a = this, s = this.selectSource([e]);
    return s ? cb(s.tech, this.techName_) ? (this.ready(function() {
      this.tech_.constructor.prototype.hasOwnProperty("setSource") ? this.techCall_("setSource", e) : this.techCall_("src", e.src), this.changingSrc_ = !1;
    }, !0), !1) : (this.changingSrc_ = !0, this.loadTech_(s.tech, s.source), this.tech_.ready(function() {
      a.changingSrc_ = !1;
    }), !1) : !0;
  }, i.load = function() {
    this.techCall_("load");
  }, i.reset = function() {
    var e = this, a = this.options_.Promise || B.Promise;
    if (this.paused() || !a)
      this.doReset_();
    else {
      var s = this.play();
      Ji(s.then(function() {
        return e.doReset_();
      }));
    }
  }, i.doReset_ = function() {
    this.tech_ && this.tech_.clearTracks("text"), this.resetCache_(), this.poster(""), this.loadTech_(this.options_.techOrder[0], null), this.techCall_("reset"), this.resetControlBarUI_(), _r(this) && this.trigger("playerreset");
  }, i.resetControlBarUI_ = function() {
    this.resetProgressBar_(), this.resetPlaybackRate_(), this.resetVolumeBar_();
  }, i.resetProgressBar_ = function() {
    this.currentTime(0);
    var e = this.controlBar || {}, a = e.durationDisplay, s = e.remainingTimeDisplay;
    a && a.updateContent(), s && s.updateContent();
  }, i.resetPlaybackRate_ = function() {
    this.playbackRate(this.defaultPlaybackRate()), this.handleTechRateChange_();
  }, i.resetVolumeBar_ = function() {
    this.volume(1), this.trigger("volumechange");
  }, i.currentSources = function() {
    var e = this.currentSource(), a = [];
    return Object.keys(e).length !== 0 && a.push(e), this.cache_.sources || a;
  }, i.currentSource = function() {
    return this.cache_.source || {};
  }, i.currentSrc = function() {
    return this.currentSource() && this.currentSource().src || "";
  }, i.currentType = function() {
    return this.currentSource() && this.currentSource().type || "";
  }, i.preload = function(e) {
    if (e !== void 0) {
      this.techCall_("setPreload", e), this.options_.preload = e;
      return;
    }
    return this.techGet_("preload");
  }, i.autoplay = function(e) {
    if (e === void 0)
      return this.options_.autoplay || !1;
    var a;
    typeof e == "string" && /(any|play|muted)/.test(e) || e === !0 && this.options_.normalizeAutoplay ? (this.options_.autoplay = e, this.manualAutoplay_(typeof e == "string" ? e : "play"), a = !1) : e ? this.options_.autoplay = !0 : this.options_.autoplay = !1, a = typeof a > "u" ? this.options_.autoplay : a, this.tech_ && this.techCall_("setAutoplay", a);
  }, i.playsinline = function(e) {
    return e !== void 0 ? (this.techCall_("setPlaysinline", e), this.options_.playsinline = e, this) : this.techGet_("playsinline");
  }, i.loop = function(e) {
    if (e !== void 0) {
      this.techCall_("setLoop", e), this.options_.loop = e;
      return;
    }
    return this.techGet_("loop");
  }, i.poster = function(e) {
    if (e === void 0)
      return this.poster_;
    e || (e = ""), e !== this.poster_ && (this.poster_ = e, this.techCall_("setPoster", e), this.isPosterFromTech_ = !1, this.trigger("posterchange"));
  }, i.handleTechPosterChange_ = function() {
    if ((!this.poster_ || this.options_.techCanOverridePoster) && this.tech_ && this.tech_.poster) {
      var e = this.tech_.poster() || "";
      e !== this.poster_ && (this.poster_ = e, this.isPosterFromTech_ = !0, this.trigger("posterchange"));
    }
  }, i.controls = function(e) {
    if (e === void 0)
      return !!this.controls_;
    e = !!e, this.controls_ !== e && (this.controls_ = e, this.usingNativeControls() && this.techCall_("setControls", e), this.controls_ ? (this.removeClass("vjs-controls-disabled"), this.addClass("vjs-controls-enabled"), this.trigger("controlsenabled"), this.usingNativeControls() || this.addTechControlsListeners_()) : (this.removeClass("vjs-controls-enabled"), this.addClass("vjs-controls-disabled"), this.trigger("controlsdisabled"), this.usingNativeControls() || this.removeTechControlsListeners_()));
  }, i.usingNativeControls = function(e) {
    if (e === void 0)
      return !!this.usingNativeControls_;
    e = !!e, this.usingNativeControls_ !== e && (this.usingNativeControls_ = e, this.usingNativeControls_ ? (this.addClass("vjs-using-native-controls"), this.trigger("usingnativecontrols")) : (this.removeClass("vjs-using-native-controls"), this.trigger("usingcustomcontrols")));
  }, i.error = function(e) {
    var a = this;
    if (e === void 0)
      return this.error_ || null;
    if (Rr("beforeerror").forEach(function(o) {
      var u = o(a, e);
      if (!(br(u) && !Array.isArray(u) || typeof u == "string" || typeof u == "number" || u === null)) {
        a.log.error("please return a value that MediaError expects in beforeerror hooks");
        return;
      }
      e = u;
    }), this.options_.suppressNotSupportedError && e && e.code === 4) {
      var s = function() {
        this.error(e);
      };
      this.options_.suppressNotSupportedError = !1, this.any(["click", "touchstart"], s), this.one("loadstart", function() {
        this.off(["click", "touchstart"], s);
      });
      return;
    }
    if (e === null) {
      this.error_ = e, this.removeClass("vjs-error"), this.errorDisplay && this.errorDisplay.close();
      return;
    }
    this.error_ = new fi(e), this.addClass("vjs-error"), Ze.error("(CODE:" + this.error_.code + " " + fi.errorTypes[this.error_.code] + ")", this.error_.message, this.error_), this.trigger("error"), Rr("error").forEach(function(o) {
      return o(a, a.error_);
    });
  }, i.reportUserActivity = function(e) {
    this.userActivity_ = !0;
  }, i.userActive = function(e) {
    if (e === void 0)
      return this.userActive_;
    if (e = !!e, e !== this.userActive_) {
      if (this.userActive_ = e, this.userActive_) {
        this.userActivity_ = !0, this.removeClass("vjs-user-inactive"), this.addClass("vjs-user-active"), this.trigger("useractive");
        return;
      }
      this.tech_ && this.tech_.one("mousemove", function(a) {
        a.stopPropagation(), a.preventDefault();
      }), this.userActivity_ = !1, this.removeClass("vjs-user-active"), this.addClass("vjs-user-inactive"), this.trigger("userinactive");
    }
  }, i.listenForUserActivity_ = function() {
    var e, a, s, o = Et(this, this.reportUserActivity), u = function(v) {
      (v.screenX !== a || v.screenY !== s) && (a = v.screenX, s = v.screenY, o());
    }, l = function() {
      o(), this.clearInterval(e), e = this.setInterval(o, 250);
    }, d = function(v) {
      o(), this.clearInterval(e);
    };
    this.on("mousedown", l), this.on("mousemove", u), this.on("mouseup", d), this.on("mouseleave", d);
    var h = this.getChild("controlBar");
    h && !hi && !Er && (h.on("mouseenter", function(_) {
      this.player().options_.inactivityTimeout !== 0 && (this.player().cache_.inactivityTimeout = this.player().options_.inactivityTimeout), this.player().options_.inactivityTimeout = 0;
    }), h.on("mouseleave", function(_) {
      this.player().options_.inactivityTimeout = this.player().cache_.inactivityTimeout;
    })), this.on("keydown", o), this.on("keyup", o);
    var f;
    this.setInterval(function() {
      if (!!this.userActivity_) {
        this.userActivity_ = !1, this.userActive(!0), this.clearTimeout(f);
        var _ = this.options_.inactivityTimeout;
        _ <= 0 || (f = this.setTimeout(function() {
          this.userActivity_ || this.userActive(!1);
        }, _));
      }
    }, 250);
  }, i.playbackRate = function(e) {
    if (e !== void 0) {
      this.techCall_("setPlaybackRate", e);
      return;
    }
    return this.tech_ && this.tech_.featuresPlaybackRate ? this.cache_.lastPlaybackRate || this.techGet_("playbackRate") : 1;
  }, i.defaultPlaybackRate = function(e) {
    return e !== void 0 ? this.techCall_("setDefaultPlaybackRate", e) : this.tech_ && this.tech_.featuresPlaybackRate ? this.techGet_("defaultPlaybackRate") : 1;
  }, i.isAudio = function(e) {
    if (e !== void 0) {
      this.isAudio_ = !!e;
      return;
    }
    return !!this.isAudio_;
  }, i.enableAudioOnlyUI_ = function() {
    var e = this;
    this.addClass("vjs-audio-only-mode");
    var a = this.children(), s = this.getChild("ControlBar"), o = s && s.currentHeight();
    a.forEach(function(u) {
      u !== s && u.el_ && !u.hasClass("vjs-hidden") && (u.hide(), e.audioOnlyCache_.hiddenChildren.push(u));
    }), this.audioOnlyCache_.playerHeight = this.currentHeight(), this.height(o), this.trigger("audioonlymodechange");
  }, i.disableAudioOnlyUI_ = function() {
    this.removeClass("vjs-audio-only-mode"), this.audioOnlyCache_.hiddenChildren.forEach(function(e) {
      return e.show();
    }), this.height(this.audioOnlyCache_.playerHeight), this.trigger("audioonlymodechange");
  }, i.audioOnlyMode = function(e) {
    var a = this;
    if (typeof e != "boolean" || e === this.audioOnlyMode_)
      return this.audioOnlyMode_;
    this.audioOnlyMode_ = e;
    var s = this.options_.Promise || B.Promise;
    if (s) {
      if (e) {
        var o = [];
        return this.isInPictureInPicture() && o.push(this.exitPictureInPicture()), this.isFullscreen() && o.push(this.exitFullscreen()), this.audioPosterMode() && o.push(this.audioPosterMode(!1)), s.all(o).then(function() {
          return a.enableAudioOnlyUI_();
        });
      }
      return s.resolve().then(function() {
        return a.disableAudioOnlyUI_();
      });
    }
    e ? (this.isInPictureInPicture() && this.exitPictureInPicture(), this.isFullscreen() && this.exitFullscreen(), this.enableAudioOnlyUI_()) : this.disableAudioOnlyUI_();
  }, i.enablePosterModeUI_ = function() {
    var e = this.tech_ && this.tech_;
    e.hide(), this.addClass("vjs-audio-poster-mode"), this.trigger("audiopostermodechange");
  }, i.disablePosterModeUI_ = function() {
    var e = this.tech_ && this.tech_;
    e.show(), this.removeClass("vjs-audio-poster-mode"), this.trigger("audiopostermodechange");
  }, i.audioPosterMode = function(e) {
    var a = this;
    if (typeof e != "boolean" || e === this.audioPosterMode_)
      return this.audioPosterMode_;
    this.audioPosterMode_ = e;
    var s = this.options_.Promise || B.Promise;
    if (s) {
      if (e) {
        if (this.audioOnlyMode()) {
          var o = this.audioOnlyMode(!1);
          return o.then(function() {
            a.enablePosterModeUI_();
          });
        }
        return s.resolve().then(function() {
          a.enablePosterModeUI_();
        });
      }
      return s.resolve().then(function() {
        a.disablePosterModeUI_();
      });
    }
    if (e) {
      this.audioOnlyMode() && this.audioOnlyMode(!1), this.enablePosterModeUI_();
      return;
    }
    this.disablePosterModeUI_();
  }, i.addTextTrack = function(e, a, s) {
    if (this.tech_)
      return this.tech_.addTextTrack(e, a, s);
  }, i.addRemoteTextTrack = function(e, a) {
    if (this.tech_)
      return this.tech_.addRemoteTextTrack(e, a);
  }, i.removeRemoteTextTrack = function(e) {
    e === void 0 && (e = {});
    var a = e, s = a.track;
    if (s || (s = e), this.tech_)
      return this.tech_.removeRemoteTextTrack(s);
  }, i.getVideoPlaybackQuality = function() {
    return this.techGet_("getVideoPlaybackQuality");
  }, i.videoWidth = function() {
    return this.tech_ && this.tech_.videoWidth && this.tech_.videoWidth() || 0;
  }, i.videoHeight = function() {
    return this.tech_ && this.tech_.videoHeight && this.tech_.videoHeight() || 0;
  }, i.language = function(e) {
    if (e === void 0)
      return this.language_;
    this.language_ !== String(e).toLowerCase() && (this.language_ = String(e).toLowerCase(), _r(this) && this.trigger("languagechange"));
  }, i.languages = function() {
    return St(t.prototype.options_.languages, this.languages_);
  }, i.toJSON = function() {
    var e = St(this.options_), a = e.tracks;
    e.tracks = [];
    for (var s = 0; s < a.length; s++) {
      var o = a[s];
      o = St(o), o.player = void 0, e.tracks[s] = o;
    }
    return e;
  }, i.createModal = function(e, a) {
    var s = this;
    a = a || {}, a.content = e || "";
    var o = new sa(this, a);
    return this.addChild(o), o.on("dispose", function() {
      s.removeChild(o);
    }), o.open(), o;
  }, i.updateCurrentBreakpoint_ = function() {
    if (!!this.responsive())
      for (var e = this.currentBreakpoint(), a = this.currentWidth(), s = 0; s < pd.length; s++) {
        var o = pd[s], u = this.breakpoints_[o];
        if (a <= u) {
          if (e === o)
            return;
          e && this.removeClass(to[e]), this.addClass(to[o]), this.breakpoint_ = o;
          break;
        }
      }
  }, i.removeCurrentBreakpoint_ = function() {
    var e = this.currentBreakpointClass();
    this.breakpoint_ = "", e && this.removeClass(e);
  }, i.breakpoints = function(e) {
    return e === void 0 ? It(this.breakpoints_) : (this.breakpoint_ = "", this.breakpoints_ = It({}, vS, e), this.updateCurrentBreakpoint_(), It(this.breakpoints_));
  }, i.responsive = function(e) {
    if (e === void 0)
      return this.responsive_;
    e = Boolean(e);
    var a = this.responsive_;
    if (e !== a)
      return this.responsive_ = e, e ? (this.on("playerresize", this.boundUpdateCurrentBreakpoint_), this.updateCurrentBreakpoint_()) : (this.off("playerresize", this.boundUpdateCurrentBreakpoint_), this.removeCurrentBreakpoint_()), e;
  }, i.currentBreakpoint = function() {
    return this.breakpoint_;
  }, i.currentBreakpointClass = function() {
    return to[this.breakpoint_] || "";
  }, i.loadMedia = function(e, a) {
    var s = this;
    if (!(!e || typeof e != "object")) {
      this.reset(), this.cache_.media = St(e);
      var o = this.cache_.media, u = o.artwork, l = o.poster, d = o.src, h = o.textTracks;
      !u && l && (this.cache_.media.artwork = [{
        src: l,
        type: go(l)
      }]), d && this.src(d), l && this.poster(l), Array.isArray(h) && h.forEach(function(f) {
        return s.addRemoteTextTrack(f, !1);
      }), this.ready(a);
    }
  }, i.getMedia = function() {
    if (!this.cache_.media) {
      var e = this.poster(), a = this.currentSources(), s = Array.prototype.map.call(this.remoteTextTracks(), function(u) {
        return {
          kind: u.kind,
          label: u.label,
          language: u.language,
          src: u.src
        };
      }), o = {
        src: a,
        textTracks: s
      };
      return e && (o.poster = e, o.artwork = [{
        src: o.poster,
        type: go(o.poster)
      }]), o;
    }
    return St(this.cache_.media);
  }, t.getTagSettings = function(e) {
    var a = {
      sources: [],
      tracks: []
    }, s = hr(e), o = s["data-setup"];
    if (tn(e, "vjs-fill") && (s.fill = !0), tn(e, "vjs-fluid") && (s.fluid = !0), o !== null) {
      var u = ny(o || "{}"), l = u[0], d = u[1];
      l && Ze.error(l), It(s, d);
    }
    if (It(a, s), e.hasChildNodes())
      for (var h = e.childNodes, f = 0, _ = h.length; f < _; f++) {
        var v = h[f], y = v.nodeName.toLowerCase();
        y === "source" ? a.sources.push(hr(v)) : y === "track" && a.tracks.push(hr(v));
      }
    return a;
  }, i.flexNotSupported_ = function() {
    var e = Te.createElement("i");
    return !("flexBasis" in e.style || "webkitFlexBasis" in e.style || "mozFlexBasis" in e.style || "msFlexBasis" in e.style || "msFlexOrder" in e.style);
  }, i.debug = function(e) {
    if (e === void 0)
      return this.debugEnabled_;
    e ? (this.trigger("debugon"), this.previousLogLevel_ = this.log.level, this.log.level("debug"), this.debugEnabled_ = !0) : (this.trigger("debugoff"), this.log.level(this.previousLogLevel_), this.previousLogLevel_ = void 0, this.debugEnabled_ = !1);
  }, i.playbackRates = function(e) {
    if (e === void 0)
      return this.cache_.playbackRates;
    !Array.isArray(e) || !e.every(function(a) {
      return typeof a == "number";
    }) || (this.cache_.playbackRates = e, this.trigger("playbackrateschange"));
  }, t;
}(ve);
ui.names.forEach(function(n) {
  var t = ui[n];
  jt.prototype[t.getterName] = function() {
    return this.tech_ ? this.tech_[t.getterName]() : (this[t.privateName] = this[t.privateName] || new t.ListClass(), this[t.privateName]);
  };
});
jt.prototype.crossorigin = jt.prototype.crossOrigin;
jt.players = {};
var ka = B.navigator;
jt.prototype.options_ = {
  techOrder: yt.defaultTechOrder_,
  html5: {},
  inactivityTimeout: 2e3,
  playbackRates: [],
  liveui: !1,
  children: ["mediaLoader", "posterImage", "textTrackDisplay", "loadingSpinner", "bigPlayButton", "liveTracker", "controlBar", "errorDisplay", "textTrackSettings", "resizeManager"],
  language: ka && (ka.languages && ka.languages[0] || ka.userLanguage || ka.language) || "en",
  languages: {},
  notSupportedMessage: "No compatible source was found for this media.",
  normalizeAutoplay: !1,
  fullscreen: {
    options: {
      navigationUI: "hide"
    }
  },
  breakpoints: {},
  responsive: !1,
  audioOnlyMode: !1,
  audioPosterMode: !1
};
[
  "ended",
  "seeking",
  "seekable",
  "networkState",
  "readyState"
].forEach(function(n) {
  jt.prototype[n] = function() {
    return this.techGet_(n);
  };
});
$g.forEach(function(n) {
  jt.prototype["handleTech" + Nt(n) + "_"] = function() {
    return this.trigger(n);
  };
});
ve.registerComponent("Player", jt);
var yo = "plugin", Hn = "activePlugins_", Fn = {}, To = function(t) {
  return Fn.hasOwnProperty(t);
}, io = function(t) {
  return To(t) ? Fn[t] : void 0;
}, zg = function(t, i) {
  t[Hn] = t[Hn] || {}, t[Hn][i] = !0;
}, bo = function(t, i, r) {
  var e = (r ? "before" : "") + "pluginsetup";
  t.trigger(e, i), t.trigger(e + ":" + i.name, i);
}, _S = function(t, i) {
  var r = function() {
    bo(this, {
      name: t,
      plugin: i,
      instance: null
    }, !0);
    var a = i.apply(this, arguments);
    return zg(this, t), bo(this, {
      name: t,
      plugin: i,
      instance: a
    }), a;
  };
  return Object.keys(i).forEach(function(e) {
    r[e] = i[e];
  }), r;
}, yh = function(t, i) {
  return i.prototype.name = t, function() {
    bo(this, {
      name: t,
      plugin: i,
      instance: null
    }, !0);
    for (var r = arguments.length, e = new Array(r), a = 0; a < r; a++)
      e[a] = arguments[a];
    var s = Ys(i, [this].concat(e));
    return this[t] = function() {
      return s;
    }, bo(this, s.getEventHash()), s;
  };
}, ir = /* @__PURE__ */ function() {
  function n(i) {
    if (this.constructor === n)
      throw new Error("Plugin must be sub-classed; not directly instantiated.");
    this.player = i, this.log || (this.log = this.player.log.createLogger(this.name)), dc(this), delete this.trigger, mg(this, this.constructor.defaultState), zg(i, this.name), this.dispose = this.dispose.bind(this), i.on("dispose", this.dispose);
  }
  var t = n.prototype;
  return t.version = function() {
    return this.constructor.VERSION;
  }, t.getEventHash = function(r) {
    return r === void 0 && (r = {}), r.name = this.name, r.plugin = this.constructor, r.instance = this, r;
  }, t.trigger = function(r, e) {
    return e === void 0 && (e = {}), aa(this.eventBusEl_, r, this.getEventHash(e));
  }, t.handleStateChanged = function(r) {
  }, t.dispose = function() {
    var r = this.name, e = this.player;
    this.trigger("dispose"), this.off(), e.off("dispose", this.dispose), e[Hn][r] = !1, this.player = this.state = null, e[r] = yh(r, Fn[r]);
  }, n.isBasic = function(r) {
    var e = typeof r == "string" ? io(r) : r;
    return typeof e == "function" && !n.prototype.isPrototypeOf(e.prototype);
  }, n.registerPlugin = function(r, e) {
    if (typeof r != "string")
      throw new Error('Illegal plugin name, "' + r + '", must be a string, was ' + typeof r + ".");
    if (To(r))
      Ze.warn('A plugin named "' + r + '" already exists. You may want to avoid re-registering plugins!');
    else if (jt.prototype.hasOwnProperty(r))
      throw new Error('Illegal plugin name, "' + r + '", cannot share a name with an existing player method!');
    if (typeof e != "function")
      throw new Error('Illegal plugin for "' + r + '", must be a function, was ' + typeof e + ".");
    return Fn[r] = e, r !== yo && (n.isBasic(e) ? jt.prototype[r] = _S(r, e) : jt.prototype[r] = yh(r, e)), e;
  }, n.deregisterPlugin = function(r) {
    if (r === yo)
      throw new Error("Cannot de-register base plugin.");
    To(r) && (delete Fn[r], delete jt.prototype[r]);
  }, n.getPlugins = function(r) {
    r === void 0 && (r = Object.keys(Fn));
    var e;
    return r.forEach(function(a) {
      var s = io(a);
      s && (e = e || {}, e[a] = s);
    }), e;
  }, n.getPluginVersion = function(r) {
    var e = io(r);
    return e && e.VERSION || "";
  }, n;
}();
ir.getPlugin = io;
ir.BASE_PLUGIN_NAME = yo;
ir.registerPlugin(yo, ir);
jt.prototype.usingPlugin = function(n) {
  return !!this[Hn] && this[Hn][n] === !0;
};
jt.prototype.hasPlugin = function(n) {
  return !!To(n);
};
var yS = function(t, i) {
  i === void 0 && (i = {});
  var r = function() {
    t.apply(this, arguments);
  }, e = {};
  typeof i == "object" ? (i.constructor !== Object.prototype.constructor && (r = i.constructor), e = i) : typeof i == "function" && (r = i), $y(r, t), t && (r.super_ = t);
  for (var a in e)
    e.hasOwnProperty(a) && (r.prototype[a] = e[a]);
  return r;
}, Kg = function(t) {
  return t.indexOf("#") === 0 ? t.slice(1) : t;
};
function G(n, t, i) {
  var r = G.getPlayer(n);
  if (r)
    return t && Ze.warn('Player "' + n + '" is already initialised. Options will not be applied.'), i && r.ready(i), r;
  var e = typeof n == "string" ? Nr("#" + Kg(n)) : n;
  if (!na(e))
    throw new TypeError("The element or ID supplied is not valid. (videojs)");
  (!e.ownerDocument.defaultView || !e.ownerDocument.body.contains(e)) && Ze.warn("The element supplied is not included in the DOM"), t = t || {}, t.restoreEl === !0 && (t.restoreEl = (e.parentNode && e.parentNode.hasAttribute("data-vjs-player") ? e.parentNode : e).cloneNode(!0)), Rr("beforesetup").forEach(function(s) {
    var o = s(e, St(t));
    if (!br(o) || Array.isArray(o)) {
      Ze.error("please return an object in beforesetup hooks");
      return;
    }
    t = St(t, o);
  });
  var a = ve.getComponent("Player");
  return r = new a(e, t, i), Rr("setup").forEach(function(s) {
    return s(r);
  }), r;
}
G.hooks_ = pr;
G.hooks = Rr;
G.hook = $T;
G.hookOnce = zT;
G.removeHook = qm;
if (B.VIDEOJS_NO_DYNAMIC_STYLE !== !0 && ra()) {
  var Hs = Nr(".vjs-styles-defaults");
  if (!Hs) {
    Hs = lg("vjs-styles-defaults");
    var Ku = Nr("head");
    Ku && Ku.insertBefore(Hs, Ku.firstChild), dg(Hs, `
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `);
  }
}
ud(1, G);
G.VERSION = Um;
G.options = jt.prototype.options_;
G.getPlayers = function() {
  return jt.players;
};
G.getPlayer = function(n) {
  var t = jt.players, i;
  if (typeof n == "string") {
    var r = Kg(n), e = t[r];
    if (e)
      return e;
    i = Nr("#" + r);
  } else
    i = n;
  if (na(i)) {
    var a = i, s = a.player, o = a.playerId;
    if (s || t[o])
      return s || t[o];
  }
};
G.getAllPlayers = function() {
  return Object.keys(jt.players).map(function(n) {
    return jt.players[n];
  }).filter(Boolean);
};
G.players = jt.players;
G.getComponent = ve.getComponent;
G.registerComponent = function(n, t) {
  yt.isTech(t) && Ze.warn("The " + n + " tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"), ve.registerComponent.call(ve, n, t);
};
G.getTech = yt.getTech;
G.registerTech = yt.registerTech;
G.use = Pb;
Object.defineProperty(G, "middleware", {
  value: {},
  writeable: !1,
  enumerable: !0
});
Object.defineProperty(G.middleware, "TERMINATOR", {
  value: mo,
  writeable: !1,
  enumerable: !0
});
G.browser = ZT;
G.TOUCH_ENABLED = Qn;
G.extend = yS;
G.mergeOptions = St;
G.bind = Et;
G.registerPlugin = ir.registerPlugin;
G.deregisterPlugin = ir.deregisterPlugin;
G.plugin = function(n, t) {
  return Ze.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"), ir.registerPlugin(n, t);
};
G.getPlugins = ir.getPlugins;
G.getPlugin = ir.getPlugin;
G.getPluginVersion = ir.getPluginVersion;
G.addLanguage = function(n, t) {
  var i;
  return n = ("" + n).toLowerCase(), G.options.languages = St(G.options.languages, (i = {}, i[n] = t, i)), G.options.languages[n];
};
G.log = Ze;
G.createLogger = jm;
G.createTimeRange = G.createTimeRanges = rn;
G.formatTime = ta;
G.setFormatTime = Kb;
G.resetFormatTime = Xb;
G.parseUrl = fc;
G.isCrossOrigin = Xo;
G.EventTarget = Xt;
G.on = Pi;
G.one = zo;
G.off = ei;
G.trigger = aa;
G.xhr = Ro.exports;
G.TextTrack = cs;
G.AudioTrack = yg;
G.VideoTrack = Tg;
["isEl", "isTextNode", "createEl", "hasClass", "addClass", "removeClass", "toggleClass", "setAttributes", "getAttributes", "emptyEl", "appendContent", "insertContent"].forEach(function(n) {
  G[n] = function() {
    return Ze.warn("videojs." + n + "() is deprecated; use videojs.dom." + n + "() instead"), og[n].apply(null, arguments);
  };
});
G.computedStyle = Ja;
G.dom = og;
G.url = wb;
G.defineLazyProperty = Dc;
G.addLanguage("en", {
  "Non-Fullscreen": "Exit Fullscreen"
});
/*! @name @videojs/http-streaming @version 2.14.2 @license Apache-2.0 */
var Vi = Mo, So = function(t, i, r) {
  return t && r && r.responseURL && i !== r.responseURL ? r.responseURL : i;
}, Gi = function(t) {
  return G.log.debug ? G.log.debug.bind(G, "VHS:", t + " >") : function() {
  };
}, Mr = 1 / 30, Zi = Mr * 3, Xg = function(t, i) {
  var r = [], e;
  if (t && t.length)
    for (e = 0; e < t.length; e++)
      i(t.start(e), t.end(e)) && r.push([t.start(e), t.end(e)]);
  return G.createTimeRanges(r);
}, Bn = function(t, i) {
  return Xg(t, function(r, e) {
    return r - Zi <= i && e + Zi >= i;
  });
}, Ws = function(t, i) {
  return Xg(t, function(r) {
    return r - Mr >= i;
  });
}, TS = function(t) {
  if (t.length < 2)
    return G.createTimeRanges();
  for (var i = [], r = 1; r < t.length; r++) {
    var e = t.end(r - 1), a = t.start(r);
    i.push([e, a]);
  }
  return G.createTimeRanges(i);
}, bS = function(t, i) {
  var r = null, e = null, a = 0, s = [], o = [];
  if (!t || !t.length || !i || !i.length)
    return G.createTimeRange();
  for (var u = t.length; u--; )
    s.push({
      time: t.start(u),
      type: "start"
    }), s.push({
      time: t.end(u),
      type: "end"
    });
  for (u = i.length; u--; )
    s.push({
      time: i.start(u),
      type: "start"
    }), s.push({
      time: i.end(u),
      type: "end"
    });
  for (s.sort(function(l, d) {
    return l.time - d.time;
  }), u = 0; u < s.length; u++)
    s[u].type === "start" ? (a++, a === 2 && (r = s[u].time)) : s[u].type === "end" && (a--, a === 1 && (e = s[u].time)), r !== null && e !== null && (o.push([r, e]), r = null, e = null);
  return G.createTimeRanges(o);
}, Qg = function(t) {
  var i = [];
  if (!t || !t.length)
    return "";
  for (var r = 0; r < t.length; r++)
    i.push(t.start(r) + " => " + t.end(r));
  return i.join(", ");
}, SS = function(t, i, r) {
  r === void 0 && (r = 1);
  var e = t.length ? t.end(t.length - 1) : 0;
  return (e - i) / r;
}, Zr = function(t) {
  for (var i = [], r = 0; r < t.length; r++)
    i.push({
      start: t.start(r),
      end: t.end(r)
    });
  return i;
}, ES = function(t, i) {
  if (t === i)
    return !1;
  if (!t && i || !i && t || t.length !== i.length)
    return !0;
  for (var r = 0; r < t.length; r++)
    if (t.start(r) !== i.start(r) || t.end(r) !== i.end(r))
      return !0;
  return !1;
}, Th = function(t) {
  if (!(!t || !t.length || !t.end))
    return t.end(t.length - 1);
}, Lc = function(t, i) {
  var r = 0;
  if (!t || !t.length)
    return r;
  for (var e = 0; e < t.length; e++) {
    var a = t.start(e), s = t.end(e);
    if (!(i > s)) {
      if (i > a && i <= s) {
        r += s - i;
        continue;
      }
      r += s - a;
    }
  }
  return r;
}, bh = G.createTimeRange, Oc = function(t, i) {
  if (!i.preload)
    return i.duration;
  var r = 0;
  return (i.parts || []).forEach(function(e) {
    r += e.duration;
  }), (i.preloadHints || []).forEach(function(e) {
    e.type === "PART" && (r += t.partTargetDuration);
  }), r;
}, md = function(t) {
  return (t.segments || []).reduce(function(i, r, e) {
    return r.parts ? r.parts.forEach(function(a, s) {
      i.push({
        duration: a.duration,
        segmentIndex: e,
        partIndex: s,
        part: a,
        segment: r
      });
    }) : i.push({
      duration: r.duration,
      segmentIndex: e,
      partIndex: null,
      segment: r,
      part: null
    }), i;
  }, []);
}, Yg = function(t) {
  var i = t.segments && t.segments.length && t.segments[t.segments.length - 1];
  return i && i.parts || [];
}, Jg = function(t) {
  var i = t.preloadSegment;
  if (!!i) {
    var r = i.parts, e = i.preloadHints, a = (e || []).reduce(function(s, o) {
      return s + (o.type === "PART" ? 1 : 0);
    }, 0);
    return a += r && r.length ? r.length : 0, a;
  }
}, Zg = function(t, i) {
  if (i.endList)
    return 0;
  if (t && t.suggestedPresentationDelay)
    return t.suggestedPresentationDelay;
  var r = Yg(i).length > 0;
  return r && i.serverControl && i.serverControl.partHoldBack ? i.serverControl.partHoldBack : r && i.partTargetDuration ? i.partTargetDuration * 3 : i.serverControl && i.serverControl.holdBack ? i.serverControl.holdBack : i.targetDuration ? i.targetDuration * 3 : 0;
}, xS = function(t, i) {
  var r = 0, e = i - t.mediaSequence, a = t.segments[e];
  if (a) {
    if (typeof a.start < "u")
      return {
        result: a.start,
        precise: !0
      };
    if (typeof a.end < "u")
      return {
        result: a.end - a.duration,
        precise: !0
      };
  }
  for (; e--; ) {
    if (a = t.segments[e], typeof a.end < "u")
      return {
        result: r + a.end,
        precise: !0
      };
    if (r += Oc(t, a), typeof a.start < "u")
      return {
        result: r + a.start,
        precise: !0
      };
  }
  return {
    result: r,
    precise: !1
  };
}, wS = function(t, i) {
  for (var r = 0, e, a = i - t.mediaSequence; a < t.segments.length; a++) {
    if (e = t.segments[a], typeof e.start < "u")
      return {
        result: e.start - r,
        precise: !0
      };
    if (r += Oc(t, e), typeof e.end < "u")
      return {
        result: e.end - r,
        precise: !0
      };
  }
  return {
    result: -1,
    precise: !1
  };
}, ev = function(t, i, r) {
  if (typeof i > "u" && (i = t.mediaSequence + t.segments.length), i < t.mediaSequence)
    return 0;
  var e = xS(t, i);
  if (e.precise)
    return e.result;
  var a = wS(t, i);
  return a.precise ? a.result : e.result + r;
}, iv = function(t, i, r) {
  if (!t)
    return 0;
  if (typeof r != "number" && (r = 0), typeof i > "u") {
    if (t.totalDuration)
      return t.totalDuration;
    if (!t.endList)
      return B.Infinity;
  }
  return ev(t, i, r);
}, ja = function(t) {
  var i = t.defaultDuration, r = t.durationList, e = t.startIndex, a = t.endIndex, s = 0;
  if (e > a) {
    var o = [a, e];
    e = o[0], a = o[1];
  }
  if (e < 0) {
    for (var u = e; u < Math.min(0, a); u++)
      s += i;
    e = 0;
  }
  for (var l = e; l < a; l++)
    s += r[l].duration;
  return s;
}, rv = function(t, i, r, e) {
  if (!t || !t.segments)
    return null;
  if (t.endList)
    return iv(t);
  if (i === null)
    return null;
  i = i || 0;
  var a = ev(t, t.mediaSequence + t.segments.length, i);
  return r && (e = typeof e == "number" ? e : Zg(null, t), a -= e), Math.max(0, a);
}, AS = function(t, i, r) {
  var e = !0, a = i || 0, s = rv(t, i, e, r);
  return s === null ? bh() : bh(a, s);
}, CS = function(t) {
  for (var i = t.playlist, r = t.currentTime, e = t.startingSegmentIndex, a = t.startingPartIndex, s = t.startTime, o = t.experimentalExactManifestTimings, u = r - s, l = md(i), d = 0, h = 0; h < l.length; h++) {
    var f = l[h];
    if (e === f.segmentIndex && !(typeof a == "number" && typeof f.partIndex == "number" && a !== f.partIndex)) {
      d = h;
      break;
    }
  }
  if (u < 0) {
    if (d > 0)
      for (var _ = d - 1; _ >= 0; _--) {
        var v = l[_];
        if (u += v.duration, o) {
          if (u < 0)
            continue;
        } else if (u + Mr <= 0)
          continue;
        return {
          partIndex: v.partIndex,
          segmentIndex: v.segmentIndex,
          startTime: s - ja({
            defaultDuration: i.targetDuration,
            durationList: l,
            startIndex: d,
            endIndex: _
          })
        };
      }
    return {
      partIndex: l[0] && l[0].partIndex || null,
      segmentIndex: l[0] && l[0].segmentIndex || 0,
      startTime: r
    };
  }
  if (d < 0) {
    for (var y = d; y < 0; y++)
      if (u -= i.targetDuration, u < 0)
        return {
          partIndex: l[0] && l[0].partIndex || null,
          segmentIndex: l[0] && l[0].segmentIndex || 0,
          startTime: r
        };
    d = 0;
  }
  for (var T = d; T < l.length; T++) {
    var I = l[T];
    if (u -= I.duration, o) {
      if (u > 0)
        continue;
    } else if (u - Mr >= 0)
      continue;
    return {
      partIndex: I.partIndex,
      segmentIndex: I.segmentIndex,
      startTime: s + ja({
        defaultDuration: i.targetDuration,
        durationList: l,
        startIndex: d,
        endIndex: T
      })
    };
  }
  return {
    segmentIndex: l[l.length - 1].segmentIndex,
    partIndex: l[l.length - 1].partIndex,
    startTime: r
  };
}, nv = function(t) {
  return t.excludeUntil && t.excludeUntil > Date.now();
}, Rc = function(t) {
  return t.excludeUntil && t.excludeUntil === 1 / 0;
}, Zo = function(t) {
  var i = nv(t);
  return !t.disabled && !i;
}, kS = function(t) {
  return t.disabled;
}, PS = function(t) {
  for (var i = 0; i < t.segments.length; i++)
    if (t.segments[i].key)
      return !0;
  return !1;
}, av = function(t, i) {
  return i.attributes && i.attributes[t];
}, IS = function(t, i, r, e) {
  if (e === void 0 && (e = 0), !av("BANDWIDTH", r))
    return NaN;
  var a = t * r.attributes.BANDWIDTH;
  return (a - e * 8) / i;
}, gd = function(t, i) {
  if (t.playlists.length === 1)
    return !0;
  var r = i.attributes.BANDWIDTH || Number.MAX_VALUE;
  return t.playlists.filter(function(e) {
    return Zo(e) ? (e.attributes.BANDWIDTH || 0) < r : !1;
  }).length === 0;
}, Nc = function(t, i) {
  return !t && !i || !t && i || t && !i ? !1 : !!(t === i || t.id && i.id && t.id === i.id || t.resolvedUri && i.resolvedUri && t.resolvedUri === i.resolvedUri || t.uri && i.uri && t.uri === i.uri);
}, Sh = function(t, i) {
  var r = t && t.mediaGroups && t.mediaGroups.AUDIO || {}, e = !1;
  for (var a in r) {
    for (var s in r[a])
      if (e = i(r[a][s]), e)
        break;
    if (e)
      break;
  }
  return !!e;
}, ps = function(t) {
  if (!t || !t.playlists || !t.playlists.length) {
    var i = Sh(t, function(s) {
      return s.playlists && s.playlists.length || s.uri;
    });
    return i;
  }
  for (var r = function(o) {
    var u = t.playlists[o], l = u.attributes && u.attributes.CODECS;
    if (l && l.split(",").every(function(h) {
      return Jp(h);
    }))
      return "continue";
    var d = Sh(t, function(h) {
      return Nc(u, h);
    });
    return d ? "continue" : {
      v: !1
    };
  }, e = 0; e < t.playlists.length; e++) {
    var a = r(e);
    if (a !== "continue" && typeof a == "object")
      return a.v;
  }
  return !0;
}, bi = {
  liveEdgeDelay: Zg,
  duration: iv,
  seekable: AS,
  getMediaInfoForTime: CS,
  isEnabled: Zo,
  isDisabled: kS,
  isBlacklisted: nv,
  isIncompatible: Rc,
  playlistEnd: rv,
  isAes: PS,
  hasAttribute: av,
  estimateSegmentRequestTime: IS,
  isLowestEnabledRendition: gd,
  isAudioOnly: ps,
  playlistMatch: Nc,
  segmentDurationWithParts: Oc
}, sv = G.log, Mc = function(t, i) {
  return t + "-" + i;
}, DS = function(t) {
  var i = t.onwarn, r = t.oninfo, e = t.manifestString, a = t.customTagParsers, s = a === void 0 ? [] : a, o = t.customTagMappers, u = o === void 0 ? [] : o, l = t.experimentalLLHLS, d = new Zy();
  i && d.on("warn", i), r && d.on("info", r), s.forEach(function(y) {
    return d.addParser(y);
  }), u.forEach(function(y) {
    return d.addTagMapper(y);
  }), d.push(e), d.end();
  var h = d.manifest;
  if (l || (["preloadSegment", "skip", "serverControl", "renditionReports", "partInf", "partTargetDuration"].forEach(function(y) {
    h.hasOwnProperty(y) && delete h[y];
  }), h.segments && h.segments.forEach(function(y) {
    ["parts", "preloadHints"].forEach(function(T) {
      y.hasOwnProperty(T) && delete y[T];
    });
  })), !h.targetDuration) {
    var f = 10;
    h.segments && h.segments.length && (f = h.segments.reduce(function(y, T) {
      return Math.max(y, T.duration);
    }, 0)), i && i("manifest has no targetDuration defaulting to " + f), h.targetDuration = f;
  }
  var _ = Yg(h);
  if (_.length && !h.partTargetDuration) {
    var v = _.reduce(function(y, T) {
      return Math.max(y, T.duration);
    }, 0);
    i && (i("manifest has no partTargetDuration defaulting to " + v), sv.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")), h.partTargetDuration = v;
  }
  return h;
}, ms = function(t, i) {
  !t.mediaGroups || ["AUDIO", "SUBTITLES"].forEach(function(r) {
    if (!!t.mediaGroups[r])
      for (var e in t.mediaGroups[r])
        for (var a in t.mediaGroups[r][e]) {
          var s = t.mediaGroups[r][e][a];
          i(s, r, e, a);
        }
  });
}, ov = function(t) {
  var i = t.playlist, r = t.uri, e = t.id;
  i.id = e, i.playlistErrors_ = 0, r && (i.uri = r), i.attributes = i.attributes || {};
}, LS = function(t) {
  for (var i = t.playlists.length; i--; ) {
    var r = t.playlists[i];
    ov({
      playlist: r,
      id: Mc(i, r.uri)
    }), r.resolvedUri = Vi(t.uri, r.uri), t.playlists[r.id] = r, t.playlists[r.uri] = r, r.attributes.BANDWIDTH || sv.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.");
  }
}, OS = function(t) {
  ms(t, function(i) {
    i.uri && (i.resolvedUri = Vi(t.uri, i.uri));
  });
}, RS = function(t, i) {
  var r = Mc(0, i), e = {
    mediaGroups: {
      AUDIO: {},
      VIDEO: {},
      "CLOSED-CAPTIONS": {},
      SUBTITLES: {}
    },
    uri: B.location.href,
    resolvedUri: B.location.href,
    playlists: [{
      uri: i,
      id: r,
      resolvedUri: i,
      attributes: {}
    }]
  };
  return e.playlists[r] = e.playlists[0], e.playlists[i] = e.playlists[0], e;
}, uv = function(t, i) {
  t.uri = i;
  for (var r = 0; r < t.playlists.length; r++)
    if (!t.playlists[r].uri) {
      var e = "placeholder-uri-" + r;
      t.playlists[r].uri = e;
    }
  var a = ps(t);
  ms(t, function(s, o, u, l) {
    var d = "placeholder-uri-" + o + "-" + u + "-" + l;
    if (!s.playlists || !s.playlists.length) {
      if (a && o === "AUDIO" && !s.uri)
        for (var h = 0; h < t.playlists.length; h++) {
          var f = t.playlists[h];
          if (f.attributes && f.attributes.AUDIO && f.attributes.AUDIO === u)
            return;
        }
      s.playlists = [Ri({}, s)];
    }
    s.playlists.forEach(function(_, v) {
      var y = Mc(v, d);
      _.uri ? _.resolvedUri = _.resolvedUri || Vi(t.uri, _.uri) : (_.uri = v === 0 ? d : y, _.resolvedUri = _.uri), _.id = _.id || y, _.attributes = _.attributes || {}, t.playlists[_.id] = _, t.playlists[_.uri] = _;
    });
  }), LS(t), OS(t);
}, Eo = G.mergeOptions, NS = G.EventTarget, MS = function(t, i) {
  if (i.endList || !i.serverControl)
    return t;
  var r = {};
  if (i.serverControl.canBlockReload) {
    var e = i.preloadSegment, a = i.mediaSequence + i.segments.length;
    if (e) {
      var s = e.parts || [], o = Jg(i) - 1;
      o > -1 && o !== s.length - 1 && (r._HLS_part = o), (o > -1 || s.length) && a--;
    }
    r._HLS_msn = a;
  }
  if (i.serverControl && i.serverControl.canSkipUntil && (r._HLS_skip = i.serverControl.canSkipDateranges ? "v2" : "YES"), Object.keys(r).length) {
    var u = new B.URL(t);
    ["_HLS_skip", "_HLS_msn", "_HLS_part"].forEach(function(l) {
      !r.hasOwnProperty(l) || u.searchParams.set(l, r[l]);
    }), t = u.toString();
  }
  return t;
}, FS = function(t, i) {
  if (!t)
    return i;
  var r = Eo(t, i);
  if (t.preloadHints && !i.preloadHints && delete r.preloadHints, t.parts && !i.parts)
    delete r.parts;
  else if (t.parts && i.parts)
    for (var e = 0; e < i.parts.length; e++)
      t.parts && t.parts[e] && (r.parts[e] = Eo(t.parts[e], i.parts[e]));
  return !t.skipped && i.skipped && (r.skipped = !1), t.preload && !i.preload && (r.preload = !1), r;
}, BS = function(t, i, r) {
  var e = t.slice(), a = i.slice();
  r = r || 0;
  for (var s = [], o, u = 0; u < a.length; u++) {
    var l = e[u + r], d = a[u];
    l ? (o = l.map || o, s.push(FS(l, d))) : (o && !d.map && (d.map = o), s.push(d));
  }
  return s;
}, lv = function(t, i) {
  !t.resolvedUri && t.uri && (t.resolvedUri = Vi(i, t.uri)), t.key && !t.key.resolvedUri && (t.key.resolvedUri = Vi(i, t.key.uri)), t.map && !t.map.resolvedUri && (t.map.resolvedUri = Vi(i, t.map.uri)), t.map && t.map.key && !t.map.key.resolvedUri && (t.map.key.resolvedUri = Vi(i, t.map.key.uri)), t.parts && t.parts.length && t.parts.forEach(function(r) {
    r.resolvedUri || (r.resolvedUri = Vi(i, r.uri));
  }), t.preloadHints && t.preloadHints.length && t.preloadHints.forEach(function(r) {
    r.resolvedUri || (r.resolvedUri = Vi(i, r.uri));
  });
}, dv = function(t) {
  var i = t.segments || [], r = t.preloadSegment;
  if (r && r.parts && r.parts.length) {
    if (r.preloadHints) {
      for (var e = 0; e < r.preloadHints.length; e++)
        if (r.preloadHints[e].type === "MAP")
          return i;
    }
    r.duration = t.targetDuration, r.preload = !0, i.push(r);
  }
  return i;
}, cv = function(t, i) {
  return t === i || t.segments && i.segments && t.segments.length === i.segments.length && t.endList === i.endList && t.mediaSequence === i.mediaSequence && t.preloadSegment === i.preloadSegment;
}, vd = function(t, i, r) {
  r === void 0 && (r = cv);
  var e = Eo(t, {}), a = e.playlists[i.id];
  if (!a || r(a, i))
    return null;
  i.segments = dv(i);
  var s = Eo(a, i);
  if (s.preloadSegment && !i.preloadSegment && delete s.preloadSegment, a.segments) {
    if (i.skip) {
      i.segments = i.segments || [];
      for (var o = 0; o < i.skip.skippedSegments; o++)
        i.segments.unshift({
          skipped: !0
        });
    }
    s.segments = BS(a.segments, i.segments, i.mediaSequence - a.mediaSequence);
  }
  s.segments.forEach(function(l) {
    lv(l, s.resolvedUri);
  });
  for (var u = 0; u < e.playlists.length; u++)
    e.playlists[u].id === i.id && (e.playlists[u] = s);
  return e.playlists[i.id] = s, e.playlists[i.uri] = s, ms(t, function(l, d, h, f) {
    if (!!l.playlists)
      for (var _ = 0; _ < l.playlists.length; _++)
        i.id === l.playlists[_].id && (l.playlists[_] = s);
  }), e;
}, _d = function(t, i) {
  var r = t.segments || [], e = r[r.length - 1], a = e && e.parts && e.parts[e.parts.length - 1], s = a && a.duration || e && e.duration;
  return i && s ? s * 1e3 : (t.partTargetDuration || t.targetDuration || 10) * 500;
}, Un = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e, a) {
    var s;
    if (a === void 0 && (a = {}), s = n.call(this) || this, !r)
      throw new Error("A non-empty playlist URL or object is required");
    s.logger_ = Gi("PlaylistLoader");
    var o = a, u = o.withCredentials, l = u === void 0 ? !1 : u, d = o.handleManifestRedirects, h = d === void 0 ? !1 : d;
    s.src = r, s.vhs_ = e, s.withCredentials = l, s.handleManifestRedirects = h;
    var f = e.options_;
    return s.customTagParsers = f && f.customTagParsers || [], s.customTagMappers = f && f.customTagMappers || [], s.experimentalLLHLS = f && f.experimentalLLHLS || !1, G.browser.IE_VERSION && (s.experimentalLLHLS = !1), s.state = "HAVE_NOTHING", s.handleMediaupdatetimeout_ = s.handleMediaupdatetimeout_.bind(Ge(s)), s.on("mediaupdatetimeout", s.handleMediaupdatetimeout_), s;
  }
  var i = t.prototype;
  return i.handleMediaupdatetimeout_ = function() {
    var e = this;
    if (this.state === "HAVE_METADATA") {
      var a = this.media(), s = Vi(this.master.uri, a.uri);
      this.experimentalLLHLS && (s = MS(s, a)), this.state = "HAVE_CURRENT_METADATA", this.request = this.vhs_.xhr({
        uri: s,
        withCredentials: this.withCredentials
      }, function(o, u) {
        if (!!e.request) {
          if (o)
            return e.playlistRequestError(e.request, e.media(), "HAVE_METADATA");
          e.haveMetadata({
            playlistString: e.request.responseText,
            url: e.media().uri,
            id: e.media().id
          });
        }
      });
    }
  }, i.playlistRequestError = function(e, a, s) {
    var o = a.uri, u = a.id;
    this.request = null, s && (this.state = s), this.error = {
      playlist: this.master.playlists[u],
      status: e.status,
      message: "HLS playlist request error at URL: " + o + ".",
      responseText: e.responseText,
      code: e.status >= 500 ? 4 : 2
    }, this.trigger("error");
  }, i.parseManifest_ = function(e) {
    var a = this, s = e.url, o = e.manifestString;
    return DS({
      onwarn: function(l) {
        var d = l.message;
        return a.logger_("m3u8-parser warn for " + s + ": " + d);
      },
      oninfo: function(l) {
        var d = l.message;
        return a.logger_("m3u8-parser info for " + s + ": " + d);
      },
      manifestString: o,
      customTagParsers: this.customTagParsers,
      customTagMappers: this.customTagMappers,
      experimentalLLHLS: this.experimentalLLHLS
    });
  }, i.haveMetadata = function(e) {
    var a = e.playlistString, s = e.playlistObject, o = e.url, u = e.id;
    this.request = null, this.state = "HAVE_METADATA";
    var l = s || this.parseManifest_({
      url: o,
      manifestString: a
    });
    l.lastRequest = Date.now(), ov({
      playlist: l,
      uri: o,
      id: u
    });
    var d = vd(this.master, l);
    this.targetDuration = l.partTargetDuration || l.targetDuration, this.pendingMedia_ = null, d ? (this.master = d, this.media_ = this.master.playlists[u]) : this.trigger("playlistunchanged"), this.updateMediaUpdateTimeout_(_d(this.media(), !!d)), this.trigger("loadedplaylist");
  }, i.dispose = function() {
    this.trigger("dispose"), this.stopRequest(), B.clearTimeout(this.mediaUpdateTimeout), B.clearTimeout(this.finalRenditionTimeout), this.off();
  }, i.stopRequest = function() {
    if (this.request) {
      var e = this.request;
      this.request = null, e.onreadystatechange = null, e.abort();
    }
  }, i.media = function(e, a) {
    var s = this;
    if (!e)
      return this.media_;
    if (this.state === "HAVE_NOTHING")
      throw new Error("Cannot switch media playlist from " + this.state);
    if (typeof e == "string") {
      if (!this.master.playlists[e])
        throw new Error("Unknown playlist URI: " + e);
      e = this.master.playlists[e];
    }
    if (B.clearTimeout(this.finalRenditionTimeout), a) {
      var o = (e.partTargetDuration || e.targetDuration) / 2 * 1e3 || 5e3;
      this.finalRenditionTimeout = B.setTimeout(this.media.bind(this, e, !1), o);
      return;
    }
    var u = this.state, l = !this.media_ || e.id !== this.media_.id, d = this.master.playlists[e.id];
    if (d && d.endList || e.endList && e.segments.length) {
      this.request && (this.request.onreadystatechange = null, this.request.abort(), this.request = null), this.state = "HAVE_METADATA", this.media_ = e, l && (this.trigger("mediachanging"), u === "HAVE_MASTER" ? this.trigger("loadedmetadata") : this.trigger("mediachange"));
      return;
    }
    if (this.updateMediaUpdateTimeout_(_d(e, !0)), !!l) {
      if (this.state = "SWITCHING_MEDIA", this.request) {
        if (e.resolvedUri === this.request.url)
          return;
        this.request.onreadystatechange = null, this.request.abort(), this.request = null;
      }
      this.media_ && this.trigger("mediachanging"), this.pendingMedia_ = e, this.request = this.vhs_.xhr({
        uri: e.resolvedUri,
        withCredentials: this.withCredentials
      }, function(h, f) {
        if (!!s.request) {
          if (e.lastRequest = Date.now(), e.resolvedUri = So(s.handleManifestRedirects, e.resolvedUri, f), h)
            return s.playlistRequestError(s.request, e, u);
          s.haveMetadata({
            playlistString: f.responseText,
            url: e.uri,
            id: e.id
          }), u === "HAVE_MASTER" ? s.trigger("loadedmetadata") : s.trigger("mediachange");
        }
      });
    }
  }, i.pause = function() {
    this.mediaUpdateTimeout && (B.clearTimeout(this.mediaUpdateTimeout), this.mediaUpdateTimeout = null), this.stopRequest(), this.state === "HAVE_NOTHING" && (this.started = !1), this.state === "SWITCHING_MEDIA" ? this.media_ ? this.state = "HAVE_METADATA" : this.state = "HAVE_MASTER" : this.state === "HAVE_CURRENT_METADATA" && (this.state = "HAVE_METADATA");
  }, i.load = function(e) {
    var a = this;
    this.mediaUpdateTimeout && (B.clearTimeout(this.mediaUpdateTimeout), this.mediaUpdateTimeout = null);
    var s = this.media();
    if (e) {
      var o = s ? (s.partTargetDuration || s.targetDuration) / 2 * 1e3 : 5e3;
      this.mediaUpdateTimeout = B.setTimeout(function() {
        a.mediaUpdateTimeout = null, a.load();
      }, o);
      return;
    }
    if (!this.started) {
      this.start();
      return;
    }
    s && !s.endList ? this.trigger("mediaupdatetimeout") : this.trigger("loadedplaylist");
  }, i.updateMediaUpdateTimeout_ = function(e) {
    var a = this;
    this.mediaUpdateTimeout && (B.clearTimeout(this.mediaUpdateTimeout), this.mediaUpdateTimeout = null), !(!this.media() || this.media().endList) && (this.mediaUpdateTimeout = B.setTimeout(function() {
      a.mediaUpdateTimeout = null, a.trigger("mediaupdatetimeout"), a.updateMediaUpdateTimeout_(e);
    }, e));
  }, i.start = function() {
    var e = this;
    if (this.started = !0, typeof this.src == "object") {
      this.src.uri || (this.src.uri = B.location.href), this.src.resolvedUri = this.src.uri, setTimeout(function() {
        e.setupInitialPlaylist(e.src);
      }, 0);
      return;
    }
    this.request = this.vhs_.xhr({
      uri: this.src,
      withCredentials: this.withCredentials
    }, function(a, s) {
      if (!!e.request) {
        if (e.request = null, a)
          return e.error = {
            status: s.status,
            message: "HLS playlist request error at URL: " + e.src + ".",
            responseText: s.responseText,
            code: 2
          }, e.state === "HAVE_NOTHING" && (e.started = !1), e.trigger("error");
        e.src = So(e.handleManifestRedirects, e.src, s);
        var o = e.parseManifest_({
          manifestString: s.responseText,
          url: e.src
        });
        e.setupInitialPlaylist(o);
      }
    });
  }, i.srcUri = function() {
    return typeof this.src == "string" ? this.src : this.src.uri;
  }, i.setupInitialPlaylist = function(e) {
    if (this.state = "HAVE_MASTER", e.playlists) {
      this.master = e, uv(this.master, this.srcUri()), e.playlists.forEach(function(s) {
        s.segments = dv(s), s.segments.forEach(function(o) {
          lv(o, s.resolvedUri);
        });
      }), this.trigger("loadedplaylist"), this.request || this.media(this.master.playlists[0]);
      return;
    }
    var a = this.srcUri() || B.location.href;
    this.master = RS(e, a), this.haveMetadata({
      playlistObject: e,
      url: a,
      id: this.master.playlists[0].id
    }), this.trigger("loadedmetadata");
  }, t;
}(NS), US = G.xhr, qS = G.mergeOptions, yd = function(t, i, r, e) {
  var a = t.responseType === "arraybuffer" ? t.response : t.responseText;
  !i && a && (t.responseTime = Date.now(), t.roundTripTime = t.responseTime - t.requestTime, t.bytesReceived = a.byteLength || a.length, t.bandwidth || (t.bandwidth = Math.floor(t.bytesReceived / t.roundTripTime * 8 * 1e3))), r.headers && (t.responseHeaders = r.headers), i && i.code === "ETIMEDOUT" && (t.timedout = !0), !i && !t.aborted && r.statusCode !== 200 && r.statusCode !== 206 && r.statusCode !== 0 && (i = new Error("XHR Failed with a response of: " + (t && (a || t.responseText)))), e(i, t);
}, fv = function() {
  var t = function i(r, e) {
    r = qS({
      timeout: 45e3
    }, r);
    var a = i.beforeRequest || G.Vhs.xhr.beforeRequest;
    if (a && typeof a == "function") {
      var s = a(r);
      s && (r = s);
    }
    var o = G.Vhs.xhr.original === !0 ? US : G.Vhs.xhr, u = o(r, function(d, h) {
      return yd(u, d, h, e);
    }), l = u.abort;
    return u.abort = function() {
      return u.aborted = !0, l.apply(u, arguments);
    }, u.uri = r.uri, u.requestTime = Date.now(), u;
  };
  return t.original = !0, t;
}, VS = function(t) {
  var i, r = t.offset;
  return typeof t.offset == "bigint" || typeof t.length == "bigint" ? i = B.BigInt(t.offset) + B.BigInt(t.length) - B.BigInt(1) : i = t.offset + t.length - 1, "bytes=" + r + "-" + i;
}, Td = function(t) {
  var i = {};
  return t.byterange && (i.Range = VS(t.byterange)), i;
}, jS = function(t, i) {
  return t.start(i) + "-" + t.end(i);
}, HS = function(t, i) {
  var r = t.toString(16);
  return "00".substring(0, 2 - r.length) + r + (i % 2 ? " " : "");
}, WS = function(t) {
  return t >= 32 && t < 126 ? String.fromCharCode(t) : ".";
}, hv = function(t) {
  var i = {};
  return Object.keys(t).forEach(function(r) {
    var e = t[r];
    em(e) ? i[r] = {
      bytes: e.buffer,
      byteOffset: e.byteOffset,
      byteLength: e.byteLength
    } : i[r] = e;
  }), i;
}, xo = function(t) {
  var i = t.byterange || {
    length: 1 / 0,
    offset: 0
  };
  return [i.length, i.offset, t.resolvedUri].join(",");
}, pv = function(t) {
  return t.resolvedUri;
}, mv = function(t) {
  for (var i = Array.prototype.slice.call(t), r = 16, e = "", a, s, o = 0; o < i.length / r; o++)
    a = i.slice(o * r, o * r + r).map(HS).join(""), s = i.slice(o * r, o * r + r).map(WS).join(""), e += a + " " + s + `
`;
  return e;
}, GS = function(t) {
  var i = t.bytes;
  return mv(i);
}, $S = function(t) {
  var i = "", r;
  for (r = 0; r < t.length; r++)
    i += jS(t, r) + " ";
  return i;
}, zS = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  createTransferableMessage: hv,
  initSegmentId: xo,
  segmentKeyId: pv,
  hexDump: mv,
  tagDump: GS,
  textRanges: $S
}), gv = 0.25, KS = function(t, i) {
  if (!i.dateTimeObject)
    return null;
  var r = i.videoTimingInfo.transmuxerPrependedSeconds, e = i.videoTimingInfo.transmuxedPresentationStart, a = e + r, s = t - a;
  return new Date(i.dateTimeObject.getTime() + s * 1e3);
}, XS = function(t) {
  return t.transmuxedPresentationEnd - t.transmuxedPresentationStart - t.transmuxerPrependedSeconds;
}, QS = function(t, i) {
  var r;
  try {
    r = new Date(t);
  } catch {
    return null;
  }
  if (!i || !i.segments || i.segments.length === 0)
    return null;
  var e = i.segments[0];
  if (r < e.dateTimeObject)
    return null;
  for (var a = 0; a < i.segments.length - 1; a++) {
    e = i.segments[a];
    var s = i.segments[a + 1].dateTimeObject;
    if (r < s)
      break;
  }
  var o = i.segments[i.segments.length - 1], u = o.dateTimeObject, l = o.videoTimingInfo ? XS(o.videoTimingInfo) : o.duration + o.duration * gv, d = new Date(u.getTime() + l * 1e3);
  return r > d ? null : (r > u && (e = o), {
    segment: e,
    estimatedStart: e.videoTimingInfo ? e.videoTimingInfo.transmuxedPresentationStart : bi.duration(i, i.mediaSequence + i.segments.indexOf(e)),
    type: e.videoTimingInfo ? "accurate" : "estimate"
  });
}, YS = function(t, i) {
  if (!i || !i.segments || i.segments.length === 0)
    return null;
  for (var r = 0, e, a = 0; a < i.segments.length && (e = i.segments[a], r = e.videoTimingInfo ? e.videoTimingInfo.transmuxedPresentationEnd : r + e.duration, !(t <= r)); a++)
    ;
  var s = i.segments[i.segments.length - 1];
  if (s.videoTimingInfo && s.videoTimingInfo.transmuxedPresentationEnd < t)
    return null;
  if (t > r) {
    if (t > r + s.duration * gv)
      return null;
    e = s;
  }
  return {
    segment: e,
    estimatedStart: e.videoTimingInfo ? e.videoTimingInfo.transmuxedPresentationStart : r - e.duration,
    type: e.videoTimingInfo ? "accurate" : "estimate"
  };
}, JS = function(t, i) {
  var r, e;
  try {
    r = new Date(t), e = new Date(i);
  } catch {
  }
  var a = r.getTime(), s = e.getTime();
  return (s - a) / 1e3;
}, ZS = function(t) {
  if (!t.segments || t.segments.length === 0)
    return !1;
  for (var i = 0; i < t.segments.length; i++) {
    var r = t.segments[i];
    if (!r.dateTimeObject)
      return !1;
  }
  return !0;
}, eE = function(t) {
  var i = t.playlist, r = t.time, e = r === void 0 ? void 0 : r, a = t.callback;
  if (!a)
    throw new Error("getProgramTime: callback must be provided");
  if (!i || e === void 0)
    return a({
      message: "getProgramTime: playlist and time must be provided"
    });
  var s = YS(e, i);
  if (!s)
    return a({
      message: "valid programTime was not found"
    });
  if (s.type === "estimate")
    return a({
      message: "Accurate programTime could not be determined. Please seek to e.seekTime and try again",
      seekTime: s.estimatedStart
    });
  var o = {
    mediaSeconds: e
  }, u = KS(e, s.segment);
  return u && (o.programDateTime = u.toISOString()), a(null, o);
}, tE = function n(t) {
  var i = t.programTime, r = t.playlist, e = t.retryCount, a = e === void 0 ? 2 : e, s = t.seekTo, o = t.pauseAfterSeek, u = o === void 0 ? !0 : o, l = t.tech, d = t.callback;
  if (!d)
    throw new Error("seekToProgramTime: callback must be provided");
  if (typeof i > "u" || !r || !s)
    return d({
      message: "seekToProgramTime: programTime, seekTo and playlist must be provided"
    });
  if (!r.endList && !l.hasStarted_)
    return d({
      message: "player must be playing a live stream to start buffering"
    });
  if (!ZS(r))
    return d({
      message: "programDateTime tags must be provided in the manifest " + r.resolvedUri
    });
  var h = QS(i, r);
  if (!h)
    return d({
      message: i + " was not found in the stream"
    });
  var f = h.segment, _ = JS(f.dateTimeObject, i);
  if (h.type === "estimate") {
    if (a === 0)
      return d({
        message: i + " is not buffered yet. Try again"
      });
    s(h.estimatedStart + _), l.one("seeked", function() {
      n({
        programTime: i,
        playlist: r,
        retryCount: a - 1,
        seekTo: s,
        pauseAfterSeek: u,
        tech: l,
        callback: d
      });
    });
    return;
  }
  var v = f.start + _, y = function() {
    return d(null, l.currentTime());
  };
  l.one("seeked", y), u && l.pause(), s(v);
}, Xu = function(t, i) {
  if (t.readyState === 4)
    return i();
}, iE = function(t, i, r) {
  var e = [], a, s = !1, o = function(f, _, v, y) {
    return _.abort(), s = !0, r(f, _, v, y);
  }, u = function(f, _) {
    if (!s) {
      if (f)
        return o(f, _, "", e);
      var v = _.responseText.substring(e && e.byteLength || 0, _.responseText.length);
      if (e = c0(e, tm(v, !0)), a = a || Na(e), e.length < 10 || a && e.length < a + 2)
        return Xu(_, function() {
          return o(f, _, "", e);
        });
      var y = Jd(e);
      return y === "ts" && e.length < 188 ? Xu(_, function() {
        return o(f, _, "", e);
      }) : !y && e.length < 376 ? Xu(_, function() {
        return o(f, _, "", e);
      }) : o(null, _, y, e);
    }
  }, l = {
    uri: t,
    beforeSend: function(f) {
      f.overrideMimeType("text/plain; charset=x-user-defined"), f.addEventListener("progress", function(_) {
        return _.total, _.loaded, yd(f, null, {
          statusCode: f.status
        }, u);
      });
    }
  }, d = i(l, function(h, f) {
    return yd(d, h, f, u);
  });
  return d;
}, rE = G.EventTarget, vv = G.mergeOptions, Eh = function(t, i) {
  if (!cv(t, i) || t.sidx && i.sidx && (t.sidx.offset !== i.sidx.offset || t.sidx.length !== i.sidx.length))
    return !1;
  if (!t.sidx && i.sidx || t.sidx && !i.sidx || t.segments && !i.segments || !t.segments && i.segments)
    return !1;
  if (!t.segments && !i.segments)
    return !0;
  for (var r = 0; r < t.segments.length; r++) {
    var e = t.segments[r], a = i.segments[r];
    if (e.uri !== a.uri)
      return !1;
    if (!(!e.byterange && !a.byterange)) {
      var s = e.byterange, o = a.byterange;
      if (s && !o || !s && o || s.offset !== o.offset || s.length !== o.length)
        return !1;
    }
  }
  return !0;
}, nE = function(t) {
  var i = t.masterXml, r = t.srcUrl, e = t.clientOffset, a = t.sidxMapping, s = t.previousManifest, o = wT(i, {
    manifestUri: r,
    clientOffset: e,
    sidxMapping: a,
    previousManifest: s
  });
  return uv(o, r), o;
}, aE = function(t, i, r) {
  for (var e = !0, a = vv(t, {
    duration: i.duration,
    minimumUpdatePeriod: i.minimumUpdatePeriod,
    timelineStarts: i.timelineStarts
  }), s = 0; s < i.playlists.length; s++) {
    var o = i.playlists[s];
    if (o.sidx) {
      var u = qo(o.sidx);
      r && r[u] && r[u].sidx && Kd(o, r[u].sidx, o.sidx.resolvedUri);
    }
    var l = vd(a, o, Eh);
    l && (a = l, e = !1);
  }
  return ms(i, function(d, h, f, _) {
    if (d.playlists && d.playlists.length) {
      var v = d.playlists[0].id, y = vd(a, d.playlists[0], Eh);
      y && (a = y, a.mediaGroups[h][f][_].playlists[0] = a.playlists[v], e = !1);
    }
  }), i.minimumUpdatePeriod !== t.minimumUpdatePeriod && (e = !1), e ? null : a;
}, sE = function(t, i) {
  var r = Boolean(!t.map && !i.map), e = r || Boolean(t.map && i.map && t.map.byterange.offset === i.map.byterange.offset && t.map.byterange.length === i.map.byterange.length);
  return e && t.uri === i.uri && t.byterange.offset === i.byterange.offset && t.byterange.length === i.byterange.length;
}, xh = function(t, i) {
  var r = {};
  for (var e in t) {
    var a = t[e], s = a.sidx;
    if (s) {
      var o = qo(s);
      if (!i[o])
        break;
      var u = i[o].sidxInfo;
      sE(u, s) && (r[o] = i[o]);
    }
  }
  return r;
}, oE = function(t, i) {
  var r = xh(t.playlists, i), e = r;
  return ms(t, function(a, s, o, u) {
    if (a.playlists && a.playlists.length) {
      var l = a.playlists;
      e = vv(e, xh(l, i));
    }
  }), e;
}, bd = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e, a, s) {
    var o;
    a === void 0 && (a = {}), o = n.call(this) || this, o.masterPlaylistLoader_ = s || Ge(o), s || (o.isMaster_ = !0);
    var u = a, l = u.withCredentials, d = l === void 0 ? !1 : l, h = u.handleManifestRedirects, f = h === void 0 ? !1 : h;
    if (o.vhs_ = e, o.withCredentials = d, o.handleManifestRedirects = f, !r)
      throw new Error("A non-empty playlist URL or object is required");
    return o.on("minimumUpdatePeriod", function() {
      o.refreshXml_();
    }), o.on("mediaupdatetimeout", function() {
      o.refreshMedia_(o.media().id);
    }), o.state = "HAVE_NOTHING", o.loadedPlaylists_ = {}, o.logger_ = Gi("DashPlaylistLoader"), o.isMaster_ ? (o.masterPlaylistLoader_.srcUrl = r, o.masterPlaylistLoader_.sidxMapping_ = {}) : o.childPlaylist_ = r, o;
  }
  var i = t.prototype;
  return i.requestErrored_ = function(e, a, s) {
    if (!this.request)
      return !0;
    if (this.request = null, e)
      return this.error = typeof e == "object" && !(e instanceof Error) ? e : {
        status: a.status,
        message: "DASH request error at URL: " + a.uri,
        response: a.response,
        code: 2
      }, s && (this.state = s), this.trigger("error"), !0;
  }, i.addSidxSegments_ = function(e, a, s) {
    var o = this, u = e.sidx && qo(e.sidx);
    if (!e.sidx || !u || this.masterPlaylistLoader_.sidxMapping_[u]) {
      this.mediaRequest_ = B.setTimeout(function() {
        return s(!1);
      }, 0);
      return;
    }
    var l = So(this.handleManifestRedirects, e.sidx.resolvedUri), d = function(f, _) {
      if (!o.requestErrored_(f, _, a)) {
        var v = o.masterPlaylistLoader_.sidxMapping_, y;
        try {
          y = IT(Oe(_.response).subarray(8));
        } catch (T) {
          o.requestErrored_(T, _, a);
          return;
        }
        return v[u] = {
          sidxInfo: e.sidx,
          sidx: y
        }, Kd(e, y, e.sidx.resolvedUri), s(!0);
      }
    };
    this.request = iE(l, this.vhs_.xhr, function(h, f, _, v) {
      if (h)
        return d(h, f);
      if (!_ || _ !== "mp4")
        return d({
          status: f.status,
          message: "Unsupported " + (_ || "unknown") + " container type for sidx segment at URL: " + l,
          response: "",
          playlist: e,
          internal: !0,
          blacklistDuration: 1 / 0,
          code: 2
        }, f);
      var y = e.sidx.byterange, T = y.offset, I = y.length;
      if (v.length >= I + T)
        return d(h, {
          response: v.subarray(T, T + I),
          status: f.status,
          uri: f.uri
        });
      o.request = o.vhs_.xhr({
        uri: l,
        responseType: "arraybuffer",
        headers: Td({
          byterange: e.sidx.byterange
        })
      }, d);
    });
  }, i.dispose = function() {
    this.trigger("dispose"), this.stopRequest(), this.loadedPlaylists_ = {}, B.clearTimeout(this.minimumUpdatePeriodTimeout_), B.clearTimeout(this.mediaRequest_), B.clearTimeout(this.mediaUpdateTimeout), this.mediaUpdateTimeout = null, this.mediaRequest_ = null, this.minimumUpdatePeriodTimeout_ = null, this.masterPlaylistLoader_.createMupOnMedia_ && (this.off("loadedmetadata", this.masterPlaylistLoader_.createMupOnMedia_), this.masterPlaylistLoader_.createMupOnMedia_ = null), this.off();
  }, i.hasPendingRequest = function() {
    return this.request || this.mediaRequest_;
  }, i.stopRequest = function() {
    if (this.request) {
      var e = this.request;
      this.request = null, e.onreadystatechange = null, e.abort();
    }
  }, i.media = function(e) {
    var a = this;
    if (!e)
      return this.media_;
    if (this.state === "HAVE_NOTHING")
      throw new Error("Cannot switch media playlist from " + this.state);
    var s = this.state;
    if (typeof e == "string") {
      if (!this.masterPlaylistLoader_.master.playlists[e])
        throw new Error("Unknown playlist URI: " + e);
      e = this.masterPlaylistLoader_.master.playlists[e];
    }
    var o = !this.media_ || e.id !== this.media_.id;
    if (o && this.loadedPlaylists_[e.id] && this.loadedPlaylists_[e.id].endList) {
      this.state = "HAVE_METADATA", this.media_ = e, o && (this.trigger("mediachanging"), this.trigger("mediachange"));
      return;
    }
    !o || (this.media_ && this.trigger("mediachanging"), this.addSidxSegments_(e, s, function(u) {
      a.haveMetadata({
        startingState: s,
        playlist: e
      });
    }));
  }, i.haveMetadata = function(e) {
    var a = e.startingState, s = e.playlist;
    this.state = "HAVE_METADATA", this.loadedPlaylists_[s.id] = s, this.mediaRequest_ = null, this.refreshMedia_(s.id), a === "HAVE_MASTER" ? this.trigger("loadedmetadata") : this.trigger("mediachange");
  }, i.pause = function() {
    this.masterPlaylistLoader_.createMupOnMedia_ && (this.off("loadedmetadata", this.masterPlaylistLoader_.createMupOnMedia_), this.masterPlaylistLoader_.createMupOnMedia_ = null), this.stopRequest(), B.clearTimeout(this.mediaUpdateTimeout), this.mediaUpdateTimeout = null, this.isMaster_ && (B.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_), this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_ = null), this.state === "HAVE_NOTHING" && (this.started = !1);
  }, i.load = function(e) {
    var a = this;
    B.clearTimeout(this.mediaUpdateTimeout), this.mediaUpdateTimeout = null;
    var s = this.media();
    if (e) {
      var o = s ? s.targetDuration / 2 * 1e3 : 5e3;
      this.mediaUpdateTimeout = B.setTimeout(function() {
        return a.load();
      }, o);
      return;
    }
    if (!this.started) {
      this.start();
      return;
    }
    s && !s.endList ? (this.isMaster_ && !this.minimumUpdatePeriodTimeout_ && (this.trigger("minimumUpdatePeriod"), this.updateMinimumUpdatePeriodTimeout_()), this.trigger("mediaupdatetimeout")) : this.trigger("loadedplaylist");
  }, i.start = function() {
    var e = this;
    if (this.started = !0, !this.isMaster_) {
      this.mediaRequest_ = B.setTimeout(function() {
        return e.haveMaster_();
      }, 0);
      return;
    }
    this.requestMaster_(function(a, s) {
      e.haveMaster_(), !e.hasPendingRequest() && !e.media_ && e.media(e.masterPlaylistLoader_.master.playlists[0]);
    });
  }, i.requestMaster_ = function(e) {
    var a = this;
    this.request = this.vhs_.xhr({
      uri: this.masterPlaylistLoader_.srcUrl,
      withCredentials: this.withCredentials
    }, function(s, o) {
      if (a.requestErrored_(s, o)) {
        a.state === "HAVE_NOTHING" && (a.started = !1);
        return;
      }
      var u = o.responseText !== a.masterPlaylistLoader_.masterXml_;
      if (a.masterPlaylistLoader_.masterXml_ = o.responseText, o.responseHeaders && o.responseHeaders.date ? a.masterLoaded_ = Date.parse(o.responseHeaders.date) : a.masterLoaded_ = Date.now(), a.masterPlaylistLoader_.srcUrl = So(a.handleManifestRedirects, a.masterPlaylistLoader_.srcUrl, o), u) {
        a.handleMaster_(), a.syncClientServerClock_(function() {
          return e(o, u);
        });
        return;
      }
      return e(o, u);
    });
  }, i.syncClientServerClock_ = function(e) {
    var a = this, s = AT(this.masterPlaylistLoader_.masterXml_);
    if (s === null)
      return this.masterPlaylistLoader_.clientOffset_ = this.masterLoaded_ - Date.now(), e();
    if (s.method === "DIRECT")
      return this.masterPlaylistLoader_.clientOffset_ = s.value - Date.now(), e();
    this.request = this.vhs_.xhr({
      uri: Vi(this.masterPlaylistLoader_.srcUrl, s.value),
      method: s.method,
      withCredentials: this.withCredentials
    }, function(o, u) {
      if (!!a.request) {
        if (o)
          return a.masterPlaylistLoader_.clientOffset_ = a.masterLoaded_ - Date.now(), e();
        var l;
        s.method === "HEAD" ? !u.responseHeaders || !u.responseHeaders.date ? l = a.masterLoaded_ : l = Date.parse(u.responseHeaders.date) : l = Date.parse(u.responseText), a.masterPlaylistLoader_.clientOffset_ = l - Date.now(), e();
      }
    });
  }, i.haveMaster_ = function() {
    this.state = "HAVE_MASTER", this.isMaster_ ? this.trigger("loadedplaylist") : this.media_ || this.media(this.childPlaylist_);
  }, i.handleMaster_ = function() {
    this.mediaRequest_ = null;
    var e = this.masterPlaylistLoader_.master, a = nE({
      masterXml: this.masterPlaylistLoader_.masterXml_,
      srcUrl: this.masterPlaylistLoader_.srcUrl,
      clientOffset: this.masterPlaylistLoader_.clientOffset_,
      sidxMapping: this.masterPlaylistLoader_.sidxMapping_,
      previousManifest: e
    });
    e && (a = aE(e, a, this.masterPlaylistLoader_.sidxMapping_)), this.masterPlaylistLoader_.master = a || e;
    var s = this.masterPlaylistLoader_.master.locations && this.masterPlaylistLoader_.master.locations[0];
    return s && s !== this.masterPlaylistLoader_.srcUrl && (this.masterPlaylistLoader_.srcUrl = s), (!e || a && a.minimumUpdatePeriod !== e.minimumUpdatePeriod) && this.updateMinimumUpdatePeriodTimeout_(), Boolean(a);
  }, i.updateMinimumUpdatePeriodTimeout_ = function() {
    var e = this.masterPlaylistLoader_;
    e.createMupOnMedia_ && (e.off("loadedmetadata", e.createMupOnMedia_), e.createMupOnMedia_ = null), e.minimumUpdatePeriodTimeout_ && (B.clearTimeout(e.minimumUpdatePeriodTimeout_), e.minimumUpdatePeriodTimeout_ = null);
    var a = e.master && e.master.minimumUpdatePeriod;
    if (a === 0 && (e.media() ? a = e.media().targetDuration * 1e3 : (e.createMupOnMedia_ = e.updateMinimumUpdatePeriodTimeout_, e.one("loadedmetadata", e.createMupOnMedia_))), typeof a != "number" || a <= 0) {
      a < 0 && this.logger_("found invalid minimumUpdatePeriod of " + a + ", not setting a timeout");
      return;
    }
    this.createMUPTimeout_(a);
  }, i.createMUPTimeout_ = function(e) {
    var a = this.masterPlaylistLoader_;
    a.minimumUpdatePeriodTimeout_ = B.setTimeout(function() {
      a.minimumUpdatePeriodTimeout_ = null, a.trigger("minimumUpdatePeriod"), a.createMUPTimeout_(e);
    }, e);
  }, i.refreshXml_ = function() {
    var e = this;
    this.requestMaster_(function(a, s) {
      !s || (e.media_ && (e.media_ = e.masterPlaylistLoader_.master.playlists[e.media_.id]), e.masterPlaylistLoader_.sidxMapping_ = oE(e.masterPlaylistLoader_.master, e.masterPlaylistLoader_.sidxMapping_), e.addSidxSegments_(e.media(), e.state, function(o) {
        e.refreshMedia_(e.media().id);
      }));
    });
  }, i.refreshMedia_ = function(e) {
    var a = this;
    if (!e)
      throw new Error("refreshMedia_ must take a media id");
    this.media_ && this.isMaster_ && this.handleMaster_();
    var s = this.masterPlaylistLoader_.master.playlists, o = !this.media_ || this.media_ !== s[e];
    if (o ? this.media_ = s[e] : this.trigger("playlistunchanged"), !this.mediaUpdateTimeout) {
      var u = function l() {
        a.media().endList || (a.mediaUpdateTimeout = B.setTimeout(function() {
          a.trigger("mediaupdatetimeout"), l();
        }, _d(a.media(), Boolean(o))));
      };
      u();
    }
    this.trigger("loadedplaylist");
  }, t;
}(rE), Gt = {
  GOAL_BUFFER_LENGTH: 30,
  MAX_GOAL_BUFFER_LENGTH: 60,
  BACK_BUFFER_LENGTH: 30,
  GOAL_BUFFER_LENGTH_RATE: 1,
  INITIAL_BANDWIDTH: 4194304,
  BANDWIDTH_VARIANCE: 1.2,
  BUFFER_LOW_WATER_LINE: 0,
  MAX_BUFFER_LOW_WATER_LINE: 30,
  EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE: 16,
  BUFFER_LOW_WATER_LINE_RATE: 1,
  BUFFER_HIGH_WATER_LINE: 30
}, uE = function(t) {
  for (var i = new Uint8Array(new ArrayBuffer(t.length)), r = 0; r < t.length; r++)
    i[r] = t.charCodeAt(r);
  return i.buffer;
}, _v = function(t) {
  return t.on = t.addEventListener, t.off = t.removeEventListener, t;
}, lE = function(t) {
  try {
    return URL.createObjectURL(new Blob([t], {
      type: "application/javascript"
    }));
  } catch {
    var i = new BlobBuilder();
    return i.append(t), URL.createObjectURL(i.getBlob());
  }
}, yv = function(t) {
  return function() {
    var i = lE(t), r = _v(new Worker(i));
    r.objURL = i;
    var e = r.terminate;
    return r.on = r.addEventListener, r.off = r.removeEventListener, r.terminate = function() {
      return URL.revokeObjectURL(i), e.call(this);
    }, r;
  };
}, Tv = function(t) {
  return "var browserWorkerPolyFill = " + _v.toString() + `;
browserWorkerPolyFill(self);
` + t;
}, bv = function(t) {
  return t.toString().replace(/^function.+?{/, "").slice(0, -1);
}, dE = Tv(bv(function() {
  var n = function() {
    this.init = function() {
      var c = {};
      this.on = function(m, p) {
        c[m] || (c[m] = []), c[m] = c[m].concat(p);
      }, this.off = function(m, p) {
        var g;
        return c[m] ? (g = c[m].indexOf(p), c[m] = c[m].slice(), c[m].splice(g, 1), g > -1) : !1;
      }, this.trigger = function(m) {
        var p, g, b, S;
        if (p = c[m], !!p)
          if (arguments.length === 2)
            for (b = p.length, g = 0; g < b; ++g)
              p[g].call(this, arguments[1]);
          else {
            for (S = [], g = arguments.length, g = 1; g < arguments.length; ++g)
              S.push(arguments[g]);
            for (b = p.length, g = 0; g < b; ++g)
              p[g].apply(this, S);
          }
      }, this.dispose = function() {
        c = {};
      };
    };
  };
  n.prototype.pipe = function(C) {
    return this.on("data", function(c) {
      C.push(c);
    }), this.on("done", function(c) {
      C.flush(c);
    }), this.on("partialdone", function(c) {
      C.partialFlush(c);
    }), this.on("endedtimeline", function(c) {
      C.endTimeline(c);
    }), this.on("reset", function(c) {
      C.reset(c);
    }), C;
  }, n.prototype.push = function(C) {
    this.trigger("data", C);
  }, n.prototype.flush = function(C) {
    this.trigger("done", C);
  }, n.prototype.partialFlush = function(C) {
    this.trigger("partialdone", C);
  }, n.prototype.endTimeline = function(C) {
    this.trigger("endedtimeline", C);
  }, n.prototype.reset = function(C) {
    this.trigger("reset", C);
  };
  var t = n, i = Math.pow(2, 32), r = function(c) {
    var m = new DataView(c.buffer, c.byteOffset, c.byteLength), p;
    return m.getBigUint64 ? (p = m.getBigUint64(0), p < Number.MAX_SAFE_INTEGER ? Number(p) : p) : m.getUint32(0) * i + m.getUint32(4);
  }, e = {
    getUint64: r,
    MAX_UINT32: i
  }, a = e.MAX_UINT32, s, o, u, l, d, h, f, _, v, y, T, I, V, $, k, P, L, O, U, ie, z, le, se, me, M, ne, fe, pe, H, Q, F, W, X, Y, de, oe;
  (function() {
    var C;
    if (se = {
      avc1: [],
      avcC: [],
      btrt: [],
      dinf: [],
      dref: [],
      esds: [],
      ftyp: [],
      hdlr: [],
      mdat: [],
      mdhd: [],
      mdia: [],
      mfhd: [],
      minf: [],
      moof: [],
      moov: [],
      mp4a: [],
      mvex: [],
      mvhd: [],
      pasp: [],
      sdtp: [],
      smhd: [],
      stbl: [],
      stco: [],
      stsc: [],
      stsd: [],
      stsz: [],
      stts: [],
      styp: [],
      tfdt: [],
      tfhd: [],
      traf: [],
      trak: [],
      trun: [],
      trex: [],
      tkhd: [],
      vmhd: []
    }, !(typeof Uint8Array > "u")) {
      for (C in se)
        se.hasOwnProperty(C) && (se[C] = [C.charCodeAt(0), C.charCodeAt(1), C.charCodeAt(2), C.charCodeAt(3)]);
      me = new Uint8Array(["i".charCodeAt(0), "s".charCodeAt(0), "o".charCodeAt(0), "m".charCodeAt(0)]), ne = new Uint8Array(["a".charCodeAt(0), "v".charCodeAt(0), "c".charCodeAt(0), "1".charCodeAt(0)]), M = new Uint8Array([0, 0, 0, 1]), fe = new Uint8Array([
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        118,
        105,
        100,
        101,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        86,
        105,
        100,
        101,
        111,
        72,
        97,
        110,
        100,
        108,
        101,
        114,
        0
      ]), pe = new Uint8Array([
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        115,
        111,
        117,
        110,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        83,
        111,
        117,
        110,
        100,
        72,
        97,
        110,
        100,
        108,
        101,
        114,
        0
      ]), H = {
        video: fe,
        audio: pe
      }, W = new Uint8Array([
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        12,
        117,
        114,
        108,
        32,
        0,
        0,
        0,
        1
      ]), F = new Uint8Array([
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
      ]), X = new Uint8Array([
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
      ]), Y = X, de = new Uint8Array([
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
      ]), oe = X, Q = new Uint8Array([
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
      ]);
    }
  })(), s = function(c) {
    var m = [], p = 0, g, b, S;
    for (g = 1; g < arguments.length; g++)
      m.push(arguments[g]);
    for (g = m.length; g--; )
      p += m[g].byteLength;
    for (b = new Uint8Array(p + 8), S = new DataView(b.buffer, b.byteOffset, b.byteLength), S.setUint32(0, b.byteLength), b.set(c, 4), g = 0, p = 8; g < m.length; g++)
      b.set(m[g], p), p += m[g].byteLength;
    return b;
  }, o = function() {
    return s(se.dinf, s(se.dref, W));
  }, u = function(c) {
    return s(se.esds, new Uint8Array([
      0,
      0,
      0,
      0,
      3,
      25,
      0,
      0,
      0,
      4,
      17,
      64,
      21,
      0,
      6,
      0,
      0,
      0,
      218,
      192,
      0,
      0,
      218,
      192,
      5,
      2,
      c.audioobjecttype << 3 | c.samplingfrequencyindex >>> 1,
      c.samplingfrequencyindex << 7 | c.channelcount << 3,
      6,
      1,
      2
    ]));
  }, l = function() {
    return s(se.ftyp, me, M, me, ne);
  }, P = function(c) {
    return s(se.hdlr, H[c]);
  }, d = function(c) {
    return s(se.mdat, c);
  }, k = function(c) {
    var m = new Uint8Array([
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      2,
      0,
      0,
      0,
      3,
      0,
      1,
      95,
      144,
      c.duration >>> 24 & 255,
      c.duration >>> 16 & 255,
      c.duration >>> 8 & 255,
      c.duration & 255,
      85,
      196,
      0,
      0
    ]);
    return c.samplerate && (m[12] = c.samplerate >>> 24 & 255, m[13] = c.samplerate >>> 16 & 255, m[14] = c.samplerate >>> 8 & 255, m[15] = c.samplerate & 255), s(se.mdhd, m);
  }, $ = function(c) {
    return s(se.mdia, k(c), P(c.type), f(c));
  }, h = function(c) {
    return s(se.mfhd, new Uint8Array([
      0,
      0,
      0,
      0,
      (c & 4278190080) >> 24,
      (c & 16711680) >> 16,
      (c & 65280) >> 8,
      c & 255
    ]));
  }, f = function(c) {
    return s(se.minf, c.type === "video" ? s(se.vmhd, Q) : s(se.smhd, F), o(), O(c));
  }, _ = function(c, m) {
    for (var p = [], g = m.length; g--; )
      p[g] = ie(m[g]);
    return s.apply(null, [se.moof, h(c)].concat(p));
  }, v = function(c) {
    for (var m = c.length, p = []; m--; )
      p[m] = I(c[m]);
    return s.apply(null, [se.moov, T(4294967295)].concat(p).concat(y(c)));
  }, y = function(c) {
    for (var m = c.length, p = []; m--; )
      p[m] = z(c[m]);
    return s.apply(null, [se.mvex].concat(p));
  }, T = function(c) {
    var m = new Uint8Array([
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      2,
      0,
      1,
      95,
      144,
      (c & 4278190080) >> 24,
      (c & 16711680) >> 16,
      (c & 65280) >> 8,
      c & 255,
      0,
      1,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      64,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      255,
      255,
      255,
      255
    ]);
    return s(se.mvhd, m);
  }, L = function(c) {
    var m = c.samples || [], p = new Uint8Array(4 + m.length), g, b;
    for (b = 0; b < m.length; b++)
      g = m[b].flags, p[b + 4] = g.dependsOn << 4 | g.isDependedOn << 2 | g.hasRedundancy;
    return s(se.sdtp, p);
  }, O = function(c) {
    return s(se.stbl, U(c), s(se.stts, oe), s(se.stsc, Y), s(se.stsz, de), s(se.stco, X));
  }, function() {
    var C, c;
    U = function(p) {
      return s(se.stsd, new Uint8Array([
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1
      ]), p.type === "video" ? C(p) : c(p));
    }, C = function(p) {
      var g = p.sps || [], b = p.pps || [], S = [], D = [], N, K;
      for (N = 0; N < g.length; N++)
        S.push((g[N].byteLength & 65280) >>> 8), S.push(g[N].byteLength & 255), S = S.concat(Array.prototype.slice.call(g[N]));
      for (N = 0; N < b.length; N++)
        D.push((b[N].byteLength & 65280) >>> 8), D.push(b[N].byteLength & 255), D = D.concat(Array.prototype.slice.call(b[N]));
      if (K = [se.avc1, new Uint8Array([
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        (p.width & 65280) >> 8,
        p.width & 255,
        (p.height & 65280) >> 8,
        p.height & 255,
        0,
        72,
        0,
        0,
        0,
        72,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        19,
        118,
        105,
        100,
        101,
        111,
        106,
        115,
        45,
        99,
        111,
        110,
        116,
        114,
        105,
        98,
        45,
        104,
        108,
        115,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        24,
        17,
        17
      ]), s(se.avcC, new Uint8Array([
        1,
        p.profileIdc,
        p.profileCompatibility,
        p.levelIdc,
        255
      ].concat(
        [g.length],
        S,
        [b.length],
        D
      ))), s(se.btrt, new Uint8Array([
        0,
        28,
        156,
        128,
        0,
        45,
        198,
        192,
        0,
        45,
        198,
        192
      ]))], p.sarRatio) {
        var q = p.sarRatio[0], Z = p.sarRatio[1];
        K.push(s(se.pasp, new Uint8Array([(q & 4278190080) >> 24, (q & 16711680) >> 16, (q & 65280) >> 8, q & 255, (Z & 4278190080) >> 24, (Z & 16711680) >> 16, (Z & 65280) >> 8, Z & 255])));
      }
      return s.apply(null, K);
    }, c = function(p) {
      return s(se.mp4a, new Uint8Array([
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        (p.channelcount & 65280) >> 8,
        p.channelcount & 255,
        (p.samplesize & 65280) >> 8,
        p.samplesize & 255,
        0,
        0,
        0,
        0,
        (p.samplerate & 65280) >> 8,
        p.samplerate & 255,
        0,
        0
      ]), u(p));
    };
  }(), V = function(c) {
    var m = new Uint8Array([
      0,
      0,
      0,
      7,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      (c.id & 4278190080) >> 24,
      (c.id & 16711680) >> 16,
      (c.id & 65280) >> 8,
      c.id & 255,
      0,
      0,
      0,
      0,
      (c.duration & 4278190080) >> 24,
      (c.duration & 16711680) >> 16,
      (c.duration & 65280) >> 8,
      c.duration & 255,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      64,
      0,
      0,
      0,
      (c.width & 65280) >> 8,
      c.width & 255,
      0,
      0,
      (c.height & 65280) >> 8,
      c.height & 255,
      0,
      0
    ]);
    return s(se.tkhd, m);
  }, ie = function(c) {
    var m, p, g, b, S, D, N;
    return m = s(se.tfhd, new Uint8Array([
      0,
      0,
      0,
      58,
      (c.id & 4278190080) >> 24,
      (c.id & 16711680) >> 16,
      (c.id & 65280) >> 8,
      c.id & 255,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0
    ])), D = Math.floor(c.baseMediaDecodeTime / a), N = Math.floor(c.baseMediaDecodeTime % a), p = s(se.tfdt, new Uint8Array([
      1,
      0,
      0,
      0,
      D >>> 24 & 255,
      D >>> 16 & 255,
      D >>> 8 & 255,
      D & 255,
      N >>> 24 & 255,
      N >>> 16 & 255,
      N >>> 8 & 255,
      N & 255
    ])), S = 32 + 20 + 8 + 16 + 8 + 8, c.type === "audio" ? (g = le(c, S), s(se.traf, m, p, g)) : (b = L(c), g = le(c, b.length + S), s(se.traf, m, p, g, b));
  }, I = function(c) {
    return c.duration = c.duration || 4294967295, s(se.trak, V(c), $(c));
  }, z = function(c) {
    var m = new Uint8Array([
      0,
      0,
      0,
      0,
      (c.id & 4278190080) >> 24,
      (c.id & 16711680) >> 16,
      (c.id & 65280) >> 8,
      c.id & 255,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      1,
      0,
      1
    ]);
    return c.type !== "video" && (m[m.length - 1] = 0), s(se.trex, m);
  }, function() {
    var C, c, m;
    m = function(g, b) {
      var S = 0, D = 0, N = 0, K = 0;
      return g.length && (g[0].duration !== void 0 && (S = 1), g[0].size !== void 0 && (D = 2), g[0].flags !== void 0 && (N = 4), g[0].compositionTimeOffset !== void 0 && (K = 8)), [
        0,
        0,
        S | D | N | K,
        1,
        (g.length & 4278190080) >>> 24,
        (g.length & 16711680) >>> 16,
        (g.length & 65280) >>> 8,
        g.length & 255,
        (b & 4278190080) >>> 24,
        (b & 16711680) >>> 16,
        (b & 65280) >>> 8,
        b & 255
      ];
    }, c = function(g, b) {
      var S, D, N, K, q, Z;
      for (K = g.samples || [], b += 8 + 12 + 16 * K.length, N = m(K, b), D = new Uint8Array(N.length + K.length * 16), D.set(N), S = N.length, Z = 0; Z < K.length; Z++)
        q = K[Z], D[S++] = (q.duration & 4278190080) >>> 24, D[S++] = (q.duration & 16711680) >>> 16, D[S++] = (q.duration & 65280) >>> 8, D[S++] = q.duration & 255, D[S++] = (q.size & 4278190080) >>> 24, D[S++] = (q.size & 16711680) >>> 16, D[S++] = (q.size & 65280) >>> 8, D[S++] = q.size & 255, D[S++] = q.flags.isLeading << 2 | q.flags.dependsOn, D[S++] = q.flags.isDependedOn << 6 | q.flags.hasRedundancy << 4 | q.flags.paddingValue << 1 | q.flags.isNonSyncSample, D[S++] = q.flags.degradationPriority & 240 << 8, D[S++] = q.flags.degradationPriority & 15, D[S++] = (q.compositionTimeOffset & 4278190080) >>> 24, D[S++] = (q.compositionTimeOffset & 16711680) >>> 16, D[S++] = (q.compositionTimeOffset & 65280) >>> 8, D[S++] = q.compositionTimeOffset & 255;
      return s(se.trun, D);
    }, C = function(g, b) {
      var S, D, N, K, q, Z;
      for (K = g.samples || [], b += 8 + 12 + 8 * K.length, N = m(K, b), S = new Uint8Array(N.length + K.length * 8), S.set(N), D = N.length, Z = 0; Z < K.length; Z++)
        q = K[Z], S[D++] = (q.duration & 4278190080) >>> 24, S[D++] = (q.duration & 16711680) >>> 16, S[D++] = (q.duration & 65280) >>> 8, S[D++] = q.duration & 255, S[D++] = (q.size & 4278190080) >>> 24, S[D++] = (q.size & 16711680) >>> 16, S[D++] = (q.size & 65280) >>> 8, S[D++] = q.size & 255;
      return s(se.trun, S);
    }, le = function(g, b) {
      return g.type === "audio" ? C(g, b) : c(g, b);
    };
  }();
  var ae = {
    ftyp: l,
    mdat: d,
    moof: _,
    moov: v,
    initSegment: function(c) {
      var m = l(), p = v(c), g;
      return g = new Uint8Array(m.byteLength + p.byteLength), g.set(m), g.set(p, m.byteLength), g;
    }
  }, ue = function(c) {
    var m, p, g = [], b = [];
    for (b.byteLength = 0, b.nalCount = 0, b.duration = 0, g.byteLength = 0, m = 0; m < c.length; m++)
      p = c[m], p.nalUnitType === "access_unit_delimiter_rbsp" ? (g.length && (g.duration = p.dts - g.dts, b.byteLength += g.byteLength, b.nalCount += g.length, b.duration += g.duration, b.push(g)), g = [p], g.byteLength = p.data.byteLength, g.pts = p.pts, g.dts = p.dts) : (p.nalUnitType === "slice_layer_without_partitioning_rbsp_idr" && (g.keyFrame = !0), g.duration = p.dts - g.dts, g.byteLength += p.data.byteLength, g.push(p));
    return b.length && (!g.duration || g.duration <= 0) && (g.duration = b[b.length - 1].duration), b.byteLength += g.byteLength, b.nalCount += g.length, b.duration += g.duration, b.push(g), b;
  }, ge = function(c) {
    var m, p, g = [], b = [];
    for (g.byteLength = 0, g.nalCount = 0, g.duration = 0, g.pts = c[0].pts, g.dts = c[0].dts, b.byteLength = 0, b.nalCount = 0, b.duration = 0, b.pts = c[0].pts, b.dts = c[0].dts, m = 0; m < c.length; m++)
      p = c[m], p.keyFrame ? (g.length && (b.push(g), b.byteLength += g.byteLength, b.nalCount += g.nalCount, b.duration += g.duration), g = [p], g.nalCount = p.length, g.byteLength = p.byteLength, g.pts = p.pts, g.dts = p.dts, g.duration = p.duration) : (g.duration += p.duration, g.nalCount += p.length, g.byteLength += p.byteLength, g.push(p));
    return b.length && g.duration <= 0 && (g.duration = b[b.length - 1].duration), b.byteLength += g.byteLength, b.nalCount += g.nalCount, b.duration += g.duration, b.push(g), b;
  }, ee = function(c) {
    var m;
    return !c[0][0].keyFrame && c.length > 1 && (m = c.shift(), c.byteLength -= m.byteLength, c.nalCount -= m.nalCount, c[0][0].dts = m.dts, c[0][0].pts = m.pts, c[0][0].duration += m.duration), c;
  }, _e = function() {
    return {
      size: 0,
      flags: {
        isLeading: 0,
        dependsOn: 1,
        isDependedOn: 0,
        hasRedundancy: 0,
        degradationPriority: 0,
        isNonSyncSample: 1
      }
    };
  }, xe = function(c, m) {
    var p = _e();
    return p.dataOffset = m, p.compositionTimeOffset = c.pts - c.dts, p.duration = c.duration, p.size = 4 * c.length, p.size += c.byteLength, c.keyFrame && (p.flags.dependsOn = 2, p.flags.isNonSyncSample = 0), p;
  }, Le = function(c, m) {
    var p, g, b, S, D, N = m || 0, K = [];
    for (p = 0; p < c.length; p++)
      for (S = c[p], g = 0; g < S.length; g++)
        D = S[g], b = xe(D, N), N += b.size, K.push(b);
    return K;
  }, je = function(c) {
    var m, p, g, b, S, D, N = 0, K = c.byteLength, q = c.nalCount, Z = K + 4 * q, ce = new Uint8Array(Z), Se = new DataView(ce.buffer);
    for (m = 0; m < c.length; m++)
      for (b = c[m], p = 0; p < b.length; p++)
        for (S = b[p], g = 0; g < S.length; g++)
          D = S[g], Se.setUint32(N, D.data.byteLength), N += 4, ce.set(D.data, N), N += D.data.byteLength;
    return ce;
  }, Xe = function(c, m) {
    var p, g = m || 0, b = [];
    return p = xe(c, g), b.push(p), b;
  }, Je = function(c) {
    var m, p, g = 0, b = c.byteLength, S = c.length, D = b + 4 * S, N = new Uint8Array(D), K = new DataView(N.buffer);
    for (m = 0; m < c.length; m++)
      p = c[m], K.setUint32(g, p.data.byteLength), g += 4, N.set(p.data, g), g += p.data.byteLength;
    return N;
  }, mt = {
    groupNalsIntoFrames: ue,
    groupFramesIntoGops: ge,
    extendFirstKeyFrame: ee,
    generateSampleTable: Le,
    concatenateNalData: je,
    generateSampleTableForFrame: Xe,
    concatenateNalDataForFrame: Je
  }, dt = [33, 16, 5, 32, 164, 27], gt = [33, 65, 108, 84, 1, 2, 4, 8, 168, 2, 4, 8, 17, 191, 252], ke = function(c) {
    for (var m = []; c--; )
      m.push(0);
    return m;
  }, ot = function(c) {
    return Object.keys(c).reduce(function(m, p) {
      return m[p] = new Uint8Array(c[p].reduce(function(g, b) {
        return g.concat(b);
      }, [])), m;
    }, {});
  }, at, Ne = function() {
    if (!at) {
      var c = {
        96e3: [dt, [227, 64], ke(154), [56]],
        88200: [dt, [231], ke(170), [56]],
        64e3: [dt, [248, 192], ke(240), [56]],
        48e3: [dt, [255, 192], ke(268), [55, 148, 128], ke(54), [112]],
        44100: [dt, [255, 192], ke(268), [55, 163, 128], ke(84), [112]],
        32e3: [dt, [255, 192], ke(268), [55, 234], ke(226), [112]],
        24e3: [dt, [255, 192], ke(268), [55, 255, 128], ke(268), [111, 112], ke(126), [224]],
        16e3: [dt, [255, 192], ke(268), [55, 255, 128], ke(268), [111, 255], ke(269), [223, 108], ke(195), [1, 192]],
        12e3: [gt, ke(268), [3, 127, 248], ke(268), [6, 255, 240], ke(268), [13, 255, 224], ke(268), [27, 253, 128], ke(259), [56]],
        11025: [gt, ke(268), [3, 127, 248], ke(268), [6, 255, 240], ke(268), [13, 255, 224], ke(268), [27, 255, 192], ke(268), [55, 175, 128], ke(108), [112]],
        8e3: [gt, ke(268), [3, 121, 16], ke(47), [7]]
      };
      at = ot(c);
    }
    return at;
  }, Qe = 9e4, Be, ft, Ue, zi, ut, Ki, Jt;
  Be = function(c) {
    return c * Qe;
  }, ft = function(c, m) {
    return c * m;
  }, Ue = function(c) {
    return c / Qe;
  }, zi = function(c, m) {
    return c / m;
  }, ut = function(c, m) {
    return Be(zi(c, m));
  }, Ki = function(c, m) {
    return ft(Ue(c), m);
  }, Jt = function(c, m, p) {
    return Ue(p ? c : c - m);
  };
  var et = {
    ONE_SECOND_IN_TS: Qe,
    secondsToVideoTs: Be,
    secondsToAudioTs: ft,
    videoTsToSeconds: Ue,
    audioTsToSeconds: zi,
    audioTsToVideoTs: ut,
    videoTsToAudioTs: Ki,
    metadataTsToSeconds: Jt
  }, cn = function(c) {
    var m, p, g = 0;
    for (m = 0; m < c.length; m++)
      p = c[m], g += p.data.byteLength;
    return g;
  }, ys = function(c, m, p, g) {
    var b, S = 0, D = 0, N = 0, K = 0, q, Z, ce;
    if (!!m.length && (b = et.audioTsToVideoTs(c.baseMediaDecodeTime, c.samplerate), S = Math.ceil(et.ONE_SECOND_IN_TS / (c.samplerate / 1024)), p && g && (D = b - Math.max(p, g), N = Math.floor(D / S), K = N * S), !(N < 1 || K > et.ONE_SECOND_IN_TS / 2))) {
      for (q = Ne()[c.samplerate], q || (q = m[0].data), Z = 0; Z < N; Z++)
        ce = m[0], m.splice(0, 0, {
          data: q,
          dts: ce.dts - S,
          pts: ce.pts - S
        });
      return c.baseMediaDecodeTime -= Math.floor(et.videoTsToAudioTs(K, c.samplerate)), K;
    }
  }, du = function(c, m, p) {
    return m.minSegmentDts >= p ? c : (m.minSegmentDts = 1 / 0, c.filter(function(g) {
      return g.dts >= p ? (m.minSegmentDts = Math.min(m.minSegmentDts, g.dts), m.minSegmentPts = m.minSegmentDts, !0) : !1;
    }));
  }, cu = function(c) {
    var m, p, g = [];
    for (m = 0; m < c.length; m++)
      p = c[m], g.push({
        size: p.data.byteLength,
        duration: 1024
      });
    return g;
  }, Ts = function(c) {
    var m, p, g = 0, b = new Uint8Array(cn(c));
    for (m = 0; m < c.length; m++)
      p = c[m], b.set(p.data, g), g += p.data.byteLength;
    return b;
  }, fn = {
    prefixWithSilence: ys,
    trimAdtsFramesByEarliestDts: du,
    generateSampleTable: cu,
    concatenateFrameData: Ts
  }, bs = et.ONE_SECOND_IN_TS, fu = function(c, m) {
    typeof m.pts == "number" && (c.timelineStartInfo.pts === void 0 && (c.timelineStartInfo.pts = m.pts), c.minSegmentPts === void 0 ? c.minSegmentPts = m.pts : c.minSegmentPts = Math.min(c.minSegmentPts, m.pts), c.maxSegmentPts === void 0 ? c.maxSegmentPts = m.pts : c.maxSegmentPts = Math.max(c.maxSegmentPts, m.pts)), typeof m.dts == "number" && (c.timelineStartInfo.dts === void 0 && (c.timelineStartInfo.dts = m.dts), c.minSegmentDts === void 0 ? c.minSegmentDts = m.dts : c.minSegmentDts = Math.min(c.minSegmentDts, m.dts), c.maxSegmentDts === void 0 ? c.maxSegmentDts = m.dts : c.maxSegmentDts = Math.max(c.maxSegmentDts, m.dts));
  }, Ss = function(c) {
    delete c.minSegmentDts, delete c.maxSegmentDts, delete c.minSegmentPts, delete c.maxSegmentPts;
  }, hu = function(c, m) {
    var p, g, b = c.minSegmentDts;
    return m || (b -= c.timelineStartInfo.dts), p = c.timelineStartInfo.baseMediaDecodeTime, p += b, p = Math.max(0, p), c.type === "audio" && (g = c.samplerate / bs, p *= g, p = Math.floor(p)), p;
  }, mi = {
    clearDtsInfo: Ss,
    calculateTrackBaseMediaDecodeTime: hu,
    collectDtsInfo: fu
  }, fa = 4, Es = 128, xs = function(c) {
    for (var m = 0, p = {
      payloadType: -1,
      payloadSize: 0
    }, g = 0, b = 0; m < c.byteLength && c[m] !== Es; ) {
      for (; c[m] === 255; )
        g += 255, m++;
      for (g += c[m++]; c[m] === 255; )
        b += 255, m++;
      if (b += c[m++], !p.payload && g === fa) {
        var S = String.fromCharCode(c[m + 3], c[m + 4], c[m + 5], c[m + 6]);
        if (S === "GA94") {
          p.payloadType = g, p.payloadSize = b, p.payload = c.subarray(m, m + b);
          break;
        } else
          p.payload = void 0;
      }
      m += b, g = 0, b = 0;
    }
    return p;
  }, pu = function(c) {
    return c.payload[0] !== 181 || (c.payload[1] << 8 | c.payload[2]) !== 49 || String.fromCharCode(c.payload[3], c.payload[4], c.payload[5], c.payload[6]) !== "GA94" || c.payload[7] !== 3 ? null : c.payload.subarray(8, c.payload.length - 1);
  }, mu = function(c, m) {
    var p = [], g, b, S, D;
    if (!(m[0] & 64))
      return p;
    for (b = m[0] & 31, g = 0; g < b; g++)
      S = g * 3, D = {
        type: m[S + 2] & 3,
        pts: c
      }, m[S + 2] & 4 && (D.ccData = m[S + 3] << 8 | m[S + 4], p.push(D));
    return p;
  }, ws = function(c) {
    for (var m = c.byteLength, p = [], g = 1, b, S; g < m - 2; )
      c[g] === 0 && c[g + 1] === 0 && c[g + 2] === 3 ? (p.push(g + 2), g += 2) : g++;
    if (p.length === 0)
      return c;
    b = m - p.length, S = new Uint8Array(b);
    var D = 0;
    for (g = 0; g < b; D++, g++)
      D === p[0] && (D++, p.shift()), S[g] = c[D];
    return S;
  }, kr = {
    parseSei: xs,
    parseUserData: pu,
    parseCaptionPackets: mu,
    discardEmulationPreventionBytes: ws,
    USER_DATA_REGISTERED_ITU_T_T35: fa
  }, ri = function C(c) {
    c = c || {}, C.prototype.init.call(this), this.parse708captions_ = typeof c.parse708captions == "boolean" ? c.parse708captions : !0, this.captionPackets_ = [], this.ccStreams_ = [
      new Tt(0, 0),
      new Tt(0, 1),
      new Tt(1, 0),
      new Tt(1, 1)
    ], this.parse708captions_ && (this.cc708Stream_ = new vt({
      captionServices: c.captionServices
    })), this.reset(), this.ccStreams_.forEach(function(m) {
      m.on("data", this.trigger.bind(this, "data")), m.on("partialdone", this.trigger.bind(this, "partialdone")), m.on("done", this.trigger.bind(this, "done"));
    }, this), this.parse708captions_ && (this.cc708Stream_.on("data", this.trigger.bind(this, "data")), this.cc708Stream_.on("partialdone", this.trigger.bind(this, "partialdone")), this.cc708Stream_.on("done", this.trigger.bind(this, "done")));
  };
  ri.prototype = new t(), ri.prototype.push = function(C) {
    var c, m, p;
    if (C.nalUnitType === "sei_rbsp" && (c = kr.parseSei(C.escapedRBSP), !!c.payload && c.payloadType === kr.USER_DATA_REGISTERED_ITU_T_T35 && (m = kr.parseUserData(c), !!m))) {
      if (C.dts < this.latestDts_) {
        this.ignoreNextEqualDts_ = !0;
        return;
      } else if (C.dts === this.latestDts_ && this.ignoreNextEqualDts_) {
        this.numSameDts_--, this.numSameDts_ || (this.ignoreNextEqualDts_ = !1);
        return;
      }
      p = kr.parseCaptionPackets(C.pts, m), this.captionPackets_ = this.captionPackets_.concat(p), this.latestDts_ !== C.dts && (this.numSameDts_ = 0), this.numSameDts_++, this.latestDts_ = C.dts;
    }
  }, ri.prototype.flushCCStreams = function(C) {
    this.ccStreams_.forEach(function(c) {
      return C === "flush" ? c.flush() : c.partialFlush();
    }, this);
  }, ri.prototype.flushStream = function(C) {
    if (!this.captionPackets_.length) {
      this.flushCCStreams(C);
      return;
    }
    this.captionPackets_.forEach(function(c, m) {
      c.presortIndex = m;
    }), this.captionPackets_.sort(function(c, m) {
      return c.pts === m.pts ? c.presortIndex - m.presortIndex : c.pts - m.pts;
    }), this.captionPackets_.forEach(function(c) {
      c.type < 2 ? this.dispatchCea608Packet(c) : this.dispatchCea708Packet(c);
    }, this), this.captionPackets_.length = 0, this.flushCCStreams(C);
  }, ri.prototype.flush = function() {
    return this.flushStream("flush");
  }, ri.prototype.partialFlush = function() {
    return this.flushStream("partialFlush");
  }, ri.prototype.reset = function() {
    this.latestDts_ = null, this.ignoreNextEqualDts_ = !1, this.numSameDts_ = 0, this.activeCea608Channel_ = [null, null], this.ccStreams_.forEach(function(C) {
      C.reset();
    });
  }, ri.prototype.dispatchCea608Packet = function(C) {
    this.setsTextOrXDSActive(C) ? this.activeCea608Channel_[C.type] = null : this.setsChannel1Active(C) ? this.activeCea608Channel_[C.type] = 0 : this.setsChannel2Active(C) && (this.activeCea608Channel_[C.type] = 1), this.activeCea608Channel_[C.type] !== null && this.ccStreams_[(C.type << 1) + this.activeCea608Channel_[C.type]].push(C);
  }, ri.prototype.setsChannel1Active = function(C) {
    return (C.ccData & 30720) === 4096;
  }, ri.prototype.setsChannel2Active = function(C) {
    return (C.ccData & 30720) === 6144;
  }, ri.prototype.setsTextOrXDSActive = function(C) {
    return (C.ccData & 28928) === 256 || (C.ccData & 30974) === 4138 || (C.ccData & 30974) === 6186;
  }, ri.prototype.dispatchCea708Packet = function(C) {
    this.parse708captions_ && this.cc708Stream_.push(C);
  };
  var gu = {
    127: 9834,
    4128: 32,
    4129: 160,
    4133: 8230,
    4138: 352,
    4140: 338,
    4144: 9608,
    4145: 8216,
    4146: 8217,
    4147: 8220,
    4148: 8221,
    4149: 8226,
    4153: 8482,
    4154: 353,
    4156: 339,
    4157: 8480,
    4159: 376,
    4214: 8539,
    4215: 8540,
    4216: 8541,
    4217: 8542,
    4218: 9168,
    4219: 9124,
    4220: 9123,
    4221: 9135,
    4222: 9126,
    4223: 9121,
    4256: 12600
  }, As = function(c) {
    var m = gu[c] || c;
    return c & 4096 && c === m ? "" : String.fromCharCode(m);
  }, Ur = function(c) {
    return 32 <= c && c <= 127 || 160 <= c && c <= 255;
  }, xi = function(c) {
    this.windowNum = c, this.reset();
  };
  xi.prototype.reset = function() {
    this.clearText(), this.pendingNewLine = !1, this.winAttr = {}, this.penAttr = {}, this.penLoc = {}, this.penColor = {}, this.visible = 0, this.rowLock = 0, this.columnLock = 0, this.priority = 0, this.relativePositioning = 0, this.anchorVertical = 0, this.anchorHorizontal = 0, this.anchorPoint = 0, this.rowCount = 1, this.virtualRowCount = this.rowCount + 1, this.columnCount = 41, this.windowStyle = 0, this.penStyle = 0;
  }, xi.prototype.getText = function() {
    return this.rows.join(`
`);
  }, xi.prototype.clearText = function() {
    this.rows = [""], this.rowIdx = 0;
  }, xi.prototype.newLine = function(C) {
    for (this.rows.length >= this.virtualRowCount && typeof this.beforeRowOverflow == "function" && this.beforeRowOverflow(C), this.rows.length > 0 && (this.rows.push(""), this.rowIdx++); this.rows.length > this.virtualRowCount; )
      this.rows.shift(), this.rowIdx--;
  }, xi.prototype.isEmpty = function() {
    return this.rows.length === 0 ? !0 : this.rows.length === 1 ? this.rows[0] === "" : !1;
  }, xi.prototype.addText = function(C) {
    this.rows[this.rowIdx] += C;
  }, xi.prototype.backspace = function() {
    if (!this.isEmpty()) {
      var C = this.rows[this.rowIdx];
      this.rows[this.rowIdx] = C.substr(0, C.length - 1);
    }
  };
  var hn = function(c, m, p) {
    this.serviceNum = c, this.text = "", this.currentWindow = new xi(-1), this.windows = [], this.stream = p, typeof m == "string" && this.createTextDecoder(m);
  };
  hn.prototype.init = function(C, c) {
    this.startPts = C;
    for (var m = 0; m < 8; m++)
      this.windows[m] = new xi(m), typeof c == "function" && (this.windows[m].beforeRowOverflow = c);
  }, hn.prototype.setCurrentWindow = function(C) {
    this.currentWindow = this.windows[C];
  }, hn.prototype.createTextDecoder = function(C) {
    if (typeof TextDecoder > "u")
      this.stream.trigger("log", {
        level: "warn",
        message: "The `encoding` option is unsupported without TextDecoder support"
      });
    else
      try {
        this.textDecoder_ = new TextDecoder(C);
      } catch (c) {
        this.stream.trigger("log", {
          level: "warn",
          message: "TextDecoder could not be created with " + C + " encoding. " + c
        });
      }
  };
  var vt = function C(c) {
    c = c || {}, C.prototype.init.call(this);
    var m = this, p = c.captionServices || {}, g = {}, b;
    Object.keys(p).forEach(function(S) {
      b = p[S], /^SERVICE/.test(S) && (g[S] = b.encoding);
    }), this.serviceEncodings = g, this.current708Packet = null, this.services = {}, this.push = function(S) {
      S.type === 3 ? (m.new708Packet(), m.add708Bytes(S)) : (m.current708Packet === null && m.new708Packet(), m.add708Bytes(S));
    };
  };
  vt.prototype = new t(), vt.prototype.new708Packet = function() {
    this.current708Packet !== null && this.push708Packet(), this.current708Packet = {
      data: [],
      ptsVals: []
    };
  }, vt.prototype.add708Bytes = function(C) {
    var c = C.ccData, m = c >>> 8, p = c & 255;
    this.current708Packet.ptsVals.push(C.pts), this.current708Packet.data.push(m), this.current708Packet.data.push(p);
  }, vt.prototype.push708Packet = function() {
    var C = this.current708Packet, c = C.data, m = null, p = null, g = 0, b = c[g++];
    for (C.seq = b >> 6, C.sizeCode = b & 63; g < c.length; g++)
      b = c[g++], m = b >> 5, p = b & 31, m === 7 && p > 0 && (b = c[g++], m = b), this.pushServiceBlock(m, g, p), p > 0 && (g += p - 1);
  }, vt.prototype.pushServiceBlock = function(C, c, m) {
    var p, g = c, b = this.current708Packet.data, S = this.services[C];
    for (S || (S = this.initService(C, g)); g < c + m && g < b.length; g++)
      p = b[g], Ur(p) ? g = this.handleText(g, S) : p === 24 ? g = this.multiByteCharacter(g, S) : p === 16 ? g = this.extendedCommands(g, S) : 128 <= p && p <= 135 ? g = this.setCurrentWindow(g, S) : 152 <= p && p <= 159 ? g = this.defineWindow(g, S) : p === 136 ? g = this.clearWindows(g, S) : p === 140 ? g = this.deleteWindows(g, S) : p === 137 ? g = this.displayWindows(g, S) : p === 138 ? g = this.hideWindows(g, S) : p === 139 ? g = this.toggleWindows(g, S) : p === 151 ? g = this.setWindowAttributes(g, S) : p === 144 ? g = this.setPenAttributes(g, S) : p === 145 ? g = this.setPenColor(g, S) : p === 146 ? g = this.setPenLocation(g, S) : p === 143 ? S = this.reset(g, S) : p === 8 ? S.currentWindow.backspace() : p === 12 ? S.currentWindow.clearText() : p === 13 ? S.currentWindow.pendingNewLine = !0 : p === 14 ? S.currentWindow.clearText() : p === 141 && g++;
  }, vt.prototype.extendedCommands = function(C, c) {
    var m = this.current708Packet.data, p = m[++C];
    return Ur(p) && (C = this.handleText(C, c, {
      isExtended: !0
    })), C;
  }, vt.prototype.getPts = function(C) {
    return this.current708Packet.ptsVals[Math.floor(C / 2)];
  }, vt.prototype.initService = function(C, c) {
    var p = "SERVICE" + C, m = this, p, g;
    return p in this.serviceEncodings && (g = this.serviceEncodings[p]), this.services[C] = new hn(C, g, m), this.services[C].init(this.getPts(c), function(b) {
      m.flushDisplayed(b, m.services[C]);
    }), this.services[C];
  }, vt.prototype.handleText = function(C, c, m) {
    var p = m && m.isExtended, g = m && m.isMultiByte, b = this.current708Packet.data, S = p ? 4096 : 0, D = b[C], N = b[C + 1], K = c.currentWindow, q, Z;
    return c.textDecoder_ && !p ? (g ? (Z = [D, N], C++) : Z = [D], q = c.textDecoder_.decode(new Uint8Array(Z))) : q = As(S | D), K.pendingNewLine && !K.isEmpty() && K.newLine(this.getPts(C)), K.pendingNewLine = !1, K.addText(q), C;
  }, vt.prototype.multiByteCharacter = function(C, c) {
    var m = this.current708Packet.data, p = m[C + 1], g = m[C + 2];
    return Ur(p) && Ur(g) && (C = this.handleText(++C, c, {
      isMultiByte: !0
    })), C;
  }, vt.prototype.setCurrentWindow = function(C, c) {
    var m = this.current708Packet.data, p = m[C], g = p & 7;
    return c.setCurrentWindow(g), C;
  }, vt.prototype.defineWindow = function(C, c) {
    var m = this.current708Packet.data, p = m[C], g = p & 7;
    c.setCurrentWindow(g);
    var b = c.currentWindow;
    return p = m[++C], b.visible = (p & 32) >> 5, b.rowLock = (p & 16) >> 4, b.columnLock = (p & 8) >> 3, b.priority = p & 7, p = m[++C], b.relativePositioning = (p & 128) >> 7, b.anchorVertical = p & 127, p = m[++C], b.anchorHorizontal = p, p = m[++C], b.anchorPoint = (p & 240) >> 4, b.rowCount = p & 15, p = m[++C], b.columnCount = p & 63, p = m[++C], b.windowStyle = (p & 56) >> 3, b.penStyle = p & 7, b.virtualRowCount = b.rowCount + 1, C;
  }, vt.prototype.setWindowAttributes = function(C, c) {
    var m = this.current708Packet.data, p = m[C], g = c.currentWindow.winAttr;
    return p = m[++C], g.fillOpacity = (p & 192) >> 6, g.fillRed = (p & 48) >> 4, g.fillGreen = (p & 12) >> 2, g.fillBlue = p & 3, p = m[++C], g.borderType = (p & 192) >> 6, g.borderRed = (p & 48) >> 4, g.borderGreen = (p & 12) >> 2, g.borderBlue = p & 3, p = m[++C], g.borderType += (p & 128) >> 5, g.wordWrap = (p & 64) >> 6, g.printDirection = (p & 48) >> 4, g.scrollDirection = (p & 12) >> 2, g.justify = p & 3, p = m[++C], g.effectSpeed = (p & 240) >> 4, g.effectDirection = (p & 12) >> 2, g.displayEffect = p & 3, C;
  }, vt.prototype.flushDisplayed = function(C, c) {
    for (var m = [], p = 0; p < 8; p++)
      c.windows[p].visible && !c.windows[p].isEmpty() && m.push(c.windows[p].getText());
    c.endPts = C, c.text = m.join(`

`), this.pushCaption(c), c.startPts = C;
  }, vt.prototype.pushCaption = function(C) {
    C.text !== "" && (this.trigger("data", {
      startPts: C.startPts,
      endPts: C.endPts,
      text: C.text,
      stream: "cc708_" + C.serviceNum
    }), C.text = "", C.startPts = C.endPts);
  }, vt.prototype.displayWindows = function(C, c) {
    var m = this.current708Packet.data, p = m[++C], g = this.getPts(C);
    this.flushDisplayed(g, c);
    for (var b = 0; b < 8; b++)
      p & 1 << b && (c.windows[b].visible = 1);
    return C;
  }, vt.prototype.hideWindows = function(C, c) {
    var m = this.current708Packet.data, p = m[++C], g = this.getPts(C);
    this.flushDisplayed(g, c);
    for (var b = 0; b < 8; b++)
      p & 1 << b && (c.windows[b].visible = 0);
    return C;
  }, vt.prototype.toggleWindows = function(C, c) {
    var m = this.current708Packet.data, p = m[++C], g = this.getPts(C);
    this.flushDisplayed(g, c);
    for (var b = 0; b < 8; b++)
      p & 1 << b && (c.windows[b].visible ^= 1);
    return C;
  }, vt.prototype.clearWindows = function(C, c) {
    var m = this.current708Packet.data, p = m[++C], g = this.getPts(C);
    this.flushDisplayed(g, c);
    for (var b = 0; b < 8; b++)
      p & 1 << b && c.windows[b].clearText();
    return C;
  }, vt.prototype.deleteWindows = function(C, c) {
    var m = this.current708Packet.data, p = m[++C], g = this.getPts(C);
    this.flushDisplayed(g, c);
    for (var b = 0; b < 8; b++)
      p & 1 << b && c.windows[b].reset();
    return C;
  }, vt.prototype.setPenAttributes = function(C, c) {
    var m = this.current708Packet.data, p = m[C], g = c.currentWindow.penAttr;
    return p = m[++C], g.textTag = (p & 240) >> 4, g.offset = (p & 12) >> 2, g.penSize = p & 3, p = m[++C], g.italics = (p & 128) >> 7, g.underline = (p & 64) >> 6, g.edgeType = (p & 56) >> 3, g.fontStyle = p & 7, C;
  }, vt.prototype.setPenColor = function(C, c) {
    var m = this.current708Packet.data, p = m[C], g = c.currentWindow.penColor;
    return p = m[++C], g.fgOpacity = (p & 192) >> 6, g.fgRed = (p & 48) >> 4, g.fgGreen = (p & 12) >> 2, g.fgBlue = p & 3, p = m[++C], g.bgOpacity = (p & 192) >> 6, g.bgRed = (p & 48) >> 4, g.bgGreen = (p & 12) >> 2, g.bgBlue = p & 3, p = m[++C], g.edgeRed = (p & 48) >> 4, g.edgeGreen = (p & 12) >> 2, g.edgeBlue = p & 3, C;
  }, vt.prototype.setPenLocation = function(C, c) {
    var m = this.current708Packet.data, p = m[C], g = c.currentWindow.penLoc;
    return c.currentWindow.pendingNewLine = !0, p = m[++C], g.row = p & 15, p = m[++C], g.column = p & 63, C;
  }, vt.prototype.reset = function(C, c) {
    var m = this.getPts(C);
    return this.flushDisplayed(m, c), this.initService(c.serviceNum, C);
  };
  var Ni = {
    42: 225,
    92: 233,
    94: 237,
    95: 243,
    96: 250,
    123: 231,
    124: 247,
    125: 209,
    126: 241,
    127: 9608,
    304: 174,
    305: 176,
    306: 189,
    307: 191,
    308: 8482,
    309: 162,
    310: 163,
    311: 9834,
    312: 224,
    313: 160,
    314: 232,
    315: 226,
    316: 234,
    317: 238,
    318: 244,
    319: 251,
    544: 193,
    545: 201,
    546: 211,
    547: 218,
    548: 220,
    549: 252,
    550: 8216,
    551: 161,
    552: 42,
    553: 39,
    554: 8212,
    555: 169,
    556: 8480,
    557: 8226,
    558: 8220,
    559: 8221,
    560: 192,
    561: 194,
    562: 199,
    563: 200,
    564: 202,
    565: 203,
    566: 235,
    567: 206,
    568: 207,
    569: 239,
    570: 212,
    571: 217,
    572: 249,
    573: 219,
    574: 171,
    575: 187,
    800: 195,
    801: 227,
    802: 205,
    803: 204,
    804: 236,
    805: 210,
    806: 242,
    807: 213,
    808: 245,
    809: 123,
    810: 125,
    811: 92,
    812: 94,
    813: 95,
    814: 124,
    815: 126,
    816: 196,
    817: 228,
    818: 214,
    819: 246,
    820: 223,
    821: 165,
    822: 164,
    823: 9474,
    824: 197,
    825: 229,
    826: 216,
    827: 248,
    828: 9484,
    829: 9488,
    830: 9492,
    831: 9496
  }, qr = function(c) {
    return c === null ? "" : (c = Ni[c] || c, String.fromCharCode(c));
  }, pn = 14, Vr = [4352, 4384, 4608, 4640, 5376, 5408, 5632, 5664, 5888, 5920, 4096, 4864, 4896, 5120, 5152], ar = function() {
    for (var c = [], m = pn + 1; m--; )
      c.push("");
    return c;
  }, Tt = function C(c, m) {
    C.prototype.init.call(this), this.field_ = c || 0, this.dataChannel_ = m || 0, this.name_ = "CC" + ((this.field_ << 1 | this.dataChannel_) + 1), this.setConstants(), this.reset(), this.push = function(p) {
      var g, b, S, D, N;
      if (g = p.ccData & 32639, g === this.lastControlCode_) {
        this.lastControlCode_ = null;
        return;
      }
      if ((g & 61440) === 4096 ? this.lastControlCode_ = g : g !== this.PADDING_ && (this.lastControlCode_ = null), S = g >>> 8, D = g & 255, g !== this.PADDING_)
        if (g === this.RESUME_CAPTION_LOADING_)
          this.mode_ = "popOn";
        else if (g === this.END_OF_CAPTION_)
          this.mode_ = "popOn", this.clearFormatting(p.pts), this.flushDisplayed(p.pts), b = this.displayed_, this.displayed_ = this.nonDisplayed_, this.nonDisplayed_ = b, this.startPts_ = p.pts;
        else if (g === this.ROLL_UP_2_ROWS_)
          this.rollUpRows_ = 2, this.setRollUp(p.pts);
        else if (g === this.ROLL_UP_3_ROWS_)
          this.rollUpRows_ = 3, this.setRollUp(p.pts);
        else if (g === this.ROLL_UP_4_ROWS_)
          this.rollUpRows_ = 4, this.setRollUp(p.pts);
        else if (g === this.CARRIAGE_RETURN_)
          this.clearFormatting(p.pts), this.flushDisplayed(p.pts), this.shiftRowsUp_(), this.startPts_ = p.pts;
        else if (g === this.BACKSPACE_)
          this.mode_ === "popOn" ? this.nonDisplayed_[this.row_] = this.nonDisplayed_[this.row_].slice(0, -1) : this.displayed_[this.row_] = this.displayed_[this.row_].slice(0, -1);
        else if (g === this.ERASE_DISPLAYED_MEMORY_)
          this.flushDisplayed(p.pts), this.displayed_ = ar();
        else if (g === this.ERASE_NON_DISPLAYED_MEMORY_)
          this.nonDisplayed_ = ar();
        else if (g === this.RESUME_DIRECT_CAPTIONING_)
          this.mode_ !== "paintOn" && (this.flushDisplayed(p.pts), this.displayed_ = ar()), this.mode_ = "paintOn", this.startPts_ = p.pts;
        else if (this.isSpecialCharacter(S, D))
          S = (S & 3) << 8, N = qr(S | D), this[this.mode_](p.pts, N), this.column_++;
        else if (this.isExtCharacter(S, D))
          this.mode_ === "popOn" ? this.nonDisplayed_[this.row_] = this.nonDisplayed_[this.row_].slice(0, -1) : this.displayed_[this.row_] = this.displayed_[this.row_].slice(0, -1), S = (S & 3) << 8, N = qr(S | D), this[this.mode_](p.pts, N), this.column_++;
        else if (this.isMidRowCode(S, D))
          this.clearFormatting(p.pts), this[this.mode_](p.pts, " "), this.column_++, (D & 14) === 14 && this.addFormatting(p.pts, ["i"]), (D & 1) === 1 && this.addFormatting(p.pts, ["u"]);
        else if (this.isOffsetControlCode(S, D))
          this.column_ += D & 3;
        else if (this.isPAC(S, D)) {
          var K = Vr.indexOf(g & 7968);
          this.mode_ === "rollUp" && (K - this.rollUpRows_ + 1 < 0 && (K = this.rollUpRows_ - 1), this.setRollUp(p.pts, K)), K !== this.row_ && (this.clearFormatting(p.pts), this.row_ = K), D & 1 && this.formatting_.indexOf("u") === -1 && this.addFormatting(p.pts, ["u"]), (g & 16) === 16 && (this.column_ = ((g & 14) >> 1) * 4), this.isColorPAC(D) && (D & 14) === 14 && this.addFormatting(p.pts, ["i"]);
        } else
          this.isNormalChar(S) && (D === 0 && (D = null), N = qr(S), N += qr(D), this[this.mode_](p.pts, N), this.column_ += N.length);
    };
  };
  Tt.prototype = new t(), Tt.prototype.flushDisplayed = function(C) {
    var c = this.displayed_.map(function(m, p) {
      try {
        return m.trim();
      } catch {
        return this.trigger("log", {
          level: "warn",
          message: "Skipping a malformed 608 caption at index " + p + "."
        }), "";
      }
    }, this).join(`
`).replace(/^\n+|\n+$/g, "");
    c.length && this.trigger("data", {
      startPts: this.startPts_,
      endPts: C,
      text: c,
      stream: this.name_
    });
  }, Tt.prototype.reset = function() {
    this.mode_ = "popOn", this.topRow_ = 0, this.startPts_ = 0, this.displayed_ = ar(), this.nonDisplayed_ = ar(), this.lastControlCode_ = null, this.column_ = 0, this.row_ = pn, this.rollUpRows_ = 2, this.formatting_ = [];
  }, Tt.prototype.setConstants = function() {
    this.dataChannel_ === 0 ? (this.BASE_ = 16, this.EXT_ = 17, this.CONTROL_ = (20 | this.field_) << 8, this.OFFSET_ = 23) : this.dataChannel_ === 1 && (this.BASE_ = 24, this.EXT_ = 25, this.CONTROL_ = (28 | this.field_) << 8, this.OFFSET_ = 31), this.PADDING_ = 0, this.RESUME_CAPTION_LOADING_ = this.CONTROL_ | 32, this.END_OF_CAPTION_ = this.CONTROL_ | 47, this.ROLL_UP_2_ROWS_ = this.CONTROL_ | 37, this.ROLL_UP_3_ROWS_ = this.CONTROL_ | 38, this.ROLL_UP_4_ROWS_ = this.CONTROL_ | 39, this.CARRIAGE_RETURN_ = this.CONTROL_ | 45, this.RESUME_DIRECT_CAPTIONING_ = this.CONTROL_ | 41, this.BACKSPACE_ = this.CONTROL_ | 33, this.ERASE_DISPLAYED_MEMORY_ = this.CONTROL_ | 44, this.ERASE_NON_DISPLAYED_MEMORY_ = this.CONTROL_ | 46;
  }, Tt.prototype.isSpecialCharacter = function(C, c) {
    return C === this.EXT_ && c >= 48 && c <= 63;
  }, Tt.prototype.isExtCharacter = function(C, c) {
    return (C === this.EXT_ + 1 || C === this.EXT_ + 2) && c >= 32 && c <= 63;
  }, Tt.prototype.isMidRowCode = function(C, c) {
    return C === this.EXT_ && c >= 32 && c <= 47;
  }, Tt.prototype.isOffsetControlCode = function(C, c) {
    return C === this.OFFSET_ && c >= 33 && c <= 35;
  }, Tt.prototype.isPAC = function(C, c) {
    return C >= this.BASE_ && C < this.BASE_ + 8 && c >= 64 && c <= 127;
  }, Tt.prototype.isColorPAC = function(C) {
    return C >= 64 && C <= 79 || C >= 96 && C <= 127;
  }, Tt.prototype.isNormalChar = function(C) {
    return C >= 32 && C <= 127;
  }, Tt.prototype.setRollUp = function(C, c) {
    if (this.mode_ !== "rollUp" && (this.row_ = pn, this.mode_ = "rollUp", this.flushDisplayed(C), this.nonDisplayed_ = ar(), this.displayed_ = ar()), c !== void 0 && c !== this.row_)
      for (var m = 0; m < this.rollUpRows_; m++)
        this.displayed_[c - m] = this.displayed_[this.row_ - m], this.displayed_[this.row_ - m] = "";
    c === void 0 && (c = this.row_), this.topRow_ = c - this.rollUpRows_ + 1;
  }, Tt.prototype.addFormatting = function(C, c) {
    this.formatting_ = this.formatting_.concat(c);
    var m = c.reduce(function(p, g) {
      return p + "<" + g + ">";
    }, "");
    this[this.mode_](C, m);
  }, Tt.prototype.clearFormatting = function(C) {
    if (!!this.formatting_.length) {
      var c = this.formatting_.reverse().reduce(function(m, p) {
        return m + "</" + p + ">";
      }, "");
      this.formatting_ = [], this[this.mode_](C, c);
    }
  }, Tt.prototype.popOn = function(C, c) {
    var m = this.nonDisplayed_[this.row_];
    m += c, this.nonDisplayed_[this.row_] = m;
  }, Tt.prototype.rollUp = function(C, c) {
    var m = this.displayed_[this.row_];
    m += c, this.displayed_[this.row_] = m;
  }, Tt.prototype.shiftRowsUp_ = function() {
    var C;
    for (C = 0; C < this.topRow_; C++)
      this.displayed_[C] = "";
    for (C = this.row_ + 1; C < pn + 1; C++)
      this.displayed_[C] = "";
    for (C = this.topRow_; C < this.row_; C++)
      this.displayed_[C] = this.displayed_[C + 1];
    this.displayed_[this.row_] = "";
  }, Tt.prototype.paintOn = function(C, c) {
    var m = this.displayed_[this.row_];
    m += c, this.displayed_[this.row_] = m;
  };
  var sr = {
    CaptionStream: ri,
    Cea608Stream: Tt,
    Cea708Stream: vt
  }, Ht = {
    H264_STREAM_TYPE: 27,
    ADTS_STREAM_TYPE: 15,
    METADATA_STREAM_TYPE: 21
  }, Cs = 8589934592, vu = 4294967296, ha = "shared", pa = function(c, m) {
    var p = 1;
    for (c > m && (p = -1); Math.abs(m - c) > vu; )
      c += p * Cs;
    return c;
  }, mn = function C(c) {
    var m, p;
    C.prototype.init.call(this), this.type_ = c || ha, this.push = function(g) {
      this.type_ !== ha && g.type !== this.type_ || (p === void 0 && (p = g.dts), g.dts = pa(g.dts, p), g.pts = pa(g.pts, p), m = g.dts, this.trigger("data", g));
    }, this.flush = function() {
      p = m, this.trigger("done");
    }, this.endTimeline = function() {
      this.flush(), this.trigger("endedtimeline");
    }, this.discontinuity = function() {
      p = void 0, m = void 0;
    }, this.reset = function() {
      this.discontinuity(), this.trigger("reset");
    };
  };
  mn.prototype = new t();
  var ma = {
    TimestampRolloverStream: mn,
    handleRollover: pa
  }, ks = function(c, m, p) {
    var g, b = "";
    for (g = m; g < p; g++)
      b += "%" + ("00" + c[g].toString(16)).slice(-2);
    return b;
  }, Pr = function(c, m, p) {
    return decodeURIComponent(ks(c, m, p));
  }, _u = function(c, m, p) {
    return unescape(ks(c, m, p));
  }, Ct = function(c) {
    return c[0] << 21 | c[1] << 14 | c[2] << 7 | c[3];
  }, jr = {
    TXXX: function(c) {
      var m;
      if (c.data[0] === 3) {
        for (m = 1; m < c.data.length; m++)
          if (c.data[m] === 0) {
            c.description = Pr(c.data, 1, m), c.value = Pr(c.data, m + 1, c.data.length).replace(/\0*$/, "");
            break;
          }
        c.data = c.value;
      }
    },
    WXXX: function(c) {
      var m;
      if (c.data[0] === 3) {
        for (m = 1; m < c.data.length; m++)
          if (c.data[m] === 0) {
            c.description = Pr(c.data, 1, m), c.url = Pr(c.data, m + 1, c.data.length);
            break;
          }
      }
    },
    PRIV: function(c) {
      var m;
      for (m = 0; m < c.data.length; m++)
        if (c.data[m] === 0) {
          c.owner = _u(c.data, 0, m);
          break;
        }
      c.privateData = c.data.subarray(m + 1), c.data = c.privateData;
    }
  }, gn;
  gn = function(c) {
    var m = {
      descriptor: c && c.descriptor
    }, p = 0, g = [], b = 0, S;
    if (gn.prototype.init.call(this), this.dispatchType = Ht.METADATA_STREAM_TYPE.toString(16), m.descriptor)
      for (S = 0; S < m.descriptor.length; S++)
        this.dispatchType += ("00" + m.descriptor[S].toString(16)).slice(-2);
    this.push = function(D) {
      var N, K, q, Z, ce, Se;
      if (D.type === "timed-metadata") {
        if (D.dataAlignmentIndicator && (b = 0, g.length = 0), g.length === 0 && (D.data.length < 10 || D.data[0] !== "I".charCodeAt(0) || D.data[1] !== "D".charCodeAt(0) || D.data[2] !== "3".charCodeAt(0))) {
          this.trigger("log", {
            level: "warn",
            message: "Skipping unrecognized metadata packet"
          });
          return;
        }
        if (g.push(D), b += D.data.byteLength, g.length === 1 && (p = Ct(D.data.subarray(6, 10)), p += 10), !(b < p)) {
          for (N = {
            data: new Uint8Array(p),
            frames: [],
            pts: g[0].pts,
            dts: g[0].dts
          }, ce = 0; ce < p; )
            N.data.set(g[0].data.subarray(0, p - ce), ce), ce += g[0].data.byteLength, b -= g[0].data.byteLength, g.shift();
          K = 10, N.data[5] & 64 && (K += 4, K += Ct(N.data.subarray(10, 14)), p -= Ct(N.data.subarray(16, 20)));
          do {
            if (q = Ct(N.data.subarray(K + 4, K + 8)), q < 1) {
              this.trigger("log", {
                level: "warn",
                message: "Malformed ID3 frame encountered. Skipping metadata parsing."
              });
              return;
            }
            if (Se = String.fromCharCode(N.data[K], N.data[K + 1], N.data[K + 2], N.data[K + 3]), Z = {
              id: Se,
              data: N.data.subarray(K + 10, K + q + 10)
            }, Z.key = Z.id, jr[Z.id] && (jr[Z.id](Z), Z.owner === "com.apple.streaming.transportStreamTimestamp")) {
              var Ae = Z.data, ye = (Ae[3] & 1) << 30 | Ae[4] << 22 | Ae[5] << 14 | Ae[6] << 6 | Ae[7] >>> 2;
              ye *= 4, ye += Ae[7] & 3, Z.timeStamp = ye, N.pts === void 0 && N.dts === void 0 && (N.pts = Z.timeStamp, N.dts = Z.timeStamp), this.trigger("timestamp", Z);
            }
            N.frames.push(Z), K += 10, K += q;
          } while (K < p);
          this.trigger("data", N);
        }
      }
    };
  }, gn.prototype = new t();
  var yu = gn, Tu = ma.TimestampRolloverStream, vn, Mi, Ir, or = 188, _n = 71;
  vn = function() {
    var c = new Uint8Array(or), m = 0;
    vn.prototype.init.call(this), this.push = function(p) {
      var g = 0, b = or, S;
      for (m ? (S = new Uint8Array(p.byteLength + m), S.set(c.subarray(0, m)), S.set(p, m), m = 0) : S = p; b < S.byteLength; ) {
        if (S[g] === _n && S[b] === _n) {
          this.trigger("data", S.subarray(g, b)), g += or, b += or;
          continue;
        }
        g++, b++;
      }
      g < S.byteLength && (c.set(S.subarray(g), 0), m = S.byteLength - g);
    }, this.flush = function() {
      m === or && c[0] === _n && (this.trigger("data", c), m = 0), this.trigger("done");
    }, this.endTimeline = function() {
      this.flush(), this.trigger("endedtimeline");
    }, this.reset = function() {
      m = 0, this.trigger("reset");
    };
  }, vn.prototype = new t(), Mi = function() {
    var c, m, p, g;
    Mi.prototype.init.call(this), g = this, this.packetsWaitingForPmt = [], this.programMapTable = void 0, c = function(S, D) {
      var N = 0;
      D.payloadUnitStartIndicator && (N += S[N] + 1), D.type === "pat" ? m(S.subarray(N), D) : p(S.subarray(N), D);
    }, m = function(S, D) {
      D.section_number = S[7], D.last_section_number = S[8], g.pmtPid = (S[10] & 31) << 8 | S[11], D.pmtPid = g.pmtPid;
    }, p = function(S, D) {
      var N, K, q, Z;
      if (!!(S[5] & 1)) {
        for (g.programMapTable = {
          video: null,
          audio: null,
          "timed-metadata": {}
        }, N = (S[1] & 15) << 8 | S[2], K = 3 + N - 4, q = (S[10] & 15) << 8 | S[11], Z = 12 + q; Z < K; ) {
          var ce = S[Z], Se = (S[Z + 1] & 31) << 8 | S[Z + 2];
          ce === Ht.H264_STREAM_TYPE && g.programMapTable.video === null ? g.programMapTable.video = Se : ce === Ht.ADTS_STREAM_TYPE && g.programMapTable.audio === null ? g.programMapTable.audio = Se : ce === Ht.METADATA_STREAM_TYPE && (g.programMapTable["timed-metadata"][Se] = ce), Z += ((S[Z + 3] & 15) << 8 | S[Z + 4]) + 5;
        }
        D.programMapTable = g.programMapTable;
      }
    }, this.push = function(b) {
      var S = {}, D = 4;
      if (S.payloadUnitStartIndicator = !!(b[1] & 64), S.pid = b[1] & 31, S.pid <<= 8, S.pid |= b[2], (b[3] & 48) >>> 4 > 1 && (D += b[D] + 1), S.pid === 0)
        S.type = "pat", c(b.subarray(D), S), this.trigger("data", S);
      else if (S.pid === this.pmtPid)
        for (S.type = "pmt", c(b.subarray(D), S), this.trigger("data", S); this.packetsWaitingForPmt.length; )
          this.processPes_.apply(this, this.packetsWaitingForPmt.shift());
      else
        this.programMapTable === void 0 ? this.packetsWaitingForPmt.push([b, D, S]) : this.processPes_(b, D, S);
    }, this.processPes_ = function(b, S, D) {
      D.pid === this.programMapTable.video ? D.streamType = Ht.H264_STREAM_TYPE : D.pid === this.programMapTable.audio ? D.streamType = Ht.ADTS_STREAM_TYPE : D.streamType = this.programMapTable["timed-metadata"][D.pid], D.type = "pes", D.data = b.subarray(S), this.trigger("data", D);
    };
  }, Mi.prototype = new t(), Mi.STREAM_TYPES = {
    h264: 27,
    adts: 15
  }, Ir = function() {
    var c = this, m = !1, p = {
      data: [],
      size: 0
    }, g = {
      data: [],
      size: 0
    }, b = {
      data: [],
      size: 0
    }, S, D = function(q, Z) {
      var ce, Se = q[0] << 16 | q[1] << 8 | q[2];
      Z.data = new Uint8Array(), Se === 1 && (Z.packetLength = 6 + (q[4] << 8 | q[5]), Z.dataAlignmentIndicator = (q[6] & 4) !== 0, ce = q[7], ce & 192 && (Z.pts = (q[9] & 14) << 27 | (q[10] & 255) << 20 | (q[11] & 254) << 12 | (q[12] & 255) << 5 | (q[13] & 254) >>> 3, Z.pts *= 4, Z.pts += (q[13] & 6) >>> 1, Z.dts = Z.pts, ce & 64 && (Z.dts = (q[14] & 14) << 27 | (q[15] & 255) << 20 | (q[16] & 254) << 12 | (q[17] & 255) << 5 | (q[18] & 254) >>> 3, Z.dts *= 4, Z.dts += (q[18] & 6) >>> 1)), Z.data = q.subarray(9 + q[8]));
    }, N = function(q, Z, ce) {
      var Se = new Uint8Array(q.size), Ae = {
        type: Z
      }, ye = 0, Fe = 0, Wt = !1, si;
      if (!(!q.data.length || q.size < 9)) {
        for (Ae.trackId = q.data[0].pid, ye = 0; ye < q.data.length; ye++)
          si = q.data[ye], Se.set(si.data, Fe), Fe += si.data.byteLength;
        D(Se, Ae), Wt = Z === "video" || Ae.packetLength <= q.size, (ce || Wt) && (q.size = 0, q.data.length = 0), Wt && c.trigger("data", Ae);
      }
    };
    Ir.prototype.init.call(this), this.push = function(K) {
      ({
        pat: function() {
        },
        pes: function() {
          var Z, ce;
          switch (K.streamType) {
            case Ht.H264_STREAM_TYPE:
              Z = p, ce = "video";
              break;
            case Ht.ADTS_STREAM_TYPE:
              Z = g, ce = "audio";
              break;
            case Ht.METADATA_STREAM_TYPE:
              Z = b, ce = "timed-metadata";
              break;
            default:
              return;
          }
          K.payloadUnitStartIndicator && N(Z, ce, !0), Z.data.push(K), Z.size += K.data.byteLength;
        },
        pmt: function() {
          var Z = {
            type: "metadata",
            tracks: []
          };
          S = K.programMapTable, S.video !== null && Z.tracks.push({
            timelineStartInfo: {
              baseMediaDecodeTime: 0
            },
            id: +S.video,
            codec: "avc",
            type: "video"
          }), S.audio !== null && Z.tracks.push({
            timelineStartInfo: {
              baseMediaDecodeTime: 0
            },
            id: +S.audio,
            codec: "adts",
            type: "audio"
          }), m = !0, c.trigger("data", Z);
        }
      })[K.type]();
    }, this.reset = function() {
      p.size = 0, p.data.length = 0, g.size = 0, g.data.length = 0, this.trigger("reset");
    }, this.flushStreams_ = function() {
      N(p, "video"), N(g, "audio"), N(b, "timed-metadata");
    }, this.flush = function() {
      if (!m && S) {
        var K = {
          type: "metadata",
          tracks: []
        };
        S.video !== null && K.tracks.push({
          timelineStartInfo: {
            baseMediaDecodeTime: 0
          },
          id: +S.video,
          codec: "avc",
          type: "video"
        }), S.audio !== null && K.tracks.push({
          timelineStartInfo: {
            baseMediaDecodeTime: 0
          },
          id: +S.audio,
          codec: "adts",
          type: "audio"
        }), c.trigger("data", K);
      }
      m = !1, this.flushStreams_(), this.trigger("done");
    };
  }, Ir.prototype = new t();
  var ur = {
    PAT_PID: 0,
    MP2T_PACKET_LENGTH: or,
    TransportPacketStream: vn,
    TransportParseStream: Mi,
    ElementaryStream: Ir,
    TimestampRolloverStream: Tu,
    CaptionStream: sr.CaptionStream,
    Cea608Stream: sr.Cea608Stream,
    Cea708Stream: sr.Cea708Stream,
    MetadataStream: yu
  };
  for (var ga in Ht)
    Ht.hasOwnProperty(ga) && (ur[ga] = Ht[ga]);
  var Fi = ur, yn = et.ONE_SECOND_IN_TS, Dr, va = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350];
  Dr = function(c) {
    var m, p = 0;
    Dr.prototype.init.call(this), this.skipWarn_ = function(g, b) {
      this.trigger("log", {
        level: "warn",
        message: "adts skiping bytes " + g + " to " + b + " in frame " + p + " outside syncword"
      });
    }, this.push = function(g) {
      var b = 0, S, D, N, K, q;
      if (c || (p = 0), g.type === "audio") {
        m && m.length ? (N = m, m = new Uint8Array(N.byteLength + g.data.byteLength), m.set(N), m.set(g.data, N.byteLength)) : m = g.data;
        for (var Z; b + 7 < m.length; ) {
          if (m[b] !== 255 || (m[b + 1] & 246) !== 240) {
            typeof Z != "number" && (Z = b), b++;
            continue;
          }
          if (typeof Z == "number" && (this.skipWarn_(Z, b), Z = null), D = (~m[b + 1] & 1) * 2, S = (m[b + 3] & 3) << 11 | m[b + 4] << 3 | (m[b + 5] & 224) >> 5, K = ((m[b + 6] & 3) + 1) * 1024, q = K * yn / va[(m[b + 2] & 60) >>> 2], m.byteLength - b < S)
            break;
          this.trigger("data", {
            pts: g.pts + p * q,
            dts: g.dts + p * q,
            sampleCount: K,
            audioobjecttype: (m[b + 2] >>> 6 & 3) + 1,
            channelcount: (m[b + 2] & 1) << 2 | (m[b + 3] & 192) >>> 6,
            samplerate: va[(m[b + 2] & 60) >>> 2],
            samplingfrequencyindex: (m[b + 2] & 60) >>> 2,
            samplesize: 16,
            data: m.subarray(b + 7 + D, b + S)
          }), p++, b += S;
        }
        typeof Z == "number" && (this.skipWarn_(Z, b), Z = null), m = m.subarray(b);
      }
    }, this.flush = function() {
      p = 0, this.trigger("done");
    }, this.reset = function() {
      m = void 0, this.trigger("reset");
    }, this.endTimeline = function() {
      m = void 0, this.trigger("endedtimeline");
    };
  }, Dr.prototype = new t();
  var Tn = Dr, Ps;
  Ps = function(c) {
    var m = c.byteLength, p = 0, g = 0;
    this.length = function() {
      return 8 * m;
    }, this.bitsAvailable = function() {
      return 8 * m + g;
    }, this.loadWord = function() {
      var b = c.byteLength - m, S = new Uint8Array(4), D = Math.min(4, m);
      if (D === 0)
        throw new Error("no bytes available");
      S.set(c.subarray(b, b + D)), p = new DataView(S.buffer).getUint32(0), g = D * 8, m -= D;
    }, this.skipBits = function(b) {
      var S;
      g > b ? (p <<= b, g -= b) : (b -= g, S = Math.floor(b / 8), b -= S * 8, m -= S, this.loadWord(), p <<= b, g -= b);
    }, this.readBits = function(b) {
      var S = Math.min(g, b), D = p >>> 32 - S;
      return g -= S, g > 0 ? p <<= S : m > 0 && this.loadWord(), S = b - S, S > 0 ? D << S | this.readBits(S) : D;
    }, this.skipLeadingZeros = function() {
      var b;
      for (b = 0; b < g; ++b)
        if ((p & 2147483648 >>> b) !== 0)
          return p <<= b, g -= b, b;
      return this.loadWord(), b + this.skipLeadingZeros();
    }, this.skipUnsignedExpGolomb = function() {
      this.skipBits(1 + this.skipLeadingZeros());
    }, this.skipExpGolomb = function() {
      this.skipBits(1 + this.skipLeadingZeros());
    }, this.readUnsignedExpGolomb = function() {
      var b = this.skipLeadingZeros();
      return this.readBits(b + 1) - 1;
    }, this.readExpGolomb = function() {
      var b = this.readUnsignedExpGolomb();
      return 1 & b ? 1 + b >>> 1 : -1 * (b >>> 1);
    }, this.readBoolean = function() {
      return this.readBits(1) === 1;
    }, this.readUnsignedByte = function() {
      return this.readBits(8);
    }, this.loadWord();
  };
  var bu = Ps, bn, Hr, Is;
  Hr = function() {
    var c = 0, m, p;
    Hr.prototype.init.call(this), this.push = function(g) {
      var b;
      p ? (b = new Uint8Array(p.byteLength + g.data.byteLength), b.set(p), b.set(g.data, p.byteLength), p = b) : p = g.data;
      for (var S = p.byteLength; c < S - 3; c++)
        if (p[c + 2] === 1) {
          m = c + 5;
          break;
        }
      for (; m < S; )
        switch (p[m]) {
          case 0:
            if (p[m - 1] !== 0) {
              m += 2;
              break;
            } else if (p[m - 2] !== 0) {
              m++;
              break;
            }
            c + 3 !== m - 2 && this.trigger("data", p.subarray(c + 3, m - 2));
            do
              m++;
            while (p[m] !== 1 && m < S);
            c = m - 2, m += 3;
            break;
          case 1:
            if (p[m - 1] !== 0 || p[m - 2] !== 0) {
              m += 3;
              break;
            }
            this.trigger("data", p.subarray(c + 3, m - 2)), c = m - 2, m += 3;
            break;
          default:
            m += 3;
            break;
        }
      p = p.subarray(c), m -= c, c = 0;
    }, this.reset = function() {
      p = null, c = 0, this.trigger("reset");
    }, this.flush = function() {
      p && p.byteLength > 3 && this.trigger("data", p.subarray(c + 3)), p = null, c = 0, this.trigger("done");
    }, this.endTimeline = function() {
      this.flush(), this.trigger("endedtimeline");
    };
  }, Hr.prototype = new t(), Is = {
    100: !0,
    110: !0,
    122: !0,
    244: !0,
    44: !0,
    83: !0,
    86: !0,
    118: !0,
    128: !0,
    138: !0,
    139: !0,
    134: !0
  }, bn = function() {
    var c = new Hr(), m, p, g, b, S, D, N;
    bn.prototype.init.call(this), m = this, this.push = function(K) {
      K.type === "video" && (p = K.trackId, g = K.pts, b = K.dts, c.push(K));
    }, c.on("data", function(K) {
      var q = {
        trackId: p,
        pts: g,
        dts: b,
        data: K,
        nalUnitTypeCode: K[0] & 31
      };
      switch (q.nalUnitTypeCode) {
        case 5:
          q.nalUnitType = "slice_layer_without_partitioning_rbsp_idr";
          break;
        case 6:
          q.nalUnitType = "sei_rbsp", q.escapedRBSP = S(K.subarray(1));
          break;
        case 7:
          q.nalUnitType = "seq_parameter_set_rbsp", q.escapedRBSP = S(K.subarray(1)), q.config = D(q.escapedRBSP);
          break;
        case 8:
          q.nalUnitType = "pic_parameter_set_rbsp";
          break;
        case 9:
          q.nalUnitType = "access_unit_delimiter_rbsp";
          break;
      }
      m.trigger("data", q);
    }), c.on("done", function() {
      m.trigger("done");
    }), c.on("partialdone", function() {
      m.trigger("partialdone");
    }), c.on("reset", function() {
      m.trigger("reset");
    }), c.on("endedtimeline", function() {
      m.trigger("endedtimeline");
    }), this.flush = function() {
      c.flush();
    }, this.partialFlush = function() {
      c.partialFlush();
    }, this.reset = function() {
      c.reset();
    }, this.endTimeline = function() {
      c.endTimeline();
    }, N = function(q, Z) {
      var ce = 8, Se = 8, Ae, ye;
      for (Ae = 0; Ae < q; Ae++)
        Se !== 0 && (ye = Z.readExpGolomb(), Se = (ce + ye + 256) % 256), ce = Se === 0 ? ce : Se;
    }, S = function(q) {
      for (var Z = q.byteLength, ce = [], Se = 1, Ae, ye; Se < Z - 2; )
        q[Se] === 0 && q[Se + 1] === 0 && q[Se + 2] === 3 ? (ce.push(Se + 2), Se += 2) : Se++;
      if (ce.length === 0)
        return q;
      Ae = Z - ce.length, ye = new Uint8Array(Ae);
      var Fe = 0;
      for (Se = 0; Se < Ae; Fe++, Se++)
        Fe === ce[0] && (Fe++, ce.shift()), ye[Se] = q[Fe];
      return ye;
    }, D = function(q) {
      var Z = 0, ce = 0, Se = 0, Ae = 0, ye, Fe, Wt, si, $r, Au, cf, ff, hf, Cu, pf, Ot = [1, 1], mf, zr;
      if (ye = new bu(q), Fe = ye.readUnsignedByte(), si = ye.readUnsignedByte(), Wt = ye.readUnsignedByte(), ye.skipUnsignedExpGolomb(), Is[Fe] && ($r = ye.readUnsignedExpGolomb(), $r === 3 && ye.skipBits(1), ye.skipUnsignedExpGolomb(), ye.skipUnsignedExpGolomb(), ye.skipBits(1), ye.readBoolean()))
        for (pf = $r !== 3 ? 8 : 12, zr = 0; zr < pf; zr++)
          ye.readBoolean() && (zr < 6 ? N(16, ye) : N(64, ye));
      if (ye.skipUnsignedExpGolomb(), Au = ye.readUnsignedExpGolomb(), Au === 0)
        ye.readUnsignedExpGolomb();
      else if (Au === 1)
        for (ye.skipBits(1), ye.skipExpGolomb(), ye.skipExpGolomb(), cf = ye.readUnsignedExpGolomb(), zr = 0; zr < cf; zr++)
          ye.skipExpGolomb();
      if (ye.skipUnsignedExpGolomb(), ye.skipBits(1), ff = ye.readUnsignedExpGolomb(), hf = ye.readUnsignedExpGolomb(), Cu = ye.readBits(1), Cu === 0 && ye.skipBits(1), ye.skipBits(1), ye.readBoolean() && (Z = ye.readUnsignedExpGolomb(), ce = ye.readUnsignedExpGolomb(), Se = ye.readUnsignedExpGolomb(), Ae = ye.readUnsignedExpGolomb()), ye.readBoolean() && ye.readBoolean()) {
        switch (mf = ye.readUnsignedByte(), mf) {
          case 1:
            Ot = [1, 1];
            break;
          case 2:
            Ot = [12, 11];
            break;
          case 3:
            Ot = [10, 11];
            break;
          case 4:
            Ot = [16, 11];
            break;
          case 5:
            Ot = [40, 33];
            break;
          case 6:
            Ot = [24, 11];
            break;
          case 7:
            Ot = [20, 11];
            break;
          case 8:
            Ot = [32, 11];
            break;
          case 9:
            Ot = [80, 33];
            break;
          case 10:
            Ot = [18, 11];
            break;
          case 11:
            Ot = [15, 11];
            break;
          case 12:
            Ot = [64, 33];
            break;
          case 13:
            Ot = [160, 99];
            break;
          case 14:
            Ot = [4, 3];
            break;
          case 15:
            Ot = [3, 2];
            break;
          case 16:
            Ot = [2, 1];
            break;
          case 255: {
            Ot = [ye.readUnsignedByte() << 8 | ye.readUnsignedByte(), ye.readUnsignedByte() << 8 | ye.readUnsignedByte()];
            break;
          }
        }
        Ot && Ot[0] / Ot[1];
      }
      return {
        profileIdc: Fe,
        levelIdc: Wt,
        profileCompatibility: si,
        width: (ff + 1) * 16 - Z * 2 - ce * 2,
        height: (2 - Cu) * (hf + 1) * 16 - Se * 2 - Ae * 2,
        sarRatio: Ot
      };
    };
  }, bn.prototype = new t();
  var Su = {
    H264Stream: bn,
    NalByteStream: Hr
  }, gi = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350], Ds = function(c, m) {
    var p = c[m + 6] << 21 | c[m + 7] << 14 | c[m + 8] << 7 | c[m + 9], g = c[m + 5], b = (g & 16) >> 4;
    return p = p >= 0 ? p : 0, b ? p + 20 : p + 10;
  }, Ls = function C(c, m) {
    return c.length - m < 10 || c[m] !== "I".charCodeAt(0) || c[m + 1] !== "D".charCodeAt(0) || c[m + 2] !== "3".charCodeAt(0) ? m : (m += Ds(c, m), C(c, m));
  }, vi = function(c) {
    var m = Ls(c, 0);
    return c.length >= m + 2 && (c[m] & 255) === 255 && (c[m + 1] & 240) === 240 && (c[m + 1] & 22) === 16;
  }, xt = function(c) {
    return c[0] << 21 | c[1] << 14 | c[2] << 7 | c[3];
  }, Eu = function(c, m, p) {
    var g, b = "";
    for (g = m; g < p; g++)
      b += "%" + ("00" + c[g].toString(16)).slice(-2);
    return b;
  }, A = function(c, m, p) {
    return unescape(Eu(c, m, p));
  }, E = function(c, m) {
    var p = (c[m + 5] & 224) >> 5, g = c[m + 4] << 3, b = c[m + 3] & 3 << 11;
    return b | g | p;
  }, w = function(c, m) {
    return c[m] === "I".charCodeAt(0) && c[m + 1] === "D".charCodeAt(0) && c[m + 2] === "3".charCodeAt(0) ? "timed-metadata" : c[m] & !0 && (c[m + 1] & 240) === 240 ? "audio" : null;
  }, x = function(c) {
    for (var m = 0; m + 5 < c.length; ) {
      if (c[m] !== 255 || (c[m + 1] & 246) !== 240) {
        m++;
        continue;
      }
      return gi[(c[m + 2] & 60) >>> 2];
    }
    return null;
  }, R = function(c) {
    var m, p, g, b;
    m = 10, c[5] & 64 && (m += 4, m += xt(c.subarray(10, 14)));
    do {
      if (p = xt(c.subarray(m + 4, m + 8)), p < 1)
        return null;
      if (b = String.fromCharCode(c[m], c[m + 1], c[m + 2], c[m + 3]), b === "PRIV") {
        g = c.subarray(m + 10, m + p + 10);
        for (var S = 0; S < g.byteLength; S++)
          if (g[S] === 0) {
            var D = A(g, 0, S);
            if (D === "com.apple.streaming.transportStreamTimestamp") {
              var N = g.subarray(S + 1), K = (N[3] & 1) << 30 | N[4] << 22 | N[5] << 14 | N[6] << 6 | N[7] >>> 2;
              return K *= 4, K += N[7] & 3, K;
            }
            break;
          }
      }
      m += 10, m += p;
    } while (m < c.byteLength);
    return null;
  }, J = {
    isLikelyAacData: vi,
    parseId3TagSize: Ds,
    parseAdtsSize: E,
    parseType: w,
    parseSampleRate: x,
    parseAacTimestamp: R
  }, j;
  j = function() {
    var c = new Uint8Array(), m = 0;
    j.prototype.init.call(this), this.setTimestamp = function(p) {
      m = p;
    }, this.push = function(p) {
      var g = 0, b = 0, S, D, N, K;
      for (c.length ? (K = c.length, c = new Uint8Array(p.byteLength + K), c.set(c.subarray(0, K)), c.set(p, K)) : c = p; c.length - b >= 3; ) {
        if (c[b] === "I".charCodeAt(0) && c[b + 1] === "D".charCodeAt(0) && c[b + 2] === "3".charCodeAt(0)) {
          if (c.length - b < 10 || (g = J.parseId3TagSize(c, b), b + g > c.length))
            break;
          D = {
            type: "timed-metadata",
            data: c.subarray(b, b + g)
          }, this.trigger("data", D), b += g;
          continue;
        } else if ((c[b] & 255) === 255 && (c[b + 1] & 240) === 240) {
          if (c.length - b < 7 || (g = J.parseAdtsSize(c, b), b + g > c.length))
            break;
          N = {
            type: "audio",
            data: c.subarray(b, b + g),
            pts: m,
            dts: m
          }, this.trigger("data", N), b += g;
          continue;
        }
        b++;
      }
      S = c.length - b, S > 0 ? c = c.subarray(b) : c = new Uint8Array();
    }, this.reset = function() {
      c = new Uint8Array(), this.trigger("reset");
    }, this.endTimeline = function() {
      c = new Uint8Array(), this.trigger("endedtimeline");
    };
  }, j.prototype = new t();
  var re = j, te = ["audioobjecttype", "channelcount", "samplerate", "samplingfrequencyindex", "samplesize"], be = te, Ie = ["width", "height", "profileIdc", "levelIdc", "profileCompatibility", "sarRatio"], $e = Ie, Me = Su.H264Stream, Ce = J.isLikelyAacData, De = et.ONE_SECOND_IN_TS, We, bt, wt, Ke, Ft = function(c, m) {
    m.stream = c, this.trigger("log", m);
  }, Bt = function(c, m) {
    for (var p = Object.keys(m), g = 0; g < p.length; g++) {
      var b = p[g];
      b === "headOfPipeline" || !m[b].on || m[b].on("log", Ft.bind(c, b));
    }
  }, Ut = function(c, m) {
    var p;
    if (c.length !== m.length)
      return !1;
    for (p = 0; p < c.length; p++)
      if (c[p] !== m[p])
        return !1;
    return !0;
  }, tt = function(c, m, p, g, b, S) {
    var D = p - m, N = g - m, K = b - p;
    return {
      start: {
        dts: c,
        pts: c + D
      },
      end: {
        dts: c + N,
        pts: c + K
      },
      prependedContentDuration: S,
      baseMediaDecodeTime: c
    };
  };
  bt = function(c, m) {
    var p = [], g, b = 0, S = 0, D = 1 / 0;
    m = m || {}, g = m.firstSequenceNumber || 0, bt.prototype.init.call(this), this.push = function(N) {
      mi.collectDtsInfo(c, N), c && be.forEach(function(K) {
        c[K] = N[K];
      }), p.push(N);
    }, this.setEarliestDts = function(N) {
      b = N;
    }, this.setVideoBaseMediaDecodeTime = function(N) {
      D = N;
    }, this.setAudioAppendStart = function(N) {
      S = N;
    }, this.flush = function() {
      var N, K, q, Z, ce, Se, Ae;
      if (p.length === 0) {
        this.trigger("done", "AudioSegmentStream");
        return;
      }
      N = fn.trimAdtsFramesByEarliestDts(p, c, b), c.baseMediaDecodeTime = mi.calculateTrackBaseMediaDecodeTime(c, m.keepOriginalTimestamps), Ae = fn.prefixWithSilence(c, N, S, D), c.samples = fn.generateSampleTable(N), q = ae.mdat(fn.concatenateFrameData(N)), p = [], K = ae.moof(g, [c]), Z = new Uint8Array(K.byteLength + q.byteLength), g++, Z.set(K), Z.set(q, K.byteLength), mi.clearDtsInfo(c), ce = Math.ceil(De * 1024 / c.samplerate), N.length && (Se = N.length * ce, this.trigger("segmentTimingInfo", tt(
        et.audioTsToVideoTs(c.baseMediaDecodeTime, c.samplerate),
        N[0].dts,
        N[0].pts,
        N[0].dts + Se,
        N[0].pts + Se,
        Ae || 0
      )), this.trigger("timingInfo", {
        start: N[0].pts,
        end: N[0].pts + Se
      })), this.trigger("data", {
        track: c,
        boxes: Z
      }), this.trigger("done", "AudioSegmentStream");
    }, this.reset = function() {
      mi.clearDtsInfo(c), p = [], this.trigger("reset");
    };
  }, bt.prototype = new t(), We = function(c, m) {
    var p, g = [], b = [], S, D;
    m = m || {}, p = m.firstSequenceNumber || 0, We.prototype.init.call(this), delete c.minPTS, this.gopCache_ = [], this.push = function(N) {
      mi.collectDtsInfo(c, N), N.nalUnitType === "seq_parameter_set_rbsp" && !S && (S = N.config, c.sps = [N.data], $e.forEach(function(K) {
        c[K] = S[K];
      }, this)), N.nalUnitType === "pic_parameter_set_rbsp" && !D && (D = N.data, c.pps = [N.data]), g.push(N);
    }, this.flush = function() {
      for (var N, K, q, Z, ce, Se, Ae = 0, ye, Fe; g.length && g[0].nalUnitType !== "access_unit_delimiter_rbsp"; )
        g.shift();
      if (g.length === 0) {
        this.resetStream_(), this.trigger("done", "VideoSegmentStream");
        return;
      }
      if (N = mt.groupNalsIntoFrames(g), q = mt.groupFramesIntoGops(N), q[0][0].keyFrame || (K = this.getGopForFusion_(g[0], c), K ? (Ae = K.duration, q.unshift(K), q.byteLength += K.byteLength, q.nalCount += K.nalCount, q.pts = K.pts, q.dts = K.dts, q.duration += K.duration) : q = mt.extendFirstKeyFrame(q)), b.length) {
        var Wt;
        if (m.alignGopsAtEnd ? Wt = this.alignGopsAtEnd_(q) : Wt = this.alignGopsAtStart_(q), !Wt) {
          this.gopCache_.unshift({
            gop: q.pop(),
            pps: c.pps,
            sps: c.sps
          }), this.gopCache_.length = Math.min(6, this.gopCache_.length), g = [], this.resetStream_(), this.trigger("done", "VideoSegmentStream");
          return;
        }
        mi.clearDtsInfo(c), q = Wt;
      }
      mi.collectDtsInfo(c, q), c.samples = mt.generateSampleTable(q), ce = ae.mdat(mt.concatenateNalData(q)), c.baseMediaDecodeTime = mi.calculateTrackBaseMediaDecodeTime(c, m.keepOriginalTimestamps), this.trigger("processedGopsInfo", q.map(function(si) {
        return {
          pts: si.pts,
          dts: si.dts,
          byteLength: si.byteLength
        };
      })), ye = q[0], Fe = q[q.length - 1], this.trigger("segmentTimingInfo", tt(c.baseMediaDecodeTime, ye.dts, ye.pts, Fe.dts + Fe.duration, Fe.pts + Fe.duration, Ae)), this.trigger("timingInfo", {
        start: q[0].pts,
        end: q[q.length - 1].pts + q[q.length - 1].duration
      }), this.gopCache_.unshift({
        gop: q.pop(),
        pps: c.pps,
        sps: c.sps
      }), this.gopCache_.length = Math.min(6, this.gopCache_.length), g = [], this.trigger("baseMediaDecodeTime", c.baseMediaDecodeTime), this.trigger("timelineStartInfo", c.timelineStartInfo), Z = ae.moof(p, [c]), Se = new Uint8Array(Z.byteLength + ce.byteLength), p++, Se.set(Z), Se.set(ce, Z.byteLength), this.trigger("data", {
        track: c,
        boxes: Se
      }), this.resetStream_(), this.trigger("done", "VideoSegmentStream");
    }, this.reset = function() {
      this.resetStream_(), g = [], this.gopCache_.length = 0, b.length = 0, this.trigger("reset");
    }, this.resetStream_ = function() {
      mi.clearDtsInfo(c), S = void 0, D = void 0;
    }, this.getGopForFusion_ = function(N) {
      var K = 45e3, q = 1e4, Z = 1 / 0, ce, Se, Ae, ye, Fe;
      for (Fe = 0; Fe < this.gopCache_.length; Fe++)
        ye = this.gopCache_[Fe], Ae = ye.gop, !(!(c.pps && Ut(c.pps[0], ye.pps[0])) || !(c.sps && Ut(c.sps[0], ye.sps[0]))) && (Ae.dts < c.timelineStartInfo.dts || (ce = N.dts - Ae.dts - Ae.duration, ce >= -q && ce <= K && (!Se || Z > ce) && (Se = ye, Z = ce)));
      return Se ? Se.gop : null;
    }, this.alignGopsAtStart_ = function(N) {
      var K, q, Z, ce, Se, Ae, ye, Fe;
      for (Se = N.byteLength, Ae = N.nalCount, ye = N.duration, K = q = 0; K < b.length && q < N.length && (Z = b[K], ce = N[q], Z.pts !== ce.pts); ) {
        if (ce.pts > Z.pts) {
          K++;
          continue;
        }
        q++, Se -= ce.byteLength, Ae -= ce.nalCount, ye -= ce.duration;
      }
      return q === 0 ? N : q === N.length ? null : (Fe = N.slice(q), Fe.byteLength = Se, Fe.duration = ye, Fe.nalCount = Ae, Fe.pts = Fe[0].pts, Fe.dts = Fe[0].dts, Fe);
    }, this.alignGopsAtEnd_ = function(N) {
      var K, q, Z, ce, Se, Ae;
      for (K = b.length - 1, q = N.length - 1, Se = null, Ae = !1; K >= 0 && q >= 0; ) {
        if (Z = b[K], ce = N[q], Z.pts === ce.pts) {
          Ae = !0;
          break;
        }
        if (Z.pts > ce.pts) {
          K--;
          continue;
        }
        K === b.length - 1 && (Se = q), q--;
      }
      if (!Ae && Se === null)
        return null;
      var ye;
      if (Ae ? ye = q : ye = Se, ye === 0)
        return N;
      var Fe = N.slice(ye), Wt = Fe.reduce(function(si, $r) {
        return si.byteLength += $r.byteLength, si.duration += $r.duration, si.nalCount += $r.nalCount, si;
      }, {
        byteLength: 0,
        duration: 0,
        nalCount: 0
      });
      return Fe.byteLength = Wt.byteLength, Fe.duration = Wt.duration, Fe.nalCount = Wt.nalCount, Fe.pts = Fe[0].pts, Fe.dts = Fe[0].dts, Fe;
    }, this.alignGopsWith = function(N) {
      b = N;
    };
  }, We.prototype = new t(), Ke = function(c, m) {
    this.numberOfTracks = 0, this.metadataStream = m, c = c || {}, typeof c.remux < "u" ? this.remuxTracks = !!c.remux : this.remuxTracks = !0, typeof c.keepOriginalTimestamps == "boolean" ? this.keepOriginalTimestamps = c.keepOriginalTimestamps : this.keepOriginalTimestamps = !1, this.pendingTracks = [], this.videoTrack = null, this.pendingBoxes = [], this.pendingCaptions = [], this.pendingMetadata = [], this.pendingBytes = 0, this.emittedTracks = 0, Ke.prototype.init.call(this), this.push = function(p) {
      if (p.text)
        return this.pendingCaptions.push(p);
      if (p.frames)
        return this.pendingMetadata.push(p);
      this.pendingTracks.push(p.track), this.pendingBytes += p.boxes.byteLength, p.track.type === "video" && (this.videoTrack = p.track, this.pendingBoxes.push(p.boxes)), p.track.type === "audio" && (this.audioTrack = p.track, this.pendingBoxes.unshift(p.boxes));
    };
  }, Ke.prototype = new t(), Ke.prototype.flush = function(C) {
    var c = 0, m = {
      captions: [],
      captionStreams: {},
      metadata: [],
      info: {}
    }, p, g, b, S = 0, D;
    if (this.pendingTracks.length < this.numberOfTracks) {
      if (C !== "VideoSegmentStream" && C !== "AudioSegmentStream")
        return;
      if (this.remuxTracks)
        return;
      if (this.pendingTracks.length === 0) {
        this.emittedTracks++, this.emittedTracks >= this.numberOfTracks && (this.trigger("done"), this.emittedTracks = 0);
        return;
      }
    }
    if (this.videoTrack ? (S = this.videoTrack.timelineStartInfo.pts, $e.forEach(function(N) {
      m.info[N] = this.videoTrack[N];
    }, this)) : this.audioTrack && (S = this.audioTrack.timelineStartInfo.pts, be.forEach(function(N) {
      m.info[N] = this.audioTrack[N];
    }, this)), this.videoTrack || this.audioTrack) {
      for (this.pendingTracks.length === 1 ? m.type = this.pendingTracks[0].type : m.type = "combined", this.emittedTracks += this.pendingTracks.length, b = ae.initSegment(this.pendingTracks), m.initSegment = new Uint8Array(b.byteLength), m.initSegment.set(b), m.data = new Uint8Array(this.pendingBytes), D = 0; D < this.pendingBoxes.length; D++)
        m.data.set(this.pendingBoxes[D], c), c += this.pendingBoxes[D].byteLength;
      for (D = 0; D < this.pendingCaptions.length; D++)
        p = this.pendingCaptions[D], p.startTime = et.metadataTsToSeconds(p.startPts, S, this.keepOriginalTimestamps), p.endTime = et.metadataTsToSeconds(p.endPts, S, this.keepOriginalTimestamps), m.captionStreams[p.stream] = !0, m.captions.push(p);
      for (D = 0; D < this.pendingMetadata.length; D++)
        g = this.pendingMetadata[D], g.cueTime = et.metadataTsToSeconds(g.pts, S, this.keepOriginalTimestamps), m.metadata.push(g);
      for (m.metadata.dispatchType = this.metadataStream.dispatchType, this.pendingTracks.length = 0, this.videoTrack = null, this.pendingBoxes.length = 0, this.pendingCaptions.length = 0, this.pendingBytes = 0, this.pendingMetadata.length = 0, this.trigger("data", m), D = 0; D < m.captions.length; D++)
        p = m.captions[D], this.trigger("caption", p);
      for (D = 0; D < m.metadata.length; D++)
        g = m.metadata[D], this.trigger("id3Frame", g);
    }
    this.emittedTracks >= this.numberOfTracks && (this.trigger("done"), this.emittedTracks = 0);
  }, Ke.prototype.setRemux = function(C) {
    this.remuxTracks = C;
  }, wt = function(c) {
    var m = this, p = !0, g, b;
    wt.prototype.init.call(this), c = c || {}, this.baseMediaDecodeTime = c.baseMediaDecodeTime || 0, this.transmuxPipeline_ = {}, this.setupAacPipeline = function() {
      var S = {};
      this.transmuxPipeline_ = S, S.type = "aac", S.metadataStream = new Fi.MetadataStream(), S.aacStream = new re(), S.audioTimestampRolloverStream = new Fi.TimestampRolloverStream("audio"), S.timedMetadataTimestampRolloverStream = new Fi.TimestampRolloverStream("timed-metadata"), S.adtsStream = new Tn(), S.coalesceStream = new Ke(c, S.metadataStream), S.headOfPipeline = S.aacStream, S.aacStream.pipe(S.audioTimestampRolloverStream).pipe(S.adtsStream), S.aacStream.pipe(S.timedMetadataTimestampRolloverStream).pipe(S.metadataStream).pipe(S.coalesceStream), S.metadataStream.on("timestamp", function(D) {
        S.aacStream.setTimestamp(D.timeStamp);
      }), S.aacStream.on("data", function(D) {
        D.type !== "timed-metadata" && D.type !== "audio" || S.audioSegmentStream || (b = b || {
          timelineStartInfo: {
            baseMediaDecodeTime: m.baseMediaDecodeTime
          },
          codec: "adts",
          type: "audio"
        }, S.coalesceStream.numberOfTracks++, S.audioSegmentStream = new bt(b, c), S.audioSegmentStream.on("log", m.getLogTrigger_("audioSegmentStream")), S.audioSegmentStream.on("timingInfo", m.trigger.bind(m, "audioTimingInfo")), S.adtsStream.pipe(S.audioSegmentStream).pipe(S.coalesceStream), m.trigger("trackinfo", {
          hasAudio: !!b,
          hasVideo: !!g
        }));
      }), S.coalesceStream.on("data", this.trigger.bind(this, "data")), S.coalesceStream.on("done", this.trigger.bind(this, "done")), Bt(this, S);
    }, this.setupTsPipeline = function() {
      var S = {};
      this.transmuxPipeline_ = S, S.type = "ts", S.metadataStream = new Fi.MetadataStream(), S.packetStream = new Fi.TransportPacketStream(), S.parseStream = new Fi.TransportParseStream(), S.elementaryStream = new Fi.ElementaryStream(), S.timestampRolloverStream = new Fi.TimestampRolloverStream(), S.adtsStream = new Tn(), S.h264Stream = new Me(), S.captionStream = new Fi.CaptionStream(c), S.coalesceStream = new Ke(c, S.metadataStream), S.headOfPipeline = S.packetStream, S.packetStream.pipe(S.parseStream).pipe(S.elementaryStream).pipe(S.timestampRolloverStream), S.timestampRolloverStream.pipe(S.h264Stream), S.timestampRolloverStream.pipe(S.adtsStream), S.timestampRolloverStream.pipe(S.metadataStream).pipe(S.coalesceStream), S.h264Stream.pipe(S.captionStream).pipe(S.coalesceStream), S.elementaryStream.on("data", function(D) {
        var N;
        if (D.type === "metadata") {
          for (N = D.tracks.length; N--; )
            !g && D.tracks[N].type === "video" ? (g = D.tracks[N], g.timelineStartInfo.baseMediaDecodeTime = m.baseMediaDecodeTime) : !b && D.tracks[N].type === "audio" && (b = D.tracks[N], b.timelineStartInfo.baseMediaDecodeTime = m.baseMediaDecodeTime);
          g && !S.videoSegmentStream && (S.coalesceStream.numberOfTracks++, S.videoSegmentStream = new We(g, c), S.videoSegmentStream.on("log", m.getLogTrigger_("videoSegmentStream")), S.videoSegmentStream.on("timelineStartInfo", function(K) {
            b && !c.keepOriginalTimestamps && (b.timelineStartInfo = K, S.audioSegmentStream.setEarliestDts(K.dts - m.baseMediaDecodeTime));
          }), S.videoSegmentStream.on("processedGopsInfo", m.trigger.bind(m, "gopInfo")), S.videoSegmentStream.on("segmentTimingInfo", m.trigger.bind(m, "videoSegmentTimingInfo")), S.videoSegmentStream.on("baseMediaDecodeTime", function(K) {
            b && S.audioSegmentStream.setVideoBaseMediaDecodeTime(K);
          }), S.videoSegmentStream.on("timingInfo", m.trigger.bind(m, "videoTimingInfo")), S.h264Stream.pipe(S.videoSegmentStream).pipe(S.coalesceStream)), b && !S.audioSegmentStream && (S.coalesceStream.numberOfTracks++, S.audioSegmentStream = new bt(b, c), S.audioSegmentStream.on("log", m.getLogTrigger_("audioSegmentStream")), S.audioSegmentStream.on("timingInfo", m.trigger.bind(m, "audioTimingInfo")), S.audioSegmentStream.on("segmentTimingInfo", m.trigger.bind(m, "audioSegmentTimingInfo")), S.adtsStream.pipe(S.audioSegmentStream).pipe(S.coalesceStream)), m.trigger("trackinfo", {
            hasAudio: !!b,
            hasVideo: !!g
          });
        }
      }), S.coalesceStream.on("data", this.trigger.bind(this, "data")), S.coalesceStream.on("id3Frame", function(D) {
        D.dispatchType = S.metadataStream.dispatchType, m.trigger("id3Frame", D);
      }), S.coalesceStream.on("caption", this.trigger.bind(this, "caption")), S.coalesceStream.on("done", this.trigger.bind(this, "done")), Bt(this, S);
    }, this.setBaseMediaDecodeTime = function(S) {
      var D = this.transmuxPipeline_;
      c.keepOriginalTimestamps || (this.baseMediaDecodeTime = S), b && (b.timelineStartInfo.dts = void 0, b.timelineStartInfo.pts = void 0, mi.clearDtsInfo(b), D.audioTimestampRolloverStream && D.audioTimestampRolloverStream.discontinuity()), g && (D.videoSegmentStream && (D.videoSegmentStream.gopCache_ = []), g.timelineStartInfo.dts = void 0, g.timelineStartInfo.pts = void 0, mi.clearDtsInfo(g), D.captionStream.reset()), D.timestampRolloverStream && D.timestampRolloverStream.discontinuity();
    }, this.setAudioAppendStart = function(S) {
      b && this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(S);
    }, this.setRemux = function(S) {
      var D = this.transmuxPipeline_;
      c.remux = S, D && D.coalesceStream && D.coalesceStream.setRemux(S);
    }, this.alignGopsWith = function(S) {
      g && this.transmuxPipeline_.videoSegmentStream && this.transmuxPipeline_.videoSegmentStream.alignGopsWith(S);
    }, this.getLogTrigger_ = function(S) {
      var D = this;
      return function(N) {
        N.stream = S, D.trigger("log", N);
      };
    }, this.push = function(S) {
      if (p) {
        var D = Ce(S);
        D && this.transmuxPipeline_.type !== "aac" ? this.setupAacPipeline() : !D && this.transmuxPipeline_.type !== "ts" && this.setupTsPipeline(), p = !1;
      }
      this.transmuxPipeline_.headOfPipeline.push(S);
    }, this.flush = function() {
      p = !0, this.transmuxPipeline_.headOfPipeline.flush();
    }, this.endTimeline = function() {
      this.transmuxPipeline_.headOfPipeline.endTimeline();
    }, this.reset = function() {
      this.transmuxPipeline_.headOfPipeline && this.transmuxPipeline_.headOfPipeline.reset();
    }, this.resetCaptions = function() {
      this.transmuxPipeline_.captionStream && this.transmuxPipeline_.captionStream.reset();
    };
  }, wt.prototype = new t();
  var He = {
    Transmuxer: wt,
    VideoSegmentStream: We,
    AudioSegmentStream: bt,
    AUDIO_PROPERTIES: be,
    VIDEO_PROPERTIES: $e,
    generateSegmentTimingInfo: tt
  }, Re = function(c) {
    return c >>> 0;
  }, qe = function(c) {
    return ("00" + c.toString(16)).slice(-2);
  }, lt = {
    toUnsigned: Re,
    toHexString: qe
  }, Dt = function(c) {
    var m = "";
    return m += String.fromCharCode(c[0]), m += String.fromCharCode(c[1]), m += String.fromCharCode(c[2]), m += String.fromCharCode(c[3]), m;
  }, ct = Dt, _i = lt.toUnsigned, ni = function C(c, m) {
    var p = [], g, b, S, D, N;
    if (!m.length)
      return null;
    for (g = 0; g < c.byteLength; )
      b = _i(c[g] << 24 | c[g + 1] << 16 | c[g + 2] << 8 | c[g + 3]), S = ct(c.subarray(g + 4, g + 8)), D = b > 1 ? g + b : c.byteLength, S === m[0] && (m.length === 1 ? p.push(c.subarray(g + 8, D)) : (N = C(c.subarray(g + 8, D), m.slice(1)), N.length && (p = p.concat(N)))), g = D;
    return p;
  }, it = ni, Lt = lt.toUnsigned, qt = e.getUint64, Lr = function(c) {
    var m = {
      version: c[0],
      flags: new Uint8Array(c.subarray(1, 4))
    };
    return m.version === 1 ? m.baseMediaDecodeTime = qt(c.subarray(4)) : m.baseMediaDecodeTime = Lt(c[4] << 24 | c[5] << 16 | c[6] << 8 | c[7]), m;
  }, Sn = Lr, _a = function(c) {
    return {
      isLeading: (c[0] & 12) >>> 2,
      dependsOn: c[0] & 3,
      isDependedOn: (c[1] & 192) >>> 6,
      hasRedundancy: (c[1] & 48) >>> 4,
      paddingValue: (c[1] & 14) >>> 1,
      isNonSyncSample: c[1] & 1,
      degradationPriority: c[2] << 8 | c[3]
    };
  }, En = _a, wi = function(c) {
    var m = {
      version: c[0],
      flags: new Uint8Array(c.subarray(1, 4)),
      samples: []
    }, p = new DataView(c.buffer, c.byteOffset, c.byteLength), g = m.flags[2] & 1, b = m.flags[2] & 4, S = m.flags[1] & 1, D = m.flags[1] & 2, N = m.flags[1] & 4, K = m.flags[1] & 8, q = p.getUint32(4), Z = 8, ce;
    for (g && (m.dataOffset = p.getInt32(Z), Z += 4), b && q && (ce = {
      flags: En(c.subarray(Z, Z + 4))
    }, Z += 4, S && (ce.duration = p.getUint32(Z), Z += 4), D && (ce.size = p.getUint32(Z), Z += 4), K && (m.version === 1 ? ce.compositionTimeOffset = p.getInt32(Z) : ce.compositionTimeOffset = p.getUint32(Z), Z += 4), m.samples.push(ce), q--); q--; )
      ce = {}, S && (ce.duration = p.getUint32(Z), Z += 4), D && (ce.size = p.getUint32(Z), Z += 4), N && (ce.flags = En(c.subarray(Z, Z + 4)), Z += 4), K && (m.version === 1 ? ce.compositionTimeOffset = p.getInt32(Z) : ce.compositionTimeOffset = p.getUint32(Z), Z += 4), m.samples.push(ce);
    return m;
  }, lr = wi, xn = function(c) {
    var m = new DataView(c.buffer, c.byteOffset, c.byteLength), p = {
      version: c[0],
      flags: new Uint8Array(c.subarray(1, 4)),
      trackId: m.getUint32(4)
    }, g = p.flags[2] & 1, b = p.flags[2] & 2, S = p.flags[2] & 8, D = p.flags[2] & 16, N = p.flags[2] & 32, K = p.flags[0] & 65536, q = p.flags[0] & 131072, Z;
    return Z = 8, g && (Z += 4, p.baseDataOffset = m.getUint32(12), Z += 4), b && (p.sampleDescriptionIndex = m.getUint32(Z), Z += 4), S && (p.defaultSampleDuration = m.getUint32(Z), Z += 4), D && (p.defaultSampleSize = m.getUint32(Z), Z += 4), N && (p.defaultSampleFlags = m.getUint32(Z)), K && (p.durationIsEmpty = !0), !g && q && (p.baseDataOffsetIsMoof = !0), p;
  }, Wr = xn, ef = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {}, ya;
  typeof window < "u" ? ya = window : typeof ef < "u" ? ya = ef : typeof self < "u" ? ya = self : ya = {};
  var Ta = ya, A_ = kr.discardEmulationPreventionBytes, C_ = sr.CaptionStream, k_ = function(c, m) {
    for (var p = c, g = 0; g < m.length; g++) {
      var b = m[g];
      if (p < b.size)
        return b;
      p -= b.size;
    }
    return null;
  }, P_ = function(c, m, p) {
    var g = new DataView(c.buffer, c.byteOffset, c.byteLength), b = {
      logs: [],
      seiNals: []
    }, S, D, N, K;
    for (D = 0; D + 4 < c.length; D += N)
      if (N = g.getUint32(D), D += 4, !(N <= 0))
        switch (c[D] & 31) {
          case 6:
            var q = c.subarray(D + 1, D + 1 + N), Z = k_(D, m);
            if (S = {
              nalUnitType: "sei_rbsp",
              size: N,
              data: q,
              escapedRBSP: A_(q),
              trackId: p
            }, Z)
              S.pts = Z.pts, S.dts = Z.dts, K = Z;
            else if (K)
              S.pts = K.pts, S.dts = K.dts;
            else {
              b.logs.push({
                level: "warn",
                message: "We've encountered a nal unit without data at " + D + " for trackId " + p + ". See mux.js#223."
              });
              break;
            }
            b.seiNals.push(S);
            break;
        }
    return b;
  }, I_ = function(c, m, p) {
    var g = m, b = p.defaultSampleDuration || 0, S = p.defaultSampleSize || 0, D = p.trackId, N = [];
    return c.forEach(function(K) {
      var q = lr(K), Z = q.samples;
      Z.forEach(function(ce) {
        ce.duration === void 0 && (ce.duration = b), ce.size === void 0 && (ce.size = S), ce.trackId = D, ce.dts = g, ce.compositionTimeOffset === void 0 && (ce.compositionTimeOffset = 0), typeof g == "bigint" ? (ce.pts = g + Ta.BigInt(ce.compositionTimeOffset), g += Ta.BigInt(ce.duration)) : (ce.pts = g + ce.compositionTimeOffset, g += ce.duration);
      }), N = N.concat(Z);
    }), N;
  }, D_ = function(c, m) {
    var p = it(c, ["moof", "traf"]), g = it(c, ["mdat"]), b = {}, S = [];
    return g.forEach(function(D, N) {
      var K = p[N];
      S.push({
        mdat: D,
        traf: K
      });
    }), S.forEach(function(D) {
      var N = D.mdat, K = D.traf, q = it(K, ["tfhd"]), Z = Wr(q[0]), ce = Z.trackId, Se = it(K, ["tfdt"]), Ae = Se.length > 0 ? Sn(Se[0]).baseMediaDecodeTime : 0, ye = it(K, ["trun"]), Fe, Wt;
      m === ce && ye.length > 0 && (Fe = I_(ye, Ae, Z), Wt = P_(N, Fe, ce), b[ce] || (b[ce] = {
        seiNals: [],
        logs: []
      }), b[ce].seiNals = b[ce].seiNals.concat(Wt.seiNals), b[ce].logs = b[ce].logs.concat(Wt.logs));
    }), b;
  }, L_ = function(c, m, p) {
    var g;
    if (m === null)
      return null;
    g = D_(c, m);
    var b = g[m] || {};
    return {
      seiNals: b.seiNals,
      logs: b.logs,
      timescale: p
    };
  }, O_ = function() {
    var c = !1, m, p, g, b, S, D;
    this.isInitialized = function() {
      return c;
    }, this.init = function(N) {
      m = new C_(), c = !0, D = N ? N.isPartial : !1, m.on("data", function(K) {
        K.startTime = K.startPts / b, K.endTime = K.endPts / b, S.captions.push(K), S.captionStreams[K.stream] = !0;
      }), m.on("log", function(K) {
        S.logs.push(K);
      });
    }, this.isNewInit = function(N, K) {
      return N && N.length === 0 || K && typeof K == "object" && Object.keys(K).length === 0 ? !1 : g !== N[0] || b !== K[g];
    }, this.parse = function(N, K, q) {
      var Z;
      if (this.isInitialized()) {
        if (!K || !q)
          return null;
        if (this.isNewInit(K, q))
          g = K[0], b = q[g];
        else if (g === null || !b)
          return p.push(N), null;
      } else
        return null;
      for (; p.length > 0; ) {
        var ce = p.shift();
        this.parse(ce, K, q);
      }
      return Z = L_(N, g, b), Z && Z.logs && (S.logs = S.logs.concat(Z.logs)), Z === null || !Z.seiNals ? S.logs.length ? {
        logs: S.logs,
        captions: [],
        captionStreams: []
      } : null : (this.pushNals(Z.seiNals), this.flushStream(), S);
    }, this.pushNals = function(N) {
      if (!this.isInitialized() || !N || N.length === 0)
        return null;
      N.forEach(function(K) {
        m.push(K);
      });
    }, this.flushStream = function() {
      if (!this.isInitialized())
        return null;
      D ? m.partialFlush() : m.flush();
    }, this.clearParsedCaptions = function() {
      S.captions = [], S.captionStreams = {}, S.logs = [];
    }, this.resetCaptionStream = function() {
      if (!this.isInitialized())
        return null;
      m.reset();
    }, this.clearAllCaptions = function() {
      this.clearParsedCaptions(), this.resetCaptionStream();
    }, this.reset = function() {
      p = [], g = null, b = null, S ? this.clearParsedCaptions() : S = {
        captions: [],
        captionStreams: {},
        logs: []
      }, this.resetCaptionStream();
    }, this.reset();
  }, R_ = O_, Os = lt.toUnsigned, ba = lt.toHexString, N_ = e.getUint64, tf, rf, nf, af, sf, xu;
  tf = function(c) {
    var m = {}, p = it(c, ["moov", "trak"]);
    return p.reduce(function(g, b) {
      var S, D, N, K, q;
      return S = it(b, ["tkhd"])[0], !S || (D = S[0], N = D === 0 ? 12 : 20, K = Os(S[N] << 24 | S[N + 1] << 16 | S[N + 2] << 8 | S[N + 3]), q = it(b, ["mdia", "mdhd"])[0], !q) ? null : (D = q[0], N = D === 0 ? 12 : 20, g[K] = Os(q[N] << 24 | q[N + 1] << 16 | q[N + 2] << 8 | q[N + 3]), g);
    }, m);
  }, rf = function(c, m) {
    var p;
    p = it(m, ["moof", "traf"]);
    var g = p.reduce(function(b, S) {
      var D = it(S, ["tfhd"])[0], N = Os(D[4] << 24 | D[5] << 16 | D[6] << 8 | D[7]), K = c[N] || 9e4, q = it(S, ["tfdt"])[0], Z = new DataView(q.buffer, q.byteOffset, q.byteLength), ce;
      q[0] === 1 ? ce = N_(q.subarray(4, 12)) : ce = Z.getUint32(4);
      var Se;
      return typeof ce == "bigint" ? Se = ce / Ta.BigInt(K) : typeof ce == "number" && !isNaN(ce) && (Se = ce / K), Se < Number.MAX_SAFE_INTEGER && (Se = Number(Se)), Se < b && (b = Se), b;
    }, 1 / 0);
    return typeof g == "bigint" || isFinite(g) ? g : 0;
  }, nf = function(c, m) {
    var p = it(m, ["moof", "traf"]), g = 0, b = 0, S;
    if (p && p.length) {
      var D = it(p[0], ["tfhd"])[0], N = it(p[0], ["trun"])[0], K = it(p[0], ["tfdt"])[0];
      if (D) {
        var q = Wr(D);
        S = q.trackId;
      }
      if (K) {
        var Z = Sn(K);
        g = Z.baseMediaDecodeTime;
      }
      if (N) {
        var ce = lr(N);
        ce.samples && ce.samples.length && (b = ce.samples[0].compositionTimeOffset || 0);
      }
    }
    var Se = c[S] || 9e4;
    typeof g == "bigint" && (b = Ta.BigInt(b), Se = Ta.BigInt(Se));
    var Ae = (g + b) / Se;
    return typeof Ae == "bigint" && Ae < Number.MAX_SAFE_INTEGER && (Ae = Number(Ae)), Ae;
  }, af = function(c) {
    var m = it(c, ["moov", "trak"]), p = [];
    return m.forEach(function(g) {
      var b = it(g, ["mdia", "hdlr"]), S = it(g, ["tkhd"]);
      b.forEach(function(D, N) {
        var K = ct(D.subarray(8, 12)), q = S[N], Z, ce, Se;
        K === "vide" && (Z = new DataView(q.buffer, q.byteOffset, q.byteLength), ce = Z.getUint8(0), Se = ce === 0 ? Z.getUint32(12) : Z.getUint32(20), p.push(Se));
      });
    }), p;
  }, xu = function(c) {
    var m = c[0], p = m === 0 ? 12 : 20;
    return Os(c[p] << 24 | c[p + 1] << 16 | c[p + 2] << 8 | c[p + 3]);
  }, sf = function(c) {
    var m = it(c, ["moov", "trak"]), p = [];
    return m.forEach(function(g) {
      var b = {}, S = it(g, ["tkhd"])[0], D, N;
      S && (D = new DataView(S.buffer, S.byteOffset, S.byteLength), N = D.getUint8(0), b.id = N === 0 ? D.getUint32(12) : D.getUint32(20));
      var K = it(g, ["mdia", "hdlr"])[0];
      if (K) {
        var q = ct(K.subarray(8, 12));
        q === "vide" ? b.type = "video" : q === "soun" ? b.type = "audio" : b.type = q;
      }
      var Z = it(g, ["mdia", "minf", "stbl", "stsd"])[0];
      if (Z) {
        var ce = Z.subarray(8);
        b.codec = ct(ce.subarray(4, 8));
        var Se = it(ce, [b.codec])[0], Ae, ye;
        Se && (/^[asm]vc[1-9]$/i.test(b.codec) ? (Ae = Se.subarray(78), ye = ct(Ae.subarray(4, 8)), ye === "avcC" && Ae.length > 11 ? (b.codec += ".", b.codec += ba(Ae[9]), b.codec += ba(Ae[10]), b.codec += ba(Ae[11])) : b.codec = "avc1.4d400d") : /^mp4[a,v]$/i.test(b.codec) ? (Ae = Se.subarray(28), ye = ct(Ae.subarray(4, 8)), ye === "esds" && Ae.length > 20 && Ae[19] !== 0 ? (b.codec += "." + ba(Ae[19]), b.codec += "." + ba(Ae[20] >>> 2 & 63).replace(/^0/, "")) : b.codec = "mp4a.40.2") : b.codec = b.codec.toLowerCase());
      }
      var Fe = it(g, ["mdia", "mdhd"])[0];
      Fe && (b.timescale = xu(Fe)), p.push(b);
    }), p;
  };
  var of = {
    findBox: it,
    parseType: ct,
    timescale: tf,
    startTime: rf,
    compositionStartTime: nf,
    videoTrackIds: af,
    tracks: sf,
    getTimescaleFromMediaHeader: xu
  }, uf = function(c) {
    var m = c[1] & 31;
    return m <<= 8, m |= c[2], m;
  }, Rs = function(c) {
    return !!(c[1] & 64);
  }, Ns = function(c) {
    var m = 0;
    return (c[3] & 48) >>> 4 > 1 && (m += c[4] + 1), m;
  }, M_ = function(c, m) {
    var p = uf(c);
    return p === 0 ? "pat" : p === m ? "pmt" : m ? "pes" : null;
  }, F_ = function(c) {
    var m = Rs(c), p = 4 + Ns(c);
    return m && (p += c[p] + 1), (c[p + 10] & 31) << 8 | c[p + 11];
  }, B_ = function(c) {
    var m = {}, p = Rs(c), g = 4 + Ns(c);
    if (p && (g += c[g] + 1), !!(c[g + 5] & 1)) {
      var b, S, D;
      b = (c[g + 1] & 15) << 8 | c[g + 2], S = 3 + b - 4, D = (c[g + 10] & 15) << 8 | c[g + 11];
      for (var N = 12 + D; N < S; ) {
        var K = g + N;
        m[(c[K + 1] & 31) << 8 | c[K + 2]] = c[K], N += ((c[K + 3] & 15) << 8 | c[K + 4]) + 5;
      }
      return m;
    }
  }, U_ = function(c, m) {
    var p = uf(c), g = m[p];
    switch (g) {
      case Ht.H264_STREAM_TYPE:
        return "video";
      case Ht.ADTS_STREAM_TYPE:
        return "audio";
      case Ht.METADATA_STREAM_TYPE:
        return "timed-metadata";
      default:
        return null;
    }
  }, q_ = function(c) {
    var m = Rs(c);
    if (!m)
      return null;
    var p = 4 + Ns(c);
    if (p >= c.byteLength)
      return null;
    var g = null, b;
    return b = c[p + 7], b & 192 && (g = {}, g.pts = (c[p + 9] & 14) << 27 | (c[p + 10] & 255) << 20 | (c[p + 11] & 254) << 12 | (c[p + 12] & 255) << 5 | (c[p + 13] & 254) >>> 3, g.pts *= 4, g.pts += (c[p + 13] & 6) >>> 1, g.dts = g.pts, b & 64 && (g.dts = (c[p + 14] & 14) << 27 | (c[p + 15] & 255) << 20 | (c[p + 16] & 254) << 12 | (c[p + 17] & 255) << 5 | (c[p + 18] & 254) >>> 3, g.dts *= 4, g.dts += (c[p + 18] & 6) >>> 1)), g;
  }, wu = function(c) {
    switch (c) {
      case 5:
        return "slice_layer_without_partitioning_rbsp_idr";
      case 6:
        return "sei_rbsp";
      case 7:
        return "seq_parameter_set_rbsp";
      case 8:
        return "pic_parameter_set_rbsp";
      case 9:
        return "access_unit_delimiter_rbsp";
      default:
        return null;
    }
  }, V_ = function(c) {
    for (var m = 4 + Ns(c), p = c.subarray(m), g = 0, b = 0, S = !1, D; b < p.byteLength - 3; b++)
      if (p[b + 2] === 1) {
        g = b + 5;
        break;
      }
    for (; g < p.byteLength; )
      switch (p[g]) {
        case 0:
          if (p[g - 1] !== 0) {
            g += 2;
            break;
          } else if (p[g - 2] !== 0) {
            g++;
            break;
          }
          b + 3 !== g - 2 && (D = wu(p[b + 3] & 31), D === "slice_layer_without_partitioning_rbsp_idr" && (S = !0));
          do
            g++;
          while (p[g] !== 1 && g < p.length);
          b = g - 2, g += 3;
          break;
        case 1:
          if (p[g - 1] !== 0 || p[g - 2] !== 0) {
            g += 3;
            break;
          }
          D = wu(p[b + 3] & 31), D === "slice_layer_without_partitioning_rbsp_idr" && (S = !0), b = g - 2, g += 3;
          break;
        default:
          g += 3;
          break;
      }
    return p = p.subarray(b), g -= b, b = 0, p && p.byteLength > 3 && (D = wu(p[b + 3] & 31), D === "slice_layer_without_partitioning_rbsp_idr" && (S = !0)), S;
  }, j_ = {
    parseType: M_,
    parsePat: F_,
    parsePmt: B_,
    parsePayloadUnitStartIndicator: Rs,
    parsePesType: U_,
    parsePesTime: q_,
    videoPacketContainsKeyFrame: V_
  }, wn = ma.handleRollover, ht = {};
  ht.ts = j_, ht.aac = J;
  var Gr = et.ONE_SECOND_IN_TS, ai = 188, Xi = 71, H_ = function(c, m) {
    for (var p = 0, g = ai, b, S; g < c.byteLength; ) {
      if (c[p] === Xi && c[g] === Xi) {
        switch (b = c.subarray(p, g), S = ht.ts.parseType(b, m.pid), S) {
          case "pat":
            m.pid = ht.ts.parsePat(b);
            break;
          case "pmt":
            var D = ht.ts.parsePmt(b);
            m.table = m.table || {}, Object.keys(D).forEach(function(N) {
              m.table[N] = D[N];
            });
            break;
        }
        p += ai, g += ai;
        continue;
      }
      p++, g++;
    }
  }, lf = function(c, m, p) {
    for (var g = 0, b = ai, S, D, N, K, q, Z = !1; b <= c.byteLength; ) {
      if (c[g] === Xi && (c[b] === Xi || b === c.byteLength)) {
        switch (S = c.subarray(g, b), D = ht.ts.parseType(S, m.pid), D) {
          case "pes":
            N = ht.ts.parsePesType(S, m.table), K = ht.ts.parsePayloadUnitStartIndicator(S), N === "audio" && K && (q = ht.ts.parsePesTime(S), q && (q.type = "audio", p.audio.push(q), Z = !0));
            break;
        }
        if (Z)
          break;
        g += ai, b += ai;
        continue;
      }
      g++, b++;
    }
    for (b = c.byteLength, g = b - ai, Z = !1; g >= 0; ) {
      if (c[g] === Xi && (c[b] === Xi || b === c.byteLength)) {
        switch (S = c.subarray(g, b), D = ht.ts.parseType(S, m.pid), D) {
          case "pes":
            N = ht.ts.parsePesType(S, m.table), K = ht.ts.parsePayloadUnitStartIndicator(S), N === "audio" && K && (q = ht.ts.parsePesTime(S), q && (q.type = "audio", p.audio.push(q), Z = !0));
            break;
        }
        if (Z)
          break;
        g -= ai, b -= ai;
        continue;
      }
      g--, b--;
    }
  }, W_ = function(c, m, p) {
    for (var g = 0, b = ai, S, D, N, K, q, Z, ce, Se, Ae = !1, ye = {
      data: [],
      size: 0
    }; b < c.byteLength; ) {
      if (c[g] === Xi && c[b] === Xi) {
        switch (S = c.subarray(g, b), D = ht.ts.parseType(S, m.pid), D) {
          case "pes":
            if (N = ht.ts.parsePesType(S, m.table), K = ht.ts.parsePayloadUnitStartIndicator(S), N === "video" && (K && !Ae && (q = ht.ts.parsePesTime(S), q && (q.type = "video", p.video.push(q), Ae = !0)), !p.firstKeyFrame)) {
              if (K && ye.size !== 0) {
                for (Z = new Uint8Array(ye.size), ce = 0; ye.data.length; )
                  Se = ye.data.shift(), Z.set(Se, ce), ce += Se.byteLength;
                if (ht.ts.videoPacketContainsKeyFrame(Z)) {
                  var Fe = ht.ts.parsePesTime(Z);
                  Fe ? (p.firstKeyFrame = Fe, p.firstKeyFrame.type = "video") : console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.");
                }
                ye.size = 0;
              }
              ye.data.push(S), ye.size += S.byteLength;
            }
            break;
        }
        if (Ae && p.firstKeyFrame)
          break;
        g += ai, b += ai;
        continue;
      }
      g++, b++;
    }
    for (b = c.byteLength, g = b - ai, Ae = !1; g >= 0; ) {
      if (c[g] === Xi && c[b] === Xi) {
        switch (S = c.subarray(g, b), D = ht.ts.parseType(S, m.pid), D) {
          case "pes":
            N = ht.ts.parsePesType(S, m.table), K = ht.ts.parsePayloadUnitStartIndicator(S), N === "video" && K && (q = ht.ts.parsePesTime(S), q && (q.type = "video", p.video.push(q), Ae = !0));
            break;
        }
        if (Ae)
          break;
        g -= ai, b -= ai;
        continue;
      }
      g--, b--;
    }
  }, G_ = function(c, m) {
    if (c.audio && c.audio.length) {
      var p = m;
      (typeof p > "u" || isNaN(p)) && (p = c.audio[0].dts), c.audio.forEach(function(S) {
        S.dts = wn(S.dts, p), S.pts = wn(S.pts, p), S.dtsTime = S.dts / Gr, S.ptsTime = S.pts / Gr;
      });
    }
    if (c.video && c.video.length) {
      var g = m;
      if ((typeof g > "u" || isNaN(g)) && (g = c.video[0].dts), c.video.forEach(function(S) {
        S.dts = wn(S.dts, g), S.pts = wn(S.pts, g), S.dtsTime = S.dts / Gr, S.ptsTime = S.pts / Gr;
      }), c.firstKeyFrame) {
        var b = c.firstKeyFrame;
        b.dts = wn(b.dts, g), b.pts = wn(b.pts, g), b.dtsTime = b.dts / Gr, b.ptsTime = b.pts / Gr;
      }
    }
  }, $_ = function(c) {
    for (var m = !1, p = 0, g = null, b = null, S = 0, D = 0, N; c.length - D >= 3; ) {
      var K = ht.aac.parseType(c, D);
      switch (K) {
        case "timed-metadata":
          if (c.length - D < 10) {
            m = !0;
            break;
          }
          if (S = ht.aac.parseId3TagSize(c, D), S > c.length) {
            m = !0;
            break;
          }
          b === null && (N = c.subarray(D, D + S), b = ht.aac.parseAacTimestamp(N)), D += S;
          break;
        case "audio":
          if (c.length - D < 7) {
            m = !0;
            break;
          }
          if (S = ht.aac.parseAdtsSize(c, D), S > c.length) {
            m = !0;
            break;
          }
          g === null && (N = c.subarray(D, D + S), g = ht.aac.parseSampleRate(N)), p++, D += S;
          break;
        default:
          D++;
          break;
      }
      if (m)
        return null;
    }
    if (g === null || b === null)
      return null;
    var q = Gr / g, Z = {
      audio: [{
        type: "audio",
        dts: b,
        pts: b
      }, {
        type: "audio",
        dts: b + p * 1024 * q,
        pts: b + p * 1024 * q
      }]
    };
    return Z;
  }, z_ = function(c) {
    var m = {
      pid: null,
      table: null
    }, p = {};
    H_(c, m);
    for (var g in m.table)
      if (m.table.hasOwnProperty(g)) {
        var b = m.table[g];
        switch (b) {
          case Ht.H264_STREAM_TYPE:
            p.video = [], W_(c, m, p), p.video.length === 0 && delete p.video;
            break;
          case Ht.ADTS_STREAM_TYPE:
            p.audio = [], lf(c, m, p), p.audio.length === 0 && delete p.audio;
            break;
        }
      }
    return p;
  }, K_ = function(c, m) {
    var p = ht.aac.isLikelyAacData(c), g;
    return p ? g = $_(c) : g = z_(c), !g || !g.audio && !g.video ? null : (G_(g, m), g);
  }, X_ = {
    inspect: K_,
    parseAudioPes_: lf
  }, Q_ = function(c, m) {
    m.on("data", function(p) {
      var g = p.initSegment;
      p.initSegment = {
        data: g.buffer,
        byteOffset: g.byteOffset,
        byteLength: g.byteLength
      };
      var b = p.data;
      p.data = b.buffer, c.postMessage({
        action: "data",
        segment: p,
        byteOffset: b.byteOffset,
        byteLength: b.byteLength
      }, [p.data]);
    }), m.on("done", function(p) {
      c.postMessage({
        action: "done"
      });
    }), m.on("gopInfo", function(p) {
      c.postMessage({
        action: "gopInfo",
        gopInfo: p
      });
    }), m.on("videoSegmentTimingInfo", function(p) {
      var g = {
        start: {
          decode: et.videoTsToSeconds(p.start.dts),
          presentation: et.videoTsToSeconds(p.start.pts)
        },
        end: {
          decode: et.videoTsToSeconds(p.end.dts),
          presentation: et.videoTsToSeconds(p.end.pts)
        },
        baseMediaDecodeTime: et.videoTsToSeconds(p.baseMediaDecodeTime)
      };
      p.prependedContentDuration && (g.prependedContentDuration = et.videoTsToSeconds(p.prependedContentDuration)), c.postMessage({
        action: "videoSegmentTimingInfo",
        videoSegmentTimingInfo: g
      });
    }), m.on("audioSegmentTimingInfo", function(p) {
      var g = {
        start: {
          decode: et.videoTsToSeconds(p.start.dts),
          presentation: et.videoTsToSeconds(p.start.pts)
        },
        end: {
          decode: et.videoTsToSeconds(p.end.dts),
          presentation: et.videoTsToSeconds(p.end.pts)
        },
        baseMediaDecodeTime: et.videoTsToSeconds(p.baseMediaDecodeTime)
      };
      p.prependedContentDuration && (g.prependedContentDuration = et.videoTsToSeconds(p.prependedContentDuration)), c.postMessage({
        action: "audioSegmentTimingInfo",
        audioSegmentTimingInfo: g
      });
    }), m.on("id3Frame", function(p) {
      c.postMessage({
        action: "id3Frame",
        id3Frame: p
      });
    }), m.on("caption", function(p) {
      c.postMessage({
        action: "caption",
        caption: p
      });
    }), m.on("trackinfo", function(p) {
      c.postMessage({
        action: "trackinfo",
        trackInfo: p
      });
    }), m.on("audioTimingInfo", function(p) {
      c.postMessage({
        action: "audioTimingInfo",
        audioTimingInfo: {
          start: et.videoTsToSeconds(p.start),
          end: et.videoTsToSeconds(p.end)
        }
      });
    }), m.on("videoTimingInfo", function(p) {
      c.postMessage({
        action: "videoTimingInfo",
        videoTimingInfo: {
          start: et.videoTsToSeconds(p.start),
          end: et.videoTsToSeconds(p.end)
        }
      });
    }), m.on("log", function(p) {
      c.postMessage({
        action: "log",
        log: p
      });
    });
  }, df = /* @__PURE__ */ function() {
    function C(m, p) {
      this.options = p || {}, this.self = m, this.init();
    }
    var c = C.prototype;
    return c.init = function() {
      this.transmuxer && this.transmuxer.dispose(), this.transmuxer = new He.Transmuxer(this.options), Q_(this.self, this.transmuxer);
    }, c.pushMp4Captions = function(p) {
      this.captionParser || (this.captionParser = new R_(), this.captionParser.init());
      var g = new Uint8Array(p.data, p.byteOffset, p.byteLength), b = this.captionParser.parse(g, p.trackIds, p.timescales);
      this.self.postMessage({
        action: "mp4Captions",
        captions: b && b.captions || [],
        logs: b && b.logs || [],
        data: g.buffer
      }, [g.buffer]);
    }, c.probeMp4StartTime = function(p) {
      var g = p.timescales, b = p.data, S = of.startTime(g, b);
      this.self.postMessage({
        action: "probeMp4StartTime",
        startTime: S,
        data: b
      }, [b.buffer]);
    }, c.probeMp4Tracks = function(p) {
      var g = p.data, b = of.tracks(g);
      this.self.postMessage({
        action: "probeMp4Tracks",
        tracks: b,
        data: g
      }, [g.buffer]);
    }, c.probeTs = function(p) {
      var g = p.data, b = p.baseStartTime, S = typeof b == "number" && !isNaN(b) ? b * et.ONE_SECOND_IN_TS : void 0, D = X_.inspect(g, S), N = null;
      D && (N = {
        hasVideo: D.video && D.video.length === 2 || !1,
        hasAudio: D.audio && D.audio.length === 2 || !1
      }, N.hasVideo && (N.videoStart = D.video[0].ptsTime), N.hasAudio && (N.audioStart = D.audio[0].ptsTime)), this.self.postMessage({
        action: "probeTs",
        result: N,
        data: g
      }, [g.buffer]);
    }, c.clearAllMp4Captions = function() {
      this.captionParser && this.captionParser.clearAllCaptions();
    }, c.clearParsedMp4Captions = function() {
      this.captionParser && this.captionParser.clearParsedCaptions();
    }, c.push = function(p) {
      var g = new Uint8Array(p.data, p.byteOffset, p.byteLength);
      this.transmuxer.push(g);
    }, c.reset = function() {
      this.transmuxer.reset();
    }, c.setTimestampOffset = function(p) {
      var g = p.timestampOffset || 0;
      this.transmuxer.setBaseMediaDecodeTime(Math.round(et.secondsToVideoTs(g)));
    }, c.setAudioAppendStart = function(p) {
      this.transmuxer.setAudioAppendStart(Math.ceil(et.secondsToVideoTs(p.appendStart)));
    }, c.setRemux = function(p) {
      this.transmuxer.setRemux(p.remux);
    }, c.flush = function(p) {
      this.transmuxer.flush(), self.postMessage({
        action: "done",
        type: "transmuxed"
      });
    }, c.endTimeline = function() {
      this.transmuxer.endTimeline(), self.postMessage({
        action: "endedtimeline",
        type: "transmuxed"
      });
    }, c.alignGopsWith = function(p) {
      this.transmuxer.alignGopsWith(p.gopsToAlignWith.slice());
    }, C;
  }();
  self.onmessage = function(C) {
    if (C.data.action === "init" && C.data.options) {
      this.messageHandlers = new df(self, C.data.options);
      return;
    }
    this.messageHandlers || (this.messageHandlers = new df(self)), C.data && C.data.action && C.data.action !== "init" && this.messageHandlers[C.data.action] && this.messageHandlers[C.data.action](C.data);
  };
})), cE = yv(dE), fE = function(t, i, r) {
  var e = t.data.segment, a = e.type, s = e.initSegment, o = e.captions, u = e.captionStreams, l = e.metadata, d = e.videoFrameDtsTime, h = e.videoFramePtsTime;
  i.buffer.push({
    captions: o,
    captionStreams: u,
    metadata: l
  });
  var f = t.data.segment.boxes || {
    data: t.data.segment.data
  }, _ = {
    type: a,
    data: new Uint8Array(f.data, f.data.byteOffset, f.data.byteLength),
    initSegment: new Uint8Array(s.data, s.byteOffset, s.byteLength)
  };
  typeof d < "u" && (_.videoFrameDtsTime = d), typeof h < "u" && (_.videoFramePtsTime = h), r(_);
}, hE = function(t) {
  var i = t.transmuxedData, r = t.callback;
  i.buffer = [], r(i);
}, pE = function(t, i) {
  i.gopInfo = t.data.gopInfo;
}, Sv = function(t) {
  var i = t.transmuxer, r = t.bytes, e = t.audioAppendStart, a = t.gopsToAlignWith, s = t.remux, o = t.onData, u = t.onTrackInfo, l = t.onAudioTimingInfo, d = t.onVideoTimingInfo, h = t.onVideoSegmentTimingInfo, f = t.onAudioSegmentTimingInfo, _ = t.onId3, v = t.onCaptions, y = t.onDone, T = t.onEndedTimeline, I = t.onTransmuxerLog, V = t.isEndOfTimeline, $ = {
    buffer: []
  }, k = V, P = function(ie) {
    i.currentTransmux === t && (ie.data.action === "data" && fE(ie, $, o), ie.data.action === "trackinfo" && u(ie.data.trackInfo), ie.data.action === "gopInfo" && pE(ie, $), ie.data.action === "audioTimingInfo" && l(ie.data.audioTimingInfo), ie.data.action === "videoTimingInfo" && d(ie.data.videoTimingInfo), ie.data.action === "videoSegmentTimingInfo" && h(ie.data.videoSegmentTimingInfo), ie.data.action === "audioSegmentTimingInfo" && f(ie.data.audioSegmentTimingInfo), ie.data.action === "id3Frame" && _([ie.data.id3Frame], ie.data.id3Frame.dispatchType), ie.data.action === "caption" && v(ie.data.caption), ie.data.action === "endedtimeline" && (k = !1, T()), ie.data.action === "log" && I(ie.data.log), ie.data.type === "transmuxed" && (k || (i.onmessage = null, hE({
      transmuxedData: $,
      callback: y
    }), Ev(i))));
  };
  if (i.onmessage = P, e && i.postMessage({
    action: "setAudioAppendStart",
    appendStart: e
  }), Array.isArray(a) && i.postMessage({
    action: "alignGopsWith",
    gopsToAlignWith: a
  }), typeof s < "u" && i.postMessage({
    action: "setRemux",
    remux: s
  }), r.byteLength) {
    var L = r instanceof ArrayBuffer ? r : r.buffer, O = r instanceof ArrayBuffer ? 0 : r.byteOffset;
    i.postMessage({
      action: "push",
      data: L,
      byteOffset: O,
      byteLength: r.byteLength
    }, [L]);
  }
  V && i.postMessage({
    action: "endTimeline"
  }), i.postMessage({
    action: "flush"
  });
}, Ev = function(t) {
  t.currentTransmux = null, t.transmuxQueue.length && (t.currentTransmux = t.transmuxQueue.shift(), typeof t.currentTransmux == "function" ? t.currentTransmux() : Sv(t.currentTransmux));
}, wh = function(t, i) {
  t.postMessage({
    action: i
  }), Ev(t);
}, xv = function(t, i) {
  if (!i.currentTransmux) {
    i.currentTransmux = t, wh(i, t);
    return;
  }
  i.transmuxQueue.push(wh.bind(null, i, t));
}, mE = function(t) {
  xv("reset", t);
}, gE = function(t) {
  xv("endTimeline", t);
}, wv = function(t) {
  if (!t.transmuxer.currentTransmux) {
    t.transmuxer.currentTransmux = t, Sv(t);
    return;
  }
  t.transmuxer.transmuxQueue.push(t);
}, vE = function(t) {
  var i = new cE();
  i.currentTransmux = null, i.transmuxQueue = [];
  var r = i.terminate;
  return i.terminate = function() {
    return i.currentTransmux = null, i.transmuxQueue.length = 0, r.call(i);
  }, i.postMessage({
    action: "init",
    options: t
  }), i;
}, Qu = {
  reset: mE,
  endTimeline: gE,
  transmux: wv,
  createTransmuxer: vE
}, wo = function(t) {
  var i = t.transmuxer, r = t.endAction || t.action, e = t.callback, a = Ri({}, t, {
    endAction: null,
    transmuxer: null,
    callback: null
  }), s = function l(d) {
    d.data.action === r && (i.removeEventListener("message", l), d.data.data && (d.data.data = new Uint8Array(d.data.data, t.byteOffset || 0, t.byteLength || d.data.data.byteLength), t.data && (t.data = d.data.data)), e(d.data));
  };
  if (i.addEventListener("message", s), t.data) {
    var o = t.data instanceof ArrayBuffer;
    a.byteOffset = o ? 0 : t.data.byteOffset, a.byteLength = t.data.byteLength;
    var u = [o ? t.data : t.data.buffer];
    i.postMessage(a, u);
  } else
    i.postMessage(a);
}, er = {
  FAILURE: 2,
  TIMEOUT: -101,
  ABORTED: -102
}, Sd = function(t) {
  t.forEach(function(i) {
    i.abort();
  });
}, _E = function(t) {
  return {
    bandwidth: t.bandwidth,
    bytesReceived: t.bytesReceived || 0,
    roundTripTime: t.roundTripTime || 0
  };
}, yE = function(t) {
  var i = t.target, r = Date.now() - i.requestTime, e = {
    bandwidth: 1 / 0,
    bytesReceived: 0,
    roundTripTime: r || 0
  };
  return e.bytesReceived = t.loaded, e.bandwidth = Math.floor(e.bytesReceived / e.roundTripTime * 8 * 1e3), e;
}, Fc = function(t, i) {
  return i.timedout ? {
    status: i.status,
    message: "HLS request timed-out at URL: " + i.uri,
    code: er.TIMEOUT,
    xhr: i
  } : i.aborted ? {
    status: i.status,
    message: "HLS request aborted at URL: " + i.uri,
    code: er.ABORTED,
    xhr: i
  } : t ? {
    status: i.status,
    message: "HLS request errored at URL: " + i.uri,
    code: er.FAILURE,
    xhr: i
  } : i.responseType === "arraybuffer" && i.response.byteLength === 0 ? {
    status: i.status,
    message: "Empty HLS response at URL: " + i.uri,
    code: er.FAILURE,
    xhr: i
  } : null;
}, Ah = function(t, i, r) {
  return function(e, a) {
    var s = a.response, o = Fc(e, a);
    if (o)
      return r(o, t);
    if (s.byteLength !== 16)
      return r({
        status: a.status,
        message: "Invalid HLS key at URL: " + a.uri,
        code: er.FAILURE,
        xhr: a
      }, t);
    for (var u = new DataView(s), l = new Uint32Array([u.getUint32(0), u.getUint32(4), u.getUint32(8), u.getUint32(12)]), d = 0; d < i.length; d++)
      i[d].bytes = l;
    return r(null, t);
  };
}, Av = function(t, i) {
  var r = Jd(t.map.bytes);
  if (r !== "mp4") {
    var e = t.map.resolvedUri || t.map.uri;
    return i({
      internal: !0,
      message: "Found unsupported " + (r || "unknown") + " container for initialization segment at URL: " + e,
      code: er.FAILURE
    });
  }
  wo({
    action: "probeMp4Tracks",
    data: t.map.bytes,
    transmuxer: t.transmuxer,
    callback: function(s) {
      var o = s.tracks, u = s.data;
      return t.map.bytes = u, o.forEach(function(l) {
        t.map.tracks = t.map.tracks || {}, !t.map.tracks[l.type] && (t.map.tracks[l.type] = l, typeof l.id == "number" && l.timescale && (t.map.timescales = t.map.timescales || {}, t.map.timescales[l.id] = l.timescale));
      }), i(null);
    }
  });
}, TE = function(t) {
  var i = t.segment, r = t.finishProcessingFn;
  return function(e, a) {
    var s = Fc(e, a);
    if (s)
      return r(s, i);
    var o = new Uint8Array(a.response);
    if (i.map.key)
      return i.map.encryptedBytes = o, r(null, i);
    i.map.bytes = o, Av(i, function(u) {
      if (u)
        return u.xhr = a, u.status = a.status, r(u, i);
      r(null, i);
    });
  };
}, bE = function(t) {
  var i = t.segment, r = t.finishProcessingFn, e = t.responseType;
  return function(a, s) {
    var o = Fc(a, s);
    if (o)
      return r(o, i);
    var u = e === "arraybuffer" || !s.responseText ? s.response : uE(s.responseText.substring(i.lastReachedChar || 0));
    return i.stats = _E(s), i.key ? i.encryptedBytes = new Uint8Array(u) : i.bytes = new Uint8Array(u), r(null, i);
  };
}, SE = function(t) {
  var i = t.segment, r = t.bytes, e = t.trackInfoFn, a = t.timingInfoFn, s = t.videoSegmentTimingInfoFn, o = t.audioSegmentTimingInfoFn, u = t.id3Fn, l = t.captionsFn, d = t.isEndOfTimeline, h = t.endedTimelineFn, f = t.dataFn, _ = t.doneFn, v = t.onTransmuxerLog, y = i.map && i.map.tracks || {}, T = Boolean(y.audio && y.video), I = a.bind(null, i, "audio", "start"), V = a.bind(null, i, "audio", "end"), $ = a.bind(null, i, "video", "start"), k = a.bind(null, i, "video", "end"), P = function() {
    return wv({
      bytes: r,
      transmuxer: i.transmuxer,
      audioAppendStart: i.audioAppendStart,
      gopsToAlignWith: i.gopsToAlignWith,
      remux: T,
      onData: function(U) {
        U.type = U.type === "combined" ? "video" : U.type, f(i, U);
      },
      onTrackInfo: function(U) {
        e && (T && (U.isMuxed = !0), e(i, U));
      },
      onAudioTimingInfo: function(U) {
        I && typeof U.start < "u" && (I(U.start), I = null), V && typeof U.end < "u" && V(U.end);
      },
      onVideoTimingInfo: function(U) {
        $ && typeof U.start < "u" && ($(U.start), $ = null), k && typeof U.end < "u" && k(U.end);
      },
      onVideoSegmentTimingInfo: function(U) {
        s(U);
      },
      onAudioSegmentTimingInfo: function(U) {
        o(U);
      },
      onId3: function(U, ie) {
        u(i, U, ie);
      },
      onCaptions: function(U) {
        l(i, [U]);
      },
      isEndOfTimeline: d,
      onEndedTimeline: function() {
        h();
      },
      onTransmuxerLog: v,
      onDone: function(U) {
        !_ || (U.type = U.type === "combined" ? "video" : U.type, _(null, i, U));
      }
    });
  };
  wo({
    action: "probeTs",
    transmuxer: i.transmuxer,
    data: r,
    baseStartTime: i.baseStartTime,
    callback: function(O) {
      i.bytes = r = O.data;
      var U = O.result;
      U && (e(i, {
        hasAudio: U.hasAudio,
        hasVideo: U.hasVideo,
        isMuxed: T
      }), e = null, U.hasAudio && !T && I(U.audioStart), U.hasVideo && $(U.videoStart), I = null, $ = null), P();
    }
  });
}, Cv = function(t) {
  var i = t.segment, r = t.bytes, e = t.trackInfoFn, a = t.timingInfoFn, s = t.videoSegmentTimingInfoFn, o = t.audioSegmentTimingInfoFn, u = t.id3Fn, l = t.captionsFn, d = t.isEndOfTimeline, h = t.endedTimelineFn, f = t.dataFn, _ = t.doneFn, v = t.onTransmuxerLog, y = new Uint8Array(r);
  if (GT(y)) {
    i.isFmp4 = !0;
    var T = i.map.tracks, I = {
      isFmp4: !0,
      hasVideo: !!T.video,
      hasAudio: !!T.audio
    };
    T.audio && T.audio.codec && T.audio.codec !== "enca" && (I.audioCodec = T.audio.codec), T.video && T.video.codec && T.video.codec !== "encv" && (I.videoCodec = T.video.codec), T.video && T.audio && (I.isMuxed = !0), e(i, I);
    var V = function(k) {
      f(i, {
        data: y,
        type: I.hasAudio && !I.isMuxed ? "audio" : "video"
      }), k && k.length && l(i, k), _(null, i, {});
    };
    wo({
      action: "probeMp4StartTime",
      timescales: i.map.timescales,
      data: y,
      transmuxer: i.transmuxer,
      callback: function(k) {
        var P = k.data, L = k.startTime;
        if (r = P.buffer, i.bytes = y = P, I.hasAudio && !I.isMuxed && a(i, "audio", "start", L), I.hasVideo && a(i, "video", "start", L), !T.video || !P.byteLength || !i.transmuxer) {
          V();
          return;
        }
        wo({
          action: "pushMp4Captions",
          endAction: "mp4Captions",
          transmuxer: i.transmuxer,
          data: y,
          timescales: i.map.timescales,
          trackIds: [T.video.id],
          callback: function(U) {
            r = U.data.buffer, i.bytes = y = U.data, U.logs.forEach(function(ie) {
              v(G.mergeOptions(ie, {
                stream: "mp4CaptionParser"
              }));
            }), V(U.captions);
          }
        });
      }
    });
    return;
  }
  if (!i.transmuxer) {
    _(null, i, {});
    return;
  }
  if (typeof i.container > "u" && (i.container = Jd(y)), i.container !== "ts" && i.container !== "aac") {
    e(i, {
      hasAudio: !1,
      hasVideo: !1
    }), _(null, i, {});
    return;
  }
  SE({
    segment: i,
    bytes: r,
    trackInfoFn: e,
    timingInfoFn: a,
    videoSegmentTimingInfoFn: s,
    audioSegmentTimingInfoFn: o,
    id3Fn: u,
    captionsFn: l,
    isEndOfTimeline: d,
    endedTimelineFn: h,
    dataFn: f,
    doneFn: _,
    onTransmuxerLog: v
  });
}, kv = function(t, i) {
  var r = t.id, e = t.key, a = t.encryptedBytes, s = t.decryptionWorker, o = function l(d) {
    if (d.data.source === r) {
      s.removeEventListener("message", l);
      var h = d.data.decrypted;
      i(new Uint8Array(h.bytes, h.byteOffset, h.byteLength));
    }
  };
  s.addEventListener("message", o);
  var u;
  e.bytes.slice ? u = e.bytes.slice() : u = new Uint32Array(Array.prototype.slice.call(e.bytes)), s.postMessage(hv({
    source: r,
    encrypted: a,
    key: u,
    iv: e.iv
  }), [a.buffer, u.buffer]);
}, EE = function(t) {
  var i = t.decryptionWorker, r = t.segment, e = t.trackInfoFn, a = t.timingInfoFn, s = t.videoSegmentTimingInfoFn, o = t.audioSegmentTimingInfoFn, u = t.id3Fn, l = t.captionsFn, d = t.isEndOfTimeline, h = t.endedTimelineFn, f = t.dataFn, _ = t.doneFn, v = t.onTransmuxerLog;
  kv({
    id: r.requestId,
    key: r.key,
    encryptedBytes: r.encryptedBytes,
    decryptionWorker: i
  }, function(y) {
    r.bytes = y, Cv({
      segment: r,
      bytes: r.bytes,
      trackInfoFn: e,
      timingInfoFn: a,
      videoSegmentTimingInfoFn: s,
      audioSegmentTimingInfoFn: o,
      id3Fn: u,
      captionsFn: l,
      isEndOfTimeline: d,
      endedTimelineFn: h,
      dataFn: f,
      doneFn: _,
      onTransmuxerLog: v
    });
  });
}, xE = function(t) {
  var i = t.activeXhrs, r = t.decryptionWorker, e = t.trackInfoFn, a = t.timingInfoFn, s = t.videoSegmentTimingInfoFn, o = t.audioSegmentTimingInfoFn, u = t.id3Fn, l = t.captionsFn, d = t.isEndOfTimeline, h = t.endedTimelineFn, f = t.dataFn, _ = t.doneFn, v = t.onTransmuxerLog, y = 0, T = !1;
  return function(I, V) {
    if (!T) {
      if (I)
        return T = !0, Sd(i), _(I, V);
      if (y += 1, y === i.length) {
        var $ = function() {
          if (V.encryptedBytes)
            return EE({
              decryptionWorker: r,
              segment: V,
              trackInfoFn: e,
              timingInfoFn: a,
              videoSegmentTimingInfoFn: s,
              audioSegmentTimingInfoFn: o,
              id3Fn: u,
              captionsFn: l,
              isEndOfTimeline: d,
              endedTimelineFn: h,
              dataFn: f,
              doneFn: _,
              onTransmuxerLog: v
            });
          Cv({
            segment: V,
            bytes: V.bytes,
            trackInfoFn: e,
            timingInfoFn: a,
            videoSegmentTimingInfoFn: s,
            audioSegmentTimingInfoFn: o,
            id3Fn: u,
            captionsFn: l,
            isEndOfTimeline: d,
            endedTimelineFn: h,
            dataFn: f,
            doneFn: _,
            onTransmuxerLog: v
          });
        };
        if (V.endOfAllRequests = Date.now(), V.map && V.map.encryptedBytes && !V.map.bytes)
          return kv({
            decryptionWorker: r,
            id: V.requestId + "-init",
            encryptedBytes: V.map.encryptedBytes,
            key: V.map.key
          }, function(k) {
            V.map.bytes = k, Av(V, function(P) {
              if (P)
                return Sd(i), _(P, V);
              $();
            });
          });
        $();
      }
    }
  };
}, wE = function(t) {
  var i = t.loadendState, r = t.abortFn;
  return function(e) {
    var a = e.target;
    a.aborted && r && !i.calledAbortFn && (r(), i.calledAbortFn = !0);
  };
}, AE = function(t) {
  var i = t.segment, r = t.progressFn;
  return t.trackInfoFn, t.timingInfoFn, t.videoSegmentTimingInfoFn, t.audioSegmentTimingInfoFn, t.id3Fn, t.captionsFn, t.isEndOfTimeline, t.endedTimelineFn, t.dataFn, function(e) {
    var a = e.target;
    if (!a.aborted)
      return i.stats = G.mergeOptions(i.stats, yE(e)), !i.stats.firstBytesReceivedAt && i.stats.bytesReceived && (i.stats.firstBytesReceivedAt = Date.now()), r(e, i);
  };
}, CE = function(t) {
  var i = t.xhr, r = t.xhrOptions, e = t.decryptionWorker, a = t.segment, s = t.abortFn, o = t.progressFn, u = t.trackInfoFn, l = t.timingInfoFn, d = t.videoSegmentTimingInfoFn, h = t.audioSegmentTimingInfoFn, f = t.id3Fn, _ = t.captionsFn, v = t.isEndOfTimeline, y = t.endedTimelineFn, T = t.dataFn, I = t.doneFn, V = t.onTransmuxerLog, $ = [], k = xE({
    activeXhrs: $,
    decryptionWorker: e,
    trackInfoFn: u,
    timingInfoFn: l,
    videoSegmentTimingInfoFn: d,
    audioSegmentTimingInfoFn: h,
    id3Fn: f,
    captionsFn: _,
    isEndOfTimeline: v,
    endedTimelineFn: y,
    dataFn: T,
    doneFn: I,
    onTransmuxerLog: V
  });
  if (a.key && !a.key.bytes) {
    var P = [a.key];
    a.map && !a.map.bytes && a.map.key && a.map.key.resolvedUri === a.key.resolvedUri && P.push(a.map.key);
    var L = G.mergeOptions(r, {
      uri: a.key.resolvedUri,
      responseType: "arraybuffer"
    }), O = Ah(a, P, k), U = i(L, O);
    $.push(U);
  }
  if (a.map && !a.map.bytes) {
    var ie = a.map.key && (!a.key || a.key.resolvedUri !== a.map.key.resolvedUri);
    if (ie) {
      var z = G.mergeOptions(r, {
        uri: a.map.key.resolvedUri,
        responseType: "arraybuffer"
      }), le = Ah(a, [a.map.key], k), se = i(z, le);
      $.push(se);
    }
    var me = G.mergeOptions(r, {
      uri: a.map.resolvedUri,
      responseType: "arraybuffer",
      headers: Td(a.map)
    }), M = TE({
      segment: a,
      finishProcessingFn: k
    }), ne = i(me, M);
    $.push(ne);
  }
  var fe = G.mergeOptions(r, {
    uri: a.part && a.part.resolvedUri || a.resolvedUri,
    responseType: "arraybuffer",
    headers: Td(a)
  }), pe = bE({
    segment: a,
    finishProcessingFn: k,
    responseType: fe.responseType
  }), H = i(fe, pe);
  H.addEventListener("progress", AE({
    segment: a,
    progressFn: o,
    trackInfoFn: u,
    timingInfoFn: l,
    videoSegmentTimingInfoFn: d,
    audioSegmentTimingInfoFn: h,
    id3Fn: f,
    captionsFn: _,
    isEndOfTimeline: v,
    endedTimelineFn: y,
    dataFn: T
  })), $.push(H);
  var Q = {};
  return $.forEach(function(F) {
    F.addEventListener("loadend", wE({
      loadendState: Q,
      abortFn: s
    }));
  }), function() {
    return Sd($);
  };
}, kE = Gi("CodecUtils"), PE = function(t) {
  var i = t.attributes || {};
  if (i.CODECS)
    return Qi(i.CODECS);
}, Pv = function(t, i) {
  var r = i.attributes || {};
  return t && t.mediaGroups && t.mediaGroups.AUDIO && r.AUDIO && t.mediaGroups.AUDIO[r.AUDIO];
}, IE = function(t, i) {
  if (!Pv(t, i))
    return !0;
  var r = i.attributes || {}, e = t.mediaGroups.AUDIO[r.AUDIO];
  for (var a in e)
    if (!e[a].uri && !e[a].playlists)
      return !0;
  return !1;
}, Ao = function(t) {
  var i = {};
  return t.forEach(function(r) {
    var e = r.mediaType, a = r.type, s = r.details;
    i[e] = i[e] || [], i[e].push(Yp("" + a + s));
  }), Object.keys(i).forEach(function(r) {
    if (i[r].length > 1) {
      kE("multiple " + r + " codecs found as attributes: " + i[r].join(", ") + ". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."), i[r] = null;
      return;
    }
    i[r] = i[r][0];
  }), i;
}, Ch = function(t) {
  var i = 0;
  return t.audio && i++, t.video && i++, i;
}, Ha = function(t, i) {
  var r = i.attributes || {}, e = Ao(PE(i) || []);
  if (Pv(t, i) && !e.audio && !IE(t, i)) {
    var a = Ao(t0(t, r.AUDIO) || []);
    a.audio && (e.audio = a.audio);
  }
  return e;
}, Gs = Gi("PlaylistSelector"), kh = function(t) {
  if (!(!t || !t.playlist)) {
    var i = t.playlist;
    return JSON.stringify({
      id: i.id,
      bandwidth: t.bandwidth,
      width: t.width,
      height: t.height,
      codecs: i.attributes && i.attributes.CODECS || ""
    });
  }
}, Co = function(t, i) {
  if (!t)
    return "";
  var r = B.getComputedStyle(t);
  return r ? r[i] : "";
}, Wn = function(t, i) {
  var r = t.slice();
  t.sort(function(e, a) {
    var s = i(e, a);
    return s === 0 ? r.indexOf(e) - r.indexOf(a) : s;
  });
}, Bc = function(t, i) {
  var r, e;
  return t.attributes.BANDWIDTH && (r = t.attributes.BANDWIDTH), r = r || B.Number.MAX_VALUE, i.attributes.BANDWIDTH && (e = i.attributes.BANDWIDTH), e = e || B.Number.MAX_VALUE, r - e;
}, DE = function(t, i) {
  var r, e;
  return t.attributes.RESOLUTION && t.attributes.RESOLUTION.width && (r = t.attributes.RESOLUTION.width), r = r || B.Number.MAX_VALUE, i.attributes.RESOLUTION && i.attributes.RESOLUTION.width && (e = i.attributes.RESOLUTION.width), e = e || B.Number.MAX_VALUE, r === e && t.attributes.BANDWIDTH && i.attributes.BANDWIDTH ? t.attributes.BANDWIDTH - i.attributes.BANDWIDTH : r - e;
}, Iv = function(t, i, r, e, a, s) {
  if (!!t) {
    var o = {
      bandwidth: i,
      width: r,
      height: e,
      limitRenditionByPlayerDimensions: a
    }, u = t.playlists;
    bi.isAudioOnly(t) && (u = s.getAudioTrackPlaylists_(), o.audioOnly = !0);
    var l = u.map(function(z) {
      var le, se = z.attributes && z.attributes.RESOLUTION && z.attributes.RESOLUTION.width, me = z.attributes && z.attributes.RESOLUTION && z.attributes.RESOLUTION.height;
      return le = z.attributes && z.attributes.BANDWIDTH, le = le || B.Number.MAX_VALUE, {
        bandwidth: le,
        width: se,
        height: me,
        playlist: z
      };
    });
    Wn(l, function(z, le) {
      return z.bandwidth - le.bandwidth;
    }), l = l.filter(function(z) {
      return !bi.isIncompatible(z.playlist);
    });
    var d = l.filter(function(z) {
      return bi.isEnabled(z.playlist);
    });
    d.length || (d = l.filter(function(z) {
      return !bi.isDisabled(z.playlist);
    }));
    var h = d.filter(function(z) {
      return z.bandwidth * Gt.BANDWIDTH_VARIANCE < i;
    }), f = h[h.length - 1], _ = h.filter(function(z) {
      return z.bandwidth === f.bandwidth;
    })[0];
    if (a === !1) {
      var v = _ || d[0] || l[0];
      if (v && v.playlist) {
        var y = "sortedPlaylistReps";
        return _ && (y = "bandwidthBestRep"), d[0] && (y = "enabledPlaylistReps"), Gs("choosing " + kh(v) + " using " + y + " with options", o), v.playlist;
      }
      return Gs("could not choose a playlist with options", o), null;
    }
    var T = h.filter(function(z) {
      return z.width && z.height;
    });
    Wn(T, function(z, le) {
      return z.width - le.width;
    });
    var I = T.filter(function(z) {
      return z.width === r && z.height === e;
    });
    f = I[I.length - 1];
    var V = I.filter(function(z) {
      return z.bandwidth === f.bandwidth;
    })[0], $, k, P;
    V || ($ = T.filter(function(z) {
      return z.width > r || z.height > e;
    }), k = $.filter(function(z) {
      return z.width === $[0].width && z.height === $[0].height;
    }), f = k[k.length - 1], P = k.filter(function(z) {
      return z.bandwidth === f.bandwidth;
    })[0]);
    var L;
    if (s.experimentalLeastPixelDiffSelector) {
      var O = T.map(function(z) {
        return z.pixelDiff = Math.abs(z.width - r) + Math.abs(z.height - e), z;
      });
      Wn(O, function(z, le) {
        return z.pixelDiff === le.pixelDiff ? le.bandwidth - z.bandwidth : z.pixelDiff - le.pixelDiff;
      }), L = O[0];
    }
    var U = L || P || V || _ || d[0] || l[0];
    if (U && U.playlist) {
      var ie = "sortedPlaylistReps";
      return L ? ie = "leastPixelDiffRep" : P ? ie = "resolutionPlusOneRep" : V ? ie = "resolutionBestRep" : _ ? ie = "bandwidthBestRep" : d[0] && (ie = "enabledPlaylistReps"), Gs("choosing " + kh(U) + " using " + ie + " with options", o), U.playlist;
    }
    return Gs("could not choose a playlist with options", o), null;
  }
}, Ph = function() {
  var t = this.useDevicePixelRatio && B.devicePixelRatio || 1;
  return Iv(this.playlists.master, this.systemBandwidth, parseInt(Co(this.tech_.el(), "width"), 10) * t, parseInt(Co(this.tech_.el(), "height"), 10) * t, this.limitRenditionByPlayerDimensions, this.masterPlaylistController_);
}, LE = function(t) {
  var i = -1, r = -1;
  if (t < 0 || t > 1)
    throw new Error("Moving average bandwidth decay must be between 0 and 1.");
  return function() {
    var e = this.useDevicePixelRatio && B.devicePixelRatio || 1;
    return i < 0 && (i = this.systemBandwidth, r = this.systemBandwidth), this.systemBandwidth > 0 && this.systemBandwidth !== r && (i = t * this.systemBandwidth + (1 - t) * i, r = this.systemBandwidth), Iv(this.playlists.master, i, parseInt(Co(this.tech_.el(), "width"), 10) * e, parseInt(Co(this.tech_.el(), "height"), 10) * e, this.limitRenditionByPlayerDimensions, this.masterPlaylistController_);
  };
}, OE = function(t) {
  var i = t.master, r = t.currentTime, e = t.bandwidth, a = t.duration, s = t.segmentDuration, o = t.timeUntilRebuffer, u = t.currentTimeline, l = t.syncController, d = i.playlists.filter(function(y) {
    return !bi.isIncompatible(y);
  }), h = d.filter(bi.isEnabled);
  h.length || (h = d.filter(function(y) {
    return !bi.isDisabled(y);
  }));
  var f = h.filter(bi.hasAttribute.bind(null, "BANDWIDTH")), _ = f.map(function(y) {
    var T = l.getSyncPoint(y, a, u, r), I = T ? 1 : 2, V = bi.estimateSegmentRequestTime(s, e, y), $ = V * I - o;
    return {
      playlist: y,
      rebufferingImpact: $
    };
  }), v = _.filter(function(y) {
    return y.rebufferingImpact <= 0;
  });
  return Wn(v, function(y, T) {
    return Bc(T.playlist, y.playlist);
  }), v.length ? v[0] : (Wn(_, function(y, T) {
    return y.rebufferingImpact - T.rebufferingImpact;
  }), _[0] || null);
}, RE = function() {
  var t = this, i = this.playlists.master.playlists.filter(bi.isEnabled);
  Wn(i, function(e, a) {
    return Bc(e, a);
  });
  var r = i.filter(function(e) {
    return !!Ha(t.playlists.master, e).video;
  });
  return r[0] || null;
}, NE = function(t) {
  var i = 0, r;
  return t.bytes && (r = new Uint8Array(t.bytes), t.segments.forEach(function(e) {
    r.set(e, i), i += e.byteLength;
  })), r;
}, ME = function(t, i, r) {
  if (!t[r]) {
    i.trigger({
      type: "usage",
      name: "vhs-608"
    }), i.trigger({
      type: "usage",
      name: "hls-608"
    });
    var e = r;
    /^cc708_/.test(r) && (e = "SERVICE" + r.split("_")[1]);
    var a = i.textTracks().getTrackById(e);
    if (a)
      t[r] = a;
    else {
      var s = i.options_.vhs && i.options_.vhs.captionServices || {}, o = r, u = r, l = !1, d = s[e];
      d && (o = d.label, u = d.language, l = d.default), t[r] = i.addRemoteTextTrack({
        kind: "captions",
        id: e,
        default: l,
        label: o,
        language: u
      }, !1).track;
    }
  }
}, FE = function(t) {
  var i = t.inbandTextTracks, r = t.captionArray, e = t.timestampOffset;
  if (!!r) {
    var a = B.WebKitDataCue || B.VTTCue;
    r.forEach(function(s) {
      var o = s.stream;
      i[o].addCue(new a(s.startTime + e, s.endTime + e, s.text));
    });
  }
}, BE = function(t) {
  Object.defineProperties(t.frame, {
    id: {
      get: function() {
        return G.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."), t.value.key;
      }
    },
    value: {
      get: function() {
        return G.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."), t.value.data;
      }
    },
    privateData: {
      get: function() {
        return G.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."), t.value.data;
      }
    }
  });
}, UE = function(t) {
  var i = t.inbandTextTracks, r = t.metadataArray, e = t.timestampOffset, a = t.videoDuration;
  if (!!r) {
    var s = B.WebKitDataCue || B.VTTCue, o = i.metadataTrack_;
    if (!!o && (r.forEach(function(_) {
      var v = _.cueTime + e;
      typeof v != "number" || B.isNaN(v) || v < 0 || !(v < 1 / 0) || _.frames.forEach(function(y) {
        var T = new s(v, v, y.value || y.url || y.data || "");
        T.frame = y, T.value = y, BE(T), o.addCue(T);
      });
    }), !(!o.cues || !o.cues.length))) {
      for (var u = o.cues, l = [], d = 0; d < u.length; d++)
        u[d] && l.push(u[d]);
      var h = l.reduce(function(_, v) {
        var y = _[v.startTime] || [];
        return y.push(v), _[v.startTime] = y, _;
      }, {}), f = Object.keys(h).sort(function(_, v) {
        return Number(_) - Number(v);
      });
      f.forEach(function(_, v) {
        var y = h[_], T = Number(f[v + 1]) || a;
        y.forEach(function(I) {
          I.endTime = T;
        });
      });
    }
  }
}, qE = function(t, i, r) {
  t.metadataTrack_ || (t.metadataTrack_ = r.addRemoteTextTrack({
    kind: "metadata",
    label: "Timed Metadata"
  }, !1).track, t.metadataTrack_.inBandMetadataTrackDispatchType = i);
}, Fa = function(t, i, r) {
  var e, a;
  if (!!r && !!r.cues)
    for (e = r.cues.length; e--; )
      a = r.cues[e], a.startTime >= t && a.endTime <= i && r.removeCue(a);
}, VE = function(t) {
  var i = t.cues;
  if (!!i)
    for (var r = 0; r < i.length; r++) {
      for (var e = [], a = 0, s = 0; s < i.length; s++)
        i[r].startTime === i[s].startTime && i[r].endTime === i[s].endTime && i[r].text === i[s].text && (a++, a > 1 && e.push(i[s]));
      e.length && e.forEach(function(o) {
        return t.removeCue(o);
      });
    }
}, jE = function(t, i, r) {
  if (typeof i > "u" || i === null || !t.length)
    return [];
  var e = Math.ceil((i - r + 3) * fo.ONE_SECOND_IN_TS), a;
  for (a = 0; a < t.length && !(t[a].pts > e); a++)
    ;
  return t.slice(a);
}, HE = function(t, i, r) {
  if (!i.length)
    return t;
  if (r)
    return i.slice();
  var e = i[0].pts, a = 0;
  for (a; a < t.length && !(t[a].pts >= e); a++)
    ;
  return t.slice(0, a).concat(i);
}, WE = function(t, i, r, e) {
  for (var a = Math.ceil((i - e) * fo.ONE_SECOND_IN_TS), s = Math.ceil((r - e) * fo.ONE_SECOND_IN_TS), o = t.slice(), u = t.length; u-- && !(t[u].pts <= s); )
    ;
  if (u === -1)
    return o;
  for (var l = u + 1; l-- && !(t[l].pts <= a); )
    ;
  return l = Math.max(l, 0), o.splice(l, u - l + 1), o;
}, GE = function(t, i) {
  if (!t && !i || !t && i || t && !i)
    return !1;
  if (t === i)
    return !0;
  var r = Object.keys(t).sort(), e = Object.keys(i).sort();
  if (r.length !== e.length)
    return !1;
  for (var a = 0; a < r.length; a++) {
    var s = r[a];
    if (s !== e[a] || t[s] !== i[s])
      return !1;
  }
  return !0;
}, Dv = 22, $E = function(t, i, r) {
  i = i || [];
  for (var e = [], a = 0, s = 0; s < i.length; s++) {
    var o = i[s];
    if (t === o.timeline && (e.push(s), a += o.duration, a > r))
      return s;
  }
  return e.length === 0 ? 0 : e[e.length - 1];
}, Pa = 1, zE = 500, Ih = function(t) {
  return typeof t == "number" && isFinite(t);
}, $s = 1 / 60, KE = function(t, i, r) {
  return t !== "main" || !i || !r ? null : !r.hasAudio && !r.hasVideo ? "Neither audio nor video found in segment." : i.hasVideo && !r.hasVideo ? "Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest." : !i.hasVideo && r.hasVideo ? "Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest." : null;
}, XE = function(t, i, r) {
  var e = i - Gt.BACK_BUFFER_LENGTH;
  t.length && (e = Math.max(e, t.start(0)));
  var a = i - r;
  return Math.min(a, e);
}, On = function(t) {
  var i = t.startOfSegment, r = t.duration, e = t.segment, a = t.part, s = t.playlist, o = s.mediaSequence, u = s.id, l = s.segments, d = l === void 0 ? [] : l, h = t.mediaIndex, f = t.partIndex, _ = t.timeline, v = d.length - 1, y = "mediaIndex/partIndex increment";
  t.getMediaInfoForTime ? y = "getMediaInfoForTime (" + t.getMediaInfoForTime + ")" : t.isSyncRequest && (y = "getSyncSegmentCandidate (isSyncRequest)"), t.independent && (y += " with independent " + t.independent);
  var T = typeof f == "number", I = t.segment.uri ? "segment" : "pre-segment", V = T ? Jg({
    preloadSegment: e
  }) - 1 : 0;
  return I + " [" + (o + h) + "/" + (o + v) + "]" + (T ? " part [" + f + "/" + V + "]" : "") + (" segment start/end [" + e.start + " => " + e.end + "]") + (T ? " part start/end [" + a.start + " => " + a.end + "]" : "") + (" startOfSegment [" + i + "]") + (" duration [" + r + "]") + (" timeline [" + _ + "]") + (" selected by [" + y + "]") + (" playlist [" + u + "]");
}, Dh = function(t) {
  return t + "TimingInfo";
}, QE = function(t) {
  var i = t.segmentTimeline, r = t.currentTimeline, e = t.startOfSegment, a = t.buffered, s = t.overrideCheck;
  return !s && i === r ? null : i < r ? e : a.length ? a.end(a.length - 1) : e;
}, Lh = function(t) {
  var i = t.timelineChangeController, r = t.currentTimeline, e = t.segmentTimeline, a = t.loaderType, s = t.audioDisabled;
  if (r === e)
    return !1;
  if (a === "audio") {
    var o = i.lastTimelineChange({
      type: "main"
    });
    return !o || o.to !== e;
  }
  if (a === "main" && s) {
    var u = i.pendingTimelineChange({
      type: "audio"
    });
    return !(u && u.to === e);
  }
  return !1;
}, YE = function(t) {
  var i = 0;
  return ["video", "audio"].forEach(function(r) {
    var e = t[r + "TimingInfo"];
    if (!!e) {
      var a = e.start, s = e.end, o;
      typeof a == "bigint" || typeof s == "bigint" ? o = B.BigInt(s) - B.BigInt(a) : typeof a == "number" && typeof s == "number" && (o = s - a), typeof o < "u" && o > i && (i = o);
    }
  }), typeof i == "bigint" && i < Number.MAX_SAFE_INTEGER && (i = Number(i)), i;
}, Oh = function(t) {
  var i = t.segmentDuration, r = t.maxDuration;
  return i ? Math.round(i) > r + Mr : !1;
}, JE = function(t, i) {
  if (i !== "hls")
    return null;
  var r = YE({
    audioTimingInfo: t.audioTimingInfo,
    videoTimingInfo: t.videoTimingInfo
  });
  if (!r)
    return null;
  var e = t.playlist.targetDuration, a = Oh({
    segmentDuration: r,
    maxDuration: e * 2
  }), s = Oh({
    segmentDuration: r,
    maxDuration: e
  }), o = "Segment with index " + t.mediaIndex + " " + ("from playlist " + t.playlist.id + " ") + ("has a duration of " + r + " ") + ("when the reported duration is " + t.duration + " ") + ("and the target duration is " + e + ". ") + "For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";
  return a || s ? {
    severity: a ? "warn" : "info",
    message: o
  } : null;
}, Ed = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    if (a = n.call(this) || this, !r)
      throw new TypeError("Initialization settings are required");
    if (typeof r.currentTime != "function")
      throw new TypeError("No currentTime getter specified");
    if (!r.mediaSource)
      throw new TypeError("No MediaSource specified");
    return a.bandwidth = r.bandwidth, a.throughput = {
      rate: 0,
      count: 0
    }, a.roundTrip = NaN, a.resetStats_(), a.mediaIndex = null, a.partIndex = null, a.hasPlayed_ = r.hasPlayed, a.currentTime_ = r.currentTime, a.seekable_ = r.seekable, a.seeking_ = r.seeking, a.duration_ = r.duration, a.mediaSource_ = r.mediaSource, a.vhs_ = r.vhs, a.loaderType_ = r.loaderType, a.currentMediaInfo_ = void 0, a.startingMediaInfo_ = void 0, a.segmentMetadataTrack_ = r.segmentMetadataTrack, a.goalBufferLength_ = r.goalBufferLength, a.sourceType_ = r.sourceType, a.sourceUpdater_ = r.sourceUpdater, a.inbandTextTracks_ = r.inbandTextTracks, a.state_ = "INIT", a.timelineChangeController_ = r.timelineChangeController, a.shouldSaveSegmentTimingInfo_ = !0, a.parse708captions_ = r.parse708captions, a.useDtsForTimestampOffset_ = r.useDtsForTimestampOffset, a.captionServices_ = r.captionServices, a.experimentalExactManifestTimings = r.experimentalExactManifestTimings, a.checkBufferTimeout_ = null, a.error_ = void 0, a.currentTimeline_ = -1, a.pendingSegment_ = null, a.xhrOptions_ = null, a.pendingSegments_ = [], a.audioDisabled_ = !1, a.isPendingTimestampOffset_ = !1, a.gopBuffer_ = [], a.timeMapping_ = 0, a.safeAppend_ = G.browser.IE_VERSION >= 11, a.appendInitSegment_ = {
      audio: !0,
      video: !0
    }, a.playlistOfLastInitSegment_ = {
      audio: null,
      video: null
    }, a.callQueue_ = [], a.loadQueue_ = [], a.metadataQueue_ = {
      id3: [],
      caption: []
    }, a.waitingOnRemove_ = !1, a.quotaExceededErrorRetryTimeout_ = null, a.activeInitSegmentId_ = null, a.initSegments_ = {}, a.cacheEncryptionKeys_ = r.cacheEncryptionKeys, a.keyCache_ = {}, a.decrypter_ = r.decrypter, a.syncController_ = r.syncController, a.syncPoint_ = {
      segmentIndex: 0,
      time: 0
    }, a.transmuxer_ = a.createTransmuxer_(), a.triggerSyncInfoUpdate_ = function() {
      return a.trigger("syncinfoupdate");
    }, a.syncController_.on("syncinfoupdate", a.triggerSyncInfoUpdate_), a.mediaSource_.addEventListener("sourceopen", function() {
      a.isEndOfStream_() || (a.ended_ = !1);
    }), a.fetchAtBuffer_ = !1, a.logger_ = Gi("SegmentLoader[" + a.loaderType_ + "]"), Object.defineProperty(Ge(a), "state", {
      get: function() {
        return this.state_;
      },
      set: function(o) {
        o !== this.state_ && (this.logger_(this.state_ + " -> " + o), this.state_ = o, this.trigger("statechange"));
      }
    }), a.sourceUpdater_.on("ready", function() {
      a.hasEnoughInfoToAppend_() && a.processCallQueue_();
    }), a.loaderType_ === "main" && a.timelineChangeController_.on("pendingtimelinechange", function() {
      a.hasEnoughInfoToAppend_() && a.processCallQueue_();
    }), a.loaderType_ === "audio" && a.timelineChangeController_.on("timelinechange", function() {
      a.hasEnoughInfoToLoad_() && a.processLoadQueue_(), a.hasEnoughInfoToAppend_() && a.processCallQueue_();
    }), a;
  }
  var i = t.prototype;
  return i.createTransmuxer_ = function() {
    return Qu.createTransmuxer({
      remux: !1,
      alignGopsAtEnd: this.safeAppend_,
      keepOriginalTimestamps: !0,
      parse708captions: this.parse708captions_,
      captionServices: this.captionServices_
    });
  }, i.resetStats_ = function() {
    this.mediaBytesTransferred = 0, this.mediaRequests = 0, this.mediaRequestsAborted = 0, this.mediaRequestsTimedout = 0, this.mediaRequestsErrored = 0, this.mediaTransferDuration = 0, this.mediaSecondsLoaded = 0, this.mediaAppends = 0;
  }, i.dispose = function() {
    this.trigger("dispose"), this.state = "DISPOSED", this.pause(), this.abort_(), this.transmuxer_ && this.transmuxer_.terminate(), this.resetStats_(), this.checkBufferTimeout_ && B.clearTimeout(this.checkBufferTimeout_), this.syncController_ && this.triggerSyncInfoUpdate_ && this.syncController_.off("syncinfoupdate", this.triggerSyncInfoUpdate_), this.off();
  }, i.setAudio = function(e) {
    this.audioDisabled_ = !e, e ? this.appendInitSegment_.audio = !0 : this.sourceUpdater_.removeAudio(0, this.duration_());
  }, i.abort = function() {
    if (this.state !== "WAITING") {
      this.pendingSegment_ && (this.pendingSegment_ = null);
      return;
    }
    this.abort_(), this.state = "READY", this.paused() || this.monitorBuffer_();
  }, i.abort_ = function() {
    this.pendingSegment_ && this.pendingSegment_.abortRequests && this.pendingSegment_.abortRequests(), this.pendingSegment_ = null, this.callQueue_ = [], this.loadQueue_ = [], this.metadataQueue_.id3 = [], this.metadataQueue_.caption = [], this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_), this.waitingOnRemove_ = !1, B.clearTimeout(this.quotaExceededErrorRetryTimeout_), this.quotaExceededErrorRetryTimeout_ = null;
  }, i.checkForAbort_ = function(e) {
    return this.state === "APPENDING" && !this.pendingSegment_ ? (this.state = "READY", !0) : !this.pendingSegment_ || this.pendingSegment_.requestId !== e;
  }, i.error = function(e) {
    return typeof e < "u" && (this.logger_("error occurred:", e), this.error_ = e), this.pendingSegment_ = null, this.error_;
  }, i.endOfStream = function() {
    this.ended_ = !0, this.transmuxer_ && Qu.reset(this.transmuxer_), this.gopBuffer_.length = 0, this.pause(), this.trigger("ended");
  }, i.buffered_ = function() {
    var e = this.getMediaInfo_();
    if (!this.sourceUpdater_ || !e)
      return G.createTimeRanges();
    if (this.loaderType_ === "main") {
      var a = e.hasAudio, s = e.hasVideo, o = e.isMuxed;
      if (s && a && !this.audioDisabled_ && !o)
        return this.sourceUpdater_.buffered();
      if (s)
        return this.sourceUpdater_.videoBuffered();
    }
    return this.sourceUpdater_.audioBuffered();
  }, i.initSegmentForMap = function(e, a) {
    if (a === void 0 && (a = !1), !e)
      return null;
    var s = xo(e), o = this.initSegments_[s];
    return a && !o && e.bytes && (this.initSegments_[s] = o = {
      resolvedUri: e.resolvedUri,
      byterange: e.byterange,
      bytes: e.bytes,
      tracks: e.tracks,
      timescales: e.timescales
    }), o || e;
  }, i.segmentKey = function(e, a) {
    if (a === void 0 && (a = !1), !e)
      return null;
    var s = pv(e), o = this.keyCache_[s];
    this.cacheEncryptionKeys_ && a && !o && e.bytes && (this.keyCache_[s] = o = {
      resolvedUri: e.resolvedUri,
      bytes: e.bytes
    });
    var u = {
      resolvedUri: (o || e).resolvedUri
    };
    return o && (u.bytes = o.bytes), u;
  }, i.couldBeginLoading_ = function() {
    return this.playlist_ && !this.paused();
  }, i.load = function() {
    if (this.monitorBuffer_(), !!this.playlist_) {
      if (this.state === "INIT" && this.couldBeginLoading_())
        return this.init_();
      !this.couldBeginLoading_() || this.state !== "READY" && this.state !== "INIT" || (this.state = "READY");
    }
  }, i.init_ = function() {
    return this.state = "READY", this.resetEverything(), this.monitorBuffer_();
  }, i.playlist = function(e, a) {
    if (a === void 0 && (a = {}), !!e) {
      var s = this.playlist_, o = this.pendingSegment_;
      this.playlist_ = e, this.xhrOptions_ = a, this.state === "INIT" && (e.syncInfo = {
        mediaSequence: e.mediaSequence,
        time: 0
      }, this.loaderType_ === "main" && this.syncController_.setDateTimeMappingForStart(e));
      var u = null;
      if (s && (s.id ? u = s.id : s.uri && (u = s.uri)), this.logger_("playlist update [" + u + " => " + (e.id || e.uri) + "]"), this.trigger("syncinfoupdate"), this.state === "INIT" && this.couldBeginLoading_())
        return this.init_();
      if (!s || s.uri !== e.uri) {
        this.mediaIndex !== null && (e.endList ? this.resyncLoader() : this.resetLoader()), this.currentMediaInfo_ = void 0, this.trigger("playlistupdate");
        return;
      }
      var l = e.mediaSequence - s.mediaSequence;
      if (this.logger_("live window shift [" + l + "]"), this.mediaIndex !== null)
        if (this.mediaIndex -= l, this.mediaIndex < 0)
          this.mediaIndex = null, this.partIndex = null;
        else {
          var d = this.playlist_.segments[this.mediaIndex];
          if (this.partIndex && (!d.parts || !d.parts.length || !d.parts[this.partIndex])) {
            var h = this.mediaIndex;
            this.logger_("currently processing part (index " + this.partIndex + ") no longer exists."), this.resetLoader(), this.mediaIndex = h;
          }
        }
      o && (o.mediaIndex -= l, o.mediaIndex < 0 ? (o.mediaIndex = null, o.partIndex = null) : (o.mediaIndex >= 0 && (o.segment = e.segments[o.mediaIndex]), o.partIndex >= 0 && o.segment.parts && (o.part = o.segment.parts[o.partIndex]))), this.syncController_.saveExpiredSegmentInfo(s, e);
    }
  }, i.pause = function() {
    this.checkBufferTimeout_ && (B.clearTimeout(this.checkBufferTimeout_), this.checkBufferTimeout_ = null);
  }, i.paused = function() {
    return this.checkBufferTimeout_ === null;
  }, i.resetEverything = function(e) {
    this.ended_ = !1, this.appendInitSegment_ = {
      audio: !0,
      video: !0
    }, this.resetLoader(), this.remove(0, 1 / 0, e), this.transmuxer_ && (this.transmuxer_.postMessage({
      action: "clearAllMp4Captions"
    }), this.transmuxer_.postMessage({
      action: "reset"
    }));
  }, i.resetLoader = function() {
    this.fetchAtBuffer_ = !1, this.resyncLoader();
  }, i.resyncLoader = function() {
    this.transmuxer_ && Qu.reset(this.transmuxer_), this.mediaIndex = null, this.partIndex = null, this.syncPoint_ = null, this.isPendingTimestampOffset_ = !1, this.callQueue_ = [], this.loadQueue_ = [], this.metadataQueue_.id3 = [], this.metadataQueue_.caption = [], this.abort(), this.transmuxer_ && this.transmuxer_.postMessage({
      action: "clearParsedMp4Captions"
    });
  }, i.remove = function(e, a, s, o) {
    if (s === void 0 && (s = function() {
    }), o === void 0 && (o = !1), a === 1 / 0 && (a = this.duration_()), a <= e) {
      this.logger_("skipping remove because end ${end} is <= start ${start}");
      return;
    }
    if (!this.sourceUpdater_ || !this.getMediaInfo_()) {
      this.logger_("skipping remove because no source updater or starting media info");
      return;
    }
    var u = 1, l = function() {
      u--, u === 0 && s();
    };
    (o || !this.audioDisabled_) && (u++, this.sourceUpdater_.removeAudio(e, a, l)), (o || this.loaderType_ === "main") && (this.gopBuffer_ = WE(this.gopBuffer_, e, a, this.timeMapping_), u++, this.sourceUpdater_.removeVideo(e, a, l));
    for (var d in this.inbandTextTracks_)
      Fa(e, a, this.inbandTextTracks_[d]);
    Fa(e, a, this.segmentMetadataTrack_), l();
  }, i.monitorBuffer_ = function() {
    this.checkBufferTimeout_ && B.clearTimeout(this.checkBufferTimeout_), this.checkBufferTimeout_ = B.setTimeout(this.monitorBufferTick_.bind(this), 1);
  }, i.monitorBufferTick_ = function() {
    this.state === "READY" && this.fillBuffer_(), this.checkBufferTimeout_ && B.clearTimeout(this.checkBufferTimeout_), this.checkBufferTimeout_ = B.setTimeout(this.monitorBufferTick_.bind(this), zE);
  }, i.fillBuffer_ = function() {
    if (!this.sourceUpdater_.updating()) {
      var e = this.chooseNextRequest_();
      !e || (typeof e.timestampOffset == "number" && (this.isPendingTimestampOffset_ = !1, this.timelineChangeController_.pendingTimelineChange({
        type: this.loaderType_,
        from: this.currentTimeline_,
        to: e.timeline
      })), this.loadSegment_(e));
    }
  }, i.isEndOfStream_ = function(e, a, s) {
    if (e === void 0 && (e = this.mediaIndex), a === void 0 && (a = this.playlist_), s === void 0 && (s = this.partIndex), !a || !this.mediaSource_)
      return !1;
    var o = typeof e == "number" && a.segments[e], u = e + 1 === a.segments.length, l = !o || !o.parts || s + 1 === o.parts.length;
    return a.endList && this.mediaSource_.readyState === "open" && u && l;
  }, i.chooseNextRequest_ = function() {
    var e = this.buffered_(), a = Th(e) || 0, s = Lc(e, this.currentTime_()), o = !this.hasPlayed_() && s >= 1, u = s >= this.goalBufferLength_(), l = this.playlist_.segments;
    if (!l.length || o || u)
      return null;
    this.syncPoint_ = this.syncPoint_ || this.syncController_.getSyncPoint(this.playlist_, this.duration_(), this.currentTimeline_, this.currentTime_());
    var d = {
      partIndex: null,
      mediaIndex: null,
      startOfSegment: null,
      playlist: this.playlist_,
      isSyncRequest: Boolean(!this.syncPoint_)
    };
    if (d.isSyncRequest)
      d.mediaIndex = $E(this.currentTimeline_, l, a);
    else if (this.mediaIndex !== null) {
      var h = l[this.mediaIndex], f = typeof this.partIndex == "number" ? this.partIndex : -1;
      d.startOfSegment = h.end ? h.end : a, h.parts && h.parts[f + 1] ? (d.mediaIndex = this.mediaIndex, d.partIndex = f + 1) : d.mediaIndex = this.mediaIndex + 1;
    } else {
      var _ = bi.getMediaInfoForTime({
        experimentalExactManifestTimings: this.experimentalExactManifestTimings,
        playlist: this.playlist_,
        currentTime: this.fetchAtBuffer_ ? a : this.currentTime_(),
        startingPartIndex: this.syncPoint_.partIndex,
        startingSegmentIndex: this.syncPoint_.segmentIndex,
        startTime: this.syncPoint_.time
      }), v = _.segmentIndex, y = _.startTime, T = _.partIndex;
      d.getMediaInfoForTime = this.fetchAtBuffer_ ? "bufferedEnd " + a : "currentTime " + this.currentTime_(), d.mediaIndex = v, d.startOfSegment = y, d.partIndex = T;
    }
    var I = l[d.mediaIndex], V = I && typeof d.partIndex == "number" && I.parts && I.parts[d.partIndex];
    if (!I || typeof d.partIndex == "number" && !V)
      return null;
    if (typeof d.partIndex != "number" && I.parts && (d.partIndex = 0, V = I.parts[0]), !s && V && !V.independent)
      if (d.partIndex === 0) {
        var $ = l[d.mediaIndex - 1], k = $.parts && $.parts.length && $.parts[$.parts.length - 1];
        k && k.independent && (d.mediaIndex -= 1, d.partIndex = $.parts.length - 1, d.independent = "previous segment");
      } else
        I.parts[d.partIndex - 1].independent && (d.partIndex -= 1, d.independent = "previous part");
    var P = this.mediaSource_ && this.mediaSource_.readyState === "ended";
    return d.mediaIndex >= l.length - 1 && P && !this.seeking_() ? null : this.generateSegmentInfo_(d);
  }, i.generateSegmentInfo_ = function(e) {
    var a = e.independent, s = e.playlist, o = e.mediaIndex, u = e.startOfSegment, l = e.isSyncRequest, d = e.partIndex, h = e.forceTimestampOffset, f = e.getMediaInfoForTime, _ = s.segments[o], v = typeof d == "number" && _.parts[d], y = {
      requestId: "segment-loader-" + Math.random(),
      uri: v && v.resolvedUri || _.resolvedUri,
      mediaIndex: o,
      partIndex: v ? d : null,
      isSyncRequest: l,
      startOfSegment: u,
      playlist: s,
      bytes: null,
      encryptedBytes: null,
      timestampOffset: null,
      timeline: _.timeline,
      duration: v && v.duration || _.duration,
      segment: _,
      part: v,
      byteLength: 0,
      transmuxer: this.transmuxer_,
      getMediaInfoForTime: f,
      independent: a
    }, T = typeof h < "u" ? h : this.isPendingTimestampOffset_;
    y.timestampOffset = this.timestampOffsetForSegment_({
      segmentTimeline: _.timeline,
      currentTimeline: this.currentTimeline_,
      startOfSegment: u,
      buffered: this.buffered_(),
      overrideCheck: T
    });
    var I = Th(this.sourceUpdater_.audioBuffered());
    return typeof I == "number" && (y.audioAppendStart = I - this.sourceUpdater_.audioTimestampOffset()), this.sourceUpdater_.videoBuffered().length && (y.gopsToAlignWith = jE(
      this.gopBuffer_,
      this.currentTime_() - this.sourceUpdater_.videoTimestampOffset(),
      this.timeMapping_
    )), y;
  }, i.timestampOffsetForSegment_ = function(e) {
    return QE(e);
  }, i.earlyAbortWhenNeeded_ = function(e) {
    if (!(this.vhs_.tech_.paused() || !this.xhrOptions_.timeout || !this.playlist_.attributes.BANDWIDTH) && !(Date.now() - (e.firstBytesReceivedAt || Date.now()) < 1e3)) {
      var a = this.currentTime_(), s = e.bandwidth, o = this.pendingSegment_.duration, u = bi.estimateSegmentRequestTime(o, s, this.playlist_, e.bytesReceived), l = SS(this.buffered_(), a, this.vhs_.tech_.playbackRate()) - 1;
      if (!(u <= l)) {
        var d = OE({
          master: this.vhs_.playlists.master,
          currentTime: a,
          bandwidth: s,
          duration: this.duration_(),
          segmentDuration: o,
          timeUntilRebuffer: l,
          currentTimeline: this.currentTimeline_,
          syncController: this.syncController_
        });
        if (!!d) {
          var h = u - l, f = h - d.rebufferingImpact, _ = 0.5;
          l <= Mr && (_ = 1), !(!d.playlist || d.playlist.uri === this.playlist_.uri || f < _) && (this.bandwidth = d.playlist.attributes.BANDWIDTH * Gt.BANDWIDTH_VARIANCE + 1, this.trigger("earlyabort"));
        }
      }
    }
  }, i.handleAbort_ = function(e) {
    this.logger_("Aborting " + On(e)), this.mediaRequestsAborted += 1;
  }, i.handleProgress_ = function(e, a) {
    this.earlyAbortWhenNeeded_(a.stats), !this.checkForAbort_(a.requestId) && this.trigger("progress");
  }, i.handleTrackInfo_ = function(e, a) {
    this.earlyAbortWhenNeeded_(e.stats), !this.checkForAbort_(e.requestId) && (this.checkForIllegalMediaSwitch(a) || (a = a || {}, GE(this.currentMediaInfo_, a) || (this.appendInitSegment_ = {
      audio: !0,
      video: !0
    }, this.startingMediaInfo_ = a, this.currentMediaInfo_ = a, this.logger_("trackinfo update", a), this.trigger("trackinfo")), !this.checkForAbort_(e.requestId) && (this.pendingSegment_.trackInfo = a, this.hasEnoughInfoToAppend_() && this.processCallQueue_())));
  }, i.handleTimingInfo_ = function(e, a, s, o) {
    if (this.earlyAbortWhenNeeded_(e.stats), !this.checkForAbort_(e.requestId)) {
      var u = this.pendingSegment_, l = Dh(a);
      u[l] = u[l] || {}, u[l][s] = o, this.logger_("timinginfo: " + a + " - " + s + " - " + o), this.hasEnoughInfoToAppend_() && this.processCallQueue_();
    }
  }, i.handleCaptions_ = function(e, a) {
    var s = this;
    if (this.earlyAbortWhenNeeded_(e.stats), !this.checkForAbort_(e.requestId)) {
      if (a.length === 0) {
        this.logger_("SegmentLoader received no captions from a caption event");
        return;
      }
      var o = this.pendingSegment_;
      if (!o.hasAppendedData_) {
        this.metadataQueue_.caption.push(this.handleCaptions_.bind(this, e, a));
        return;
      }
      var u = this.sourceUpdater_.videoTimestampOffset() === null ? this.sourceUpdater_.audioTimestampOffset() : this.sourceUpdater_.videoTimestampOffset(), l = {};
      a.forEach(function(d) {
        l[d.stream] = l[d.stream] || {
          startTime: 1 / 0,
          captions: [],
          endTime: 0
        };
        var h = l[d.stream];
        h.startTime = Math.min(h.startTime, d.startTime + u), h.endTime = Math.max(h.endTime, d.endTime + u), h.captions.push(d);
      }), Object.keys(l).forEach(function(d) {
        var h = l[d], f = h.startTime, _ = h.endTime, v = h.captions, y = s.inbandTextTracks_;
        s.logger_("adding cues from " + f + " -> " + _ + " for " + d), ME(y, s.vhs_.tech_, d), Fa(f, _, y[d]), FE({
          captionArray: v,
          inbandTextTracks: y,
          timestampOffset: u
        });
      }), this.transmuxer_ && this.transmuxer_.postMessage({
        action: "clearParsedMp4Captions"
      });
    }
  }, i.handleId3_ = function(e, a, s) {
    if (this.earlyAbortWhenNeeded_(e.stats), !this.checkForAbort_(e.requestId)) {
      var o = this.pendingSegment_;
      if (!o.hasAppendedData_) {
        this.metadataQueue_.id3.push(this.handleId3_.bind(this, e, a, s));
        return;
      }
      var u = this.sourceUpdater_.videoTimestampOffset() === null ? this.sourceUpdater_.audioTimestampOffset() : this.sourceUpdater_.videoTimestampOffset();
      qE(this.inbandTextTracks_, s, this.vhs_.tech_), UE({
        inbandTextTracks: this.inbandTextTracks_,
        metadataArray: a,
        timestampOffset: u,
        videoDuration: this.duration_()
      });
    }
  }, i.processMetadataQueue_ = function() {
    this.metadataQueue_.id3.forEach(function(e) {
      return e();
    }), this.metadataQueue_.caption.forEach(function(e) {
      return e();
    }), this.metadataQueue_.id3 = [], this.metadataQueue_.caption = [];
  }, i.processCallQueue_ = function() {
    var e = this.callQueue_;
    this.callQueue_ = [], e.forEach(function(a) {
      return a();
    });
  }, i.processLoadQueue_ = function() {
    var e = this.loadQueue_;
    this.loadQueue_ = [], e.forEach(function(a) {
      return a();
    });
  }, i.hasEnoughInfoToLoad_ = function() {
    if (this.loaderType_ !== "audio")
      return !0;
    var e = this.pendingSegment_;
    return e ? this.getCurrentMediaInfo_() ? !Lh({
      timelineChangeController: this.timelineChangeController_,
      currentTimeline: this.currentTimeline_,
      segmentTimeline: e.timeline,
      loaderType: this.loaderType_,
      audioDisabled: this.audioDisabled_
    }) : !0 : !1;
  }, i.getCurrentMediaInfo_ = function(e) {
    return e === void 0 && (e = this.pendingSegment_), e && e.trackInfo || this.currentMediaInfo_;
  }, i.getMediaInfo_ = function(e) {
    return e === void 0 && (e = this.pendingSegment_), this.getCurrentMediaInfo_(e) || this.startingMediaInfo_;
  }, i.hasEnoughInfoToAppend_ = function() {
    if (!this.sourceUpdater_.ready() || this.waitingOnRemove_ || this.quotaExceededErrorRetryTimeout_)
      return !1;
    var e = this.pendingSegment_, a = this.getCurrentMediaInfo_();
    if (!e || !a)
      return !1;
    var s = a.hasAudio, o = a.hasVideo, u = a.isMuxed;
    return !(o && !e.videoTimingInfo || s && !this.audioDisabled_ && !u && !e.audioTimingInfo || Lh({
      timelineChangeController: this.timelineChangeController_,
      currentTimeline: this.currentTimeline_,
      segmentTimeline: e.timeline,
      loaderType: this.loaderType_,
      audioDisabled: this.audioDisabled_
    }));
  }, i.handleData_ = function(e, a) {
    if (this.earlyAbortWhenNeeded_(e.stats), !this.checkForAbort_(e.requestId)) {
      if (this.callQueue_.length || !this.hasEnoughInfoToAppend_()) {
        this.callQueue_.push(this.handleData_.bind(this, e, a));
        return;
      }
      var s = this.pendingSegment_;
      if (this.setTimeMapping_(s.timeline), this.updateMediaSecondsLoaded_(s.part || s.segment), this.mediaSource_.readyState !== "closed") {
        if (e.map && (e.map = this.initSegmentForMap(e.map, !0), s.segment.map = e.map), e.key && this.segmentKey(e.key, !0), s.isFmp4 = e.isFmp4, s.timingInfo = s.timingInfo || {}, s.isFmp4)
          this.trigger("fmp4"), s.timingInfo.start = s[Dh(a.type)].start;
        else {
          var o = this.getCurrentMediaInfo_(), u = this.loaderType_ === "main" && o && o.hasVideo, l;
          u && (l = s.videoTimingInfo.start), s.timingInfo.start = this.trueSegmentStart_({
            currentStart: s.timingInfo.start,
            playlist: s.playlist,
            mediaIndex: s.mediaIndex,
            currentVideoTimestampOffset: this.sourceUpdater_.videoTimestampOffset(),
            useVideoTimingInfo: u,
            firstVideoFrameTimeForData: l,
            videoTimingInfo: s.videoTimingInfo,
            audioTimingInfo: s.audioTimingInfo
          });
        }
        if (this.updateAppendInitSegmentStatus(s, a.type), this.updateSourceBufferTimestampOffset_(s), s.isSyncRequest) {
          this.updateTimingInfoEnd_(s), this.syncController_.saveSegmentTimingInfo({
            segmentInfo: s,
            shouldSaveTimelineMapping: this.loaderType_ === "main"
          });
          var d = this.chooseNextRequest_();
          if (d.mediaIndex !== s.mediaIndex || d.partIndex !== s.partIndex) {
            this.logger_("sync segment was incorrect, not appending");
            return;
          }
          this.logger_("sync segment was correct, appending");
        }
        s.hasAppendedData_ = !0, this.processMetadataQueue_(), this.appendData_(s, a);
      }
    }
  }, i.updateAppendInitSegmentStatus = function(e, a) {
    this.loaderType_ === "main" && typeof e.timestampOffset == "number" && !e.changedTimestampOffset && (this.appendInitSegment_ = {
      audio: !0,
      video: !0
    }), this.playlistOfLastInitSegment_[a] !== e.playlist && (this.appendInitSegment_[a] = !0);
  }, i.getInitSegmentAndUpdateState_ = function(e) {
    var a = e.type, s = e.initSegment, o = e.map, u = e.playlist;
    if (o) {
      var l = xo(o);
      if (this.activeInitSegmentId_ === l)
        return null;
      s = this.initSegmentForMap(o, !0).bytes, this.activeInitSegmentId_ = l;
    }
    return s && this.appendInitSegment_[a] ? (this.playlistOfLastInitSegment_[a] = u, this.appendInitSegment_[a] = !1, this.activeInitSegmentId_ = null, s) : null;
  }, i.handleQuotaExceededError_ = function(e, a) {
    var s = this, o = e.segmentInfo, u = e.type, l = e.bytes, d = this.sourceUpdater_.audioBuffered(), h = this.sourceUpdater_.videoBuffered();
    d.length > 1 && this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: " + Zr(d).join(", ")), h.length > 1 && this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: " + Zr(h).join(", "));
    var f = d.length ? d.start(0) : 0, _ = d.length ? d.end(d.length - 1) : 0, v = h.length ? h.start(0) : 0, y = h.length ? h.end(h.length - 1) : 0;
    if (_ - f <= Pa && y - v <= Pa) {
      this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. " + ("Appended byte length: " + l.byteLength + ", ") + ("audio buffer: " + Zr(d).join(", ") + ", ") + ("video buffer: " + Zr(h).join(", ") + ", ")), this.error({
        message: "Quota exceeded error with append of a single segment of content",
        excludeUntil: 1 / 0
      }), this.trigger("error");
      return;
    }
    this.waitingOnRemove_ = !0, this.callQueue_.push(this.appendToSourceBuffer_.bind(this, {
      segmentInfo: o,
      type: u,
      bytes: l
    }));
    var T = this.currentTime_(), I = T - Pa;
    this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to " + I), this.remove(0, I, function() {
      s.logger_("On QUOTA_EXCEEDED_ERR, retrying append in " + Pa + "s"), s.waitingOnRemove_ = !1, s.quotaExceededErrorRetryTimeout_ = B.setTimeout(function() {
        s.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"), s.quotaExceededErrorRetryTimeout_ = null, s.processCallQueue_();
      }, Pa * 1e3);
    }, !0);
  }, i.handleAppendError_ = function(e, a) {
    var s = e.segmentInfo, o = e.type, u = e.bytes;
    if (!!a) {
      if (a.code === Dv) {
        this.handleQuotaExceededError_({
          segmentInfo: s,
          type: o,
          bytes: u
        });
        return;
      }
      this.logger_("Received non QUOTA_EXCEEDED_ERR on append", a), this.error(o + " append of " + u.length + "b failed for segment " + ("#" + s.mediaIndex + " in playlist " + s.playlist.id)), this.trigger("appenderror");
    }
  }, i.appendToSourceBuffer_ = function(e) {
    var a = e.segmentInfo, s = e.type, o = e.initSegment, u = e.data, l = e.bytes;
    if (!l) {
      var d = [u], h = u.byteLength;
      o && (d.unshift(o), h += o.byteLength), l = NE({
        bytes: h,
        segments: d
      });
    }
    this.sourceUpdater_.appendBuffer({
      segmentInfo: a,
      type: s,
      bytes: l
    }, this.handleAppendError_.bind(this, {
      segmentInfo: a,
      type: s,
      bytes: l
    }));
  }, i.handleSegmentTimingInfo_ = function(e, a, s) {
    if (!(!this.pendingSegment_ || a !== this.pendingSegment_.requestId)) {
      var o = this.pendingSegment_.segment, u = e + "TimingInfo";
      o[u] || (o[u] = {}), o[u].transmuxerPrependedSeconds = s.prependedContentDuration || 0, o[u].transmuxedPresentationStart = s.start.presentation, o[u].transmuxedDecodeStart = s.start.decode, o[u].transmuxedPresentationEnd = s.end.presentation, o[u].transmuxedDecodeEnd = s.end.decode, o[u].baseMediaDecodeTime = s.baseMediaDecodeTime;
    }
  }, i.appendData_ = function(e, a) {
    var s = a.type, o = a.data;
    if (!(!o || !o.byteLength) && !(s === "audio" && this.audioDisabled_)) {
      var u = this.getInitSegmentAndUpdateState_({
        type: s,
        initSegment: a.initSegment,
        playlist: e.playlist,
        map: e.isFmp4 ? e.segment.map : null
      });
      this.appendToSourceBuffer_({
        segmentInfo: e,
        type: s,
        initSegment: u,
        data: o
      });
    }
  }, i.loadSegment_ = function(e) {
    var a = this;
    if (this.state = "WAITING", this.pendingSegment_ = e, this.trimBackBuffer_(e), typeof e.timestampOffset == "number" && this.transmuxer_ && this.transmuxer_.postMessage({
      action: "clearAllMp4Captions"
    }), !this.hasEnoughInfoToLoad_()) {
      this.loadQueue_.push(function() {
        var s = Ri({}, e, {
          forceTimestampOffset: !0
        });
        Ri(e, a.generateSegmentInfo_(s)), a.isPendingTimestampOffset_ = !1, a.updateTransmuxerAndRequestSegment_(e);
      });
      return;
    }
    this.updateTransmuxerAndRequestSegment_(e);
  }, i.updateTransmuxerAndRequestSegment_ = function(e) {
    var a = this;
    this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset) && (this.gopBuffer_.length = 0, e.gopsToAlignWith = [], this.timeMapping_ = 0, this.transmuxer_.postMessage({
      action: "reset"
    }), this.transmuxer_.postMessage({
      action: "setTimestampOffset",
      timestampOffset: e.timestampOffset
    }));
    var s = this.createSimplifiedSegmentObj_(e), o = this.isEndOfStream_(e.mediaIndex, e.playlist, e.partIndex), u = this.mediaIndex !== null, l = e.timeline !== this.currentTimeline_ && e.timeline > 0, d = o || u && l;
    this.logger_("Requesting " + On(e)), s.map && !s.map.bytes && (this.logger_("going to request init segment."), this.appendInitSegment_ = {
      video: !0,
      audio: !0
    }), e.abortRequests = CE({
      xhr: this.vhs_.xhr,
      xhrOptions: this.xhrOptions_,
      decryptionWorker: this.decrypter_,
      segment: s,
      abortFn: this.handleAbort_.bind(this, e),
      progressFn: this.handleProgress_.bind(this),
      trackInfoFn: this.handleTrackInfo_.bind(this),
      timingInfoFn: this.handleTimingInfo_.bind(this),
      videoSegmentTimingInfoFn: this.handleSegmentTimingInfo_.bind(this, "video", e.requestId),
      audioSegmentTimingInfoFn: this.handleSegmentTimingInfo_.bind(this, "audio", e.requestId),
      captionsFn: this.handleCaptions_.bind(this),
      isEndOfTimeline: d,
      endedTimelineFn: function() {
        a.logger_("received endedtimeline callback");
      },
      id3Fn: this.handleId3_.bind(this),
      dataFn: this.handleData_.bind(this),
      doneFn: this.segmentRequestFinished_.bind(this),
      onTransmuxerLog: function(f) {
        var _ = f.message, v = f.level, y = f.stream;
        a.logger_(On(e) + " logged from transmuxer stream " + y + " as a " + v + ": " + _);
      }
    });
  }, i.trimBackBuffer_ = function(e) {
    var a = XE(this.seekable_(), this.currentTime_(), this.playlist_.targetDuration || 10);
    a > 0 && this.remove(0, a);
  }, i.createSimplifiedSegmentObj_ = function(e) {
    var a = e.segment, s = e.part, o = {
      resolvedUri: s ? s.resolvedUri : a.resolvedUri,
      byterange: s ? s.byterange : a.byterange,
      requestId: e.requestId,
      transmuxer: e.transmuxer,
      audioAppendStart: e.audioAppendStart,
      gopsToAlignWith: e.gopsToAlignWith,
      part: e.part
    }, u = e.playlist.segments[e.mediaIndex - 1];
    if (u && u.timeline === a.timeline && (u.videoTimingInfo ? o.baseStartTime = u.videoTimingInfo.transmuxedDecodeEnd : u.audioTimingInfo && (o.baseStartTime = u.audioTimingInfo.transmuxedDecodeEnd)), a.key) {
      var l = a.key.iv || new Uint32Array([0, 0, 0, e.mediaIndex + e.playlist.mediaSequence]);
      o.key = this.segmentKey(a.key), o.key.iv = l;
    }
    return a.map && (o.map = this.initSegmentForMap(a.map)), o;
  }, i.saveTransferStats_ = function(e) {
    this.mediaRequests += 1, e && (this.mediaBytesTransferred += e.bytesReceived, this.mediaTransferDuration += e.roundTripTime);
  }, i.saveBandwidthRelatedStats_ = function(e, a) {
    if (this.pendingSegment_.byteLength = a.bytesReceived, e < $s) {
      this.logger_("Ignoring segment's bandwidth because its duration of " + e + (" is less than the min to record " + $s));
      return;
    }
    this.bandwidth = a.bandwidth, this.roundTrip = a.roundTripTime;
  }, i.handleTimeout_ = function() {
    this.mediaRequestsTimedout += 1, this.bandwidth = 1, this.roundTrip = NaN, this.trigger("bandwidthupdate");
  }, i.segmentRequestFinished_ = function(e, a, s) {
    if (this.callQueue_.length) {
      this.callQueue_.push(this.segmentRequestFinished_.bind(this, e, a, s));
      return;
    }
    if (this.saveTransferStats_(a.stats), !!this.pendingSegment_ && a.requestId === this.pendingSegment_.requestId) {
      if (e) {
        if (this.pendingSegment_ = null, this.state = "READY", e.code === er.ABORTED)
          return;
        if (this.pause(), e.code === er.TIMEOUT) {
          this.handleTimeout_();
          return;
        }
        this.mediaRequestsErrored += 1, this.error(e), this.trigger("error");
        return;
      }
      var o = this.pendingSegment_;
      this.saveBandwidthRelatedStats_(o.duration, a.stats), o.endOfAllRequests = a.endOfAllRequests, s.gopInfo && (this.gopBuffer_ = HE(this.gopBuffer_, s.gopInfo, this.safeAppend_)), this.state = "APPENDING", this.trigger("appending"), this.waitForAppendsToComplete_(o);
    }
  }, i.setTimeMapping_ = function(e) {
    var a = this.syncController_.mappingForTimeline(e);
    a !== null && (this.timeMapping_ = a);
  }, i.updateMediaSecondsLoaded_ = function(e) {
    typeof e.start == "number" && typeof e.end == "number" ? this.mediaSecondsLoaded += e.end - e.start : this.mediaSecondsLoaded += e.duration;
  }, i.shouldUpdateTransmuxerTimestampOffset_ = function(e) {
    return e === null ? !1 : this.loaderType_ === "main" && e !== this.sourceUpdater_.videoTimestampOffset() || !this.audioDisabled_ && e !== this.sourceUpdater_.audioTimestampOffset();
  }, i.trueSegmentStart_ = function(e) {
    var a = e.currentStart, s = e.playlist, o = e.mediaIndex, u = e.firstVideoFrameTimeForData, l = e.currentVideoTimestampOffset, d = e.useVideoTimingInfo, h = e.videoTimingInfo, f = e.audioTimingInfo;
    if (typeof a < "u")
      return a;
    if (!d)
      return f.start;
    var _ = s.segments[o - 1];
    return o === 0 || !_ || typeof _.start > "u" || _.end !== u + l ? u : h.start;
  }, i.waitForAppendsToComplete_ = function(e) {
    var a = this.getCurrentMediaInfo_(e);
    if (!a) {
      this.error({
        message: "No starting media returned, likely due to an unsupported media format.",
        blacklistDuration: 1 / 0
      }), this.trigger("error");
      return;
    }
    var s = a.hasAudio, o = a.hasVideo, u = a.isMuxed, l = this.loaderType_ === "main" && o, d = !this.audioDisabled_ && s && !u;
    if (e.waitingOnAppends = 0, !e.hasAppendedData_) {
      !e.timingInfo && typeof e.timestampOffset == "number" && (this.isPendingTimestampOffset_ = !0), e.timingInfo = {
        start: 0
      }, e.waitingOnAppends++, this.isPendingTimestampOffset_ || (this.updateSourceBufferTimestampOffset_(e), this.processMetadataQueue_()), this.checkAppendsDone_(e);
      return;
    }
    l && e.waitingOnAppends++, d && e.waitingOnAppends++, l && this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this, e)), d && this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this, e));
  }, i.checkAppendsDone_ = function(e) {
    this.checkForAbort_(e.requestId) || (e.waitingOnAppends--, e.waitingOnAppends === 0 && this.handleAppendsDone_());
  }, i.checkForIllegalMediaSwitch = function(e) {
    var a = KE(this.loaderType_, this.getCurrentMediaInfo_(), e);
    return a ? (this.error({
      message: a,
      blacklistDuration: 1 / 0
    }), this.trigger("error"), !0) : !1;
  }, i.updateSourceBufferTimestampOffset_ = function(e) {
    if (!(e.timestampOffset === null || typeof e.timingInfo.start != "number" || e.changedTimestampOffset || this.loaderType_ !== "main")) {
      var a = !1;
      e.timestampOffset -= this.getSegmentStartTimeForTimestampOffsetCalculation_({
        videoTimingInfo: e.segment.videoTimingInfo,
        audioTimingInfo: e.segment.audioTimingInfo,
        timingInfo: e.timingInfo
      }), e.changedTimestampOffset = !0, e.timestampOffset !== this.sourceUpdater_.videoTimestampOffset() && (this.sourceUpdater_.videoTimestampOffset(e.timestampOffset), a = !0), e.timestampOffset !== this.sourceUpdater_.audioTimestampOffset() && (this.sourceUpdater_.audioTimestampOffset(e.timestampOffset), a = !0), a && this.trigger("timestampoffset");
    }
  }, i.getSegmentStartTimeForTimestampOffsetCalculation_ = function(e) {
    var a = e.videoTimingInfo, s = e.audioTimingInfo, o = e.timingInfo;
    return this.useDtsForTimestampOffset_ ? a && typeof a.transmuxedDecodeStart == "number" ? a.transmuxedDecodeStart : s && typeof s.transmuxedDecodeStart == "number" ? s.transmuxedDecodeStart : o.start : o.start;
  }, i.updateTimingInfoEnd_ = function(e) {
    e.timingInfo = e.timingInfo || {};
    var a = this.getMediaInfo_(), s = this.loaderType_ === "main" && a && a.hasVideo, o = s && e.videoTimingInfo ? e.videoTimingInfo : e.audioTimingInfo;
    !o || (e.timingInfo.end = typeof o.end == "number" ? o.end : o.start + e.duration);
  }, i.handleAppendsDone_ = function() {
    if (this.pendingSegment_ && this.trigger("appendsdone"), !this.pendingSegment_) {
      this.state = "READY", this.paused() || this.monitorBuffer_();
      return;
    }
    var e = this.pendingSegment_;
    this.updateTimingInfoEnd_(e), this.shouldSaveSegmentTimingInfo_ && this.syncController_.saveSegmentTimingInfo({
      segmentInfo: e,
      shouldSaveTimelineMapping: this.loaderType_ === "main"
    });
    var a = JE(e, this.sourceType_);
    if (a && (a.severity === "warn" ? G.log.warn(a.message) : this.logger_(a.message)), this.recordThroughput_(e), this.pendingSegment_ = null, this.state = "READY", e.isSyncRequest && (this.trigger("syncinfoupdate"), !e.hasAppendedData_)) {
      this.logger_("Throwing away un-appended sync request " + On(e));
      return;
    }
    this.logger_("Appended " + On(e)), this.addSegmentMetadataCue_(e), this.fetchAtBuffer_ = !0, this.currentTimeline_ !== e.timeline && (this.timelineChangeController_.lastTimelineChange({
      type: this.loaderType_,
      from: this.currentTimeline_,
      to: e.timeline
    }), this.loaderType_ === "main" && !this.audioDisabled_ && this.timelineChangeController_.lastTimelineChange({
      type: "audio",
      from: this.currentTimeline_,
      to: e.timeline
    })), this.currentTimeline_ = e.timeline, this.trigger("syncinfoupdate");
    var s = e.segment, o = e.part, u = s.end && this.currentTime_() - s.end > e.playlist.targetDuration * 3, l = o && o.end && this.currentTime_() - o.end > e.playlist.partTargetDuration * 3;
    if (u || l) {
      this.logger_("bad " + (u ? "segment" : "part") + " " + On(e)), this.resetEverything();
      return;
    }
    var d = this.mediaIndex !== null;
    d && this.trigger("bandwidthupdate"), this.trigger("progress"), this.mediaIndex = e.mediaIndex, this.partIndex = e.partIndex, this.isEndOfStream_(e.mediaIndex, e.playlist, e.partIndex) && this.endOfStream(), this.trigger("appended"), e.hasAppendedData_ && this.mediaAppends++, this.paused() || this.monitorBuffer_();
  }, i.recordThroughput_ = function(e) {
    if (e.duration < $s) {
      this.logger_("Ignoring segment's throughput because its duration of " + e.duration + (" is less than the min to record " + $s));
      return;
    }
    var a = this.throughput.rate, s = Date.now() - e.endOfAllRequests + 1, o = Math.floor(e.byteLength / s * 8 * 1e3);
    this.throughput.rate += (o - a) / ++this.throughput.count;
  }, i.addSegmentMetadataCue_ = function(e) {
    if (!!this.segmentMetadataTrack_) {
      var a = e.segment, s = a.start, o = a.end;
      if (!(!Ih(s) || !Ih(o))) {
        Fa(s, o, this.segmentMetadataTrack_);
        var u = B.WebKitDataCue || B.VTTCue, l = {
          custom: a.custom,
          dateTimeObject: a.dateTimeObject,
          dateTimeString: a.dateTimeString,
          bandwidth: e.playlist.attributes.BANDWIDTH,
          resolution: e.playlist.attributes.RESOLUTION,
          codecs: e.playlist.attributes.CODECS,
          byteLength: e.byteLength,
          uri: e.uri,
          timeline: e.timeline,
          playlist: e.playlist.id,
          start: s,
          end: o
        }, d = JSON.stringify(l), h = new u(s, o, d);
        h.value = l, this.segmentMetadataTrack_.addCue(h);
      }
    }
  }, t;
}(G.EventTarget);
function mr() {
}
var Lv = function(t) {
  return typeof t != "string" ? t : t.replace(/./, function(i) {
    return i.toUpperCase();
  });
}, ZE = ["video", "audio"], xd = function(t, i) {
  var r = i[t + "Buffer"];
  return r && r.updating || i.queuePending[t];
}, ex = function(t, i) {
  for (var r = 0; r < i.length; r++) {
    var e = i[r];
    if (e.type === "mediaSource")
      return null;
    if (e.type === t)
      return r;
  }
  return null;
}, Uc = function n(t, i) {
  if (i.queue.length !== 0) {
    var r = 0, e = i.queue[r];
    if (e.type === "mediaSource") {
      !i.updating() && i.mediaSource.readyState !== "closed" && (i.queue.shift(), e.action(i), e.doneFn && e.doneFn(), n("audio", i), n("video", i));
      return;
    }
    if (t !== "mediaSource" && !(!i.ready() || i.mediaSource.readyState === "closed" || xd(t, i))) {
      if (e.type !== t) {
        if (r = ex(t, i.queue), r === null)
          return;
        e = i.queue[r];
      }
      if (i.queue.splice(r, 1), i.queuePending[t] = e, e.action(t, i), !e.doneFn) {
        i.queuePending[t] = null, n(t, i);
        return;
      }
    }
  }
}, Ov = function(t, i) {
  var r = i[t + "Buffer"], e = Lv(t);
  !r || (r.removeEventListener("updateend", i["on" + e + "UpdateEnd_"]), r.removeEventListener("error", i["on" + e + "Error_"]), i.codecs[t] = null, i[t + "Buffer"] = null);
}, Yi = function(t, i) {
  return t && i && Array.prototype.indexOf.call(t.sourceBuffers, i) !== -1;
}, Ai = {
  appendBuffer: function(t, i, r) {
    return function(e, a) {
      var s = a[e + "Buffer"];
      if (!!Yi(a.mediaSource, s)) {
        a.logger_("Appending segment " + i.mediaIndex + "'s " + t.length + " bytes to " + e + "Buffer");
        try {
          s.appendBuffer(t);
        } catch (o) {
          a.logger_("Error with code " + o.code + " " + (o.code === Dv ? "(QUOTA_EXCEEDED_ERR) " : "") + ("when appending segment " + i.mediaIndex + " to " + e + "Buffer")), a.queuePending[e] = null, r(o);
        }
      }
    };
  },
  remove: function(t, i) {
    return function(r, e) {
      var a = e[r + "Buffer"];
      if (!!Yi(e.mediaSource, a)) {
        e.logger_("Removing " + t + " to " + i + " from " + r + "Buffer");
        try {
          a.remove(t, i);
        } catch {
          e.logger_("Remove " + t + " to " + i + " from " + r + "Buffer failed");
        }
      }
    };
  },
  timestampOffset: function(t) {
    return function(i, r) {
      var e = r[i + "Buffer"];
      !Yi(r.mediaSource, e) || (r.logger_("Setting " + i + "timestampOffset to " + t), e.timestampOffset = t);
    };
  },
  callback: function(t) {
    return function(i, r) {
      t();
    };
  },
  endOfStream: function(t) {
    return function(i) {
      if (i.mediaSource.readyState === "open") {
        i.logger_("Calling mediaSource endOfStream(" + (t || "") + ")");
        try {
          i.mediaSource.endOfStream(t);
        } catch (r) {
          G.log.warn("Failed to call media source endOfStream", r);
        }
      }
    };
  },
  duration: function(t) {
    return function(i) {
      i.logger_("Setting mediaSource duration to " + t);
      try {
        i.mediaSource.duration = t;
      } catch (r) {
        G.log.warn("Failed to set media source duration", r);
      }
    };
  },
  abort: function() {
    return function(t, i) {
      if (i.mediaSource.readyState === "open") {
        var r = i[t + "Buffer"];
        if (!!Yi(i.mediaSource, r)) {
          i.logger_("calling abort on " + t + "Buffer");
          try {
            r.abort();
          } catch (e) {
            G.log.warn("Failed to abort on " + t + "Buffer", e);
          }
        }
      }
    };
  },
  addSourceBuffer: function(t, i) {
    return function(r) {
      var e = Lv(t), a = $a(i);
      r.logger_("Adding " + t + "Buffer with codec " + i + " to mediaSource");
      var s = r.mediaSource.addSourceBuffer(a);
      s.addEventListener("updateend", r["on" + e + "UpdateEnd_"]), s.addEventListener("error", r["on" + e + "Error_"]), r.codecs[t] = i, r[t + "Buffer"] = s;
    };
  },
  removeSourceBuffer: function(t) {
    return function(i) {
      var r = i[t + "Buffer"];
      if (Ov(t, i), !!Yi(i.mediaSource, r)) {
        i.logger_("Removing " + t + "Buffer with codec " + i.codecs[t] + " from mediaSource");
        try {
          i.mediaSource.removeSourceBuffer(r);
        } catch (e) {
          G.log.warn("Failed to removeSourceBuffer " + t + "Buffer", e);
        }
      }
    };
  },
  changeType: function(t) {
    return function(i, r) {
      var e = r[i + "Buffer"], a = $a(t);
      !Yi(r.mediaSource, e) || r.codecs[i] !== t && (r.logger_("changing " + i + "Buffer codec from " + r.codecs[i] + " to " + t), e.changeType(a), r.codecs[i] = t);
    };
  }
}, Ci = function(t) {
  var i = t.type, r = t.sourceUpdater, e = t.action, a = t.doneFn, s = t.name;
  r.queue.push({
    type: i,
    action: e,
    doneFn: a,
    name: s
  }), Uc(i, r);
}, Rh = function(t, i) {
  return function(r) {
    if (i.queuePending[t]) {
      var e = i.queuePending[t].doneFn;
      i.queuePending[t] = null, e && e(i[t + "Error_"]);
    }
    Uc(t, i);
  };
}, Rv = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r) {
    var e;
    return e = n.call(this) || this, e.mediaSource = r, e.sourceopenListener_ = function() {
      return Uc("mediaSource", Ge(e));
    }, e.mediaSource.addEventListener("sourceopen", e.sourceopenListener_), e.logger_ = Gi("SourceUpdater"), e.audioTimestampOffset_ = 0, e.videoTimestampOffset_ = 0, e.queue = [], e.queuePending = {
      audio: null,
      video: null
    }, e.delayedAudioAppendQueue_ = [], e.videoAppendQueued_ = !1, e.codecs = {}, e.onVideoUpdateEnd_ = Rh("video", Ge(e)), e.onAudioUpdateEnd_ = Rh("audio", Ge(e)), e.onVideoError_ = function(a) {
      e.videoError_ = a;
    }, e.onAudioError_ = function(a) {
      e.audioError_ = a;
    }, e.createdSourceBuffers_ = !1, e.initializedEme_ = !1, e.triggeredReady_ = !1, e;
  }
  var i = t.prototype;
  return i.initializedEme = function() {
    this.initializedEme_ = !0, this.triggerReady();
  }, i.hasCreatedSourceBuffers = function() {
    return this.createdSourceBuffers_;
  }, i.hasInitializedAnyEme = function() {
    return this.initializedEme_;
  }, i.ready = function() {
    return this.hasCreatedSourceBuffers() && this.hasInitializedAnyEme();
  }, i.createSourceBuffers = function(e) {
    this.hasCreatedSourceBuffers() || (this.addOrChangeSourceBuffers(e), this.createdSourceBuffers_ = !0, this.trigger("createdsourcebuffers"), this.triggerReady());
  }, i.triggerReady = function() {
    this.ready() && !this.triggeredReady_ && (this.triggeredReady_ = !0, this.trigger("ready"));
  }, i.addSourceBuffer = function(e, a) {
    Ci({
      type: "mediaSource",
      sourceUpdater: this,
      action: Ai.addSourceBuffer(e, a),
      name: "addSourceBuffer"
    });
  }, i.abort = function(e) {
    Ci({
      type: e,
      sourceUpdater: this,
      action: Ai.abort(e),
      name: "abort"
    });
  }, i.removeSourceBuffer = function(e) {
    if (!this.canRemoveSourceBuffer()) {
      G.log.error("removeSourceBuffer is not supported!");
      return;
    }
    Ci({
      type: "mediaSource",
      sourceUpdater: this,
      action: Ai.removeSourceBuffer(e),
      name: "removeSourceBuffer"
    });
  }, i.canRemoveSourceBuffer = function() {
    return !G.browser.IE_VERSION && !G.browser.IS_FIREFOX && B.MediaSource && B.MediaSource.prototype && typeof B.MediaSource.prototype.removeSourceBuffer == "function";
  }, t.canChangeType = function() {
    return B.SourceBuffer && B.SourceBuffer.prototype && typeof B.SourceBuffer.prototype.changeType == "function";
  }, i.canChangeType = function() {
    return this.constructor.canChangeType();
  }, i.changeType = function(e, a) {
    if (!this.canChangeType()) {
      G.log.error("changeType is not supported!");
      return;
    }
    Ci({
      type: e,
      sourceUpdater: this,
      action: Ai.changeType(a),
      name: "changeType"
    });
  }, i.addOrChangeSourceBuffers = function(e) {
    var a = this;
    if (!e || typeof e != "object" || Object.keys(e).length === 0)
      throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");
    Object.keys(e).forEach(function(s) {
      var o = e[s];
      if (!a.hasCreatedSourceBuffers())
        return a.addSourceBuffer(s, o);
      a.canChangeType() && a.changeType(s, o);
    });
  }, i.appendBuffer = function(e, a) {
    var s = this, o = e.segmentInfo, u = e.type, l = e.bytes;
    if (this.processedAppend_ = !0, u === "audio" && this.videoBuffer && !this.videoAppendQueued_) {
      this.delayedAudioAppendQueue_.push([e, a]), this.logger_("delayed audio append of " + l.length + " until video append");
      return;
    }
    var d = a;
    if (Ci({
      type: u,
      sourceUpdater: this,
      action: Ai.appendBuffer(l, o || {
        mediaIndex: -1
      }, d),
      doneFn: a,
      name: "appendBuffer"
    }), u === "video") {
      if (this.videoAppendQueued_ = !0, !this.delayedAudioAppendQueue_.length)
        return;
      var h = this.delayedAudioAppendQueue_.slice();
      this.logger_("queuing delayed audio " + h.length + " appendBuffers"), this.delayedAudioAppendQueue_.length = 0, h.forEach(function(f) {
        s.appendBuffer.apply(s, f);
      });
    }
  }, i.audioBuffered = function() {
    return Yi(this.mediaSource, this.audioBuffer) && this.audioBuffer.buffered ? this.audioBuffer.buffered : G.createTimeRange();
  }, i.videoBuffered = function() {
    return Yi(this.mediaSource, this.videoBuffer) && this.videoBuffer.buffered ? this.videoBuffer.buffered : G.createTimeRange();
  }, i.buffered = function() {
    var e = Yi(this.mediaSource, this.videoBuffer) ? this.videoBuffer : null, a = Yi(this.mediaSource, this.audioBuffer) ? this.audioBuffer : null;
    return a && !e ? this.audioBuffered() : e && !a ? this.videoBuffered() : bS(this.audioBuffered(), this.videoBuffered());
  }, i.setDuration = function(e, a) {
    a === void 0 && (a = mr), Ci({
      type: "mediaSource",
      sourceUpdater: this,
      action: Ai.duration(e),
      name: "duration",
      doneFn: a
    });
  }, i.endOfStream = function(e, a) {
    e === void 0 && (e = null), a === void 0 && (a = mr), typeof e != "string" && (e = void 0), Ci({
      type: "mediaSource",
      sourceUpdater: this,
      action: Ai.endOfStream(e),
      name: "endOfStream",
      doneFn: a
    });
  }, i.removeAudio = function(e, a, s) {
    if (s === void 0 && (s = mr), !this.audioBuffered().length || this.audioBuffered().end(0) === 0) {
      s();
      return;
    }
    Ci({
      type: "audio",
      sourceUpdater: this,
      action: Ai.remove(e, a),
      doneFn: s,
      name: "remove"
    });
  }, i.removeVideo = function(e, a, s) {
    if (s === void 0 && (s = mr), !this.videoBuffered().length || this.videoBuffered().end(0) === 0) {
      s();
      return;
    }
    Ci({
      type: "video",
      sourceUpdater: this,
      action: Ai.remove(e, a),
      doneFn: s,
      name: "remove"
    });
  }, i.updating = function() {
    return !!(xd("audio", this) || xd("video", this));
  }, i.audioTimestampOffset = function(e) {
    return typeof e < "u" && this.audioBuffer && this.audioTimestampOffset_ !== e && (Ci({
      type: "audio",
      sourceUpdater: this,
      action: Ai.timestampOffset(e),
      name: "timestampOffset"
    }), this.audioTimestampOffset_ = e), this.audioTimestampOffset_;
  }, i.videoTimestampOffset = function(e) {
    return typeof e < "u" && this.videoBuffer && this.videoTimestampOffset !== e && (Ci({
      type: "video",
      sourceUpdater: this,
      action: Ai.timestampOffset(e),
      name: "timestampOffset"
    }), this.videoTimestampOffset_ = e), this.videoTimestampOffset_;
  }, i.audioQueueCallback = function(e) {
    !this.audioBuffer || Ci({
      type: "audio",
      sourceUpdater: this,
      action: Ai.callback(e),
      name: "callback"
    });
  }, i.videoQueueCallback = function(e) {
    !this.videoBuffer || Ci({
      type: "video",
      sourceUpdater: this,
      action: Ai.callback(e),
      name: "callback"
    });
  }, i.dispose = function() {
    var e = this;
    this.trigger("dispose"), ZE.forEach(function(a) {
      e.abort(a), e.canRemoveSourceBuffer() ? e.removeSourceBuffer(a) : e[a + "QueueCallback"](function() {
        return Ov(a, e);
      });
    }), this.videoAppendQueued_ = !1, this.delayedAudioAppendQueue_.length = 0, this.sourceopenListener_ && this.mediaSource.removeEventListener("sourceopen", this.sourceopenListener_), this.off();
  }, t;
}(G.EventTarget), Nh = function(t) {
  return decodeURIComponent(escape(String.fromCharCode.apply(null, t)));
}, Mh = new Uint8Array(`

`.split("").map(function(n) {
  return n.charCodeAt(0);
})), tx = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e) {
    var a;
    return e === void 0 && (e = {}), a = n.call(this, r, e) || this, a.mediaSource_ = null, a.subtitlesTrack_ = null, a.loaderType_ = "subtitle", a.featuresNativeTextTracks_ = r.featuresNativeTextTracks, a.shouldSaveSegmentTimingInfo_ = !1, a;
  }
  var i = t.prototype;
  return i.createTransmuxer_ = function() {
    return null;
  }, i.buffered_ = function() {
    if (!this.subtitlesTrack_ || !this.subtitlesTrack_.cues || !this.subtitlesTrack_.cues.length)
      return G.createTimeRanges();
    var e = this.subtitlesTrack_.cues, a = e[0].startTime, s = e[e.length - 1].startTime;
    return G.createTimeRanges([[a, s]]);
  }, i.initSegmentForMap = function(e, a) {
    if (a === void 0 && (a = !1), !e)
      return null;
    var s = xo(e), o = this.initSegments_[s];
    if (a && !o && e.bytes) {
      var u = Mh.byteLength + e.bytes.byteLength, l = new Uint8Array(u);
      l.set(e.bytes), l.set(Mh, e.bytes.byteLength), this.initSegments_[s] = o = {
        resolvedUri: e.resolvedUri,
        byterange: e.byterange,
        bytes: l
      };
    }
    return o || e;
  }, i.couldBeginLoading_ = function() {
    return this.playlist_ && this.subtitlesTrack_ && !this.paused();
  }, i.init_ = function() {
    return this.state = "READY", this.resetEverything(), this.monitorBuffer_();
  }, i.track = function(e) {
    return typeof e > "u" ? this.subtitlesTrack_ : (this.subtitlesTrack_ = e, this.state === "INIT" && this.couldBeginLoading_() && this.init_(), this.subtitlesTrack_);
  }, i.remove = function(e, a) {
    Fa(e, a, this.subtitlesTrack_);
  }, i.fillBuffer_ = function() {
    var e = this, a = this.chooseNextRequest_();
    if (!!a) {
      if (this.syncController_.timestampOffsetForTimeline(a.timeline) === null) {
        var s = function() {
          e.state = "READY", e.paused() || e.monitorBuffer_();
        };
        this.syncController_.one("timestampoffset", s), this.state = "WAITING_ON_TIMELINE";
        return;
      }
      this.loadSegment_(a);
    }
  }, i.timestampOffsetForSegment_ = function() {
    return null;
  }, i.chooseNextRequest_ = function() {
    return this.skipEmptySegments_(n.prototype.chooseNextRequest_.call(this));
  }, i.skipEmptySegments_ = function(e) {
    for (; e && e.segment.empty; ) {
      if (e.mediaIndex + 1 >= e.playlist.segments.length) {
        e = null;
        break;
      }
      e = this.generateSegmentInfo_({
        playlist: e.playlist,
        mediaIndex: e.mediaIndex + 1,
        startOfSegment: e.startOfSegment + e.duration,
        isSyncRequest: e.isSyncRequest
      });
    }
    return e;
  }, i.stopForError = function(e) {
    this.error(e), this.state = "READY", this.pause(), this.trigger("error");
  }, i.segmentRequestFinished_ = function(e, a, s) {
    var o = this;
    if (!this.subtitlesTrack_) {
      this.state = "READY";
      return;
    }
    if (this.saveTransferStats_(a.stats), !this.pendingSegment_) {
      this.state = "READY", this.mediaRequestsAborted += 1;
      return;
    }
    if (e) {
      e.code === er.TIMEOUT && this.handleTimeout_(), e.code === er.ABORTED ? this.mediaRequestsAborted += 1 : this.mediaRequestsErrored += 1, this.stopForError(e);
      return;
    }
    var u = this.pendingSegment_;
    this.saveBandwidthRelatedStats_(u.duration, a.stats), this.state = "APPENDING", this.trigger("appending");
    var l = u.segment;
    if (l.map && (l.map.bytes = a.map.bytes), u.bytes = a.bytes, typeof B.WebVTT != "function" && this.subtitlesTrack_ && this.subtitlesTrack_.tech_) {
      var d, h = function() {
        o.subtitlesTrack_.tech_.off("vttjsloaded", d), o.stopForError({
          message: "Error loading vtt.js"
        });
      };
      d = function() {
        o.subtitlesTrack_.tech_.off("vttjserror", h), o.segmentRequestFinished_(e, a, s);
      }, this.state = "WAITING_ON_VTTJS", this.subtitlesTrack_.tech_.one("vttjsloaded", d), this.subtitlesTrack_.tech_.one("vttjserror", h);
      return;
    }
    l.requested = !0;
    try {
      this.parseVTTCues_(u);
    } catch (f) {
      this.stopForError({
        message: f.message
      });
      return;
    }
    if (this.updateTimeMapping_(u, this.syncController_.timelines[u.timeline], this.playlist_), u.cues.length ? u.timingInfo = {
      start: u.cues[0].startTime,
      end: u.cues[u.cues.length - 1].endTime
    } : u.timingInfo = {
      start: u.startOfSegment,
      end: u.startOfSegment + u.duration
    }, u.isSyncRequest) {
      this.trigger("syncinfoupdate"), this.pendingSegment_ = null, this.state = "READY";
      return;
    }
    u.byteLength = u.bytes.byteLength, this.mediaSecondsLoaded += l.duration, u.cues.forEach(function(f) {
      o.subtitlesTrack_.addCue(o.featuresNativeTextTracks_ ? new B.VTTCue(f.startTime, f.endTime, f.text) : f);
    }), VE(this.subtitlesTrack_), this.handleAppendsDone_();
  }, i.handleData_ = function() {
  }, i.updateTimingInfoEnd_ = function() {
  }, i.parseVTTCues_ = function(e) {
    var a, s = !1;
    typeof B.TextDecoder == "function" ? a = new B.TextDecoder("utf8") : (a = B.WebVTT.StringDecoder(), s = !0);
    var o = new B.WebVTT.Parser(B, B.vttjs, a);
    if (e.cues = [], e.timestampmap = {
      MPEGTS: 0,
      LOCAL: 0
    }, o.oncue = e.cues.push.bind(e.cues), o.ontimestampmap = function(d) {
      e.timestampmap = d;
    }, o.onparsingerror = function(d) {
      G.log.warn("Error encountered when parsing cues: " + d.message);
    }, e.segment.map) {
      var u = e.segment.map.bytes;
      s && (u = Nh(u)), o.parse(u);
    }
    var l = e.bytes;
    s && (l = Nh(l)), o.parse(l), o.flush();
  }, i.updateTimeMapping_ = function(e, a, s) {
    var o = e.segment;
    if (!!a) {
      if (!e.cues.length) {
        o.empty = !0;
        return;
      }
      var u = e.timestampmap, l = u.MPEGTS / fo.ONE_SECOND_IN_TS - u.LOCAL + a.mapping;
      if (e.cues.forEach(function(f) {
        f.startTime += l, f.endTime += l;
      }), !s.syncInfo) {
        var d = e.cues[0].startTime, h = e.cues[e.cues.length - 1].startTime;
        s.syncInfo = {
          mediaSequence: s.mediaSequence + e.mediaIndex,
          time: Math.min(d, h - o.duration)
        };
      }
    }
  }, t;
}(Ed), ix = function(t, i) {
  for (var r = t.cues, e = 0; e < r.length; e++) {
    var a = r[e];
    if (i >= a.adStartTime && i <= a.adEndTime)
      return a;
  }
  return null;
}, rx = function(t, i, r) {
  if (r === void 0 && (r = 0), !!t.segments)
    for (var e = r, a, s = 0; s < t.segments.length; s++) {
      var o = t.segments[s];
      if (a || (a = ix(i, e + o.duration / 2)), a) {
        if ("cueIn" in o) {
          a.endTime = e, a.adEndTime = e, e += o.duration, a = null;
          continue;
        }
        if (e < a.endTime) {
          e += o.duration;
          continue;
        }
        a.endTime += o.duration;
      } else if ("cueOut" in o && (a = new B.VTTCue(e, e + o.duration, o.cueOut), a.adStartTime = e, a.adEndTime = e + parseFloat(o.cueOut), i.addCue(a)), "cueOutCont" in o) {
        var u = o.cueOutCont.split("/").map(parseFloat), l = u[0], d = u[1];
        a = new B.VTTCue(e, e + o.duration, ""), a.adStartTime = e - l, a.adEndTime = a.adStartTime + d, i.addCue(a);
      }
      e += o.duration;
    }
}, nx = 86400, Fh = [
  {
    name: "VOD",
    run: function(t, i, r, e, a) {
      if (r !== 1 / 0) {
        var s = {
          time: 0,
          segmentIndex: 0,
          partIndex: null
        };
        return s;
      }
      return null;
    }
  },
  {
    name: "ProgramDateTime",
    run: function(t, i, r, e, a) {
      if (!Object.keys(t.timelineToDatetimeMappings).length)
        return null;
      var s = null, o = null, u = md(i);
      a = a || 0;
      for (var l = 0; l < u.length; l++) {
        var d = i.endList || a === 0 ? l : u.length - (l + 1), h = u[d], f = h.segment, _ = t.timelineToDatetimeMappings[f.timeline];
        if (!(!_ || !f.dateTimeObject)) {
          var v = f.dateTimeObject.getTime() / 1e3, y = v + _;
          if (f.parts && typeof h.partIndex == "number")
            for (var T = 0; T < h.partIndex; T++)
              y += f.parts[T].duration;
          var I = Math.abs(a - y);
          if (o !== null && (I === 0 || o < I))
            break;
          o = I, s = {
            time: y,
            segmentIndex: h.segmentIndex,
            partIndex: h.partIndex
          };
        }
      }
      return s;
    }
  },
  {
    name: "Segment",
    run: function(t, i, r, e, a) {
      var s = null, o = null;
      a = a || 0;
      for (var u = md(i), l = 0; l < u.length; l++) {
        var d = i.endList || a === 0 ? l : u.length - (l + 1), h = u[d], f = h.segment, _ = h.part && h.part.start || f && f.start;
        if (f.timeline === e && typeof _ < "u") {
          var v = Math.abs(a - _);
          if (o !== null && o < v)
            break;
          (!s || o === null || o >= v) && (o = v, s = {
            time: _,
            segmentIndex: h.segmentIndex,
            partIndex: h.partIndex
          });
        }
      }
      return s;
    }
  },
  {
    name: "Discontinuity",
    run: function(t, i, r, e, a) {
      var s = null;
      if (a = a || 0, i.discontinuityStarts && i.discontinuityStarts.length)
        for (var o = null, u = 0; u < i.discontinuityStarts.length; u++) {
          var l = i.discontinuityStarts[u], d = i.discontinuitySequence + u + 1, h = t.discontinuities[d];
          if (h) {
            var f = Math.abs(a - h.time);
            if (o !== null && o < f)
              break;
            (!s || o === null || o >= f) && (o = f, s = {
              time: h.time,
              segmentIndex: l,
              partIndex: null
            });
          }
        }
      return s;
    }
  },
  {
    name: "Playlist",
    run: function(t, i, r, e, a) {
      if (i.syncInfo) {
        var s = {
          time: i.syncInfo.time,
          segmentIndex: i.syncInfo.mediaSequence - i.mediaSequence,
          partIndex: null
        };
        return s;
      }
      return null;
    }
  }
], ax = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r) {
    var e;
    return e = n.call(this) || this, e.timelines = [], e.discontinuities = [], e.timelineToDatetimeMappings = {}, e.logger_ = Gi("SyncController"), e;
  }
  var i = t.prototype;
  return i.getSyncPoint = function(e, a, s, o) {
    var u = this.runStrategies_(e, a, s, o);
    return u.length ? this.selectSyncPoint_(u, {
      key: "time",
      value: o
    }) : null;
  }, i.getExpiredTime = function(e, a) {
    if (!e || !e.segments)
      return null;
    var s = this.runStrategies_(e, a, e.discontinuitySequence, 0);
    if (!s.length)
      return null;
    var o = this.selectSyncPoint_(s, {
      key: "segmentIndex",
      value: 0
    });
    return o.segmentIndex > 0 && (o.time *= -1), Math.abs(o.time + ja({
      defaultDuration: e.targetDuration,
      durationList: e.segments,
      startIndex: o.segmentIndex,
      endIndex: 0
    }));
  }, i.runStrategies_ = function(e, a, s, o) {
    for (var u = [], l = 0; l < Fh.length; l++) {
      var d = Fh[l], h = d.run(this, e, a, s, o);
      h && (h.strategy = d.name, u.push({
        strategy: d.name,
        syncPoint: h
      }));
    }
    return u;
  }, i.selectSyncPoint_ = function(e, a) {
    for (var s = e[0].syncPoint, o = Math.abs(e[0].syncPoint[a.key] - a.value), u = e[0].strategy, l = 1; l < e.length; l++) {
      var d = Math.abs(e[l].syncPoint[a.key] - a.value);
      d < o && (o = d, s = e[l].syncPoint, u = e[l].strategy);
    }
    return this.logger_("syncPoint for [" + a.key + ": " + a.value + "] chosen with strategy" + (" [" + u + "]: [time:" + s.time + ",") + (" segmentIndex:" + s.segmentIndex) + (typeof s.partIndex == "number" ? ",partIndex:" + s.partIndex : "") + "]"), s;
  }, i.saveExpiredSegmentInfo = function(e, a) {
    var s = a.mediaSequence - e.mediaSequence;
    if (s > nx) {
      G.log.warn("Not saving expired segment info. Media sequence gap " + s + " is too large.");
      return;
    }
    for (var o = s - 1; o >= 0; o--) {
      var u = e.segments[o];
      if (u && typeof u.start < "u") {
        a.syncInfo = {
          mediaSequence: e.mediaSequence + o,
          time: u.start
        }, this.logger_("playlist refresh sync: [time:" + a.syncInfo.time + "," + (" mediaSequence: " + a.syncInfo.mediaSequence + "]")), this.trigger("syncinfoupdate");
        break;
      }
    }
  }, i.setDateTimeMappingForStart = function(e) {
    if (this.timelineToDatetimeMappings = {}, e.segments && e.segments.length && e.segments[0].dateTimeObject) {
      var a = e.segments[0], s = a.dateTimeObject.getTime() / 1e3;
      this.timelineToDatetimeMappings[a.timeline] = -s;
    }
  }, i.saveSegmentTimingInfo = function(e) {
    var a = e.segmentInfo, s = e.shouldSaveTimelineMapping, o = this.calculateSegmentTimeMapping_(a, a.timingInfo, s), u = a.segment;
    o && (this.saveDiscontinuitySyncInfo_(a), a.playlist.syncInfo || (a.playlist.syncInfo = {
      mediaSequence: a.playlist.mediaSequence + a.mediaIndex,
      time: u.start
    }));
    var l = u.dateTimeObject;
    u.discontinuity && s && l && (this.timelineToDatetimeMappings[u.timeline] = -(l.getTime() / 1e3));
  }, i.timestampOffsetForTimeline = function(e) {
    return typeof this.timelines[e] > "u" ? null : this.timelines[e].time;
  }, i.mappingForTimeline = function(e) {
    return typeof this.timelines[e] > "u" ? null : this.timelines[e].mapping;
  }, i.calculateSegmentTimeMapping_ = function(e, a, s) {
    var o = e.segment, u = e.part, l = this.timelines[e.timeline], d, h;
    if (typeof e.timestampOffset == "number")
      l = {
        time: e.startOfSegment,
        mapping: e.startOfSegment - a.start
      }, s && (this.timelines[e.timeline] = l, this.trigger("timestampoffset"), this.logger_("time mapping for timeline " + e.timeline + ": " + ("[time: " + l.time + "] [mapping: " + l.mapping + "]"))), d = e.startOfSegment, h = a.end + l.mapping;
    else if (l)
      d = a.start + l.mapping, h = a.end + l.mapping;
    else
      return !1;
    return u && (u.start = d, u.end = h), (!o.start || d < o.start) && (o.start = d), o.end = h, !0;
  }, i.saveDiscontinuitySyncInfo_ = function(e) {
    var a = e.playlist, s = e.segment;
    if (s.discontinuity)
      this.discontinuities[s.timeline] = {
        time: s.start,
        accuracy: 0
      };
    else if (a.discontinuityStarts && a.discontinuityStarts.length)
      for (var o = 0; o < a.discontinuityStarts.length; o++) {
        var u = a.discontinuityStarts[o], l = a.discontinuitySequence + o + 1, d = u - e.mediaIndex, h = Math.abs(d);
        if (!this.discontinuities[l] || this.discontinuities[l].accuracy > h) {
          var f = void 0;
          d < 0 ? f = s.start - ja({
            defaultDuration: a.targetDuration,
            durationList: a.segments,
            startIndex: e.mediaIndex,
            endIndex: u
          }) : f = s.end + ja({
            defaultDuration: a.targetDuration,
            durationList: a.segments,
            startIndex: e.mediaIndex + 1,
            endIndex: u
          }), this.discontinuities[l] = {
            time: f,
            accuracy: h
          };
        }
      }
  }, i.dispose = function() {
    this.trigger("dispose"), this.off();
  }, t;
}(G.EventTarget), sx = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t() {
    var r;
    return r = n.call(this) || this, r.pendingTimelineChanges_ = {}, r.lastTimelineChanges_ = {}, r;
  }
  var i = t.prototype;
  return i.clearPendingTimelineChange = function(e) {
    this.pendingTimelineChanges_[e] = null, this.trigger("pendingtimelinechange");
  }, i.pendingTimelineChange = function(e) {
    var a = e.type, s = e.from, o = e.to;
    return typeof s == "number" && typeof o == "number" && (this.pendingTimelineChanges_[a] = {
      type: a,
      from: s,
      to: o
    }, this.trigger("pendingtimelinechange")), this.pendingTimelineChanges_[a];
  }, i.lastTimelineChange = function(e) {
    var a = e.type, s = e.from, o = e.to;
    return typeof s == "number" && typeof o == "number" && (this.lastTimelineChanges_[a] = {
      type: a,
      from: s,
      to: o
    }, delete this.pendingTimelineChanges_[a], this.trigger("timelinechange")), this.lastTimelineChanges_[a];
  }, i.dispose = function() {
    this.trigger("dispose"), this.pendingTimelineChanges_ = {}, this.lastTimelineChanges_ = {}, this.off();
  }, t;
}(G.EventTarget), ox = Tv(bv(function() {
  var n = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
  function t(k, P, L) {
    return L = {
      path: P,
      exports: {},
      require: function(U, ie) {
        return i(U, ie == null ? L.path : ie);
      }
    }, k(L, L.exports), L.exports;
  }
  function i() {
    throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs");
  }
  var r = t(function(k) {
    function P(O, U) {
      for (var ie = 0; ie < U.length; ie++) {
        var z = U[ie];
        z.enumerable = z.enumerable || !1, z.configurable = !0, "value" in z && (z.writable = !0), Object.defineProperty(O, z.key, z);
      }
    }
    function L(O, U, ie) {
      return U && P(O.prototype, U), ie && P(O, ie), O;
    }
    k.exports = L, k.exports.default = k.exports, k.exports.__esModule = !0;
  }), e = t(function(k) {
    function P(L, O) {
      return k.exports = P = Object.setPrototypeOf || function(ie, z) {
        return ie.__proto__ = z, ie;
      }, k.exports.default = k.exports, k.exports.__esModule = !0, P(L, O);
    }
    k.exports = P, k.exports.default = k.exports, k.exports.__esModule = !0;
  }), a = t(function(k) {
    function P(L, O) {
      L.prototype = Object.create(O.prototype), L.prototype.constructor = L, e(L, O);
    }
    k.exports = P, k.exports.default = k.exports, k.exports.__esModule = !0;
  }), s = /* @__PURE__ */ function() {
    function k() {
      this.listeners = {};
    }
    var P = k.prototype;
    return P.on = function(O, U) {
      this.listeners[O] || (this.listeners[O] = []), this.listeners[O].push(U);
    }, P.off = function(O, U) {
      if (!this.listeners[O])
        return !1;
      var ie = this.listeners[O].indexOf(U);
      return this.listeners[O] = this.listeners[O].slice(0), this.listeners[O].splice(ie, 1), ie > -1;
    }, P.trigger = function(O) {
      var U = this.listeners[O];
      if (!!U)
        if (arguments.length === 2)
          for (var ie = U.length, z = 0; z < ie; ++z)
            U[z].call(this, arguments[1]);
        else
          for (var le = Array.prototype.slice.call(arguments, 1), se = U.length, me = 0; me < se; ++me)
            U[me].apply(this, le);
    }, P.dispose = function() {
      this.listeners = {};
    }, P.pipe = function(O) {
      this.on("data", function(U) {
        O.push(U);
      });
    }, k;
  }();
  /*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */
  function o(k) {
    return k.subarray(0, k.byteLength - k[k.byteLength - 1]);
  }
  /*! @name aes-decrypter @version 3.1.3 @license Apache-2.0 */
  var u = function() {
    var P = [[[], [], [], [], []], [[], [], [], [], []]], L = P[0], O = P[1], U = L[4], ie = O[4], z, le, se, me = [], M = [], ne, fe, pe, H, Q, F;
    for (z = 0; z < 256; z++)
      M[(me[z] = z << 1 ^ (z >> 7) * 283) ^ z] = z;
    for (le = se = 0; !U[le]; le ^= ne || 1, se = M[se] || 1)
      for (H = se ^ se << 1 ^ se << 2 ^ se << 3 ^ se << 4, H = H >> 8 ^ H & 255 ^ 99, U[le] = H, ie[H] = le, pe = me[fe = me[ne = me[le]]], F = pe * 16843009 ^ fe * 65537 ^ ne * 257 ^ le * 16843008, Q = me[H] * 257 ^ H * 16843008, z = 0; z < 4; z++)
        L[z][le] = Q = Q << 24 ^ Q >>> 8, O[z][H] = F = F << 24 ^ F >>> 8;
    for (z = 0; z < 5; z++)
      L[z] = L[z].slice(0), O[z] = O[z].slice(0);
    return P;
  }, l = null, d = /* @__PURE__ */ function() {
    function k(L) {
      l || (l = u()), this._tables = [[l[0][0].slice(), l[0][1].slice(), l[0][2].slice(), l[0][3].slice(), l[0][4].slice()], [l[1][0].slice(), l[1][1].slice(), l[1][2].slice(), l[1][3].slice(), l[1][4].slice()]];
      var O, U, ie, z = this._tables[0][4], le = this._tables[1], se = L.length, me = 1;
      if (se !== 4 && se !== 6 && se !== 8)
        throw new Error("Invalid aes key size");
      var M = L.slice(0), ne = [];
      for (this._key = [M, ne], O = se; O < 4 * se + 28; O++)
        ie = M[O - 1], (O % se === 0 || se === 8 && O % se === 4) && (ie = z[ie >>> 24] << 24 ^ z[ie >> 16 & 255] << 16 ^ z[ie >> 8 & 255] << 8 ^ z[ie & 255], O % se === 0 && (ie = ie << 8 ^ ie >>> 24 ^ me << 24, me = me << 1 ^ (me >> 7) * 283)), M[O] = M[O - se] ^ ie;
      for (U = 0; O; U++, O--)
        ie = M[U & 3 ? O : O - 4], O <= 4 || U < 4 ? ne[U] = ie : ne[U] = le[0][z[ie >>> 24]] ^ le[1][z[ie >> 16 & 255]] ^ le[2][z[ie >> 8 & 255]] ^ le[3][z[ie & 255]];
    }
    var P = k.prototype;
    return P.decrypt = function(O, U, ie, z, le, se) {
      var me = this._key[1], M = O ^ me[0], ne = z ^ me[1], fe = ie ^ me[2], pe = U ^ me[3], H, Q, F, W = me.length / 4 - 2, X, Y = 4, de = this._tables[1], oe = de[0], ae = de[1], ue = de[2], ge = de[3], ee = de[4];
      for (X = 0; X < W; X++)
        H = oe[M >>> 24] ^ ae[ne >> 16 & 255] ^ ue[fe >> 8 & 255] ^ ge[pe & 255] ^ me[Y], Q = oe[ne >>> 24] ^ ae[fe >> 16 & 255] ^ ue[pe >> 8 & 255] ^ ge[M & 255] ^ me[Y + 1], F = oe[fe >>> 24] ^ ae[pe >> 16 & 255] ^ ue[M >> 8 & 255] ^ ge[ne & 255] ^ me[Y + 2], pe = oe[pe >>> 24] ^ ae[M >> 16 & 255] ^ ue[ne >> 8 & 255] ^ ge[fe & 255] ^ me[Y + 3], Y += 4, M = H, ne = Q, fe = F;
      for (X = 0; X < 4; X++)
        le[(3 & -X) + se] = ee[M >>> 24] << 24 ^ ee[ne >> 16 & 255] << 16 ^ ee[fe >> 8 & 255] << 8 ^ ee[pe & 255] ^ me[Y++], H = M, M = ne, ne = fe, fe = pe, pe = H;
    }, k;
  }(), h = /* @__PURE__ */ function(k) {
    a(P, k);
    function P() {
      var O;
      return O = k.call(this, s) || this, O.jobs = [], O.delay = 1, O.timeout_ = null, O;
    }
    var L = P.prototype;
    return L.processJob_ = function() {
      this.jobs.shift()(), this.jobs.length ? this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay) : this.timeout_ = null;
    }, L.push = function(U) {
      this.jobs.push(U), this.timeout_ || (this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay));
    }, P;
  }(s), f = function(P) {
    return P << 24 | (P & 65280) << 8 | (P & 16711680) >> 8 | P >>> 24;
  }, _ = function(P, L, O) {
    var U = new Int32Array(P.buffer, P.byteOffset, P.byteLength >> 2), ie = new d(Array.prototype.slice.call(L)), z = new Uint8Array(P.byteLength), le = new Int32Array(z.buffer), se, me, M, ne, fe, pe, H, Q, F;
    for (se = O[0], me = O[1], M = O[2], ne = O[3], F = 0; F < U.length; F += 4)
      fe = f(U[F]), pe = f(U[F + 1]), H = f(U[F + 2]), Q = f(U[F + 3]), ie.decrypt(fe, pe, H, Q, le, F), le[F] = f(le[F] ^ se), le[F + 1] = f(le[F + 1] ^ me), le[F + 2] = f(le[F + 2] ^ M), le[F + 3] = f(le[F + 3] ^ ne), se = fe, me = pe, M = H, ne = Q;
    return z;
  }, v = /* @__PURE__ */ function() {
    function k(L, O, U, ie) {
      var z = k.STEP, le = new Int32Array(L.buffer), se = new Uint8Array(L.byteLength), me = 0;
      for (this.asyncStream_ = new h(), this.asyncStream_.push(this.decryptChunk_(le.subarray(me, me + z), O, U, se)), me = z; me < le.length; me += z)
        U = new Uint32Array([f(le[me - 4]), f(le[me - 3]), f(le[me - 2]), f(le[me - 1])]), this.asyncStream_.push(this.decryptChunk_(le.subarray(me, me + z), O, U, se));
      this.asyncStream_.push(function() {
        ie(null, o(se));
      });
    }
    var P = k.prototype;
    return P.decryptChunk_ = function(O, U, ie, z) {
      return function() {
        var le = _(O, U, ie);
        z.set(le, O.byteOffset);
      };
    }, r(k, null, [{
      key: "STEP",
      get: function() {
        return 32e3;
      }
    }]), k;
  }(), y;
  typeof window < "u" ? y = window : typeof n < "u" ? y = n : typeof self < "u" ? y = self : y = {};
  var T = y, I = function(P) {
    return ArrayBuffer.isView === "function" ? ArrayBuffer.isView(P) : P && P.buffer instanceof ArrayBuffer;
  }, V = T.BigInt || Number;
  V("0x1"), V("0x100"), V("0x10000"), V("0x1000000"), V("0x100000000"), V("0x10000000000"), V("0x1000000000000"), V("0x100000000000000"), V("0x10000000000000000");
  var $ = function(P) {
    var L = {};
    return Object.keys(P).forEach(function(O) {
      var U = P[O];
      I(U) ? L[O] = {
        bytes: U.buffer,
        byteOffset: U.byteOffset,
        byteLength: U.byteLength
      } : L[O] = U;
    }), L;
  };
  self.onmessage = function(k) {
    var P = k.data, L = new Uint8Array(P.encrypted.bytes, P.encrypted.byteOffset, P.encrypted.byteLength), O = new Uint32Array(P.key.bytes, P.key.byteOffset, P.key.byteLength / 4), U = new Uint32Array(P.iv.bytes, P.iv.byteOffset, P.iv.byteLength / 4);
    new v(L, O, U, function(ie, z) {
      self.postMessage($({
        source: P.source,
        decrypted: z
      }), [z.buffer]);
    });
  };
})), ux = yv(ox), lx = function(t) {
  var i = t.default ? "main" : "alternative";
  return t.characteristics && t.characteristics.indexOf("public.accessibility.describes-video") >= 0 && (i = "main-desc"), i;
}, ko = function(t, i) {
  t.abort(), t.pause(), i && i.activePlaylistLoader && (i.activePlaylistLoader.pause(), i.activePlaylistLoader = null);
}, wd = function(t, i) {
  i.activePlaylistLoader = t, t.load();
}, dx = function(t, i) {
  return function() {
    var r = i.segmentLoaders, e = r[t], a = r.main, s = i.mediaTypes[t], o = s.activeTrack(), u = s.getActiveGroup(), l = s.activePlaylistLoader, d = s.lastGroup_;
    if (!(u && d && u.id === d.id) && (s.lastGroup_ = u, s.lastTrack_ = o, ko(e, s), !(!u || u.isMasterPlaylist))) {
      if (!u.playlistLoader) {
        l && a.resetEverything();
        return;
      }
      e.resyncLoader(), wd(u.playlistLoader, s);
    }
  };
}, cx = function(t, i) {
  return function() {
    var r = i.segmentLoaders[t], e = i.mediaTypes[t];
    e.lastGroup_ = null, r.abort(), r.pause();
  };
}, fx = function(t, i) {
  return function() {
    var r = i.masterPlaylistLoader, e = i.segmentLoaders, a = e[t], s = e.main, o = i.mediaTypes[t], u = o.activeTrack(), l = o.getActiveGroup(), d = o.activePlaylistLoader, h = o.lastTrack_;
    if (!(h && u && h.id === u.id) && (o.lastGroup_ = l, o.lastTrack_ = u, ko(a, o), !!l)) {
      if (l.isMasterPlaylist) {
        if (!u || !h || u.id === h.id)
          return;
        var f = i.vhs.masterPlaylistController_, _ = f.selectPlaylist();
        if (f.media() === _)
          return;
        o.logger_("track change. Switching master audio from " + h.id + " to " + u.id), r.pause(), s.resetEverything(), f.fastQualityChange_(_);
        return;
      }
      if (t === "AUDIO") {
        if (!l.playlistLoader) {
          s.setAudio(!0), s.resetEverything();
          return;
        }
        a.setAudio(!0), s.setAudio(!1);
      }
      if (d === l.playlistLoader) {
        wd(l.playlistLoader, o);
        return;
      }
      a.track && a.track(u), a.resetEverything(), wd(l.playlistLoader, o);
    }
  };
}, Po = {
  AUDIO: function(t, i) {
    return function() {
      var r = i.segmentLoaders[t], e = i.mediaTypes[t], a = i.blacklistCurrentPlaylist;
      ko(r, e);
      var s = e.activeTrack(), o = e.activeGroup(), u = (o.filter(function(h) {
        return h.default;
      })[0] || o[0]).id, l = e.tracks[u];
      if (s === l) {
        a({
          message: "Problem encountered loading the default audio track."
        });
        return;
      }
      G.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");
      for (var d in e.tracks)
        e.tracks[d].enabled = e.tracks[d] === l;
      e.onTrackChanged();
    };
  },
  SUBTITLES: function(t, i) {
    return function() {
      var r = i.segmentLoaders[t], e = i.mediaTypes[t];
      G.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."), ko(r, e);
      var a = e.activeTrack();
      a && (a.mode = "disabled"), e.onTrackChanged();
    };
  }
}, Bh = {
  AUDIO: function(t, i, r) {
    if (!!i) {
      var e = r.tech, a = r.requestOptions, s = r.segmentLoaders[t];
      i.on("loadedmetadata", function() {
        var o = i.media();
        s.playlist(o, a), (!e.paused() || o.endList && e.preload() !== "none") && s.load();
      }), i.on("loadedplaylist", function() {
        s.playlist(i.media(), a), e.paused() || s.load();
      }), i.on("error", Po[t](t, r));
    }
  },
  SUBTITLES: function(t, i, r) {
    var e = r.tech, a = r.requestOptions, s = r.segmentLoaders[t], o = r.mediaTypes[t];
    i.on("loadedmetadata", function() {
      var u = i.media();
      s.playlist(u, a), s.track(o.activeTrack()), (!e.paused() || u.endList && e.preload() !== "none") && s.load();
    }), i.on("loadedplaylist", function() {
      s.playlist(i.media(), a), e.paused() || s.load();
    }), i.on("error", Po[t](t, r));
  }
}, hx = {
  AUDIO: function(t, i) {
    var r = i.vhs, e = i.sourceType, a = i.segmentLoaders[t], s = i.requestOptions, o = i.master.mediaGroups, u = i.mediaTypes[t], l = u.groups, d = u.tracks, h = u.logger_, f = i.masterPlaylistLoader, _ = ps(f.master);
    (!o[t] || Object.keys(o[t]).length === 0) && (o[t] = {
      main: {
        default: {
          default: !0
        }
      }
    }, _ && (o[t].main.default.playlists = f.master.playlists));
    for (var v in o[t]) {
      l[v] || (l[v] = []);
      for (var y in o[t][v]) {
        var T = o[t][v][y], I = void 0;
        if (_ ? (h("AUDIO group '" + v + "' label '" + y + "' is a master playlist"), T.isMasterPlaylist = !0, I = null) : e === "vhs-json" && T.playlists ? I = new Un(T.playlists[0], r, s) : T.resolvedUri ? I = new Un(T.resolvedUri, r, s) : T.playlists && e === "dash" ? I = new bd(T.playlists[0], r, s, f) : I = null, T = G.mergeOptions({
          id: y,
          playlistLoader: I
        }, T), Bh[t](t, T.playlistLoader, i), l[v].push(T), typeof d[y] > "u") {
          var V = new G.AudioTrack({
            id: y,
            kind: lx(T),
            enabled: !1,
            language: T.language,
            default: T.default,
            label: y
          });
          d[y] = V;
        }
      }
    }
    a.on("error", Po[t](t, i));
  },
  SUBTITLES: function(t, i) {
    var r = i.tech, e = i.vhs, a = i.sourceType, s = i.segmentLoaders[t], o = i.requestOptions, u = i.master.mediaGroups, l = i.mediaTypes[t], d = l.groups, h = l.tracks, f = i.masterPlaylistLoader;
    for (var _ in u[t]) {
      d[_] || (d[_] = []);
      for (var v in u[t][_])
        if (!u[t][_][v].forced) {
          var y = u[t][_][v], T = void 0;
          if (a === "hls")
            T = new Un(y.resolvedUri, e, o);
          else if (a === "dash") {
            var I = y.playlists.filter(function($) {
              return $.excludeUntil !== 1 / 0;
            });
            if (!I.length)
              return;
            T = new bd(y.playlists[0], e, o, f);
          } else
            a === "vhs-json" && (T = new Un(
              y.playlists ? y.playlists[0] : y.resolvedUri,
              e,
              o
            ));
          if (y = G.mergeOptions({
            id: v,
            playlistLoader: T
          }, y), Bh[t](t, y.playlistLoader, i), d[_].push(y), typeof h[v] > "u") {
            var V = r.addRemoteTextTrack({
              id: v,
              kind: "subtitles",
              default: y.default && y.autoselect,
              language: y.language,
              label: v
            }, !1).track;
            h[v] = V;
          }
        }
    }
    s.on("error", Po[t](t, i));
  },
  "CLOSED-CAPTIONS": function(t, i) {
    var r = i.tech, e = i.master.mediaGroups, a = i.mediaTypes[t], s = a.groups, o = a.tracks;
    for (var u in e[t]) {
      s[u] || (s[u] = []);
      for (var l in e[t][u]) {
        var d = e[t][u][l];
        if (!!/^(?:CC|SERVICE)/.test(d.instreamId)) {
          var h = r.options_.vhs && r.options_.vhs.captionServices || {}, f = {
            label: l,
            language: d.language,
            instreamId: d.instreamId,
            default: d.default && d.autoselect
          };
          if (h[f.instreamId] && (f = G.mergeOptions(f, h[f.instreamId])), f.default === void 0 && delete f.default, s[u].push(G.mergeOptions({
            id: l
          }, d)), typeof o[l] > "u") {
            var _ = r.addRemoteTextTrack({
              id: f.instreamId,
              kind: "captions",
              default: f.default,
              language: f.language,
              label: f.label
            }, !1).track;
            o[l] = _;
          }
        }
      }
    }
  }
}, px = function n(t, i) {
  for (var r = 0; r < t.length; r++)
    if (Nc(i, t[r]) || t[r].playlists && n(t[r].playlists, i))
      return !0;
  return !1;
}, mx = function(t, i) {
  return function(r) {
    var e = i.masterPlaylistLoader, a = i.mediaTypes[t].groups, s = e.media();
    if (!s)
      return null;
    var o = null;
    s.attributes[t] && (o = a[s.attributes[t]]);
    var u = Object.keys(a);
    if (!o)
      if (t === "AUDIO" && u.length > 1 && ps(i.master))
        for (var l = 0; l < u.length; l++) {
          var d = a[u[l]];
          if (px(d, s)) {
            o = d;
            break;
          }
        }
      else
        a.main ? o = a.main : u.length === 1 && (o = a[u[0]]);
    return typeof r > "u" ? o : r === null || !o ? null : o.filter(function(h) {
      return h.id === r.id;
    })[0] || null;
  };
}, gx = {
  AUDIO: function(t, i) {
    return function() {
      var r = i.mediaTypes[t].tracks;
      for (var e in r)
        if (r[e].enabled)
          return r[e];
      return null;
    };
  },
  SUBTITLES: function(t, i) {
    return function() {
      var r = i.mediaTypes[t].tracks;
      for (var e in r)
        if (r[e].mode === "showing" || r[e].mode === "hidden")
          return r[e];
      return null;
    };
  }
}, vx = function(t, i) {
  var r = i.mediaTypes;
  return function() {
    var e = r[t].activeTrack();
    return e ? r[t].activeGroup(e) : null;
  };
}, _x = function(t) {
  ["AUDIO", "SUBTITLES", "CLOSED-CAPTIONS"].forEach(function(v) {
    hx[v](v, t);
  });
  var i = t.mediaTypes, r = t.masterPlaylistLoader, e = t.tech, a = t.vhs, s = t.segmentLoaders, o = s.AUDIO, u = s.main;
  ["AUDIO", "SUBTITLES"].forEach(function(v) {
    i[v].activeGroup = mx(v, t), i[v].activeTrack = gx[v](v, t), i[v].onGroupChanged = dx(v, t), i[v].onGroupChanging = cx(v, t), i[v].onTrackChanged = fx(v, t), i[v].getActiveGroup = vx(v, t);
  });
  var l = i.AUDIO.activeGroup();
  if (l) {
    var d = (l.filter(function(v) {
      return v.default;
    })[0] || l[0]).id;
    i.AUDIO.tracks[d].enabled = !0, i.AUDIO.onGroupChanged(), i.AUDIO.onTrackChanged();
    var h = i.AUDIO.getActiveGroup();
    h.playlistLoader ? (u.setAudio(!1), o.setAudio(!0)) : u.setAudio(!0);
  }
  r.on("mediachange", function() {
    ["AUDIO", "SUBTITLES"].forEach(function(v) {
      return i[v].onGroupChanged();
    });
  }), r.on("mediachanging", function() {
    ["AUDIO", "SUBTITLES"].forEach(function(v) {
      return i[v].onGroupChanging();
    });
  });
  var f = function() {
    i.AUDIO.onTrackChanged(), e.trigger({
      type: "usage",
      name: "vhs-audio-change"
    }), e.trigger({
      type: "usage",
      name: "hls-audio-change"
    });
  };
  e.audioTracks().addEventListener("change", f), e.remoteTextTracks().addEventListener("change", i.SUBTITLES.onTrackChanged), a.on("dispose", function() {
    e.audioTracks().removeEventListener("change", f), e.remoteTextTracks().removeEventListener("change", i.SUBTITLES.onTrackChanged);
  }), e.clearTracks("audio");
  for (var _ in i.AUDIO.tracks)
    e.audioTracks().addTrack(i.AUDIO.tracks[_]);
}, yx = function() {
  var t = {};
  return ["AUDIO", "SUBTITLES", "CLOSED-CAPTIONS"].forEach(function(i) {
    t[i] = {
      groups: {},
      tracks: {},
      activePlaylistLoader: null,
      activeGroup: mr,
      activeTrack: mr,
      getActiveGroup: mr,
      onGroupChanged: mr,
      onTrackChanged: mr,
      lastTrack_: null,
      logger_: Gi("MediaGroups[" + i + "]")
    };
  }), t;
}, Tx = 60 * 2, dr, bx = ["mediaRequests", "mediaRequestsAborted", "mediaRequestsTimedout", "mediaRequestsErrored", "mediaTransferDuration", "mediaBytesTransferred", "mediaAppends"], Sx = function(t) {
  return this.audioSegmentLoader_[t] + this.mainSegmentLoader_[t];
}, Ex = function(t) {
  var i = t.currentPlaylist, r = t.buffered, e = t.currentTime, a = t.nextPlaylist, s = t.bufferLowWaterLine, o = t.bufferHighWaterLine, u = t.duration, l = t.experimentalBufferBasedABR, d = t.log;
  if (!a)
    return G.log.warn("We received no playlist to switch to. Please check your stream."), !1;
  var h = "allowing switch " + (i && i.id || "null") + " -> " + a.id;
  if (!i)
    return d(h + " as current playlist is not set"), !0;
  if (a.id === i.id)
    return !1;
  var f = Boolean(Bn(r, e).length);
  if (!i.endList)
    return !f && typeof i.partTargetDuration == "number" ? (d("not " + h + " as current playlist is live llhls, but currentTime isn't in buffered."), !1) : (d(h + " as current playlist is live"), !0);
  var _ = Lc(r, e), v = l ? Gt.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE : Gt.MAX_BUFFER_LOW_WATER_LINE;
  if (u < v)
    return d(h + " as duration < max low water line (" + u + " < " + v + ")"), !0;
  var y = a.attributes.BANDWIDTH, T = i.attributes.BANDWIDTH;
  if (y < T && (!l || _ < o)) {
    var I = h + " as next bandwidth < current bandwidth (" + y + " < " + T + ")";
    return l && (I += " and forwardBuffer < bufferHighWaterLine (" + _ + " < " + o + ")"), d(I), !0;
  }
  if ((!l || y > T) && _ >= s) {
    var V = h + " as forwardBuffer >= bufferLowWaterLine (" + _ + " >= " + s + ")";
    return l && (V += " and next bandwidth > current bandwidth (" + y + " > " + T + ")"), d(V), !0;
  }
  return d("not " + h + " as no switching criteria met"), !1;
}, xx = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r) {
    var e;
    e = n.call(this) || this;
    var a = r.src, s = r.handleManifestRedirects, o = r.withCredentials, u = r.tech, l = r.bandwidth, d = r.externVhs, h = r.useCueTags, f = r.blacklistDuration, _ = r.enableLowInitialPlaylist, v = r.sourceType, y = r.cacheEncryptionKeys, T = r.experimentalBufferBasedABR, I = r.experimentalLeastPixelDiffSelector, V = r.captionServices;
    if (!a)
      throw new Error("A non-empty playlist URL or JSON manifest string is required");
    var $ = r.maxPlaylistRetries;
    ($ === null || typeof $ > "u") && ($ = 1 / 0), dr = d, e.experimentalBufferBasedABR = Boolean(T), e.experimentalLeastPixelDiffSelector = Boolean(I), e.withCredentials = o, e.tech_ = u, e.vhs_ = u.vhs, e.sourceType_ = v, e.useCueTags_ = h, e.blacklistDuration = f, e.maxPlaylistRetries = $, e.enableLowInitialPlaylist = _, e.useCueTags_ && (e.cueTagsTrack_ = e.tech_.addTextTrack("metadata", "ad-cues"), e.cueTagsTrack_.inBandMetadataTrackDispatchType = ""), e.requestOptions_ = {
      withCredentials: o,
      handleManifestRedirects: s,
      maxPlaylistRetries: $,
      timeout: null
    }, e.on("error", e.pauseLoading), e.mediaTypes_ = yx(), e.mediaSource = new B.MediaSource(), e.handleDurationChange_ = e.handleDurationChange_.bind(Ge(e)), e.handleSourceOpen_ = e.handleSourceOpen_.bind(Ge(e)), e.handleSourceEnded_ = e.handleSourceEnded_.bind(Ge(e)), e.mediaSource.addEventListener("durationchange", e.handleDurationChange_), e.mediaSource.addEventListener("sourceopen", e.handleSourceOpen_), e.mediaSource.addEventListener("sourceended", e.handleSourceEnded_), e.seekable_ = G.createTimeRanges(), e.hasPlayed_ = !1, e.syncController_ = new ax(r), e.segmentMetadataTrack_ = u.addRemoteTextTrack({
      kind: "metadata",
      label: "segment-metadata"
    }, !1).track, e.decrypter_ = new ux(), e.sourceUpdater_ = new Rv(e.mediaSource), e.inbandTextTracks_ = {}, e.timelineChangeController_ = new sx();
    var k = {
      vhs: e.vhs_,
      parse708captions: r.parse708captions,
      useDtsForTimestampOffset: r.useDtsForTimestampOffset,
      captionServices: V,
      mediaSource: e.mediaSource,
      currentTime: e.tech_.currentTime.bind(e.tech_),
      seekable: function() {
        return e.seekable();
      },
      seeking: function() {
        return e.tech_.seeking();
      },
      duration: function() {
        return e.duration();
      },
      hasPlayed: function() {
        return e.hasPlayed_;
      },
      goalBufferLength: function() {
        return e.goalBufferLength();
      },
      bandwidth: l,
      syncController: e.syncController_,
      decrypter: e.decrypter_,
      sourceType: e.sourceType_,
      inbandTextTracks: e.inbandTextTracks_,
      cacheEncryptionKeys: y,
      sourceUpdater: e.sourceUpdater_,
      timelineChangeController: e.timelineChangeController_,
      experimentalExactManifestTimings: r.experimentalExactManifestTimings
    };
    e.masterPlaylistLoader_ = e.sourceType_ === "dash" ? new bd(a, e.vhs_, e.requestOptions_) : new Un(a, e.vhs_, e.requestOptions_), e.setupMasterPlaylistLoaderListeners_(), e.mainSegmentLoader_ = new Ed(G.mergeOptions(k, {
      segmentMetadataTrack: e.segmentMetadataTrack_,
      loaderType: "main"
    }), r), e.audioSegmentLoader_ = new Ed(G.mergeOptions(k, {
      loaderType: "audio"
    }), r), e.subtitleSegmentLoader_ = new tx(G.mergeOptions(k, {
      loaderType: "vtt",
      featuresNativeTextTracks: e.tech_.featuresNativeTextTracks
    }), r), e.setupSegmentLoaderListeners_(), e.experimentalBufferBasedABR && (e.masterPlaylistLoader_.one("loadedplaylist", function() {
      return e.startABRTimer_();
    }), e.tech_.on("pause", function() {
      return e.stopABRTimer_();
    }), e.tech_.on("play", function() {
      return e.startABRTimer_();
    })), bx.forEach(function(L) {
      e[L + "_"] = Sx.bind(Ge(e), L);
    }), e.logger_ = Gi("MPC"), e.triggeredFmp4Usage = !1, e.tech_.preload() === "none" ? (e.loadOnPlay_ = function() {
      e.loadOnPlay_ = null, e.masterPlaylistLoader_.load();
    }, e.tech_.one("play", e.loadOnPlay_)) : e.masterPlaylistLoader_.load(), e.timeToLoadedData__ = -1, e.mainAppendsToLoadedData__ = -1, e.audioAppendsToLoadedData__ = -1;
    var P = e.tech_.preload() === "none" ? "play" : "loadstart";
    return e.tech_.one(P, function() {
      var L = Date.now();
      e.tech_.one("loadeddata", function() {
        e.timeToLoadedData__ = Date.now() - L, e.mainAppendsToLoadedData__ = e.mainSegmentLoader_.mediaAppends, e.audioAppendsToLoadedData__ = e.audioSegmentLoader_.mediaAppends;
      });
    }), e;
  }
  var i = t.prototype;
  return i.mainAppendsToLoadedData_ = function() {
    return this.mainAppendsToLoadedData__;
  }, i.audioAppendsToLoadedData_ = function() {
    return this.audioAppendsToLoadedData__;
  }, i.appendsToLoadedData_ = function() {
    var e = this.mainAppendsToLoadedData_(), a = this.audioAppendsToLoadedData_();
    return e === -1 || a === -1 ? -1 : e + a;
  }, i.timeToLoadedData_ = function() {
    return this.timeToLoadedData__;
  }, i.checkABR_ = function() {
    var e = this.selectPlaylist();
    e && this.shouldSwitchToMedia_(e) && this.switchMedia_(e, "abr");
  }, i.switchMedia_ = function(e, a, s) {
    var o = this.media(), u = o && (o.id || o.uri), l = e.id || e.uri;
    u && u !== l && (this.logger_("switch media " + u + " -> " + l + " from " + a), this.tech_.trigger({
      type: "usage",
      name: "vhs-rendition-change-" + a
    })), this.masterPlaylistLoader_.media(e, s);
  }, i.startABRTimer_ = function() {
    var e = this;
    this.stopABRTimer_(), this.abrTimer_ = B.setInterval(function() {
      return e.checkABR_();
    }, 250);
  }, i.stopABRTimer_ = function() {
    this.tech_.scrubbing && this.tech_.scrubbing() || (B.clearInterval(this.abrTimer_), this.abrTimer_ = null);
  }, i.getAudioTrackPlaylists_ = function() {
    var e = this.master(), a = e && e.playlists || [];
    if (!e || !e.mediaGroups || !e.mediaGroups.AUDIO)
      return a;
    var s = e.mediaGroups.AUDIO, o = Object.keys(s), u;
    if (Object.keys(this.mediaTypes_.AUDIO.groups).length)
      u = this.mediaTypes_.AUDIO.activeTrack();
    else {
      var l = s.main || o.length && s[o[0]];
      for (var d in l)
        if (l[d].default) {
          u = {
            label: d
          };
          break;
        }
    }
    if (!u)
      return a;
    var h = [];
    for (var f in s)
      if (s[f][u.label]) {
        var _ = s[f][u.label];
        if (_.playlists && _.playlists.length)
          h.push.apply(h, _.playlists);
        else if (_.uri)
          h.push(_);
        else if (e.playlists.length)
          for (var v = 0; v < e.playlists.length; v++) {
            var y = e.playlists[v];
            y.attributes && y.attributes.AUDIO && y.attributes.AUDIO === f && h.push(y);
          }
      }
    return h.length ? h : a;
  }, i.setupMasterPlaylistLoaderListeners_ = function() {
    var e = this;
    this.masterPlaylistLoader_.on("loadedmetadata", function() {
      var a = e.masterPlaylistLoader_.media(), s = a.targetDuration * 1.5 * 1e3;
      gd(e.masterPlaylistLoader_.master, e.masterPlaylistLoader_.media()) ? e.requestOptions_.timeout = 0 : e.requestOptions_.timeout = s, a.endList && e.tech_.preload() !== "none" && (e.mainSegmentLoader_.playlist(a, e.requestOptions_), e.mainSegmentLoader_.load()), _x({
        sourceType: e.sourceType_,
        segmentLoaders: {
          AUDIO: e.audioSegmentLoader_,
          SUBTITLES: e.subtitleSegmentLoader_,
          main: e.mainSegmentLoader_
        },
        tech: e.tech_,
        requestOptions: e.requestOptions_,
        masterPlaylistLoader: e.masterPlaylistLoader_,
        vhs: e.vhs_,
        master: e.master(),
        mediaTypes: e.mediaTypes_,
        blacklistCurrentPlaylist: e.blacklistCurrentPlaylist.bind(e)
      }), e.triggerPresenceUsage_(e.master(), a), e.setupFirstPlay(), !e.mediaTypes_.AUDIO.activePlaylistLoader || e.mediaTypes_.AUDIO.activePlaylistLoader.media() ? e.trigger("selectedinitialmedia") : e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata", function() {
        e.trigger("selectedinitialmedia");
      });
    }), this.masterPlaylistLoader_.on("loadedplaylist", function() {
      e.loadOnPlay_ && e.tech_.off("play", e.loadOnPlay_);
      var a = e.masterPlaylistLoader_.media();
      if (!a) {
        e.excludeUnsupportedVariants_();
        var s;
        if (e.enableLowInitialPlaylist && (s = e.selectInitialPlaylist()), s || (s = e.selectPlaylist()), !s || !e.shouldSwitchToMedia_(s))
          return;
        e.initialMedia_ = s, e.switchMedia_(e.initialMedia_, "initial");
        var o = e.sourceType_ === "vhs-json" && e.initialMedia_.segments;
        if (!o)
          return;
        a = e.initialMedia_;
      }
      e.handleUpdatedMediaPlaylist(a);
    }), this.masterPlaylistLoader_.on("error", function() {
      e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error);
    }), this.masterPlaylistLoader_.on("mediachanging", function() {
      e.mainSegmentLoader_.abort(), e.mainSegmentLoader_.pause();
    }), this.masterPlaylistLoader_.on("mediachange", function() {
      var a = e.masterPlaylistLoader_.media(), s = a.targetDuration * 1.5 * 1e3;
      gd(e.masterPlaylistLoader_.master, e.masterPlaylistLoader_.media()) ? e.requestOptions_.timeout = 0 : e.requestOptions_.timeout = s, e.mainSegmentLoader_.playlist(a, e.requestOptions_), e.mainSegmentLoader_.load(), e.tech_.trigger({
        type: "mediachange",
        bubbles: !0
      });
    }), this.masterPlaylistLoader_.on("playlistunchanged", function() {
      var a = e.masterPlaylistLoader_.media();
      if (a.lastExcludeReason_ !== "playlist-unchanged") {
        var s = e.stuckAtPlaylistEnd_(a);
        s && (e.blacklistCurrentPlaylist({
          message: "Playlist no longer updating.",
          reason: "playlist-unchanged"
        }), e.tech_.trigger("playliststuck"));
      }
    }), this.masterPlaylistLoader_.on("renditiondisabled", function() {
      e.tech_.trigger({
        type: "usage",
        name: "vhs-rendition-disabled"
      }), e.tech_.trigger({
        type: "usage",
        name: "hls-rendition-disabled"
      });
    }), this.masterPlaylistLoader_.on("renditionenabled", function() {
      e.tech_.trigger({
        type: "usage",
        name: "vhs-rendition-enabled"
      }), e.tech_.trigger({
        type: "usage",
        name: "hls-rendition-enabled"
      });
    });
  }, i.handleUpdatedMediaPlaylist = function(e) {
    this.useCueTags_ && this.updateAdCues_(e), this.mainSegmentLoader_.playlist(e, this.requestOptions_), this.updateDuration(!e.endList), this.tech_.paused() || (this.mainSegmentLoader_.load(), this.audioSegmentLoader_ && this.audioSegmentLoader_.load());
  }, i.triggerPresenceUsage_ = function(e, a) {
    var s = e.mediaGroups || {}, o = !0, u = Object.keys(s.AUDIO);
    for (var l in s.AUDIO)
      for (var d in s.AUDIO[l]) {
        var h = s.AUDIO[l][d];
        h.uri || (o = !1);
      }
    o && (this.tech_.trigger({
      type: "usage",
      name: "vhs-demuxed"
    }), this.tech_.trigger({
      type: "usage",
      name: "hls-demuxed"
    })), Object.keys(s.SUBTITLES).length && (this.tech_.trigger({
      type: "usage",
      name: "vhs-webvtt"
    }), this.tech_.trigger({
      type: "usage",
      name: "hls-webvtt"
    })), dr.Playlist.isAes(a) && (this.tech_.trigger({
      type: "usage",
      name: "vhs-aes"
    }), this.tech_.trigger({
      type: "usage",
      name: "hls-aes"
    })), u.length && Object.keys(s.AUDIO[u[0]]).length > 1 && (this.tech_.trigger({
      type: "usage",
      name: "vhs-alternate-audio"
    }), this.tech_.trigger({
      type: "usage",
      name: "hls-alternate-audio"
    })), this.useCueTags_ && (this.tech_.trigger({
      type: "usage",
      name: "vhs-playlist-cue-tags"
    }), this.tech_.trigger({
      type: "usage",
      name: "hls-playlist-cue-tags"
    }));
  }, i.shouldSwitchToMedia_ = function(e) {
    var a = this.masterPlaylistLoader_.media() || this.masterPlaylistLoader_.pendingMedia_, s = this.tech_.currentTime(), o = this.bufferLowWaterLine(), u = this.bufferHighWaterLine(), l = this.tech_.buffered();
    return Ex({
      buffered: l,
      currentTime: s,
      currentPlaylist: a,
      nextPlaylist: e,
      bufferLowWaterLine: o,
      bufferHighWaterLine: u,
      duration: this.duration(),
      experimentalBufferBasedABR: this.experimentalBufferBasedABR,
      log: this.logger_
    });
  }, i.setupSegmentLoaderListeners_ = function() {
    var e = this;
    this.experimentalBufferBasedABR || (this.mainSegmentLoader_.on("bandwidthupdate", function() {
      var s = e.selectPlaylist();
      e.shouldSwitchToMedia_(s) && e.switchMedia_(s, "bandwidthupdate"), e.tech_.trigger("bandwidthupdate");
    }), this.mainSegmentLoader_.on("progress", function() {
      e.trigger("progress");
    })), this.mainSegmentLoader_.on("error", function() {
      e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error());
    }), this.mainSegmentLoader_.on("appenderror", function() {
      e.error = e.mainSegmentLoader_.error_, e.trigger("error");
    }), this.mainSegmentLoader_.on("syncinfoupdate", function() {
      e.onSyncInfoUpdate_();
    }), this.mainSegmentLoader_.on("timestampoffset", function() {
      e.tech_.trigger({
        type: "usage",
        name: "vhs-timestamp-offset"
      }), e.tech_.trigger({
        type: "usage",
        name: "hls-timestamp-offset"
      });
    }), this.audioSegmentLoader_.on("syncinfoupdate", function() {
      e.onSyncInfoUpdate_();
    }), this.audioSegmentLoader_.on("appenderror", function() {
      e.error = e.audioSegmentLoader_.error_, e.trigger("error");
    }), this.mainSegmentLoader_.on("ended", function() {
      e.logger_("main segment loader ended"), e.onEndOfStream();
    }), this.mainSegmentLoader_.on("earlyabort", function(s) {
      e.experimentalBufferBasedABR || (e.delegateLoaders_("all", ["abort"]), e.blacklistCurrentPlaylist({
        message: "Aborted early because there isn't enough bandwidth to complete the request without rebuffering."
      }, Tx));
    });
    var a = function() {
      if (!e.sourceUpdater_.hasCreatedSourceBuffers())
        return e.tryToCreateSourceBuffers_();
      var o = e.getCodecsOrExclude_();
      !o || e.sourceUpdater_.addOrChangeSourceBuffers(o);
    };
    this.mainSegmentLoader_.on("trackinfo", a), this.audioSegmentLoader_.on("trackinfo", a), this.mainSegmentLoader_.on("fmp4", function() {
      e.triggeredFmp4Usage || (e.tech_.trigger({
        type: "usage",
        name: "vhs-fmp4"
      }), e.tech_.trigger({
        type: "usage",
        name: "hls-fmp4"
      }), e.triggeredFmp4Usage = !0);
    }), this.audioSegmentLoader_.on("fmp4", function() {
      e.triggeredFmp4Usage || (e.tech_.trigger({
        type: "usage",
        name: "vhs-fmp4"
      }), e.tech_.trigger({
        type: "usage",
        name: "hls-fmp4"
      }), e.triggeredFmp4Usage = !0);
    }), this.audioSegmentLoader_.on("ended", function() {
      e.logger_("audioSegmentLoader ended"), e.onEndOfStream();
    });
  }, i.mediaSecondsLoaded_ = function() {
    return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded + this.mainSegmentLoader_.mediaSecondsLoaded);
  }, i.load = function() {
    this.mainSegmentLoader_.load(), this.mediaTypes_.AUDIO.activePlaylistLoader && this.audioSegmentLoader_.load(), this.mediaTypes_.SUBTITLES.activePlaylistLoader && this.subtitleSegmentLoader_.load();
  }, i.smoothQualityChange_ = function(e) {
    e === void 0 && (e = this.selectPlaylist()), this.fastQualityChange_(e);
  }, i.fastQualityChange_ = function(e) {
    var a = this;
    if (e === void 0 && (e = this.selectPlaylist()), e === this.masterPlaylistLoader_.media()) {
      this.logger_("skipping fastQualityChange because new media is same as old");
      return;
    }
    this.switchMedia_(e, "fast-quality"), this.mainSegmentLoader_.resetEverything(function() {
      G.browser.IE_VERSION || G.browser.IS_EDGE ? a.tech_.setCurrentTime(a.tech_.currentTime() + 0.04) : a.tech_.setCurrentTime(a.tech_.currentTime());
    });
  }, i.play = function() {
    if (!this.setupFirstPlay()) {
      this.tech_.ended() && this.tech_.setCurrentTime(0), this.hasPlayed_ && this.load();
      var e = this.tech_.seekable();
      if (this.tech_.duration() === 1 / 0 && this.tech_.currentTime() < e.start(0))
        return this.tech_.setCurrentTime(e.end(e.length - 1));
    }
  }, i.setupFirstPlay = function() {
    var e = this, a = this.masterPlaylistLoader_.media();
    if (!a || this.tech_.paused() || this.hasPlayed_)
      return !1;
    if (!a.endList) {
      var s = this.seekable();
      if (!s.length)
        return !1;
      if (G.browser.IE_VERSION && this.tech_.readyState() === 0)
        return this.tech_.one("loadedmetadata", function() {
          e.trigger("firstplay"), e.tech_.setCurrentTime(s.end(0)), e.hasPlayed_ = !0;
        }), !1;
      this.trigger("firstplay"), this.tech_.setCurrentTime(s.end(0));
    }
    return this.hasPlayed_ = !0, this.load(), !0;
  }, i.handleSourceOpen_ = function() {
    if (this.tryToCreateSourceBuffers_(), this.tech_.autoplay()) {
      var e = this.tech_.play();
      typeof e < "u" && typeof e.then == "function" && e.then(null, function(a) {
      });
    }
    this.trigger("sourceopen");
  }, i.handleSourceEnded_ = function() {
    if (!!this.inbandTextTracks_.metadataTrack_) {
      var e = this.inbandTextTracks_.metadataTrack_.cues;
      if (!(!e || !e.length)) {
        var a = this.duration();
        e[e.length - 1].endTime = isNaN(a) || Math.abs(a) === 1 / 0 ? Number.MAX_VALUE : a;
      }
    }
  }, i.handleDurationChange_ = function() {
    this.tech_.trigger("durationchange");
  }, i.onEndOfStream = function() {
    var e = this.mainSegmentLoader_.ended_;
    if (this.mediaTypes_.AUDIO.activePlaylistLoader) {
      var a = this.mainSegmentLoader_.getCurrentMediaInfo_();
      !a || a.hasVideo ? e = e && this.audioSegmentLoader_.ended_ : e = this.audioSegmentLoader_.ended_;
    }
    !e || (this.stopABRTimer_(), this.sourceUpdater_.endOfStream());
  }, i.stuckAtPlaylistEnd_ = function(e) {
    var a = this.seekable();
    if (!a.length)
      return !1;
    var s = this.syncController_.getExpiredTime(e, this.duration());
    if (s === null)
      return !1;
    var o = dr.Playlist.playlistEnd(e, s), u = this.tech_.currentTime(), l = this.tech_.buffered();
    if (!l.length)
      return o - u <= Zi;
    var d = l.end(l.length - 1);
    return d - u <= Zi && o - d <= Zi;
  }, i.blacklistCurrentPlaylist = function(e, a) {
    e === void 0 && (e = {});
    var s = e.playlist || this.masterPlaylistLoader_.media();
    if (a = a || e.blacklistDuration || this.blacklistDuration, !s) {
      this.error = e, this.mediaSource.readyState !== "open" ? this.trigger("error") : this.sourceUpdater_.endOfStream("network");
      return;
    }
    s.playlistErrors_++;
    var o = this.masterPlaylistLoader_.master.playlists, u = o.filter(Zo), l = u.length === 1 && u[0] === s;
    if (o.length === 1 && a !== 1 / 0)
      return G.log.warn("Problem encountered with playlist " + s.id + ". Trying again since it is the only playlist."), this.tech_.trigger("retryplaylist"), this.masterPlaylistLoader_.load(l);
    if (l) {
      var d = !1;
      o.forEach(function(I) {
        if (I !== s) {
          var V = I.excludeUntil;
          typeof V < "u" && V !== 1 / 0 && (d = !0, delete I.excludeUntil);
        }
      }), d && (G.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."), this.tech_.trigger("retryplaylist"));
    }
    var h;
    s.playlistErrors_ > this.maxPlaylistRetries ? h = 1 / 0 : h = Date.now() + a * 1e3, s.excludeUntil = h, e.reason && (s.lastExcludeReason_ = e.reason), this.tech_.trigger("blacklistplaylist"), this.tech_.trigger({
      type: "usage",
      name: "vhs-rendition-blacklisted"
    }), this.tech_.trigger({
      type: "usage",
      name: "hls-rendition-blacklisted"
    });
    var f = this.selectPlaylist();
    if (!f) {
      this.error = "Playback cannot continue. No available working or supported playlists.", this.trigger("error");
      return;
    }
    var _ = e.internal ? this.logger_ : G.log.warn, v = e.message ? " " + e.message : "";
    _((e.internal ? "Internal problem" : "Problem") + " encountered with playlist " + s.id + "." + (v + " Switching to playlist " + f.id + ".")), f.attributes.AUDIO !== s.attributes.AUDIO && this.delegateLoaders_("audio", ["abort", "pause"]), f.attributes.SUBTITLES !== s.attributes.SUBTITLES && this.delegateLoaders_("subtitle", ["abort", "pause"]), this.delegateLoaders_("main", ["abort", "pause"]);
    var y = f.targetDuration / 2 * 1e3 || 5 * 1e3, T = typeof f.lastRequest == "number" && Date.now() - f.lastRequest <= y;
    return this.switchMedia_(f, "exclude", l || T);
  }, i.pauseLoading = function() {
    this.delegateLoaders_("all", ["abort", "pause"]), this.stopABRTimer_();
  }, i.delegateLoaders_ = function(e, a) {
    var s = this, o = [], u = e === "all";
    (u || e === "main") && o.push(this.masterPlaylistLoader_);
    var l = [];
    (u || e === "audio") && l.push("AUDIO"), (u || e === "subtitle") && (l.push("CLOSED-CAPTIONS"), l.push("SUBTITLES")), l.forEach(function(d) {
      var h = s.mediaTypes_[d] && s.mediaTypes_[d].activePlaylistLoader;
      h && o.push(h);
    }), ["main", "audio", "subtitle"].forEach(function(d) {
      var h = s[d + "SegmentLoader_"];
      h && (e === d || e === "all") && o.push(h);
    }), o.forEach(function(d) {
      return a.forEach(function(h) {
        typeof d[h] == "function" && d[h]();
      });
    });
  }, i.setCurrentTime = function(e) {
    var a = Bn(this.tech_.buffered(), e);
    if (!(this.masterPlaylistLoader_ && this.masterPlaylistLoader_.media()) || !this.masterPlaylistLoader_.media().segments)
      return 0;
    if (a && a.length)
      return e;
    this.mainSegmentLoader_.resetEverything(), this.mainSegmentLoader_.abort(), this.mediaTypes_.AUDIO.activePlaylistLoader && (this.audioSegmentLoader_.resetEverything(), this.audioSegmentLoader_.abort()), this.mediaTypes_.SUBTITLES.activePlaylistLoader && (this.subtitleSegmentLoader_.resetEverything(), this.subtitleSegmentLoader_.abort()), this.load();
  }, i.duration = function() {
    if (!this.masterPlaylistLoader_)
      return 0;
    var e = this.masterPlaylistLoader_.media();
    return e ? e.endList ? this.mediaSource ? this.mediaSource.duration : dr.Playlist.duration(e) : 1 / 0 : 0;
  }, i.seekable = function() {
    return this.seekable_;
  }, i.onSyncInfoUpdate_ = function() {
    var e;
    if (!!this.masterPlaylistLoader_) {
      var a = this.masterPlaylistLoader_.media();
      if (!!a) {
        var s = this.syncController_.getExpiredTime(a, this.duration());
        if (s !== null) {
          var o = this.masterPlaylistLoader_.master, u = dr.Playlist.seekable(a, s, dr.Playlist.liveEdgeDelay(o, a));
          if (u.length !== 0 && !(this.mediaTypes_.AUDIO.activePlaylistLoader && (a = this.mediaTypes_.AUDIO.activePlaylistLoader.media(), s = this.syncController_.getExpiredTime(a, this.duration()), s === null || (e = dr.Playlist.seekable(a, s, dr.Playlist.liveEdgeDelay(o, a)), e.length === 0)))) {
            var l, d;
            this.seekable_ && this.seekable_.length && (l = this.seekable_.end(0), d = this.seekable_.start(0)), e ? e.start(0) > u.end(0) || u.start(0) > e.end(0) ? this.seekable_ = u : this.seekable_ = G.createTimeRanges([[e.start(0) > u.start(0) ? e.start(0) : u.start(0), e.end(0) < u.end(0) ? e.end(0) : u.end(0)]]) : this.seekable_ = u, !(this.seekable_ && this.seekable_.length && this.seekable_.end(0) === l && this.seekable_.start(0) === d) && (this.logger_("seekable updated [" + Qg(this.seekable_) + "]"), this.tech_.trigger("seekablechanged"));
          }
        }
      }
    }
  }, i.updateDuration = function(e) {
    if (this.updateDuration_ && (this.mediaSource.removeEventListener("sourceopen", this.updateDuration_), this.updateDuration_ = null), this.mediaSource.readyState !== "open") {
      this.updateDuration_ = this.updateDuration.bind(this, e), this.mediaSource.addEventListener("sourceopen", this.updateDuration_);
      return;
    }
    if (e) {
      var a = this.seekable();
      if (!a.length)
        return;
      (isNaN(this.mediaSource.duration) || this.mediaSource.duration < a.end(a.length - 1)) && this.sourceUpdater_.setDuration(a.end(a.length - 1));
      return;
    }
    var s = this.tech_.buffered(), o = dr.Playlist.duration(this.masterPlaylistLoader_.media());
    s.length > 0 && (o = Math.max(o, s.end(s.length - 1))), this.mediaSource.duration !== o && this.sourceUpdater_.setDuration(o);
  }, i.dispose = function() {
    var e = this;
    this.trigger("dispose"), this.decrypter_.terminate(), this.masterPlaylistLoader_.dispose(), this.mainSegmentLoader_.dispose(), this.loadOnPlay_ && this.tech_.off("play", this.loadOnPlay_), ["AUDIO", "SUBTITLES"].forEach(function(a) {
      var s = e.mediaTypes_[a].groups;
      for (var o in s)
        s[o].forEach(function(u) {
          u.playlistLoader && u.playlistLoader.dispose();
        });
    }), this.audioSegmentLoader_.dispose(), this.subtitleSegmentLoader_.dispose(), this.sourceUpdater_.dispose(), this.timelineChangeController_.dispose(), this.stopABRTimer_(), this.updateDuration_ && this.mediaSource.removeEventListener("sourceopen", this.updateDuration_), this.mediaSource.removeEventListener("durationchange", this.handleDurationChange_), this.mediaSource.removeEventListener("sourceopen", this.handleSourceOpen_), this.mediaSource.removeEventListener("sourceended", this.handleSourceEnded_), this.off();
  }, i.master = function() {
    return this.masterPlaylistLoader_.master;
  }, i.media = function() {
    return this.masterPlaylistLoader_.media() || this.initialMedia_;
  }, i.areMediaTypesKnown_ = function() {
    var e = !!this.mediaTypes_.AUDIO.activePlaylistLoader, a = !!this.mainSegmentLoader_.getCurrentMediaInfo_(), s = e ? !!this.audioSegmentLoader_.getCurrentMediaInfo_() : !0;
    return !(!a || !s);
  }, i.getCodecsOrExclude_ = function() {
    var e = this, a = {
      main: this.mainSegmentLoader_.getCurrentMediaInfo_() || {},
      audio: this.audioSegmentLoader_.getCurrentMediaInfo_() || {}
    };
    a.video = a.main;
    var s = Ha(this.master(), this.media()), o = {}, u = !!this.mediaTypes_.AUDIO.activePlaylistLoader;
    if (a.main.hasVideo && (o.video = s.video || a.main.videoCodec || r0), a.main.isMuxed && (o.video += "," + (s.audio || a.main.audioCodec || xf)), (a.main.hasAudio && !a.main.isMuxed || a.audio.hasAudio || u) && (o.audio = s.audio || a.main.audioCodec || a.audio.audioCodec || xf, a.audio.isFmp4 = a.main.hasAudio && !a.main.isMuxed ? a.main.isFmp4 : a.audio.isFmp4), !o.audio && !o.video) {
      this.blacklistCurrentPlaylist({
        playlist: this.media(),
        message: "Could not determine codecs for playlist.",
        blacklistDuration: 1 / 0
      });
      return;
    }
    var l = function(T, I) {
      return T ? Js(I) : Lu(I);
    }, d = {}, h;
    if (["video", "audio"].forEach(function(y) {
      if (o.hasOwnProperty(y) && !l(a[y].isFmp4, o[y])) {
        var T = a[y].isFmp4 ? "browser" : "muxer";
        d[T] = d[T] || [], d[T].push(o[y]), y === "audio" && (h = T);
      }
    }), u && h && this.media().attributes.AUDIO) {
      var f = this.media().attributes.AUDIO;
      this.master().playlists.forEach(function(y) {
        var T = y.attributes && y.attributes.AUDIO;
        T === f && y !== e.media() && (y.excludeUntil = 1 / 0);
      }), this.logger_("excluding audio group " + f + " as " + h + ' does not support codec(s): "' + o.audio + '"');
    }
    if (Object.keys(d).length) {
      var _ = Object.keys(d).reduce(function(y, T) {
        return y && (y += ", "), y += T + ' does not support codec(s): "' + d[T].join(",") + '"', y;
      }, "") + ".";
      this.blacklistCurrentPlaylist({
        playlist: this.media(),
        internal: !0,
        message: _,
        blacklistDuration: 1 / 0
      });
      return;
    }
    if (this.sourceUpdater_.hasCreatedSourceBuffers() && !this.sourceUpdater_.canChangeType()) {
      var v = [];
      if (["video", "audio"].forEach(function(y) {
        var T = (Qi(e.sourceUpdater_.codecs[y] || "")[0] || {}).type, I = (Qi(o[y] || "")[0] || {}).type;
        T && I && T.toLowerCase() !== I.toLowerCase() && v.push('"' + e.sourceUpdater_.codecs[y] + '" -> "' + o[y] + '"');
      }), v.length) {
        this.blacklistCurrentPlaylist({
          playlist: this.media(),
          message: "Codec switching not supported: " + v.join(", ") + ".",
          blacklistDuration: 1 / 0,
          internal: !0
        });
        return;
      }
    }
    return o;
  }, i.tryToCreateSourceBuffers_ = function() {
    if (!(this.mediaSource.readyState !== "open" || this.sourceUpdater_.hasCreatedSourceBuffers()) && !!this.areMediaTypesKnown_()) {
      var e = this.getCodecsOrExclude_();
      if (!!e) {
        this.sourceUpdater_.createSourceBuffers(e);
        var a = [e.video, e.audio].filter(Boolean).join(",");
        this.excludeIncompatibleVariants_(a);
      }
    }
  }, i.excludeUnsupportedVariants_ = function() {
    var e = this, a = this.master().playlists, s = [];
    Object.keys(a).forEach(function(o) {
      var u = a[o];
      if (s.indexOf(u.id) === -1) {
        s.push(u.id);
        var l = Ha(e.master, u), d = [];
        l.audio && !Lu(l.audio) && !Js(l.audio) && d.push("audio codec " + l.audio), l.video && !Lu(l.video) && !Js(l.video) && d.push("video codec " + l.video), l.text && l.text === "stpp.ttml.im1t" && d.push("text codec " + l.text), d.length && (u.excludeUntil = 1 / 0, e.logger_("excluding " + u.id + " for unsupported: " + d.join(", ")));
      }
    });
  }, i.excludeIncompatibleVariants_ = function(e) {
    var a = this, s = [], o = this.master().playlists, u = Ao(Qi(e)), l = Ch(u), d = u.video && Qi(u.video)[0] || null, h = u.audio && Qi(u.audio)[0] || null;
    Object.keys(o).forEach(function(f) {
      var _ = o[f];
      if (!(s.indexOf(_.id) !== -1 || _.excludeUntil === 1 / 0)) {
        s.push(_.id);
        var v = [], y = Ha(a.masterPlaylistLoader_.master, _), T = Ch(y);
        if (!(!y.audio && !y.video)) {
          if (T !== l && v.push('codec count "' + T + '" !== "' + l + '"'), !a.sourceUpdater_.canChangeType()) {
            var I = y.video && Qi(y.video)[0] || null, V = y.audio && Qi(y.audio)[0] || null;
            I && d && I.type.toLowerCase() !== d.type.toLowerCase() && v.push('video codec "' + I.type + '" !== "' + d.type + '"'), V && h && V.type.toLowerCase() !== h.type.toLowerCase() && v.push('audio codec "' + V.type + '" !== "' + h.type + '"');
          }
          v.length && (_.excludeUntil = 1 / 0, a.logger_("blacklisting " + _.id + ": " + v.join(" && ")));
        }
      }
    });
  }, i.updateAdCues_ = function(e) {
    var a = 0, s = this.seekable();
    s.length && (a = s.start(0)), rx(e, this.cueTagsTrack_, a);
  }, i.goalBufferLength = function() {
    var e = this.tech_.currentTime(), a = Gt.GOAL_BUFFER_LENGTH, s = Gt.GOAL_BUFFER_LENGTH_RATE, o = Math.max(a, Gt.MAX_GOAL_BUFFER_LENGTH);
    return Math.min(a + e * s, o);
  }, i.bufferLowWaterLine = function() {
    var e = this.tech_.currentTime(), a = Gt.BUFFER_LOW_WATER_LINE, s = Gt.BUFFER_LOW_WATER_LINE_RATE, o = Math.max(a, Gt.MAX_BUFFER_LOW_WATER_LINE), u = Math.max(a, Gt.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);
    return Math.min(a + e * s, this.experimentalBufferBasedABR ? u : o);
  }, i.bufferHighWaterLine = function() {
    return Gt.BUFFER_HIGH_WATER_LINE;
  }, t;
}(G.EventTarget), wx = function(t, i, r) {
  return function(e) {
    var a = t.master.playlists[i], s = Rc(a), o = Zo(a);
    return typeof e > "u" ? o : (e ? delete a.disabled : a.disabled = !0, e !== o && !s && (r(), e ? t.trigger("renditionenabled") : t.trigger("renditiondisabled")), e);
  };
}, Ax = function(t, i, r) {
  var e = t.masterPlaylistController_, a = t.options_.smoothQualityChange, s = a ? "smooth" : "fast", o = e[s + "QualityChange_"].bind(e);
  if (i.attributes) {
    var u = i.attributes.RESOLUTION;
    this.width = u && u.width, this.height = u && u.height, this.bandwidth = i.attributes.BANDWIDTH;
  }
  this.codecs = Ha(e.master(), i), this.playlist = i, this.id = r, this.enabled = wx(t.playlists, i.id, o);
}, Cx = function(t) {
  t.representations = function() {
    var i = t.masterPlaylistController_.master(), r = ps(i) ? t.masterPlaylistController_.getAudioTrackPlaylists_() : i.playlists;
    return r ? r.filter(function(e) {
      return !Rc(e);
    }).map(function(e, a) {
      return new Ax(t, e, e.id);
    }) : [];
  };
}, Uh = ["seeking", "seeked", "pause", "playing", "error"], kx = /* @__PURE__ */ function() {
  function n(i) {
    var r = this;
    this.masterPlaylistController_ = i.masterPlaylistController, this.tech_ = i.tech, this.seekable = i.seekable, this.allowSeeksWithinUnsafeLiveWindow = i.allowSeeksWithinUnsafeLiveWindow, this.liveRangeSafeTimeDelta = i.liveRangeSafeTimeDelta, this.media = i.media, this.consecutiveUpdates = 0, this.lastRecordedTime = null, this.timer_ = null, this.checkCurrentTimeTimeout_ = null, this.logger_ = Gi("PlaybackWatcher"), this.logger_("initialize");
    var e = function() {
      return r.monitorCurrentTime_();
    }, a = function() {
      return r.monitorCurrentTime_();
    }, s = function() {
      return r.techWaiting_();
    }, o = function() {
      return r.cancelTimer_();
    }, u = this.masterPlaylistController_, l = ["main", "subtitle", "audio"], d = {};
    l.forEach(function(f) {
      d[f] = {
        reset: function() {
          return r.resetSegmentDownloads_(f);
        },
        updateend: function() {
          return r.checkSegmentDownloads_(f);
        }
      }, u[f + "SegmentLoader_"].on("appendsdone", d[f].updateend), u[f + "SegmentLoader_"].on("playlistupdate", d[f].reset), r.tech_.on(["seeked", "seeking"], d[f].reset);
    });
    var h = function(_) {
      ["main", "audio"].forEach(function(v) {
        u[v + "SegmentLoader_"][_]("appended", r.seekingAppendCheck_);
      });
    };
    this.seekingAppendCheck_ = function() {
      r.fixesBadSeeks_() && (r.consecutiveUpdates = 0, r.lastRecordedTime = r.tech_.currentTime(), h("off"));
    }, this.clearSeekingAppendCheck_ = function() {
      return h("off");
    }, this.watchForBadSeeking_ = function() {
      r.clearSeekingAppendCheck_(), h("on");
    }, this.tech_.on("seeked", this.clearSeekingAppendCheck_), this.tech_.on("seeking", this.watchForBadSeeking_), this.tech_.on("waiting", s), this.tech_.on(Uh, o), this.tech_.on("canplay", a), this.tech_.one("play", e), this.dispose = function() {
      r.clearSeekingAppendCheck_(), r.logger_("dispose"), r.tech_.off("waiting", s), r.tech_.off(Uh, o), r.tech_.off("canplay", a), r.tech_.off("play", e), r.tech_.off("seeking", r.watchForBadSeeking_), r.tech_.off("seeked", r.clearSeekingAppendCheck_), l.forEach(function(f) {
        u[f + "SegmentLoader_"].off("appendsdone", d[f].updateend), u[f + "SegmentLoader_"].off("playlistupdate", d[f].reset), r.tech_.off(["seeked", "seeking"], d[f].reset);
      }), r.checkCurrentTimeTimeout_ && B.clearTimeout(r.checkCurrentTimeTimeout_), r.cancelTimer_();
    };
  }
  var t = n.prototype;
  return t.monitorCurrentTime_ = function() {
    this.checkCurrentTime_(), this.checkCurrentTimeTimeout_ && B.clearTimeout(this.checkCurrentTimeTimeout_), this.checkCurrentTimeTimeout_ = B.setTimeout(this.monitorCurrentTime_.bind(this), 250);
  }, t.resetSegmentDownloads_ = function(r) {
    var e = this.masterPlaylistController_[r + "SegmentLoader_"];
    this[r + "StalledDownloads_"] > 0 && this.logger_("resetting possible stalled download count for " + r + " loader"), this[r + "StalledDownloads_"] = 0, this[r + "Buffered_"] = e.buffered_();
  }, t.checkSegmentDownloads_ = function(r) {
    var e = this.masterPlaylistController_, a = e[r + "SegmentLoader_"], s = a.buffered_(), o = ES(this[r + "Buffered_"], s);
    if (this[r + "Buffered_"] = s, o) {
      this.resetSegmentDownloads_(r);
      return;
    }
    this[r + "StalledDownloads_"]++, this.logger_("found #" + this[r + "StalledDownloads_"] + " " + r + " appends that did not increase buffer (possible stalled download)", {
      playlistId: a.playlist_ && a.playlist_.id,
      buffered: Zr(s)
    }), !(this[r + "StalledDownloads_"] < 10) && (this.logger_(r + " loader stalled download exclusion"), this.resetSegmentDownloads_(r), this.tech_.trigger({
      type: "usage",
      name: "vhs-" + r + "-download-exclusion"
    }), r !== "subtitle" && e.blacklistCurrentPlaylist({
      message: "Excessive " + r + " segment downloading detected."
    }, 1 / 0));
  }, t.checkCurrentTime_ = function() {
    if (!(this.tech_.paused() || this.tech_.seeking())) {
      var r = this.tech_.currentTime(), e = this.tech_.buffered();
      if (this.lastRecordedTime === r && (!e.length || r + Zi >= e.end(e.length - 1)))
        return this.techWaiting_();
      this.consecutiveUpdates >= 5 && r === this.lastRecordedTime ? (this.consecutiveUpdates++, this.waiting_()) : r === this.lastRecordedTime ? this.consecutiveUpdates++ : (this.consecutiveUpdates = 0, this.lastRecordedTime = r);
    }
  }, t.cancelTimer_ = function() {
    this.consecutiveUpdates = 0, this.timer_ && (this.logger_("cancelTimer_"), clearTimeout(this.timer_)), this.timer_ = null;
  }, t.fixesBadSeeks_ = function() {
    var r = this.tech_.seeking();
    if (!r)
      return !1;
    var e = this.seekable(), a = this.tech_.currentTime(), s = this.afterSeekableWindow_(e, a, this.media(), this.allowSeeksWithinUnsafeLiveWindow), o;
    if (s) {
      var u = e.end(e.length - 1);
      o = u;
    }
    if (this.beforeSeekableWindow_(e, a)) {
      var l = e.start(0);
      o = l + (l === e.end(0) ? 0 : Zi);
    }
    if (typeof o < "u")
      return this.logger_("Trying to seek outside of seekable at time " + a + " with " + ("seekable range " + Qg(e) + ". Seeking to ") + (o + ".")), this.tech_.setCurrentTime(o), !0;
    for (var d = this.masterPlaylistController_.sourceUpdater_, h = this.tech_.buffered(), f = d.audioBuffer ? d.audioBuffered() : null, _ = d.videoBuffer ? d.videoBuffered() : null, v = this.media(), y = v.partTargetDuration ? v.partTargetDuration : (v.targetDuration - Mr) * 2, T = [f, _], I = 0; I < T.length; I++)
      if (!!T[I]) {
        var V = Lc(T[I], a);
        if (V < y)
          return !1;
      }
    var $ = Ws(h, a);
    return $.length === 0 ? !1 : (o = $.start(0) + Zi, this.logger_("Buffered region starts (" + $.start(0) + ") " + (" just beyond seek point (" + a + "). Seeking to " + o + ".")), this.tech_.setCurrentTime(o), !0);
  }, t.waiting_ = function() {
    if (!this.techWaiting_()) {
      var r = this.tech_.currentTime(), e = this.tech_.buffered(), a = Bn(e, r);
      if (a.length && r + 3 <= a.end(0)) {
        this.cancelTimer_(), this.tech_.setCurrentTime(r), this.logger_("Stopped at " + r + " while inside a buffered region " + ("[" + a.start(0) + " -> " + a.end(0) + "]. Attempting to resume ") + "playback by seeking to the current time."), this.tech_.trigger({
          type: "usage",
          name: "vhs-unknown-waiting"
        }), this.tech_.trigger({
          type: "usage",
          name: "hls-unknown-waiting"
        });
        return;
      }
    }
  }, t.techWaiting_ = function() {
    var r = this.seekable(), e = this.tech_.currentTime();
    if (this.tech_.seeking() || this.timer_ !== null)
      return !0;
    if (this.beforeSeekableWindow_(r, e)) {
      var a = r.end(r.length - 1);
      return this.logger_("Fell out of live window at time " + e + ". Seeking to " + ("live point (seekable end) " + a)), this.cancelTimer_(), this.tech_.setCurrentTime(a), this.tech_.trigger({
        type: "usage",
        name: "vhs-live-resync"
      }), this.tech_.trigger({
        type: "usage",
        name: "hls-live-resync"
      }), !0;
    }
    var s = this.tech_.vhs.masterPlaylistController_.sourceUpdater_, o = this.tech_.buffered(), u = this.videoUnderflow_({
      audioBuffered: s.audioBuffered(),
      videoBuffered: s.videoBuffered(),
      currentTime: e
    });
    if (u)
      return this.cancelTimer_(), this.tech_.setCurrentTime(e), this.tech_.trigger({
        type: "usage",
        name: "vhs-video-underflow"
      }), this.tech_.trigger({
        type: "usage",
        name: "hls-video-underflow"
      }), !0;
    var l = Ws(o, e);
    if (l.length > 0) {
      var d = l.start(0) - e;
      return this.logger_("Stopped at " + e + ", setting timer for " + d + ", seeking " + ("to " + l.start(0))), this.cancelTimer_(), this.timer_ = setTimeout(this.skipTheGap_.bind(this), d * 1e3, e), !0;
    }
    return !1;
  }, t.afterSeekableWindow_ = function(r, e, a, s) {
    if (s === void 0 && (s = !1), !r.length)
      return !1;
    var o = r.end(r.length - 1) + Zi, u = !a.endList;
    return u && s && (o = r.end(r.length - 1) + a.targetDuration * 3), e > o;
  }, t.beforeSeekableWindow_ = function(r, e) {
    return !!(r.length && r.start(0) > 0 && e < r.start(0) - this.liveRangeSafeTimeDelta);
  }, t.videoUnderflow_ = function(r) {
    var e = r.videoBuffered, a = r.audioBuffered, s = r.currentTime;
    if (!!e) {
      var o;
      if (e.length && a.length) {
        var u = Bn(e, s - 3), l = Bn(e, s), d = Bn(a, s);
        d.length && !l.length && u.length && (o = {
          start: u.end(0),
          end: d.end(0)
        });
      } else {
        var h = Ws(e, s);
        h.length || (o = this.gapFromVideoUnderflow_(e, s));
      }
      return o ? (this.logger_("Encountered a gap in video from " + o.start + " to " + o.end + ". " + ("Seeking to current time " + s)), !0) : !1;
    }
  }, t.skipTheGap_ = function(r) {
    var e = this.tech_.buffered(), a = this.tech_.currentTime(), s = Ws(e, a);
    this.cancelTimer_(), !(s.length === 0 || a !== r) && (this.logger_("skipTheGap_:", "currentTime:", a, "scheduled currentTime:", r, "nextRange start:", s.start(0)), this.tech_.setCurrentTime(s.start(0) + Mr), this.tech_.trigger({
      type: "usage",
      name: "vhs-gap-skip"
    }), this.tech_.trigger({
      type: "usage",
      name: "hls-gap-skip"
    }));
  }, t.gapFromVideoUnderflow_ = function(r, e) {
    for (var a = TS(r), s = 0; s < a.length; s++) {
      var o = a.start(s), u = a.end(s);
      if (e - o < 4 && e - o > 2)
        return {
          start: o,
          end: u
        };
    }
    return null;
  }, n;
}(), Px = {
  errorInterval: 30,
  getSource: function(t) {
    var i = this.tech({
      IWillNotUseThisInPlugins: !0
    }), r = i.currentSource_ || this.currentSource();
    return t(r);
  }
}, Ix = function n(t, i) {
  var r = 0, e = 0, a = G.mergeOptions(Px, i);
  t.ready(function() {
    t.trigger({
      type: "usage",
      name: "vhs-error-reload-initialized"
    }), t.trigger({
      type: "usage",
      name: "hls-error-reload-initialized"
    });
  });
  var s = function() {
    e && t.currentTime(e);
  }, o = function(f) {
    f != null && (e = t.duration() !== 1 / 0 && t.currentTime() || 0, t.one("loadedmetadata", s), t.src(f), t.trigger({
      type: "usage",
      name: "vhs-error-reload"
    }), t.trigger({
      type: "usage",
      name: "hls-error-reload"
    }), t.play());
  }, u = function() {
    if (Date.now() - r < a.errorInterval * 1e3) {
      t.trigger({
        type: "usage",
        name: "vhs-error-reload-canceled"
      }), t.trigger({
        type: "usage",
        name: "hls-error-reload-canceled"
      });
      return;
    }
    if (!a.getSource || typeof a.getSource != "function") {
      G.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");
      return;
    }
    return r = Date.now(), a.getSource.call(t, o);
  }, l = function h() {
    t.off("loadedmetadata", s), t.off("error", u), t.off("dispose", h);
  }, d = function(f) {
    l(), n(t, f);
  };
  t.on("error", u), t.on("dispose", l), t.reloadSourceOnError = d;
}, Dx = function(t) {
  Ix(this, t);
}, Nv = "2.14.2", Lx = "6.0.1", Ox = "0.21.1", Rx = "4.7.1", Nx = "3.1.3", Yt = {
  PlaylistLoader: Un,
  Playlist: bi,
  utils: zS,
  STANDARD_PLAYLIST_SELECTOR: Ph,
  INITIAL_PLAYLIST_SELECTOR: RE,
  lastBandwidthSelector: Ph,
  movingAverageBandwidthSelector: LE,
  comparePlaylistBandwidth: Bc,
  comparePlaylistResolution: DE,
  xhr: fv()
};
Object.keys(Gt).forEach(function(n) {
  Object.defineProperty(Yt, n, {
    get: function() {
      return G.log.warn("using Vhs." + n + " is UNSAFE be sure you know what you are doing"), Gt[n];
    },
    set: function(i) {
      if (G.log.warn("using Vhs." + n + " is UNSAFE be sure you know what you are doing"), typeof i != "number" || i < 0) {
        G.log.warn("value of Vhs." + n + " must be greater than or equal to 0");
        return;
      }
      Gt[n] = i;
    }
  });
});
var Mv = "videojs-vhs", Fv = function(t, i) {
  for (var r = i.media(), e = -1, a = 0; a < t.length; a++)
    if (t[a].id === r.id) {
      e = a;
      break;
    }
  t.selectedIndex_ = e, t.trigger({
    selectedIndex: e,
    type: "change"
  });
}, Mx = function(t, i) {
  i.representations().forEach(function(r) {
    t.addQualityLevel(r);
  }), Fv(t, i.playlists);
};
Yt.canPlaySource = function() {
  return G.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.");
};
var Fx = function(t, i, r) {
  if (!t)
    return t;
  var e = {};
  i && i.attributes && i.attributes.CODECS && (e = Ao(Qi(i.attributes.CODECS))), r && r.attributes && r.attributes.CODECS && (e.audio = r.attributes.CODECS);
  var a = $a(e.video), s = $a(e.audio), o = {};
  for (var u in t)
    o[u] = {}, s && (o[u].audioContentType = s), a && (o[u].videoContentType = a), i.contentProtection && i.contentProtection[u] && i.contentProtection[u].pssh && (o[u].pssh = i.contentProtection[u].pssh), typeof t[u] == "string" && (o[u].url = t[u]);
  return G.mergeOptions(t, o);
}, Bx = function(t, i) {
  return t.reduce(function(r, e) {
    if (!e.contentProtection)
      return r;
    var a = i.reduce(function(s, o) {
      var u = e.contentProtection[o];
      return u && u.pssh && (s[o] = {
        pssh: u.pssh
      }), s;
    }, {});
    return Object.keys(a).length && r.push(a), r;
  }, []);
}, Ux = function(t) {
  var i = t.player, r = t.sourceKeySystems, e = t.audioMedia, a = t.mainPlaylists;
  if (!i.eme.initializeMediaKeys)
    return Promise.resolve();
  var s = e ? a.concat([e]) : a, o = Bx(s, Object.keys(r)), u = [], l = [];
  return o.forEach(function(d) {
    l.push(new Promise(function(h, f) {
      i.tech_.one("keysessioncreated", h);
    })), u.push(new Promise(function(h, f) {
      i.eme.initializeMediaKeys({
        keySystems: d
      }, function(_) {
        if (_) {
          f(_);
          return;
        }
        h();
      });
    }));
  }), Promise.race([
    Promise.all(u),
    Promise.race(l)
  ]);
}, qx = function(t) {
  var i = t.player, r = t.sourceKeySystems, e = t.media, a = t.audioMedia, s = Fx(r, e, a);
  return s ? (i.currentSource().keySystems = s, s && !i.eme ? (G.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"), !1) : !0) : !1;
}, Bv = function() {
  if (!B.localStorage)
    return null;
  var t = B.localStorage.getItem(Mv);
  if (!t)
    return null;
  try {
    return JSON.parse(t);
  } catch {
    return null;
  }
}, Vx = function(t) {
  if (!B.localStorage)
    return !1;
  var i = Bv();
  i = i ? G.mergeOptions(i, t) : t;
  try {
    B.localStorage.setItem(Mv, JSON.stringify(i));
  } catch {
    return !1;
  }
  return i;
}, jx = function(t) {
  return t.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,") === 0 ? JSON.parse(t.substring(t.indexOf(",") + 1)) : t;
};
Yt.supportsNativeHls = function() {
  if (!Te || !Te.createElement)
    return !1;
  var n = Te.createElement("video");
  if (!G.getTech("Html5").isSupported())
    return !1;
  var t = [
    "application/vnd.apple.mpegurl",
    "audio/mpegurl",
    "audio/x-mpegurl",
    "application/x-mpegurl",
    "video/x-mpegurl",
    "video/mpegurl",
    "application/mpegurl"
  ];
  return t.some(function(i) {
    return /maybe|probably/i.test(n.canPlayType(i));
  });
}();
Yt.supportsNativeDash = function() {
  return !Te || !Te.createElement || !G.getTech("Html5").isSupported() ? !1 : /maybe|probably/i.test(Te.createElement("video").canPlayType("application/dash+xml"));
}();
Yt.supportsTypeNatively = function(n) {
  return n === "hls" ? Yt.supportsNativeHls : n === "dash" ? Yt.supportsNativeDash : !1;
};
Yt.isSupported = function() {
  return G.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.");
};
var Hx = G.getComponent("Component"), qc = /* @__PURE__ */ function(n) {
  Ee(t, n);
  function t(r, e, a) {
    var s;
    if (s = n.call(this, e, G.mergeOptions(a.hls, a.vhs)) || this, a.hls && Object.keys(a.hls).length && G.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."), typeof a.initialBandwidth == "number" && (s.options_.bandwidth = a.initialBandwidth), s.logger_ = Gi("VhsHandler"), e.options_ && e.options_.playerId) {
      var o = G(e.options_.playerId);
      o.hasOwnProperty("hls") || Object.defineProperty(o, "hls", {
        get: function() {
          return G.log.warn("player.hls is deprecated. Use player.tech().vhs instead."), e.trigger({
            type: "usage",
            name: "hls-player-access"
          }), Ge(s);
        },
        configurable: !0
      }), o.hasOwnProperty("vhs") || Object.defineProperty(o, "vhs", {
        get: function() {
          return G.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."), e.trigger({
            type: "usage",
            name: "vhs-player-access"
          }), Ge(s);
        },
        configurable: !0
      }), o.hasOwnProperty("dash") || Object.defineProperty(o, "dash", {
        get: function() {
          return G.log.warn("player.dash is deprecated. Use player.tech().vhs instead."), Ge(s);
        },
        configurable: !0
      }), s.player_ = o;
    }
    if (s.tech_ = e, s.source_ = r, s.stats = {}, s.ignoreNextSeekingEvent_ = !1, s.setOptions_(), s.options_.overrideNative && e.overrideNativeAudioTracks && e.overrideNativeVideoTracks)
      e.overrideNativeAudioTracks(!0), e.overrideNativeVideoTracks(!0);
    else if (s.options_.overrideNative && (e.featuresNativeVideoTracks || e.featuresNativeAudioTracks))
      throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");
    return s.on(Te, ["fullscreenchange", "webkitfullscreenchange", "mozfullscreenchange", "MSFullscreenChange"], function(u) {
      var l = Te.fullscreenElement || Te.webkitFullscreenElement || Te.mozFullScreenElement || Te.msFullscreenElement;
      l && l.contains(s.tech_.el()) ? s.masterPlaylistController_.fastQualityChange_() : s.masterPlaylistController_.checkABR_();
    }), s.on(s.tech_, "seeking", function() {
      if (this.ignoreNextSeekingEvent_) {
        this.ignoreNextSeekingEvent_ = !1;
        return;
      }
      this.setCurrentTime(this.tech_.currentTime());
    }), s.on(s.tech_, "error", function() {
      this.tech_.error() && this.masterPlaylistController_ && this.masterPlaylistController_.pauseLoading();
    }), s.on(s.tech_, "play", s.play), s;
  }
  var i = t.prototype;
  return i.setOptions_ = function() {
    var e = this;
    if (this.options_.withCredentials = this.options_.withCredentials || !1, this.options_.handleManifestRedirects = this.options_.handleManifestRedirects !== !1, this.options_.limitRenditionByPlayerDimensions = this.options_.limitRenditionByPlayerDimensions !== !1, this.options_.useDevicePixelRatio = this.options_.useDevicePixelRatio || !1, this.options_.smoothQualityChange = this.options_.smoothQualityChange || !1, this.options_.useBandwidthFromLocalStorage = typeof this.source_.useBandwidthFromLocalStorage < "u" ? this.source_.useBandwidthFromLocalStorage : this.options_.useBandwidthFromLocalStorage || !1, this.options_.useNetworkInformationApi = this.options_.useNetworkInformationApi || !1, this.options_.useDtsForTimestampOffset = this.options_.useDtsForTimestampOffset || !1, this.options_.customTagParsers = this.options_.customTagParsers || [], this.options_.customTagMappers = this.options_.customTagMappers || [], this.options_.cacheEncryptionKeys = this.options_.cacheEncryptionKeys || !1, typeof this.options_.blacklistDuration != "number" && (this.options_.blacklistDuration = 5 * 60), typeof this.options_.bandwidth != "number" && this.options_.useBandwidthFromLocalStorage) {
      var a = Bv();
      a && a.bandwidth && (this.options_.bandwidth = a.bandwidth, this.tech_.trigger({
        type: "usage",
        name: "vhs-bandwidth-from-local-storage"
      }), this.tech_.trigger({
        type: "usage",
        name: "hls-bandwidth-from-local-storage"
      })), a && a.throughput && (this.options_.throughput = a.throughput, this.tech_.trigger({
        type: "usage",
        name: "vhs-throughput-from-local-storage"
      }), this.tech_.trigger({
        type: "usage",
        name: "hls-throughput-from-local-storage"
      }));
    }
    typeof this.options_.bandwidth != "number" && (this.options_.bandwidth = Gt.INITIAL_BANDWIDTH), this.options_.enableLowInitialPlaylist = this.options_.enableLowInitialPlaylist && this.options_.bandwidth === Gt.INITIAL_BANDWIDTH, ["withCredentials", "useDevicePixelRatio", "limitRenditionByPlayerDimensions", "bandwidth", "smoothQualityChange", "customTagParsers", "customTagMappers", "handleManifestRedirects", "cacheEncryptionKeys", "playlistSelector", "initialPlaylistSelector", "experimentalBufferBasedABR", "liveRangeSafeTimeDelta", "experimentalLLHLS", "useNetworkInformationApi", "useDtsForTimestampOffset", "experimentalExactManifestTimings", "experimentalLeastPixelDiffSelector"].forEach(function(s) {
      typeof e.source_[s] < "u" && (e.options_[s] = e.source_[s]);
    }), this.limitRenditionByPlayerDimensions = this.options_.limitRenditionByPlayerDimensions, this.useDevicePixelRatio = this.options_.useDevicePixelRatio;
  }, i.src = function(e, a) {
    var s = this;
    if (!!e) {
      this.setOptions_(), this.options_.src = jx(this.source_.src), this.options_.tech = this.tech_, this.options_.externVhs = Yt, this.options_.sourceType = Zp(a), this.options_.seekTo = function(l) {
        s.tech_.setCurrentTime(l);
      }, this.options_.smoothQualityChange && G.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"), this.masterPlaylistController_ = new xx(this.options_);
      var o = G.mergeOptions({
        liveRangeSafeTimeDelta: Zi
      }, this.options_, {
        seekable: function() {
          return s.seekable();
        },
        media: function() {
          return s.masterPlaylistController_.media();
        },
        masterPlaylistController: this.masterPlaylistController_
      });
      this.playbackWatcher_ = new kx(o), this.masterPlaylistController_.on("error", function() {
        var l = G.players[s.tech_.options_.playerId], d = s.masterPlaylistController_.error;
        typeof d == "object" && !d.code ? d.code = 3 : typeof d == "string" && (d = {
          message: d,
          code: 3
        }), l.error(d);
      });
      var u = this.options_.experimentalBufferBasedABR ? Yt.movingAverageBandwidthSelector(0.55) : Yt.STANDARD_PLAYLIST_SELECTOR;
      this.masterPlaylistController_.selectPlaylist = this.selectPlaylist ? this.selectPlaylist.bind(this) : u.bind(this), this.masterPlaylistController_.selectInitialPlaylist = Yt.INITIAL_PLAYLIST_SELECTOR.bind(this), this.playlists = this.masterPlaylistController_.masterPlaylistLoader_, this.mediaSource = this.masterPlaylistController_.mediaSource, Object.defineProperties(this, {
        selectPlaylist: {
          get: function() {
            return this.masterPlaylistController_.selectPlaylist;
          },
          set: function(d) {
            this.masterPlaylistController_.selectPlaylist = d.bind(this);
          }
        },
        throughput: {
          get: function() {
            return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate;
          },
          set: function(d) {
            this.masterPlaylistController_.mainSegmentLoader_.throughput.rate = d, this.masterPlaylistController_.mainSegmentLoader_.throughput.count = 1;
          }
        },
        bandwidth: {
          get: function() {
            var d = this.masterPlaylistController_.mainSegmentLoader_.bandwidth, h = B.navigator.connection || B.navigator.mozConnection || B.navigator.webkitConnection, f = 1e7;
            if (this.options_.useNetworkInformationApi && h) {
              var _ = h.downlink * 1e3 * 1e3;
              _ >= f && d >= f ? d = Math.max(d, _) : d = _;
            }
            return d;
          },
          set: function(d) {
            this.masterPlaylistController_.mainSegmentLoader_.bandwidth = d, this.masterPlaylistController_.mainSegmentLoader_.throughput = {
              rate: 0,
              count: 0
            };
          }
        },
        systemBandwidth: {
          get: function() {
            var d = 1 / (this.bandwidth || 1), h;
            this.throughput > 0 ? h = 1 / this.throughput : h = 0;
            var f = Math.floor(1 / (d + h));
            return f;
          },
          set: function() {
            G.log.error('The "systemBandwidth" property is read-only');
          }
        }
      }), this.options_.bandwidth && (this.bandwidth = this.options_.bandwidth), this.options_.throughput && (this.throughput = this.options_.throughput), Object.defineProperties(this.stats, {
        bandwidth: {
          get: function() {
            return s.bandwidth || 0;
          },
          enumerable: !0
        },
        mediaRequests: {
          get: function() {
            return s.masterPlaylistController_.mediaRequests_() || 0;
          },
          enumerable: !0
        },
        mediaRequestsAborted: {
          get: function() {
            return s.masterPlaylistController_.mediaRequestsAborted_() || 0;
          },
          enumerable: !0
        },
        mediaRequestsTimedout: {
          get: function() {
            return s.masterPlaylistController_.mediaRequestsTimedout_() || 0;
          },
          enumerable: !0
        },
        mediaRequestsErrored: {
          get: function() {
            return s.masterPlaylistController_.mediaRequestsErrored_() || 0;
          },
          enumerable: !0
        },
        mediaTransferDuration: {
          get: function() {
            return s.masterPlaylistController_.mediaTransferDuration_() || 0;
          },
          enumerable: !0
        },
        mediaBytesTransferred: {
          get: function() {
            return s.masterPlaylistController_.mediaBytesTransferred_() || 0;
          },
          enumerable: !0
        },
        mediaSecondsLoaded: {
          get: function() {
            return s.masterPlaylistController_.mediaSecondsLoaded_() || 0;
          },
          enumerable: !0
        },
        mediaAppends: {
          get: function() {
            return s.masterPlaylistController_.mediaAppends_() || 0;
          },
          enumerable: !0
        },
        mainAppendsToLoadedData: {
          get: function() {
            return s.masterPlaylistController_.mainAppendsToLoadedData_() || 0;
          },
          enumerable: !0
        },
        audioAppendsToLoadedData: {
          get: function() {
            return s.masterPlaylistController_.audioAppendsToLoadedData_() || 0;
          },
          enumerable: !0
        },
        appendsToLoadedData: {
          get: function() {
            return s.masterPlaylistController_.appendsToLoadedData_() || 0;
          },
          enumerable: !0
        },
        timeToLoadedData: {
          get: function() {
            return s.masterPlaylistController_.timeToLoadedData_() || 0;
          },
          enumerable: !0
        },
        buffered: {
          get: function() {
            return Zr(s.tech_.buffered());
          },
          enumerable: !0
        },
        currentTime: {
          get: function() {
            return s.tech_.currentTime();
          },
          enumerable: !0
        },
        currentSource: {
          get: function() {
            return s.tech_.currentSource_;
          },
          enumerable: !0
        },
        currentTech: {
          get: function() {
            return s.tech_.name_;
          },
          enumerable: !0
        },
        duration: {
          get: function() {
            return s.tech_.duration();
          },
          enumerable: !0
        },
        master: {
          get: function() {
            return s.playlists.master;
          },
          enumerable: !0
        },
        playerDimensions: {
          get: function() {
            return s.tech_.currentDimensions();
          },
          enumerable: !0
        },
        seekable: {
          get: function() {
            return Zr(s.tech_.seekable());
          },
          enumerable: !0
        },
        timestamp: {
          get: function() {
            return Date.now();
          },
          enumerable: !0
        },
        videoPlaybackQuality: {
          get: function() {
            return s.tech_.getVideoPlaybackQuality();
          },
          enumerable: !0
        }
      }), this.tech_.one("canplay", this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)), this.tech_.on("bandwidthupdate", function() {
        s.options_.useBandwidthFromLocalStorage && Vx({
          bandwidth: s.bandwidth,
          throughput: Math.round(s.throughput)
        });
      }), this.masterPlaylistController_.on("selectedinitialmedia", function() {
        Cx(s);
      }), this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers", function() {
        s.setupEme_();
      }), this.on(this.masterPlaylistController_, "progress", function() {
        this.tech_.trigger("progress");
      }), this.on(this.masterPlaylistController_, "firstplay", function() {
        this.ignoreNextSeekingEvent_ = !0;
      }), this.setupQualityLevels_(), this.tech_.el() && (this.mediaSourceUrl_ = B.URL.createObjectURL(this.masterPlaylistController_.mediaSource), this.tech_.src(this.mediaSourceUrl_));
    }
  }, i.createKeySessions_ = function() {
    var e = this, a = this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;
    this.logger_("waiting for EME key session creation"), Ux({
      player: this.player_,
      sourceKeySystems: this.source_.keySystems,
      audioMedia: a && a.media(),
      mainPlaylists: this.playlists.master.playlists
    }).then(function() {
      e.logger_("created EME key session"), e.masterPlaylistController_.sourceUpdater_.initializedEme();
    }).catch(function(s) {
      e.logger_("error while creating EME key session", s), e.player_.error({
        message: "Failed to initialize media keys for EME",
        code: 3
      });
    });
  }, i.handleWaitingForKey_ = function() {
    this.logger_("waitingforkey fired, attempting to create any new key sessions"), this.createKeySessions_();
  }, i.setupEme_ = function() {
    var e = this, a = this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader, s = qx({
      player: this.player_,
      sourceKeySystems: this.source_.keySystems,
      media: this.playlists.media(),
      audioMedia: a && a.media()
    });
    if (this.player_.tech_.on("keystatuschange", function(o) {
      o.status === "output-restricted" && e.masterPlaylistController_.blacklistCurrentPlaylist({
        playlist: e.masterPlaylistController_.media(),
        message: "DRM keystatus changed to " + o.status + ". Playlist will fail to play. Check for HDCP content.",
        blacklistDuration: 1 / 0
      });
    }), this.handleWaitingForKey_ = this.handleWaitingForKey_.bind(this), this.player_.tech_.on("waitingforkey", this.handleWaitingForKey_), G.browser.IE_VERSION === 11 || !s) {
      this.masterPlaylistController_.sourceUpdater_.initializedEme();
      return;
    }
    this.createKeySessions_();
  }, i.setupQualityLevels_ = function() {
    var e = this, a = G.players[this.tech_.options_.playerId];
    !a || !a.qualityLevels || this.qualityLevels_ || (this.qualityLevels_ = a.qualityLevels(), this.masterPlaylistController_.on("selectedinitialmedia", function() {
      Mx(e.qualityLevels_, e);
    }), this.playlists.on("mediachange", function() {
      Fv(e.qualityLevels_, e.playlists);
    }));
  }, t.version = function() {
    return {
      "@videojs/http-streaming": Nv,
      "mux.js": Lx,
      "mpd-parser": Ox,
      "m3u8-parser": Rx,
      "aes-decrypter": Nx
    };
  }, i.version = function() {
    return this.constructor.version();
  }, i.canChangeType = function() {
    return Rv.canChangeType();
  }, i.play = function() {
    this.masterPlaylistController_.play();
  }, i.setCurrentTime = function(e) {
    this.masterPlaylistController_.setCurrentTime(e);
  }, i.duration = function() {
    return this.masterPlaylistController_.duration();
  }, i.seekable = function() {
    return this.masterPlaylistController_.seekable();
  }, i.dispose = function() {
    this.playbackWatcher_ && this.playbackWatcher_.dispose(), this.masterPlaylistController_ && this.masterPlaylistController_.dispose(), this.qualityLevels_ && this.qualityLevels_.dispose(), this.player_ && (delete this.player_.vhs, delete this.player_.dash, delete this.player_.hls), this.tech_ && this.tech_.vhs && delete this.tech_.vhs, this.tech_ && delete this.tech_.hls, this.mediaSourceUrl_ && B.URL.revokeObjectURL && (B.URL.revokeObjectURL(this.mediaSourceUrl_), this.mediaSourceUrl_ = null), this.tech_ && this.tech_.off("waitingforkey", this.handleWaitingForKey_), n.prototype.dispose.call(this);
  }, i.convertToProgramTime = function(e, a) {
    return eE({
      playlist: this.masterPlaylistController_.media(),
      time: e,
      callback: a
    });
  }, i.seekToProgramTime = function(e, a, s, o) {
    return s === void 0 && (s = !0), o === void 0 && (o = 2), tE({
      programTime: e,
      playlist: this.masterPlaylistController_.media(),
      retryCount: o,
      pauseAfterSeek: s,
      seekTo: this.options_.seekTo,
      tech: this.options_.tech,
      callback: a
    });
  }, t;
}(Hx), eu = {
  name: "videojs-http-streaming",
  VERSION: Nv,
  canHandleSource: function(t, i) {
    i === void 0 && (i = {});
    var r = G.mergeOptions(G.options, i);
    return eu.canPlayType(t.type, r);
  },
  handleSource: function(t, i, r) {
    r === void 0 && (r = {});
    var e = G.mergeOptions(G.options, r);
    return i.vhs = new qc(t, i, e), G.hasOwnProperty("hls") || Object.defineProperty(i, "hls", {
      get: function() {
        return G.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."), i.vhs;
      },
      configurable: !0
    }), i.vhs.xhr = fv(), i.vhs.src(t.src, t.type), i.vhs;
  },
  canPlayType: function(t, i) {
    i === void 0 && (i = {});
    var r = G.mergeOptions(G.options, i), e = r.vhs;
    e = e === void 0 ? {} : e;
    var a = e.overrideNative, s = a === void 0 ? !G.browser.IS_ANY_SAFARI : a, o = r.hls;
    o = o === void 0 ? {} : o;
    var u = o.overrideNative, l = u === void 0 ? !1 : u, d = Zp(t), h = d && (!Yt.supportsTypeNatively(d) || l || s);
    return h ? "maybe" : "";
  }
}, Wx = function() {
  return Js("avc1.4d400d,mp4a.40.2");
};
Wx() && G.getTech("Html5").registerSourceHandler(eu, 0);
G.VhsHandler = qc;
Object.defineProperty(G, "HlsHandler", {
  get: function() {
    return G.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."), qc;
  },
  configurable: !0
});
G.VhsSourceHandler = eu;
Object.defineProperty(G, "HlsSourceHandler", {
  get: function() {
    return G.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."), eu;
  },
  configurable: !0
});
G.Vhs = Yt;
Object.defineProperty(G, "Hls", {
  get: function() {
    return G.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."), Yt;
  },
  configurable: !0
});
G.use || (G.registerComponent("Hls", Yt), G.registerComponent("Vhs", Yt));
G.options.vhs = G.options.vhs || {};
G.options.hls = G.options.hls || {};
if (!G.getPlugin || !G.getPlugin("reloadSourceOnError")) {
  var Gx = G.registerPlugin || G.plugin;
  Gx("reloadSourceOnError", Dx);
}
const $x = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: G
}, Symbol.toStringTag, { value: "Module" }));
/*! @name videojs-contrib-quality-levels @version 2.1.0 @license Apache-2.0 */
function zx(n, t) {
  n.prototype = Object.create(t.prototype), n.prototype.constructor = n, n.__proto__ = t;
}
function Yu(n) {
  if (n === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return n;
}
var Kx = function n(t) {
  var i = this;
  if (G.browser.IS_IE8) {
    i = Te.createElement("custom");
    for (var r in n.prototype)
      r !== "constructor" && (i[r] = n.prototype[r]);
  }
  return i.id = t.id, i.label = i.id, i.width = t.width, i.height = t.height, i.bitrate = t.bandwidth, i.enabled_ = t.enabled, Object.defineProperty(i, "enabled", {
    get: function() {
      return i.enabled_();
    },
    set: function(a) {
      i.enabled_(a);
    }
  }), i;
}, Io = /* @__PURE__ */ function(n) {
  zx(t, n);
  function t() {
    var r;
    r = n.call(this) || this;
    var e = Yu(Yu(r));
    if (G.browser.IS_IE8) {
      e = Te.createElement("custom");
      for (var a in t.prototype)
        a !== "constructor" && (e[a] = t.prototype[a]);
    }
    return e.levels_ = [], e.selectedIndex_ = -1, Object.defineProperty(e, "selectedIndex", {
      get: function() {
        return e.selectedIndex_;
      }
    }), Object.defineProperty(e, "length", {
      get: function() {
        return e.levels_.length;
      }
    }), e || Yu(r);
  }
  var i = t.prototype;
  return i.addQualityLevel = function(e) {
    var a = this.getQualityLevelById(e.id);
    if (a)
      return a;
    var s = this.levels_.length;
    return a = new Kx(e), "" + s in this || Object.defineProperty(this, s, {
      get: function() {
        return this.levels_[s];
      }
    }), this.levels_.push(a), this.trigger({
      qualityLevel: a,
      type: "addqualitylevel"
    }), a;
  }, i.removeQualityLevel = function(e) {
    for (var a = null, s = 0, o = this.length; s < o; s++)
      if (this[s] === e) {
        a = this.levels_.splice(s, 1)[0], this.selectedIndex_ === s ? this.selectedIndex_ = -1 : this.selectedIndex_ > s && this.selectedIndex_--;
        break;
      }
    return a && this.trigger({
      qualityLevel: e,
      type: "removequalitylevel"
    }), a;
  }, i.getQualityLevelById = function(e) {
    for (var a = 0, s = this.length; a < s; a++) {
      var o = this[a];
      if (o.id === e)
        return o;
    }
    return null;
  }, i.dispose = function() {
    this.selectedIndex_ = -1, this.levels_.length = 0;
  }, t;
}(G.EventTarget);
Io.prototype.allowedEvents_ = {
  change: "change",
  addqualitylevel: "addqualitylevel",
  removequalitylevel: "removequalitylevel"
};
for (var Xx in Io.prototype.allowedEvents_)
  Io.prototype["on" + Xx] = null;
var Uv = "2.1.0", Qx = G.registerPlugin || G.plugin, Yx = function(t, i) {
  var r = t.qualityLevels, e = new Io(), a = function s() {
    e.dispose(), t.qualityLevels = r, t.off("dispose", s);
  };
  return t.on("dispose", a), t.qualityLevels = function() {
    return e;
  }, t.qualityLevels.VERSION = Uv, e;
}, qv = function(t) {
  return Yx(this, G.mergeOptions({}, t));
};
Qx("qualityLevels", qv);
qv.VERSION = Uv;
var Jx = "1.0.3", Zx = function(t) {
  var i = this, r = null, e = !1, a = !1, s = !1, o = !1, u = 0, l = !1, d = function() {
    r && clearTimeout(r), e = !1, a = !1, s = !1, o = !1, u = 0, l = !1;
  }, h = function() {
    s = !1, i.scrubbing() && !(t.bufferingConfig && t.bufferingConfig.includeScrub) && (e = !0, r = setTimeout(function() {
      e = !1;
    }, 200));
  }, f = function() {
    s === !1 && e === !1 && i.currentTime() > 0 && (s = new Date(), a = +i.currentTime().toFixed(0), l = +i.readyState());
  }, _ = function() {
    var y = +i.currentTime().toFixed(0);
    if (s && y !== a) {
      o = new Date();
      var T = (o - s) / 1e3;
      s = !1, a = !1, u++, i.trigger("tracking:buffered", {
        currentTime: +y,
        readyState: +l,
        secondsToLoad: +T.toFixed(3),
        bufferCount: +u
      });
    }
  };
  this.on("dispose", d), this.on("loadstart", d), this.on("ended", d), this.on("pause", h), this.on("waiting", f), this.on("timeupdate", _);
}, ew = function(t) {
  var i = this, r = 0, e = null, a = !1, s = function(l) {
    e && clearTimeout(e), r = 0, a = !1;
  }, o = function() {
    return typeof i.seeking == "function" && i.seeking() || typeof i.scrubbing == "function" && i.scrubbing();
  };
  i.on("dispose", s), i.on("loadstart", s), i.on("ended", s), i.on("pause", function() {
    o() || a || (e = setTimeout(function() {
      r++, i.trigger("tracking:pause", { pauseCount: r });
    }, 300));
  });
}, tw = function(t) {
  var i = this, r = !1, e = !1, a = !1, s = null, o = 0, u = 0, l = function(v) {
    r = !1, e = !1, a = !1, s = null, o = 0, u = 0;
  }, d = function() {
    return o++;
  }, h = function() {
    return u++;
  }, f = function() {
    if (s = +i.duration().toFixed(0), s > 0) {
      var v = (s / 4).toFixed(0);
      r = +v, e = +v * 2, a = +v * 3;
    }
  };
  i.on("dispose", l), i.on("loadstart", l), i.on("tracking:pause", d), i.on("tracking:seek", h), i.on("timeupdate", function() {
    s === null && f();
    var _ = +i.currentTime().toFixed(0), v = {
      seekCount: u,
      pauseCount: o,
      currentTime: _,
      duration: s
    };
    switch (_) {
      case r:
        r = !1, i.trigger("tracking:first-quarter", v);
        break;
      case e:
        e = !1, i.trigger("tracking:second-quarter", v);
        break;
      case a:
        a = !1, i.trigger("tracking:third-quarter", v);
        break;
    }
  }), i.on("ended", function() {
    var _ = {
      seekCount: u,
      pauseCount: o,
      currentTime: s,
      duration: s
    };
    i.trigger("tracking:fourth-quarter", _);
  }), i.on("durationchange", f);
}, iw = function(t) {
  if (!(typeof t > "u" || typeof t.performance != "function")) {
    var i = this, r = 0, e = 0, a = 0, s = 0, o = 0, u = 0, l = 0, d = [], h = function() {
      r = 0, e = 0, a = 0, s = 0, o = 0, u = 0, l = 0, d = [];
    }, f = function() {
      var y = {
        pauseCount: e,
        seekCount: r,
        bufferCount: a,
        totalDuration: s,
        watchedDuration: o,
        bufferDuration: u,
        initialLoadTime: l
      };
      t.performance.call(i, y);
    }, _ = function() {
      f(), h();
    };
    typeof window.addEventListener == "function" && (window.addEventListener("beforeunload", _), i.on("dispose", function() {
      window.removeEventListener("beforeunload", _);
    })), i.on("loadstart", function() {
      s > 0 && f(), h();
    }), i.on("ended", _), i.on("dispose", _), i.on("timeupdate", function() {
      var v = +i.currentTime().toFixed(0);
      d.indexOf(v) < 0 && d.push(v), o = d.length;
    }), i.on("loadeddata", function(v, y) {
      s = +i.duration().toFixed(0);
    }), i.on("tracking:seek", function(v, y) {
      r = y.seekCount;
    }), i.on("tracking:pause", function(v, y) {
      e = y.pauseCount;
    }), i.on("tracking:buffered", function(v, y) {
      a = y.bufferCount, u = +(u + y.secondsToLoad).toFixed(3);
    }), i.on("tracking:firstplay", function(v, y) {
      l = y.secondsToLoad;
    });
  }
}, rw = function(t) {
  var i = this, r = !1, e = 0, a = 0, s = 0, o = function() {
    r = !1, e = 0, a = 0, s = 0;
  }, u = function() {
    o(), e = new Date();
  }, l = function() {
    a = new Date(), s = (a - e) / 1e3;
  }, d = function() {
    r || (r = !0, i.trigger("tracking:firstplay", {
      secondsToLoad: +s.toFixed(3)
    }));
  };
  this.on("ended", o), this.on("dispose", o), this.on("loadstart", u), this.on("loadeddata", l), this.on("playing", d);
}, nw = function(t) {
  var i = this, r = 0, e = function() {
    r = 0;
  };
  i.on("dispose", e), i.on("loadstart", e), i.on("ended", e), i.on("seeking", function() {
    var a = +i.currentTime().toFixed(0);
    r++, i.trigger("tracking:seek", {
      seekCount: +r,
      seekTo: a
    });
  });
}, aw = G.registerPlugin || G.plugin, sw = G.getPlugin || G.plugin, Vv = function(t) {
  ew.apply(this, arguments), Zx.apply(this, arguments), tw.apply(this, arguments), rw.apply(this, arguments), nw.apply(this, arguments), iw.apply(this, arguments);
};
typeof sw("eventTracking") > "u" && aw("eventTracking", Vv);
Vv.VERSION = Jx;
var ow = { exports: {} };
const uw = /* @__PURE__ */ is($x);
/*!
 * videojs-mux
 * @version 4.8.1
 * @copyright 2022 Mux, Inc.
 */
(function(n, t) {
  (function() {
    (function(i, r) {
      n.exports = r(uw);
    })(this, function(i) {
      return function() {
        var r = { 48: function(o, u, l) {
          var d;
          d = typeof window < "u" ? window : l.g !== void 0 ? l.g : typeof self < "u" ? self : {}, o.exports = d;
        }, 961: function(o) {
          var u;
          u = function() {
            return function() {
              var l = { 80: function(f, _, v) {
                f.exports = v(728).default;
              }, 728: function(f, _, v) {
                v.d(_, { default: function() {
                  return Eu;
                } });
                var y = v(48), T = v.n(y), I = function() {
                  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(A) {
                    var E = 16 * Math.random() | 0;
                    return (A === "x" ? E : 3 & E | 8).toString(16);
                  });
                }, V = function() {
                  return ("000000" + (Math.random() * Math.pow(36, 6) << 0).toString(36)).slice(-6);
                }, $ = function(A) {
                  return A && A.nodeName !== void 0 ? (A.muxId || (A.muxId = A.id || V()), A.muxId) : A;
                }, k = function(A) {
                  var E;
                  A && A.nodeName !== void 0 ? A = $(E = A) : E = document.querySelector(A);
                  var w = E && E.nodeName ? E.nodeName.toLowerCase() : "";
                  return [E, A, w];
                }, P = v(640), L = v.n(P), O = L().methodFactory;
                L().methodFactory = function(A, E, w) {
                  var x = O(A, E, w);
                  return function() {
                    for (var R = ["[mux]"], J = 0; J < arguments.length; J++)
                      R.push(arguments[J]);
                    x.apply(void 0, R);
                  };
                }, L().setLevel(L().getLevel());
                var U = L();
                function ie() {
                  return (T().doNotTrack || T().navigator && T().navigator.doNotTrack) === "1";
                }
                var z = function() {
                  var A = T().performance, E = A && A.timing, w = A && A.timeOrigin || E && E.navigationStart;
                  return typeof w == "number" && typeof A.now == "function" ? w + A.now() : Date.now();
                }, le = v(678), se = v.n(le), me = function(A) {
                  return M(A)[0];
                }, M = function(A) {
                  if (typeof A != "string" || A === "")
                    return ["localhost"];
                  var E, w = (A.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/) || [])[4];
                  return w && (E = (w.match(/[^\.]+\.[^\.]+$/) || [])[0]), [w, E];
                }, ne = function() {
                  var A = T().performance;
                  return (A && A.timing) !== void 0;
                }, fe = function() {
                  var A = T().performance, E = A && A.timing;
                  return E && E.domContentLoadedEventEnd;
                }, pe = function() {
                  var A = T().performance, E = A && A.timing;
                  return E && E.navigationStart;
                };
                function H(A, E, w) {
                  w = w === void 0 ? 1 : w, A[E] = A[E] || 0, A[E] += w;
                }
                var Q = ["x-cdn", "content-type", "x-request-id"];
                function F(A) {
                  var E = {};
                  return (A = A || "").trim().split(/[\r\n]+/).forEach(function(w) {
                    if (w) {
                      var x = w.split(": "), R = x.shift();
                      R && (Q.indexOf(R.toLowerCase()) >= 0 || R.toLowerCase().indexOf("x-litix-") === 0) && (E[R] = x.join(": "));
                    }
                  }), E;
                }
                var W = function(A) {
                  var E = {};
                  for (var w in A) {
                    var x = A[w];
                    x["DATA-ID"].search("io.litix.data.") !== -1 && (E[x["DATA-ID"].replace("io.litix.data.", "")] = x.VALUE);
                  }
                  return E;
                }, X = function(A) {
                  if (!A)
                    return {};
                  var E = pe(), w = A.loading, x = w ? w.start : A.trequest, R = w ? w.first : A.tfirst, J = w ? w.end : A.tload;
                  return { bytesLoaded: A.total, requestStart: Math.round(E + x), responseStart: Math.round(E + R), responseEnd: Math.round(E + J) };
                }, Y = function(A) {
                  if (A && typeof A.getAllResponseHeaders == "function")
                    return F(A.getAllResponseHeaders());
                }, de = function(A, E) {
                  if (!A || typeof A.getRequests != "function")
                    return {};
                  var w = A.getRequests({ state: "executed" });
                  if (w.length === 0)
                    return {};
                  var x, R = w[w.length - 1], J = me(R.url), j = R.bytesLoaded, re = new Date(R.requestStartDate).getTime(), te = new Date(R.firstByteDate).getTime(), be = new Date(R.requestEndDate).getTime(), Ie = isNaN(R.duration) ? 0 : R.duration, $e = typeof E.getMetricsFor == "function" ? E.getMetricsFor(R.mediaType).HttpList : E.getDashMetrics().getHttpRequests(R.mediaType);
                  return $e.length > 0 && (x = F($e[$e.length - 1]._responseHeaders || "")), { requestStart: re, requestResponseStart: te, requestResponseEnd: be, requestBytesLoaded: j, requestResponseHeaders: x, requestMediaDuration: Ie, requestHostname: J };
                };
                function oe(A, E) {
                  for (var w = 0; w < E.length; w++) {
                    var x = E[w];
                    x.enumerable = x.enumerable || !1, x.configurable = !0, "value" in x && (x.writable = !0), Object.defineProperty(A, x.key, x);
                  }
                }
                var ae = 0, ue = function() {
                  function A() {
                    (function(x, R) {
                      if (!(x instanceof R))
                        throw new TypeError("Cannot call a class as a function");
                    })(this, A);
                  }
                  var E, w;
                  return E = A, w = [{ key: "on", value: function(x, R, J) {
                    return R._eventEmitterGuid = R._eventEmitterGuid || ++ae, this._listeners = this._listeners || {}, this._listeners[x] = this._listeners[x] || [], J && (R = R.bind(J)), this._listeners[x].push(R), R;
                  } }, { key: "off", value: function(x, R) {
                    var J = this._listeners && this._listeners[x];
                    J && J.forEach(function(j, re) {
                      j._eventEmitterGuid === R._eventEmitterGuid && J.splice(re, 1);
                    });
                  } }, { key: "one", value: function(x, R, J) {
                    var j = this;
                    R._eventEmitterGuid = R._eventEmitterGuid || ++ae;
                    var re = function te() {
                      j.off(x, te), R.apply(J || this, arguments);
                    };
                    re._eventEmitterGuid = R._eventEmitterGuid, this.on(x, re);
                  } }, { key: "emit", value: function(x, R) {
                    var J = this;
                    if (this._listeners) {
                      R = R || {};
                      var j = this._listeners["before*"] || [], re = this._listeners[x] || [], te = this._listeners["after" + x] || [], be = function(Ie, $e) {
                        (Ie = Ie.slice()).forEach(function(Me) {
                          Me.call(J, { type: x }, $e);
                        });
                      };
                      be(j, R), be(re, R), be(te, R);
                    }
                  } }], w && oe(E.prototype, w), Object.defineProperty(E, "prototype", { writable: !1 }), A;
                }(), ge = ue;
                function ee(A, E) {
                  for (var w = 0; w < E.length; w++) {
                    var x = E[w];
                    x.enumerable = x.enumerable || !1, x.configurable = !0, "value" in x && (x.writable = !0), Object.defineProperty(A, x.key, x);
                  }
                }
                var _e = function() {
                  function A(x) {
                    var R = this;
                    (function(J, j) {
                      if (!(J instanceof j))
                        throw new TypeError("Cannot call a class as a function");
                    })(this, A), this.pm = x, this._playbackHeartbeatInterval = null, this._playheadShouldBeProgressing = !1, x.on("playing", function() {
                      R._playheadShouldBeProgressing = !0;
                    }), x.on("play", this._startPlaybackHeartbeatInterval.bind(this)), x.on("playing", this._startPlaybackHeartbeatInterval.bind(this)), x.on("adbreakstart", this._startPlaybackHeartbeatInterval.bind(this)), x.on("adplay", this._startPlaybackHeartbeatInterval.bind(this)), x.on("adplaying", this._startPlaybackHeartbeatInterval.bind(this)), x.on("seeking", this._startPlaybackHeartbeatInterval.bind(this)), x.on("devicewake", this._startPlaybackHeartbeatInterval.bind(this)), x.on("viewstart", this._startPlaybackHeartbeatInterval.bind(this)), x.on("rebufferstart", this._startPlaybackHeartbeatInterval.bind(this)), x.on("pause", this._stopPlaybackHeartbeatInterval.bind(this)), x.on("ended", this._stopPlaybackHeartbeatInterval.bind(this)), x.on("viewend", this._stopPlaybackHeartbeatInterval.bind(this)), x.on("error", this._stopPlaybackHeartbeatInterval.bind(this)), x.on("aderror", this._stopPlaybackHeartbeatInterval.bind(this)), x.on("adpause", this._stopPlaybackHeartbeatInterval.bind(this)), x.on("adended", this._stopPlaybackHeartbeatInterval.bind(this)), x.on("adbreakend", this._stopPlaybackHeartbeatInterval.bind(this)), x.on("seeked", function() {
                      x.data.player_is_paused ? R._stopPlaybackHeartbeatInterval() : R._startPlaybackHeartbeatInterval();
                    }), x.on("timeupdate", function() {
                      R._playbackHeartbeatInterval !== null && x.emit("playbackheartbeat");
                    }), x.on("devicesleep", function(J, j) {
                      R._playbackHeartbeatInterval !== null && (T().clearInterval(R._playbackHeartbeatInterval), x.emit("playbackheartbeatend", { viewer_time: j.viewer_time }), R._playbackHeartbeatInterval = null);
                    });
                  }
                  var E, w;
                  return E = A, (w = [{ key: "_startPlaybackHeartbeatInterval", value: function() {
                    var x = this;
                    this._playbackHeartbeatInterval === null && (this.pm.emit("playbackheartbeat"), this._playbackHeartbeatInterval = T().setInterval(function() {
                      x.pm.emit("playbackheartbeat");
                    }, this.pm.playbackHeartbeatTime));
                  } }, { key: "_stopPlaybackHeartbeatInterval", value: function() {
                    this._playheadShouldBeProgressing = !1, this._playbackHeartbeatInterval !== null && (T().clearInterval(this._playbackHeartbeatInterval), this.pm.emit("playbackheartbeatend"), this._playbackHeartbeatInterval = null);
                  } }]) && ee(E.prototype, w), Object.defineProperty(E, "prototype", { writable: !1 }), A;
                }();
                function xe(A, E) {
                  for (var w = 0; w < E.length; w++) {
                    var x = E[w];
                    x.enumerable = x.enumerable || !1, x.configurable = !0, "value" in x && (x.writable = !0), Object.defineProperty(A, x.key, x);
                  }
                }
                var Le = function(A, E, w) {
                  return E && xe(A.prototype, E), w && xe(A, w), Object.defineProperty(A, "prototype", { writable: !1 }), A;
                }(function A(E) {
                  var w = this;
                  (function(x, R) {
                    if (!(x instanceof R))
                      throw new TypeError("Cannot call a class as a function");
                  })(this, A), E.on("viewinit", function() {
                    w.viewErrored = !1;
                  }), E.on("error", function() {
                    try {
                      var x = E.errorTranslator({ player_error_code: E.data.player_error_code, player_error_message: E.data.player_error_message });
                      x ? (E.data.player_error_code = x.player_error_code, E.data.player_error_message = x.player_error_message, w.viewErrored = !0) : (delete E.data.player_error_code, delete E.data.player_error_message);
                    } catch (R) {
                      E.mux.log.warn("Exception in error translator callback.", R), w.viewErrored = !0;
                    }
                  });
                });
                function je(A, E) {
                  for (var w = 0; w < E.length; w++) {
                    var x = E[w];
                    x.enumerable = x.enumerable || !1, x.configurable = !0, "value" in x && (x.writable = !0), Object.defineProperty(A, x.key, x);
                  }
                }
                var Xe = function() {
                  function A(x) {
                    (function(R, J) {
                      if (!(R instanceof J))
                        throw new TypeError("Cannot call a class as a function");
                    })(this, A), this.pm = x, this._watchTimeTrackerLastCheckedTime = null, x.on("playbackheartbeat", this._updateWatchTime.bind(this)), x.on("playbackheartbeatend", this._clearWatchTimeState.bind(this));
                  }
                  var E, w;
                  return E = A, (w = [{ key: "_updateWatchTime", value: function(x, R) {
                    var J = R.viewer_time;
                    this._watchTimeTrackerLastCheckedTime === null && (this._watchTimeTrackerLastCheckedTime = J), H(this.pm.data, "view_watch_time", J - this._watchTimeTrackerLastCheckedTime), this._watchTimeTrackerLastCheckedTime = J;
                  } }, { key: "_clearWatchTimeState", value: function(x, R) {
                    this._updateWatchTime(x, R), this._watchTimeTrackerLastCheckedTime = null;
                  } }]) && je(E.prototype, w), Object.defineProperty(E, "prototype", { writable: !1 }), A;
                }();
                function Je(A, E) {
                  for (var w = 0; w < E.length; w++) {
                    var x = E[w];
                    x.enumerable = x.enumerable || !1, x.configurable = !0, "value" in x && (x.writable = !0), Object.defineProperty(A, x.key, x);
                  }
                }
                var mt = function() {
                  function A(x) {
                    (function(R, J) {
                      if (!(R instanceof J))
                        throw new TypeError("Cannot call a class as a function");
                    })(this, A), this.pm = x, this._playbackTimeTrackerLastPlayheadPosition = -1, x.on("playbackheartbeat", this._updatePlaybackTime.bind(this)), x.on("playbackheartbeatend", this._clearPlaybackTimeState.bind(this)), x.on("seeking", this._clearPlaybackTimeState.bind(this));
                  }
                  var E, w;
                  return E = A, (w = [{ key: "_updatePlaybackTime", value: function() {
                    var x = this.pm.data.player_playhead_time;
                    if (this._playbackTimeTrackerLastPlayheadPosition >= 0 && x > this._playbackTimeTrackerLastPlayheadPosition) {
                      var R = x - this._playbackTimeTrackerLastPlayheadPosition;
                      R <= 1e3 && H(this.pm.data, "view_content_playback_time", R);
                    }
                    this._playbackTimeTrackerLastPlayheadPosition = x;
                  } }, { key: "_clearPlaybackTimeState", value: function() {
                    this._updatePlaybackTime(), this._playbackTimeTrackerLastPlayheadPosition = -1;
                  } }]) && Je(E.prototype, w), Object.defineProperty(E, "prototype", { writable: !1 }), A;
                }();
                function dt(A, E) {
                  for (var w = 0; w < E.length; w++) {
                    var x = E[w];
                    x.enumerable = x.enumerable || !1, x.configurable = !0, "value" in x && (x.writable = !0), Object.defineProperty(A, x.key, x);
                  }
                }
                var gt = function() {
                  function A(x) {
                    (function(J, j) {
                      if (!(J instanceof j))
                        throw new TypeError("Cannot call a class as a function");
                    })(this, A), this.pm = x;
                    var R = this._updatePlayheadTime.bind(this);
                    x.on("playbackheartbeat", R), x.on("playbackheartbeatend", R), x.on("timeupdate", R), x.on("destroy", function() {
                      x.off("timeupdate", R);
                    });
                  }
                  var E, w;
                  return E = A, (w = [{ key: "_updateMaxPlayheadPosition", value: function() {
                    this.pm.data.view_max_playhead_position = this.pm.data.view_max_playhead_position === void 0 ? this.pm.data.player_playhead_time : Math.max(this.pm.data.view_max_playhead_position, this.pm.data.player_playhead_time);
                  } }, { key: "_updatePlayheadTime", value: function(x, R) {
                    var J = this, j = function() {
                      J.pm.currentFragmentPDT && J.pm.currentFragmentStart && (J.pm.data.player_program_time = J.pm.currentFragmentPDT + J.pm.data.player_playhead_time - J.pm.currentFragmentStart);
                    };
                    if (R && R.player_playhead_time)
                      this.pm.data.player_playhead_time = R.player_playhead_time, j(), this._updateMaxPlayheadPosition();
                    else if (this.pm.getPlayheadTime) {
                      var re = this.pm.getPlayheadTime();
                      re !== void 0 && (this.pm.data.player_playhead_time = re, j(), this._updateMaxPlayheadPosition());
                    }
                  } }]) && dt(E.prototype, w), Object.defineProperty(E, "prototype", { writable: !1 }), A;
                }();
                function ke(A, E) {
                  for (var w = 0; w < E.length; w++) {
                    var x = E[w];
                    x.enumerable = x.enumerable || !1, x.configurable = !0, "value" in x && (x.writable = !0), Object.defineProperty(A, x.key, x);
                  }
                }
                var ot = function(A, E, w) {
                  return E && ke(A.prototype, E), w && ke(A, w), Object.defineProperty(A, "prototype", { writable: !1 }), A;
                }(function A(E) {
                  if (function(R, J) {
                    if (!(R instanceof J))
                      throw new TypeError("Cannot call a class as a function");
                  }(this, A), !E.disableRebufferTracking) {
                    var w, x = function() {
                      if (w) {
                        var R = E.data.viewer_time - w;
                        H(E.data, "view_rebuffer_duration", R), w = E.data.viewer_time;
                      }
                      E.data.view_watch_time >= 0 && E.data.view_rebuffer_count > 0 && (E.data.view_rebuffer_frequency = E.data.view_rebuffer_count / E.data.view_watch_time, E.data.view_rebuffer_percentage = E.data.view_rebuffer_duration / E.data.view_watch_time);
                    };
                    E.on("playbackheartbeat", function() {
                      return x();
                    }), E.on("rebufferstart", function() {
                      w || (H(E.data, "view_rebuffer_count", 1), w = E.data.viewer_time, E.one("rebufferend", function() {
                        x(), w = void 0;
                      }));
                    });
                  }
                });
                function at(A, E) {
                  for (var w = 0; w < E.length; w++) {
                    var x = E[w];
                    x.enumerable = x.enumerable || !1, x.configurable = !0, "value" in x && (x.writable = !0), Object.defineProperty(A, x.key, x);
                  }
                }
                var Ne = function() {
                  function A(x) {
                    var R = this;
                    (function(J, j) {
                      if (!(J instanceof j))
                        throw new TypeError("Cannot call a class as a function");
                    })(this, A), this.pm = x, x.disableRebufferTracking || x.disablePlayheadRebufferTracking || (this._lastCheckedTime = null, this._lastPlayheadTime = null, this._lastPlayheadTimeUpdatedTime = null, x.on("playbackheartbeat", this._checkIfRebuffering.bind(this)), x.on("playbackheartbeatend", this._cleanupRebufferTracker.bind(this)), x.on("seeking", function() {
                      R._cleanupRebufferTracker(null, { viewer_time: z() });
                    }));
                  }
                  var E, w;
                  return E = A, w = [{ key: "_checkIfRebuffering", value: function(x, R) {
                    if (this.pm.seekingTracker.isSeeking || this.pm.adTracker.isAdBreak || !this.pm.playbackHeartbeat._playheadShouldBeProgressing)
                      this._cleanupRebufferTracker(x, R);
                    else if (this._lastCheckedTime !== null)
                      if (this._lastPlayheadTime === this.pm.data.player_playhead_time) {
                        var J = R.viewer_time - this._lastPlayheadTimeUpdatedTime;
                        typeof this.pm.sustainedRebufferThreshold == "number" && J >= this.pm.sustainedRebufferThreshold && (this._rebuffering || (this._rebuffering = !0, this.pm.emit("rebufferstart", { viewer_time: this._lastPlayheadTimeUpdatedTime }))), this._lastCheckedTime = R.viewer_time;
                      } else
                        this._cleanupRebufferTracker(x, R, !0);
                    else
                      this._prepareRebufferTrackerState(R.viewer_time);
                  } }, { key: "_clearRebufferTrackerState", value: function() {
                    this._lastCheckedTime = null, this._lastPlayheadTime = null, this._lastPlayheadTimeUpdatedTime = null;
                  } }, { key: "_prepareRebufferTrackerState", value: function(x) {
                    this._lastCheckedTime = x, this._lastPlayheadTime = this.pm.data.player_playhead_time, this._lastPlayheadTimeUpdatedTime = x;
                  } }, { key: "_cleanupRebufferTracker", value: function(x, R) {
                    var J = arguments.length > 2 && arguments[2] !== void 0 && arguments[2];
                    if (this._rebuffering)
                      this._rebuffering = !1, this.pm.emit("rebufferend", { viewer_time: R.viewer_time });
                    else {
                      if (this._lastCheckedTime === null)
                        return;
                      var j = this.pm.data.player_playhead_time - this._lastPlayheadTime, re = R.viewer_time - this._lastPlayheadTimeUpdatedTime;
                      typeof this.pm.minimumRebufferDuration == "number" && j > 0 && re - j > this.pm.minimumRebufferDuration && (this.pm.emit("rebufferstart", { viewer_time: this._lastPlayheadTimeUpdatedTime }), this.pm.emit("rebufferend", { viewer_time: this._lastPlayheadTimeUpdatedTime + re - j }));
                    }
                    J ? this._prepareRebufferTrackerState(R.viewer_time) : this._clearRebufferTrackerState();
                  } }], w && at(E.prototype, w), Object.defineProperty(E, "prototype", { writable: !1 }), A;
                }(), Qe = Ne;
                function Be(A, E) {
                  for (var w = 0; w < E.length; w++) {
                    var x = E[w];
                    x.enumerable = x.enumerable || !1, x.configurable = !0, "value" in x && (x.writable = !0), Object.defineProperty(A, x.key, x);
                  }
                }
                var ft = function() {
                  function A(x) {
                    var R = this;
                    (function(J, j) {
                      if (!(J instanceof j))
                        throw new TypeError("Cannot call a class as a function");
                    })(this, A), this.pm = x, x.on("viewinit", function() {
                      var J = x.data, j = J.view_id;
                      if (!J.view_program_changed) {
                        var re = function(te, be) {
                          var Ie = be.viewer_time;
                          te.type === "playing" && x.data.view_time_to_first_frame === void 0 ? R.calculateTimeToFirstFrame(Ie || z(), j) : te.type !== "adplaying" || x.data.view_time_to_first_frame !== void 0 && !R._inPrerollPosition() || R.calculateTimeToFirstFrame(Ie || z(), j);
                        };
                        x.one("playing", re), x.one("adplaying", re), x.one("viewend", function() {
                          x.off("playing", re), x.off("adplaying", re);
                        });
                      }
                    });
                  }
                  var E, w;
                  return E = A, (w = [{ key: "_inPrerollPosition", value: function() {
                    return this.pm.data.view_content_playback_time === void 0 || this.pm.data.view_content_playback_time <= 1e3;
                  } }, { key: "calculateTimeToFirstFrame", value: function(x, R) {
                    R === this.pm.data.view_id && (this.pm.watchTimeTracker._updateWatchTime(null, { viewer_time: x }), this.pm.data.view_time_to_first_frame = this.pm.data.view_watch_time, (this.pm.data.player_autoplay_on || this.pm.data.video_is_autoplay) && this.NAVIGATION_START && (this.pm.data.view_aggregate_startup_time = this.pm.data.view_start + this.pm.data.view_watch_time - this.NAVIGATION_START));
                  } }]) && Be(E.prototype, w), Object.defineProperty(E, "prototype", { writable: !1 }), A;
                }();
                function Ue(A, E) {
                  for (var w = 0; w < E.length; w++) {
                    var x = E[w];
                    x.enumerable = x.enumerable || !1, x.configurable = !0, "value" in x && (x.writable = !0), Object.defineProperty(A, x.key, x);
                  }
                }
                var zi = function(A, E, w) {
                  return E && Ue(A.prototype, E), w && Ue(A, w), Object.defineProperty(A, "prototype", { writable: !1 }), A;
                }(function A(E) {
                  var w = this;
                  (function(x, R) {
                    if (!(x instanceof R))
                      throw new TypeError("Cannot call a class as a function");
                  })(this, A), E.on("viewinit", function() {
                    w._lastPlayheadPosition = -1;
                  }), ["pause", "rebufferstart", "seeking", "error", "adbreakstart", "hb"].forEach(function(x) {
                    E.on(x, function() {
                      if (w._lastPlayheadPosition >= 0 && E.data.player_playhead_time >= 0 && w._lastPlayerWidth >= 0 && w._lastSourceWidth > 0 && w._lastPlayerHeight >= 0 && w._lastSourceHeight > 0) {
                        var R = E.data.player_playhead_time - w._lastPlayheadPosition;
                        if (R < 0)
                          return void (w._lastPlayheadPosition = -1);
                        var J = Math.min(w._lastPlayerWidth / w._lastSourceWidth, w._lastPlayerHeight / w._lastSourceHeight), j = Math.max(0, J - 1), re = Math.max(0, 1 - J);
                        E.data.view_max_upscale_percentage = Math.max(E.data.view_max_upscale_percentage || 0, j), E.data.view_max_downscale_percentage = Math.max(E.data.view_max_downscale_percentage || 0, re), H(E.data, "view_total_content_playback_time", R), H(E.data, "view_total_upscaling", j * R), H(E.data, "view_total_downscaling", re * R);
                      }
                      w._lastPlayheadPosition = -1;
                    });
                  }), ["playing", "hb"].forEach(function(x) {
                    E.on(x, function() {
                      w._lastPlayheadPosition = E.data.player_playhead_time, w._lastPlayerWidth = E.data.player_width, w._lastPlayerHeight = E.data.player_height, w._lastSourceWidth = E.data.video_source_width, w._lastSourceHeight = E.data.video_source_height;
                    });
                  });
                });
                function ut(A, E) {
                  for (var w = 0; w < E.length; w++) {
                    var x = E[w];
                    x.enumerable = x.enumerable || !1, x.configurable = !0, "value" in x && (x.writable = !0), Object.defineProperty(A, x.key, x);
                  }
                }
                var Ki = function(A, E, w) {
                  return E && ut(A.prototype, E), w && ut(A, w), Object.defineProperty(A, "prototype", { writable: !1 }), A;
                }(function A(E) {
                  var w = this;
                  (function(x, R) {
                    if (!(x instanceof R))
                      throw new TypeError("Cannot call a class as a function");
                  })(this, A), this.isSeeking = !1, E.on("seeking", function(x, R) {
                    se()(E.data, R), w._lastSeekingTime = z(), w.isSeeking === !1 && (w.isSeeking = !0, E.send("seeking"));
                  }), E.on("seeked", function() {
                    w.isSeeking = !1;
                    var x = w._lastSeekingTime || z(), R = z() - x;
                    H(E.data, "view_seek_count", 1), H(E.data, "view_seek_duration", R);
                    var J = E.data.view_max_seek_time || 0;
                    E.data.view_max_seek_time = Math.max(J, R);
                  }), E.on("viewend", function() {
                    w.isSeeking = !1;
                  });
                });
                function Jt(A, E) {
                  return function(w) {
                    if (Array.isArray(w))
                      return w;
                  }(A) || function(w, x) {
                    var R = w == null ? null : typeof Symbol < "u" && w[Symbol.iterator] || w["@@iterator"];
                    if (R != null) {
                      var J, j, re = [], te = !0, be = !1;
                      try {
                        for (R = R.call(w); !(te = (J = R.next()).done) && (re.push(J.value), !x || re.length !== x); te = !0)
                          ;
                      } catch (Ie) {
                        be = !0, j = Ie;
                      } finally {
                        try {
                          te || R.return == null || R.return();
                        } finally {
                          if (be)
                            throw j;
                        }
                      }
                      return re;
                    }
                  }(A, E) || function(w, x) {
                    if (w) {
                      if (typeof w == "string")
                        return et(w, x);
                      var R = Object.prototype.toString.call(w).slice(8, -1);
                      return R === "Object" && w.constructor && (R = w.constructor.name), R === "Map" || R === "Set" ? Array.from(w) : R === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R) ? et(w, x) : void 0;
                    }
                  }(A, E) || function() {
                    throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
                  }();
                }
                function et(A, E) {
                  (E == null || E > A.length) && (E = A.length);
                  for (var w = 0, x = new Array(E); w < E; w++)
                    x[w] = A[w];
                  return x;
                }
                function cn(A, E) {
                  for (var w = 0; w < E.length; w++) {
                    var x = E[w];
                    x.enumerable = x.enumerable || !1, x.configurable = !0, "value" in x && (x.writable = !0), Object.defineProperty(A, x.key, x);
                  }
                }
                var ys = function(A, E) {
                  A.push(E), A.sort(function(w, x) {
                    return w.viewer_time - x.viewer_time;
                  });
                }, du = ["adbreakstart", "adrequest", "adresponse", "adplay", "adplaying", "adpause", "adended", "adbreakend", "aderror"], cu = function() {
                  function A(x) {
                    var R = this;
                    (function(j, re) {
                      if (!(j instanceof re))
                        throw new TypeError("Cannot call a class as a function");
                    })(this, A), this.pm = x, x.on("viewinit", function() {
                      R.isAdBreak = !1, R._currentAdRequestNumber = 0, R._currentAdResponseNumber = 0, R._adRequests = [], R._adResponses = [], R._adHasPlayed = !1, R._wouldBeNewAdPlay = !0, R._prerollPlayTime = void 0;
                    }), du.forEach(function(j) {
                      return x.on(j, R._updateAdData.bind(R));
                    });
                    var J = function() {
                      R.isAdBreak = !1;
                    };
                    x.on("adbreakstart", function() {
                      R.isAdBreak = !0;
                    }), x.on("play", J), x.on("playing", J), x.on("viewend", J), x.on("adrequest", function(j, re) {
                      re = se()({ ad_request_id: "generatedAdRequestId" + R._currentAdRequestNumber++ }, re), ys(R._adRequests, re), H(x.data, "view_ad_request_count"), R.inPrerollPosition() && (x.data.view_preroll_requested = !0, R._adHasPlayed || H(x.data, "view_preroll_request_count"));
                    }), x.on("adresponse", function(j, re) {
                      re = se()({ ad_request_id: "generatedAdRequestId" + R._currentAdResponseNumber++ }, re), ys(R._adResponses, re);
                      var te = R.findAdRequest(re.ad_request_id);
                      te && H(x.data, "view_ad_request_time", Math.max(0, re.viewer_time - te.viewer_time));
                    }), x.on("adplay", function(j, re) {
                      R._adHasPlayed = !0, R._wouldBeNewAdPlay && (R._wouldBeNewAdPlay = !1, H(x.data, "view_ad_played_count")), R.inPrerollPosition() && !x.data.view_preroll_played && (x.data.view_preroll_played = !0, R._adRequests.length > 0 && (x.data.view_preroll_request_time = Math.max(0, re.viewer_time - R._adRequests[0].viewer_time)), x.data.view_start && (x.data.view_startup_preroll_request_time = Math.max(0, re.viewer_time - x.data.view_start)), R._prerollPlayTime = re.viewer_time);
                    }), x.on("adplaying", function(j, re) {
                      R.inPrerollPosition() && x.data.view_preroll_load_time === void 0 && R._prerollPlayTime !== void 0 && (x.data.view_preroll_load_time = re.viewer_time - R._prerollPlayTime, x.data.view_startup_preroll_load_time = re.viewer_time - R._prerollPlayTime);
                    }), x.on("adended", function() {
                      R._wouldBeNewAdPlay = !0;
                    }), x.on("aderror", function() {
                      R._wouldBeNewAdPlay = !0;
                    });
                  }
                  var E, w;
                  return E = A, (w = [{ key: "inPrerollPosition", value: function() {
                    return this.pm.data.view_content_playback_time === void 0 || this.pm.data.view_content_playback_time <= 1e3;
                  } }, { key: "findAdRequest", value: function(x) {
                    for (var R = 0; R < this._adRequests.length; R++)
                      if (this._adRequests[R].ad_request_id === x)
                        return this._adRequests[R];
                  } }, { key: "_updateAdData", value: function(x, R) {
                    if (this.inPrerollPosition()) {
                      if (!this.pm.data.view_preroll_ad_tag_hostname && R.ad_tag_url) {
                        var J = Jt(M(R.ad_tag_url), 2), j = J[0], re = J[1];
                        this.pm.data.view_preroll_ad_tag_domain = re, this.pm.data.view_preroll_ad_tag_hostname = j;
                      }
                      if (!this.pm.data.view_preroll_ad_asset_hostname && R.ad_asset_url) {
                        var te = Jt(M(R.ad_asset_url), 2), be = te[0], Ie = te[1];
                        this.pm.data.view_preroll_ad_asset_domain = Ie, this.pm.data.view_preroll_ad_asset_hostname = be;
                      }
                    }
                  } }]) && cn(E.prototype, w), Object.defineProperty(E, "prototype", { writable: !1 }), A;
                }();
                function Ts(A, E) {
                  for (var w = 0; w < E.length; w++) {
                    var x = E[w];
                    x.enumerable = x.enumerable || !1, x.configurable = !0, "value" in x && (x.writable = !0), Object.defineProperty(A, x.key, x);
                  }
                }
                var fn = function(A, E, w) {
                  return E && Ts(A.prototype, E), w && Ts(A, w), Object.defineProperty(A, "prototype", { writable: !1 }), A;
                }(function A(E) {
                  var w, x;
                  (function(re, te) {
                    if (!(re instanceof te))
                      throw new TypeError("Cannot call a class as a function");
                  })(this, A);
                  var R = function() {
                    E.disableRebufferTracking || w && (H(E.data, "view_waiting_rebuffer_duration", z() - w), w = !1, T().clearInterval(x));
                  }, J = !1, j = function() {
                    J = !1, R();
                  };
                  E.on("waiting", function() {
                    J && (E.disableRebufferTracking || (H(E.data, "view_waiting_rebuffer_count", 1), w = z(), x = T().setInterval(function() {
                      if (w) {
                        var re = z();
                        H(E.data, "view_waiting_rebuffer_duration", re - w), w = re;
                      }
                    }, 250)));
                  }), E.on("playing", function() {
                    R(), J = !0;
                  }), E.on("pause", j), E.on("seeking", j);
                });
                function bs(A, E) {
                  for (var w = 0; w < E.length; w++) {
                    var x = E[w];
                    x.enumerable = x.enumerable || !1, x.configurable = !0, "value" in x && (x.writable = !0), Object.defineProperty(A, x.key, x);
                  }
                }
                var fu = function(A, E, w) {
                  return E && bs(A.prototype, E), w && bs(A, w), Object.defineProperty(A, "prototype", { writable: !1 }), A;
                }(function A(E) {
                  var w = this;
                  (function(J, j) {
                    if (!(J instanceof j))
                      throw new TypeError("Cannot call a class as a function");
                  })(this, A);
                  var x = function() {
                    w.lastWallClockTime = z(), E.on("before*", R);
                  }, R = function(J) {
                    var j = z(), re = w.lastWallClockTime;
                    w.lastWallClockTime = j, j - re > 3e4 && (E.emit("devicesleep", { viewer_time: re }), se()(E.data, { viewer_time: re }), E.send("devicesleep"), E.emit("devicewake", { viewer_time: j }), se()(E.data, { viewer_time: j }), E.send("devicewake"));
                  };
                  E.one("playbackheartbeat", x), E.on("playbackheartbeatend", function() {
                    E.off("before*", R), E.one("playbackheartbeat", x);
                  });
                }), Ss = v(375), hu = v(655), mi = v.n(hu), fa = "muxData", Es = function() {
                  var A;
                  try {
                    A = Ss.parse(mi().get(fa) || "");
                  } catch {
                    A = {};
                  }
                  return A;
                }, xs = function(A) {
                  try {
                    mi().set(fa, Ss.stringify(A), { expires: 7300 });
                  } catch {
                  }
                }, pu = function() {
                  var A = Es();
                  return A.mux_viewer_id = A.mux_viewer_id || I(), A.msn = A.msn || Math.random(), xs(A), { mux_viewer_id: A.mux_viewer_id, mux_sample_number: A.msn };
                };
                function mu(A, E) {
                  var w = E.beaconCollectionDomain, x = E.beaconDomain;
                  if (w)
                    return "https://" + w;
                  var R = x || "litix.io";
                  return (A = A || "inferred").match(/^[a-z0-9]+$/) ? "https://" + A + "." + R : "https://img.litix.io/a.gif";
                }
                var ws = function() {
                  var A;
                  switch (kr()) {
                    case "cellular":
                      A = "cellular";
                      break;
                    case "ethernet":
                      A = "wired";
                      break;
                    case "wifi":
                      A = "wifi";
                      break;
                    case void 0:
                      break;
                    default:
                      A = "other";
                  }
                  return A;
                }, kr = function() {
                  var A = T().navigator, E = A && (A.connection || A.mozConnection || A.webkitConnection);
                  return E && E.type;
                };
                ws.getConnectionFromAPI = kr;
                var ri = ws, gu = Ur({ a: "env", b: "beacon", c: "custom", d: "ad", e: "event", f: "experiment", i: "internal", m: "mux", n: "response", p: "player", q: "request", r: "retry", s: "session", t: "timestamp", u: "viewer", v: "video", w: "page", x: "view", y: "sub" }), As = Ur({ ad: "ad", ag: "aggregate", ap: "api", al: "application", ar: "architecture", as: "asset", au: "autoplay", av: "average", bi: "bitrate", br: "break", bw: "browser", by: "bytes", ca: "cached", cb: "cancel", cd: "code", cg: "category", ch: "changed", cn: "config", co: "count", ce: "counter", cp: "complete", cr: "creative", ct: "content", cu: "current", cx: "connection", dg: "downscaling", dm: "domain", dn: "cdn", do: "downscale", du: "duration", dv: "device", ec: "encoding", ed: "edge", en: "end", eg: "engine", em: "embed", er: "error", es: "errorcode", et: "errortext", ee: "event", ev: "events", ex: "expires", ep: "experiments", fi: "first", fm: "family", ft: "format", fq: "frequency", fr: "frame", fs: "fullscreen", hb: "holdback", he: "headers", ho: "host", hn: "hostname", ht: "height", id: "id", ii: "init", in: "instance", ip: "ip", is: "is", ke: "key", la: "language", lb: "labeled", le: "level", li: "live", ld: "loaded", lo: "load", ls: "lists", lt: "latency", ma: "max", md: "media", me: "message", mf: "manifest", mi: "mime", ml: "midroll", mm: "min", mn: "manufacturer", mo: "model", mx: "mux", ne: "newest", nm: "name", no: "number", on: "on", os: "os", pa: "paused", pb: "playback", pd: "producer", pe: "percentage", pf: "played", pg: "program", ph: "playhead", pi: "plugin", pl: "preroll", pn: "playing", po: "poster", pr: "preload", ps: "position", pt: "part", py: "property", ra: "rate", rd: "requested", re: "rebuffer", rf: "rendition", rm: "remote", ro: "ratio", rp: "response", rq: "request", rs: "requests", sa: "sample", se: "session", sk: "seek", sm: "stream", so: "source", sq: "sequence", sr: "series", st: "start", su: "startup", sv: "server", sw: "software", ta: "tag", tc: "tech", te: "text", tg: "target", th: "throughput", ti: "time", tl: "total", to: "to", tt: "title", ty: "type", ug: "upscaling", up: "upscale", ur: "url", us: "user", va: "variant", vd: "viewed", vi: "video", ve: "version", vw: "view", vr: "viewer", wd: "width", wa: "watch", wt: "waiting" });
                function Ur(A) {
                  var E = {};
                  for (var w in A)
                    A.hasOwnProperty(w) && (E[A[w]] = w);
                  return E;
                }
                function xi(A) {
                  var E = {}, w = {};
                  return Object.keys(A).forEach(function(x) {
                    var R = !1;
                    if (A.hasOwnProperty(x) && A[x] !== void 0) {
                      var J = x.split("_"), j = J[0], re = gu[j];
                      re || (U.info("Data key word `" + J[0] + "` not expected in " + x), re = j + "_"), J.splice(1).forEach(function(te) {
                        te === "url" && (R = !0), As[te] ? re += As[te] : Number(te) && Math.floor(Number(te)) === Number(te) ? re += te : (U.info("Data key word `" + te + "` not expected in " + x), re += "_" + te + "_");
                      }), R ? w[re] = A[x] : E[re] = A[x];
                    }
                  }), se()(E, w);
                }
                var hn = { maxBeaconSize: 300, maxQueueLength: 3600, baseTimeBetweenBeacons: 1e4, maxPayloadKBSize: 500 }, vt = ["hb", "requestcompleted", "requestfailed", "requestcanceled"], Ni = function(A, E) {
                  this._beaconUrl = A || "https://img.litix.io", this._eventQueue = [], this._postInFlight = !1, this._failureCount = 0, this._sendTimeout = !1, this._options = se()({}, hn, E);
                };
                Ni.prototype.queueEvent = function(A, E) {
                  var w = se()({}, E);
                  return (this._eventQueue.length <= this._options.maxQueueLength || A === "eventrateexceeded") && (this._eventQueue.push(w), this._sendTimeout || this._startBeaconSending(), this._eventQueue.length <= this._options.maxQueueLength);
                }, Ni.prototype.flushEvents = function() {
                  this._eventQueue.length && this._sendBeaconQueue(), this._startBeaconSending();
                }, Ni.prototype.destroy = function() {
                  var A = arguments.length > 0 && arguments[0] !== void 0 && arguments[0];
                  this.destroyed = !0, A ? this._clearBeaconQueue() : this.flushEvents(), T().clearTimeout(this._sendTimeout);
                }, Ni.prototype._clearBeaconQueue = function() {
                  var A = this._eventQueue.length > this._options.maxBeaconSize ? this._eventQueue.length - this._options.maxBeaconSize : 0, E = this._eventQueue.slice(A);
                  A > 0 && se()(E[E.length - 1], xi({ mux_view_message: "event queue truncated" }));
                  var w = this._createPayload(E);
                  qr(this._beaconUrl, w, !0, function() {
                  });
                }, Ni.prototype._sendBeaconQueue = function() {
                  var A = this;
                  if (!this._postInFlight) {
                    var E = this._eventQueue.slice(0, this._options.maxBeaconSize);
                    this._eventQueue = this._eventQueue.slice(this._options.maxBeaconSize), this._postInFlight = !0;
                    var w = this._createPayload(E), x = z();
                    qr(this._beaconUrl, w, !1, function(R, J) {
                      J ? (A._eventQueue = E.concat(A._eventQueue), A._failureCount += 1, U.info("Error sending beacon: " + J)) : A._failureCount = 0, A._roundTripTime = z() - x, A._postInFlight = !1;
                    });
                  }
                }, Ni.prototype._getNextBeaconTime = function() {
                  if (!this._failureCount)
                    return this._options.baseTimeBetweenBeacons;
                  var A = Math.pow(2, this._failureCount - 1);
                  return (1 + (A *= Math.random())) * this._options.baseTimeBetweenBeacons;
                }, Ni.prototype._startBeaconSending = function() {
                  var A = this;
                  T().clearTimeout(this._sendTimeout), this.destroyed || (this._sendTimeout = T().setTimeout(function() {
                    A._eventQueue.length && A._sendBeaconQueue(), A._startBeaconSending();
                  }, this._getNextBeaconTime()));
                }, Ni.prototype._createPayload = function(A) {
                  var E, w, x, R = this, J = { transmission_timestamp: Math.round(z()) };
                  this._roundTripTime && (J.rtt_ms = Math.round(this._roundTripTime));
                  var j = function() {
                    E = JSON.stringify({ metadata: J, events: w || A }), x = E.length / 1024;
                  }, re = function() {
                    return x <= R._options.maxPayloadKBSize;
                  };
                  return j(), re() || (U.info("Payload size is too big (" + x + " kb). Removing unnecessary events."), w = A.filter(function(te) {
                    return vt.indexOf(te.e) === -1;
                  }), j()), re() || (U.info("Payload size still too big (" + x + " kb). Cropping fields.."), w.forEach(function(te) {
                    for (var be in te) {
                      var Ie = te[be];
                      typeof Ie == "string" && Ie.length > 51200 && (te[be] = Ie.substring(0, 51200));
                    }
                  }), j()), E;
                };
                var qr = function(A, E, w, x) {
                  if (w && navigator && navigator.sendBeacon && navigator.sendBeacon(A, E))
                    x();
                  else if (T().fetch)
                    T().fetch(A, { method: "POST", body: E, headers: { "Content-Type": "text/plain" }, keepalive: !0 }).then(function(J) {
                      return x(null, J.ok ? null : "Error");
                    }).catch(function(J) {
                      return x(null, J);
                    });
                  else {
                    if (T().XMLHttpRequest) {
                      var R = new (T()).XMLHttpRequest();
                      return R.onreadystatechange = function() {
                        if (R.readyState === 4)
                          return x(null, R.status !== 200 ? "error" : void 0);
                      }, R.open("POST", A), R.setRequestHeader("Content-Type", "text/plain"), void R.send(E);
                    }
                    x();
                  }
                }, pn = Ni;
                function Vr(A) {
                  return Vr = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(E) {
                    return typeof E;
                  } : function(E) {
                    return E && typeof Symbol == "function" && E.constructor === Symbol && E !== Symbol.prototype ? "symbol" : typeof E;
                  }, Vr(A);
                }
                var ar = ["env_key", "view_id", "view_sequence_number", "player_sequence_number", "beacon_domain", "player_playhead_time", "viewer_time", "mux_api_version", "event", "video_id", "player_instance_id"], Tt = ["viewstart", "error", "ended", "viewend"], sr = function(A, E) {
                  var w = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
                  this.mux = A, this.envKey = E, this.eventQueue = new pn(mu(E, w)), this.previousBeaconData = null, this.lastEventTime = null, this.sampleRate = w.sampleRate, this.disableCookies = w.disableCookies, this.respectDoNotTrack = w.respectDoNotTrack;
                  var x = w.platform || {};
                  this.pageLevelData = { mux_api_version: this.mux.API_VERSION, mux_embed: this.mux.NAME, mux_embed_version: this.mux.VERSION, viewer_application_name: x.name, viewer_application_version: x.version, viewer_application_engine: x.layout, viewer_device_name: x.product, viewer_device_category: "", viewer_device_manufacturer: x.manufacturer, viewer_os_family: x.os && x.os.family, viewer_os_architecture: x.os && x.os.architecture, viewer_os_version: x.os && x.os.version };
                  var R = ri();
                  R && (this.pageLevelData = se()(this.pageLevelData, { viewer_connection_type: R })), T() !== void 0 && T().location && T().location.href && (this.pageLevelData.page_url = T().location.href), this.viewerData = this.disableCookies ? {} : pu();
                };
                sr.prototype.send = function(A, E) {
                  if (A) {
                    if (this.respectDoNotTrack && ie())
                      return U.info("Not sending `" + A + "` because Do Not Track is enabled");
                    if (!E || Vr(E) !== "object")
                      return U.error("A data object was expected in send() but was not provided");
                    var w, x, R = this.disableCookies ? {} : (w = Es(), x = z(), w.session_start && (w.sst = w.session_start, delete w.session_start), w.session_id && (w.sid = w.session_id, delete w.session_id), w.session_expires && (w.sex = w.session_expires, delete w.session_expires), (!w.sex || w.sex < x) && (w.sid = I(), w.sst = x), w.sex = x + 15e5, xs(w), { session_id: w.sid, session_start: w.sst, session_expires: w.sex }), J = {};
                    se()(J, this.pageLevelData), se()(J, E), se()(J, R), se()(J, this.viewerData), J.event = A, J.env_key = this.envKey, J.user_id && (J.viewer_user_id = J.user_id, delete J.user_id);
                    var j = J.mux_sample_number >= this.sampleRate, re = xi(this._deduplicateBeaconData(A, J));
                    if (this.lastEventTime = this.mux.utils.now(), j)
                      return U.info("Not sending event due to sample rate restriction", A, J, re);
                    if (this.envKey || U.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL", A, J, re), !this.rateLimited) {
                      if (U.info("Sending event", A, J, re), this.rateLimited = !this.eventQueue.queueEvent(A, re), this.mux.WINDOW_UNLOADING && A === "viewend")
                        this.eventQueue.destroy(!0);
                      else if ((Tt.indexOf(A) >= 0 || this.mux.WINDOW_HIDDEN && A === "hb") && this.eventQueue.flushEvents(), this.rateLimited)
                        return J.event = "eventrateexceeded", re = xi(J), this.eventQueue.queueEvent(J.event, re), U.error("Beaconing disabled due to rate limit.");
                    }
                  }
                }, sr.prototype.destroy = function() {
                  this.eventQueue.destroy(!1);
                }, sr.prototype._deduplicateBeaconData = function(A, E) {
                  var w = this, x = {}, R = E.view_id;
                  if (!R || A === "viewstart" || A === "viewend" || !this.previousBeaconData || this.mux.utils.now() - this.lastEventTime >= 6e5)
                    x = se()({}, E), R && (this.previousBeaconData = x), R && A === "viewend" && (this.previousBeaconData = null);
                  else {
                    var J = A.indexOf("request") === 0;
                    Object.keys(E).forEach(function(j) {
                      var re = E[j];
                      (re !== w.previousBeaconData[j] || ar.indexOf(j) > -1 || function(te, be, Ie, $e) {
                        return !(!te || be.indexOf("request_") !== 0 || be !== "request_response_headers" && Vr(Ie) === "object" && Vr($e) === "object" && Object.keys(Ie || {}).length === Object.keys($e || {}).length);
                      }(J, j, re, w.previousBeaconData[j]) || function(te, be) {
                        return te === "renditionchange" && be.indexOf("video_source_") === 0;
                      }(A, j)) && (x[j] = re, w.previousBeaconData[j] = re);
                    });
                  }
                  return x;
                };
                var Ht = sr;
                function Cs(A, E) {
                  for (var w = 0; w < E.length; w++) {
                    var x = E[w];
                    x.enumerable = x.enumerable || !1, x.configurable = !0, "value" in x && (x.writable = !0), Object.defineProperty(A, x.key, x);
                  }
                }
                var vu = function(A, E, w) {
                  return E && Cs(A.prototype, E), w && Cs(A, w), Object.defineProperty(A, "prototype", { writable: !1 }), A;
                }(function A(E) {
                  (function(be, Ie) {
                    if (!(be instanceof Ie))
                      throw new TypeError("Cannot call a class as a function");
                  })(this, A);
                  var w = 0, x = 0, R = 0, J = 0, j = 0, re = 0, te = 0;
                  E.on("requestcompleted", function(be, Ie) {
                    var $e, Me, Ce = Ie.request_start, De = Ie.request_response_start, We = Ie.request_response_end, bt = Ie.request_bytes_loaded;
                    if (J++, De ? ($e = De - Ce, Me = We - De) : Me = We - Ce, Me > 0 && bt > 0) {
                      var wt = bt / Me * 8e3;
                      j++, x += bt, R += Me, E.data.view_min_request_throughput = Math.min(E.data.view_min_request_throughput || 1 / 0, wt), E.data.view_average_request_throughput = x / R * 8e3, E.data.view_request_count = J, $e > 0 && (w += $e, E.data.view_max_request_latency = Math.max(E.data.view_max_request_latency || 0, $e), E.data.view_average_request_latency = w / j);
                    }
                  }), E.on("requestfailed", function(be, Ie) {
                    J++, re++, E.data.view_request_count = J, E.data.view_request_failed_count = re;
                  }), E.on("requestcanceled", function(be, Ie) {
                    J++, te++, E.data.view_request_count = J, E.data.view_request_canceled_count = te;
                  });
                });
                function ha(A, E) {
                  for (var w = 0; w < E.length; w++) {
                    var x = E[w];
                    x.enumerable = x.enumerable || !1, x.configurable = !0, "value" in x && (x.writable = !0), Object.defineProperty(A, x.key, x);
                  }
                }
                var pa = function(A, E, w) {
                  return E && ha(A.prototype, E), w && ha(A, w), Object.defineProperty(A, "prototype", { writable: !1 }), A;
                }(function A(E) {
                  var w = this;
                  (function(x, R) {
                    if (!(x instanceof R))
                      throw new TypeError("Cannot call a class as a function");
                  })(this, A), E.on("before*", function(x, R) {
                    var J = R.viewer_time, j = z(), re = w._lastEventTime;
                    if (w._lastEventTime = j, re && j - re > 36e5) {
                      var te = Object.keys(E.data).reduce(function(be, Ie) {
                        return Ie.indexOf("video_") === 0 ? se()(be, function($e, Me, Ce) {
                          return Me in $e ? Object.defineProperty($e, Me, { value: Ce, enumerable: !0, configurable: !0, writable: !0 }) : $e[Me] = Ce, $e;
                        }({}, Ie, E.data[Ie])) : be;
                      }, {});
                      E.mux.log.info("Received event after at least an hour inactivity, creating a new view"), E.emit("viewinit", se()({ viewer_time: J }, te)), E.playbackHeartbeat._playheadShouldBeProgressing && x.type !== "play" && x.type !== "adbreakstart" && (E.emit("play", { viewer_time: J }), x.type !== "playing" && E.emit("playing", { viewer_time: J }));
                    }
                  });
                });
                function mn(A) {
                  return mn = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(E) {
                    return typeof E;
                  } : function(E) {
                    return E && typeof Symbol == "function" && E.constructor === Symbol && E !== Symbol.prototype ? "symbol" : typeof E;
                  }, mn(A);
                }
                function ma(A, E) {
                  (E == null || E > A.length) && (E = A.length);
                  for (var w = 0, x = new Array(E); w < E; w++)
                    x[w] = A[w];
                  return x;
                }
                function ks(A, E) {
                  for (var w = 0; w < E.length; w++) {
                    var x = E[w];
                    x.enumerable = x.enumerable || !1, x.configurable = !0, "value" in x && (x.writable = !0), Object.defineProperty(A, x.key, x);
                  }
                }
                function Pr(A, E) {
                  return Pr = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(w, x) {
                    return w.__proto__ = x, w;
                  }, Pr(A, E);
                }
                function _u(A, E) {
                  if (E && (mn(E) === "object" || typeof E == "function"))
                    return E;
                  if (E !== void 0)
                    throw new TypeError("Derived constructors may only return object or undefined");
                  return Ct(A);
                }
                function Ct(A) {
                  if (A === void 0)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                  return A;
                }
                function jr(A) {
                  return jr = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(E) {
                    return E.__proto__ || Object.getPrototypeOf(E);
                  }, jr(A);
                }
                var gn = ["viewstart", "ended", "loadstart", "pause", "play", "playing", "ratechange", "waiting", "adplay", "adpause", "adended", "aderror", "adplaying", "adrequest", "adresponse", "adbreakstart", "adbreakend", "adfirstquartile", "admidpoint", "adthirdquartile", "rebufferstart", "rebufferend", "seeked", "error", "hb", "requestcompleted", "requestfailed", "requestcanceled", "renditionchange"], yu = function(A) {
                  (function(J, j) {
                    if (typeof j != "function" && j !== null)
                      throw new TypeError("Super expression must either be null or a function");
                    J.prototype = Object.create(j && j.prototype, { constructor: { value: J, writable: !0, configurable: !0 } }), Object.defineProperty(J, "prototype", { writable: !1 }), j && Pr(J, j);
                  })(R, A);
                  var E, w, x = function(J) {
                    var j = function() {
                      if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
                        return !1;
                      if (typeof Proxy == "function")
                        return !0;
                      try {
                        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
                        })), !0;
                      } catch {
                        return !1;
                      }
                    }();
                    return function() {
                      var re, te = jr(J);
                      if (j) {
                        var be = jr(this).constructor;
                        re = Reflect.construct(te, arguments, be);
                      } else
                        re = te.apply(this, arguments);
                      return _u(this, re);
                    };
                  }(R);
                  function R(J, j, re) {
                    var te;
                    (function(Ce, De) {
                      if (!(Ce instanceof De))
                        throw new TypeError("Cannot call a class as a function");
                    })(this, R), (te = x.call(this)).DOM_CONTENT_LOADED_EVENT_END = fe(), te.NAVIGATION_START = pe(), te.mux = J, te.id = j, (re = se()({ debug: !1, minimumRebufferDuration: 250, sustainedRebufferThreshold: 1e3, playbackHeartbeatTime: 25, beaconDomain: "litix.io", sampleRate: 1, disableCookies: !1, respectDoNotTrack: !1, disableRebufferTracking: !1, disablePlayheadRebufferTracking: !1, errorTranslator: function(Ce) {
                      return Ce;
                    } }, re)).data = re.data || {}, re.data.property_key && (re.data.env_key = re.data.property_key, delete re.data.property_key), U.setLevel(re.debug ? "debug" : "warn"), te.getPlayheadTime = re.getPlayheadTime, te.getStateData = re.getStateData || function() {
                      return {};
                    }, te.getAdData = re.getAdData || function() {
                    }, te.minimumRebufferDuration = re.minimumRebufferDuration, te.sustainedRebufferThreshold = re.sustainedRebufferThreshold, te.playbackHeartbeatTime = re.playbackHeartbeatTime, te.disableRebufferTracking = re.disableRebufferTracking, te.disableRebufferTracking && te.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."), te.disablePlayheadRebufferTracking = re.disablePlayheadRebufferTracking, te.errorTranslator = re.errorTranslator, te.playbackEventDispatcher = new Ht(J, re.data.env_key, re), te.data = { player_instance_id: I(), mux_sample_rate: re.sampleRate, beacon_domain: re.beaconCollectionDomain ? re.beaconCollectionDomain : re.beaconDomain }, te.data.view_sequence_number = 1, te.data.player_sequence_number = 1, te.oldEmit = te.emit, te.emit = function(Ce, De) {
                      De = se()({ viewer_time: this.mux.utils.now() }, De), this.oldEmit(Ce, De);
                    };
                    var be = function() {
                      this.data.view_start === void 0 && (this.data.view_start = this.mux.utils.now(), this.emit("viewstart"));
                    }.bind(Ct(te));
                    te.on("viewinit", function(Ce, De) {
                      this._resetVideoData(), this._resetViewData(), this._resetErrorData(), this._updateStateData(), se()(this.data, De), this._initializeViewData(), this.one("play", be), this.one("adbreakstart", be);
                    });
                    var Ie = function(Ce) {
                      this.emit("viewend"), this.send("viewend"), this.emit("viewinit", Ce);
                    }.bind(Ct(te));
                    if (te.on("videochange", function(Ce, De) {
                      Ie(De);
                    }), te.on("programchange", function(Ce, De) {
                      this.data.player_is_paused && this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."), Ie(se()(De, { view_program_changed: !0 })), be(), this.emit("play"), this.emit("playing");
                    }), te.on("fragmentchange", function(Ce, De) {
                      this.currentFragmentPDT = De.currentFragmentPDT, this.currentFragmentStart = De.currentFragmentStart;
                    }), te.on("destroy", te.destroy), T() !== void 0 && typeof T().addEventListener == "function" && typeof T().removeEventListener == "function") {
                      var $e = function() {
                        te.mux.WINDOW_HIDDEN = document.visibilityState === "hidden", te.mux.WINDOW_HIDDEN && te.emit("hb");
                      };
                      T().addEventListener("visibilitychange", $e, !1);
                      var Me = function(Ce) {
                        Ce.persisted || te.destroy();
                      };
                      T().addEventListener("pagehide", Me, !1), te.on("destroy", function() {
                        T().removeEventListener("visibilitychange", $e), T().removeEventListener("pagehide", Me);
                      });
                    }
                    return te.on("playerready", function(Ce, De) {
                      se()(this.data, De);
                    }), gn.forEach(function(Ce) {
                      te.on(Ce, function(De, We) {
                        Ce.indexOf("ad") !== 0 && this._updateStateData(), se()(this.data, We), this._sanitizeData();
                      }), te.on("after" + Ce, function() {
                        (Ce !== "error" || this.errorTracker.viewErrored) && this.send(Ce);
                      });
                    }), te.on("viewend", function(Ce, De) {
                      se()(te.data, De);
                    }), te.one("playerready", function(Ce) {
                      var De = this.mux.utils.now();
                      this.data.player_init_time && (this.data.player_startup_time = De - this.data.player_init_time), !this.mux.PLAYER_TRACKED && this.NAVIGATION_START && (this.mux.PLAYER_TRACKED = !0, (this.data.player_init_time || this.DOM_CONTENT_LOADED_EVENT_END) && (this.data.page_load_time = Math.min(this.data.player_init_time || 1 / 0, this.DOM_CONTENT_LOADED_EVENT_END || 1 / 0) - this.NAVIGATION_START)), this.send("playerready"), delete this.data.player_startup_time, delete this.data.page_load_time;
                    }), te.longResumeTracker = new pa(Ct(te)), te.errorTracker = new Le(Ct(te)), new fu(Ct(te)), te.seekingTracker = new Ki(Ct(te)), te.playheadTime = new gt(Ct(te)), te.playbackHeartbeat = new _e(Ct(te)), new zi(Ct(te)), te.watchTimeTracker = new Xe(Ct(te)), new mt(Ct(te)), te.adTracker = new cu(Ct(te)), new Qe(Ct(te)), new ot(Ct(te)), new ft(Ct(te)), new fn(Ct(te)), new vu(Ct(te)), re.hlsjs && te.addHLSJS(re), re.dashjs && te.addDashJS(re), te.emit("viewinit", re.data), te;
                  }
                  return E = R, w = [{ key: "destroy", value: function() {
                    this._destroyed || (this._destroyed = !0, this.data.view_start !== void 0 && (this.emit("viewend"), this.send("viewend")), this.playbackEventDispatcher.destroy(), this.removeHLSJS(), this.removeDashJS(), T().clearTimeout(this._heartBeatTimeout));
                  } }, { key: "send", value: function(J) {
                    var j = se()({}, this.data);
                    if (j.video_source_is_live === void 0 && (j.player_source_duration === 1 / 0 || j.video_source_duration === 1 / 0 ? j.video_source_is_live = !0 : (j.player_source_duration > 0 || j.video_source_duration > 0) && (j.video_source_is_live = !1)), j.video_source_is_live || ["player_program_time", "player_manifest_newest_program_time", "player_live_edge_program_time", "player_program_time", "video_holdback", "video_part_holdback", "video_target_duration", "video_part_target_duration"].forEach(function(Ie) {
                      j[Ie] = void 0;
                    }), j.video_source_url = j.video_source_url || j.player_source_url, j.video_source_url) {
                      var re = function(Ie, $e) {
                        return function(Me) {
                          if (Array.isArray(Me))
                            return Me;
                        }(Ie) || function(Me, Ce) {
                          var De = Me == null ? null : typeof Symbol < "u" && Me[Symbol.iterator] || Me["@@iterator"];
                          if (De != null) {
                            var We, bt, wt = [], Ke = !0, Ft = !1;
                            try {
                              for (De = De.call(Me); !(Ke = (We = De.next()).done) && (wt.push(We.value), !Ce || wt.length !== Ce); Ke = !0)
                                ;
                            } catch (Bt) {
                              Ft = !0, bt = Bt;
                            } finally {
                              try {
                                Ke || De.return == null || De.return();
                              } finally {
                                if (Ft)
                                  throw bt;
                              }
                            }
                            return wt;
                          }
                        }(Ie, $e) || function(Me, Ce) {
                          if (Me) {
                            if (typeof Me == "string")
                              return ma(Me, Ce);
                            var De = Object.prototype.toString.call(Me).slice(8, -1);
                            return De === "Object" && Me.constructor && (De = Me.constructor.name), De === "Map" || De === "Set" ? Array.from(Me) : De === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(De) ? ma(Me, Ce) : void 0;
                          }
                        }(Ie, $e) || function() {
                          throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
                        }();
                      }(M(j.video_source_url), 2), te = re[0], be = re[1];
                      j.video_source_domain = be, j.video_source_hostname = te;
                    }
                    delete j.ad_request_id, this.playbackEventDispatcher.send(J, j), this.data.view_sequence_number++, this.data.player_sequence_number++, this._restartHeartBeat();
                  } }, { key: "_updateStateData", value: function() {
                    se()(this.data, this.getStateData()), this.playheadTime._updatePlayheadTime(), this._sanitizeData();
                  } }, { key: "_sanitizeData", value: function() {
                    var J = this;
                    ["player_width", "player_height", "video_source_width", "video_source_height", "player_playhead_time", "video_source_bitrate"].forEach(function(j) {
                      var re = parseInt(J.data[j], 10);
                      J.data[j] = isNaN(re) ? void 0 : re;
                    }), ["player_source_url", "video_source_url"].forEach(function(j) {
                      if (J.data[j]) {
                        var re = J.data[j].toLowerCase();
                        re.indexOf("data:") !== 0 && re.indexOf("blob:") !== 0 || (J.data[j] = "MSE style URL");
                      }
                    });
                  } }, { key: "_resetVideoData", value: function(J, j) {
                    var re = this;
                    Object.keys(this.data).forEach(function(te) {
                      te.indexOf("video_") === 0 && delete re.data[te];
                    });
                  } }, { key: "_resetViewData", value: function() {
                    var J = this;
                    Object.keys(this.data).forEach(function(j) {
                      j.indexOf("view_") === 0 && delete J.data[j];
                    }), this.data.view_sequence_number = 1;
                  } }, { key: "_resetErrorData", value: function(J, j) {
                    delete this.data.player_error_code, delete this.data.player_error_message;
                  } }, { key: "_initializeViewData", value: function() {
                    var J = this, j = this.data.view_id = I(), re = function() {
                      j === J.data.view_id && H(J.data, "player_view_count", 1);
                    };
                    this.data.player_is_paused ? this.one("play", re) : re();
                  } }, { key: "_restartHeartBeat", value: function() {
                    var J = this;
                    T().clearTimeout(this._heartBeatTimeout), this.errorTracker.viewErrored || (this._heartBeatTimeout = T().setTimeout(function() {
                      J.data.player_is_paused || J.emit("hb");
                    }, 1e4));
                  } }, { key: "addHLSJS", value: function(J) {
                    J.hlsjs ? this.hlsjs ? this.mux.log.warn("An instance of HLS.js is already being monitored for this player.") : (this.hlsjs = J.hlsjs, function(j, re, te) {
                      var be = arguments.length > 4 ? arguments[4] : void 0, Ie = j.log, $e = j.utils.secondsToMs, Me = function(tt) {
                        var He, Re = parseInt(be.version);
                        return Re === 1 && tt.programDateTime !== null && (He = tt.programDateTime), Re === 0 && tt.pdt !== null && (He = tt.pdt), He;
                      };
                      if (ne()) {
                        var Ce = function(tt, He) {
                          return j.emit(re, tt, He);
                        }, De = function(tt, He) {
                          var Re = He.levels, qe = He.audioTracks, lt = He.url, Dt = He.stats, ct = He.networkDetails, _i = He.sessionData, ni = {}, it = {}, Lt = {};
                          Lt = W(_i), Re.forEach(function(wi, lr) {
                            ni[lr] = { width: wi.width, height: wi.height, bitrate: wi.bitrate, attrs: wi.attrs };
                          }), qe.forEach(function(wi, lr) {
                            it[lr] = { name: wi.name, language: wi.lang, bitrate: wi.bitrate };
                          });
                          var qt = X(Dt), Lr = qt.bytesLoaded, Sn = qt.requestStart, _a = qt.responseStart, En = qt.responseEnd;
                          Lt.request_event_type = tt, Lt.request_bytes_loaded = Lr, Lt.request_start = Sn, Lt.request_response_start = _a, Lt.request_response_end = En, Lt.request_type = "manifest", Lt.request_hostname = me(lt), Lt.request_response_headers = Y(ct), Lt.request_rendition_lists = { media: ni, audio: it, video: {} }, Ce("requestcompleted", Lt);
                        };
                        te.on(be.Events.MANIFEST_LOADED, De);
                        var We = function(tt, He) {
                          var Re = He.details, qe = He.level, lt = He.networkDetails, Dt = He.stats, ct = X(Dt), _i = ct.bytesLoaded, ni = ct.requestStart, it = ct.responseStart, Lt = ct.responseEnd, qt = Re.fragments[Re.fragments.length - 1], Lr = Me(qt) + $e(qt.duration);
                          Ce("requestcompleted", { request_event_type: tt, request_bytes_loaded: _i, request_start: ni, request_response_start: it, request_response_end: Lt, request_current_level: qe, request_type: "manifest", request_hostname: me(Re.url), request_response_headers: Y(lt), video_holdback: Re.holdBack && $e(Re.holdBack), video_part_holdback: Re.partHoldBack && $e(Re.partHoldBack), video_part_target_duration: Re.partTarget && $e(Re.partTarget), video_target_duration: Re.targetduration && $e(Re.targetduration), video_source_is_live: Re.live, player_manifest_newest_program_time: isNaN(Lr) ? void 0 : Lr });
                        };
                        te.on(be.Events.LEVEL_LOADED, We);
                        var bt = function(tt, He) {
                          var Re = He.details, qe = He.networkDetails, lt = He.stats, Dt = X(lt), ct = Dt.bytesLoaded, _i = Dt.requestStart, ni = Dt.responseStart, it = Dt.responseEnd;
                          Ce("requestcompleted", { request_event_type: tt, request_bytes_loaded: ct, request_start: _i, request_response_start: ni, request_response_end: it, request_type: "manifest", request_hostname: me(Re.url), request_response_headers: Y(qe) });
                        };
                        te.on(be.Events.AUDIO_TRACK_LOADED, bt);
                        var wt = function(tt, He) {
                          var Re = He.stats, qe = He.networkDetails, lt = He.frag, Dt = X(Re), ct = { request_event_type: tt, request_bytes_loaded: Dt.bytesLoaded, request_start: Dt.requestStart, request_response_start: Dt.responseStart, request_response_end: Dt.responseEnd, request_hostname: qe ? me(qe.responseURL) : void 0, request_response_headers: Y(qe), request_media_duration: lt.duration };
                          lt.type === "main" ? (ct.request_type = "media", ct.request_current_level = lt.level, ct.request_video_width = (te.levels[lt.level] || {}).width, ct.request_video_height = (te.levels[lt.level] || {}).height) : ct.request_type = lt.type, Ce("requestcompleted", ct);
                        };
                        te.on(be.Events.FRAG_LOADED, wt);
                        var Ke = function(tt, He) {
                          var Re = He.frag, qe = Re.start, lt = { currentFragmentPDT: Me(Re), currentFragmentStart: $e(qe) };
                          Ce("fragmentchange", lt);
                        };
                        te.on(be.Events.FRAG_CHANGED, Ke);
                        var Ft = function(tt, He) {
                          var Re = He.type, qe = He.details, lt = He.response, Dt = He.fatal, ct = He.context, _i = He.frag;
                          if (qe === be.ErrorDetails.MANIFEST_LOAD_ERROR || qe === be.ErrorDetails.MANIFEST_LOAD_TIMEOUT || qe === be.ErrorDetails.FRAG_LOAD_ERROR || qe === be.ErrorDetails.FRAG_LOAD_TIMEOUT || qe === be.ErrorDetails.LEVEL_LOAD_ERROR || qe === be.ErrorDetails.LEVEL_LOAD_TIMEOUT) {
                            var ni = _i && _i.url || ct && ct.url || "";
                            Ce("requestfailed", { request_error: qe, request_url: ni, request_hostname: me(ni), request_type: qe === be.ErrorDetails.FRAG_LOAD_ERROR || qe === be.ErrorDetails.FRAG_LOAD_TIMEOUT ? "media" : "manifest", request_error_code: lt && lt.code, request_error_text: lt && lt.text });
                          }
                          Dt && Ce("error", { player_error_code: Re, player_error_message: qe });
                        };
                        te.on(be.Events.ERROR, Ft);
                        var Bt = function(tt, He) {
                          var Re = He.frag, qe = Re && Re._url || "";
                          Ce("requestcanceled", { request_cancel: tt, request_url: qe, request_type: "media", request_hostname: me(qe) });
                        };
                        te.on(be.Events.FRAG_LOAD_EMERGENCY_ABORTED, Bt);
                        var Ut = function(tt, He) {
                          var Re = He.level, qe = te.levels[Re];
                          if (qe && qe.attrs && qe.attrs.BANDWIDTH) {
                            var lt = qe.attrs.BANDWIDTH;
                            lt ? Ce("renditionchange", { video_source_bitrate: lt, video_source_width: qe.width, video_source_height: qe.height }) : Ie.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js");
                          }
                        };
                        te.on(be.Events.LEVEL_SWITCHED, Ut), te._stopMuxMonitor = function() {
                          te.off(be.Events.MANIFEST_LOADED, De), te.off(be.Events.LEVEL_LOADED, We), te.off(be.Events.AUDIO_TRACK_LOADED, bt), te.off(be.Events.FRAG_LOADED, wt), te.off(be.Events.FRAG_CHANGED, Ke), te.off(be.Events.ERROR, Ft), te.off(be.Events.FRAG_LOAD_EMERGENCY_ABORTED, Bt), te.off(be.Events.LEVEL_SWITCHED, Ut), te.off(be.Events.DESTROYING, te._stopMuxMonitor), delete te._stopMuxMonitor;
                        }, te.on(be.Events.DESTROYING, te._stopMuxMonitor);
                      } else
                        Ie.warn("performance timing not supported. Not tracking HLS.js.");
                    }(this.mux, this.id, J.hlsjs, {}, J.Hls || T().Hls)) : this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.");
                  } }, { key: "removeHLSJS", value: function() {
                    var J;
                    this.hlsjs && ((J = this.hlsjs) && typeof J._stopMuxMonitor == "function" && J._stopMuxMonitor(), this.hlsjs = void 0);
                  } }, { key: "addDashJS", value: function(J) {
                    J.dashjs ? this.dashjs ? this.mux.log.warn("An instance of Dash.js is already being monitored for this player.") : (this.dashjs = J.dashjs, function(j, re, te) {
                      var be = j.log;
                      if (te && te.on) {
                        var Ie = function(Ke, Ft) {
                          return j.emit(re, Ke, Ft);
                        }, $e = function(Ke) {
                          var Ft = Ke.type, Bt = (Ke.data || {}).url;
                          Ie("requestcompleted", { request_event_type: Ft, request_start: 0, request_response_start: 0, request_response_end: 0, request_bytes_loaded: -1, request_type: "manifest", request_hostname: me(Bt) });
                        };
                        te.on("manifestLoaded", $e);
                        var Me = {}, Ce = function(Ke) {
                          var Ft = Ke.type, Bt = Ke.fragmentModel, Ut = (Ke.chunk || {}).mediaInfo || {}, tt = Ut.type, He = Ut.bitrateList, Re = {};
                          (He = He || []).forEach(function(Lt, qt) {
                            Re[qt] = {}, Re[qt].width = Lt.width, Re[qt].height = Lt.height, Re[qt].bitrate = Lt.bandwidth, Re[qt].attrs = {};
                          }), tt === "video" ? Me.video = Re : tt === "audio" ? Me.audio = Re : Me.media = Re;
                          var qe = de(Bt, te), lt = qe.requestStart, Dt = qe.requestResponseStart, ct = qe.requestResponseEnd, _i = qe.requestResponseHeaders, ni = qe.requestMediaDuration, it = qe.requestHostname;
                          Ie("requestcompleted", { request_event_type: Ft, request_start: lt, request_response_start: Dt, request_response_end: ct, request_bytes_loaded: -1, request_type: tt + "_init", request_response_headers: _i, request_hostname: it, request_media_duration: ni, request_rendition_lists: Me });
                        };
                        te.on("initFragmentLoaded", Ce);
                        var De = function(Ke) {
                          var Ft = Ke.type, Bt = Ke.fragmentModel, Ut = Ke.chunk || {}, tt = Ut.mediaInfo, He = Ut.start, Re = (tt || {}).type, qe = de(Bt, te), lt = qe.requestStart, Dt = qe.requestResponseStart, ct = qe.requestResponseEnd, _i = qe.requestBytesLoaded, ni = qe.requestResponseHeaders, it = qe.requestMediaDuration, Lt = qe.requestHostname, qt = function(wi, lr) {
                            var xn = lr.getQualityFor(wi), Wr = lr.getCurrentTrackFor(wi).bitrateList;
                            return Wr ? { currentLevel: xn, renditionWidth: Wr[xn].width || null, renditionHeight: Wr[xn].height || null, renditionBitrate: Wr[xn].bandwidth } : {};
                          }(Re, te), Lr = qt.currentLevel, Sn = qt.renditionWidth, _a = qt.renditionHeight, En = qt.renditionBitrate;
                          Ie("requestcompleted", { request_event_type: Ft, request_start: lt, request_response_start: Dt, request_response_end: ct, request_bytes_loaded: _i, request_type: Re, request_response_headers: ni, request_hostname: Lt, request_media_start_time: He, request_media_duration: it, request_current_level: Lr, request_labeled_bitrate: En, request_video_width: Sn, request_video_height: _a });
                        };
                        te.on("mediaFragmentLoaded", De);
                        var We = { video: void 0, audio: void 0, totalBitrate: void 0 }, bt = function(Ke, Ft, Bt) {
                          if (typeof Ke.newQuality == "number") {
                            var Ut = Ke.mediaType;
                            if (Ut === "audio" || Ut === "video") {
                              var tt = te.getBitrateInfoListFor(Ut).find(function(Re) {
                                return Re.qualityIndex === Ke.newQuality;
                              });
                              if (tt && typeof tt.bitrate == "number") {
                                We[Ut] = tt;
                                var He = function() {
                                  if (We.video && typeof We.video.bitrate == "number") {
                                    if (We.video.width && We.video.height) {
                                      var Re = We.video.bitrate;
                                      return We.audio && typeof We.audio.bitrate == "number" && (Re += We.audio.bitrate), Re !== We.totalBitrate ? (We.totalBitrate = Re, { video_source_bitrate: Re, video_source_height: We.video.height, video_source_width: We.video.width }) : void 0;
                                    }
                                    be.warn("have bitrate info for video but missing width/height");
                                  }
                                }();
                                He && Ie("renditionchange", He);
                              } else
                                be.warn("missing bitrate info for ".concat(Ut));
                            }
                          } else
                            be.warn("missing evt.newQuality in qualityChangeRendered event", Ke);
                        };
                        te.on("qualityChangeRendered", bt);
                        var wt = function(Ke) {
                          var Ft = Ke.error, Bt = Ke.event, Ut = (Bt = Bt || {}).request || {}, tt = T().event && T().event.currentTarget || {};
                          Ie("requestfailed", { request_error: Ft + "_" + Bt.id + "_" + Ut.type, request_url: Bt.url, request_hostname: me(Bt.url), request_type: Ut.mediaType, request_error_code: tt.status, request_error_type: tt.statusText });
                        };
                        te.on("error", wt), te._stopMuxMonitor = function() {
                          te.off("manifestLoaded", $e), te.off("initFragmentLoaded", Ce), te.off("mediaFragmentLoaded", De), te.off("qualityChangeRendered", bt), te.off("error", wt), delete te._stopMuxMonitor;
                        };
                      } else
                        be.warn("Invalid dash.js player reference. Monitoring blocked.");
                    }(this.mux, this.id, J.dashjs)) : this.mux.log.warn("You must pass a valid dashjs instance in order to track it.");
                  } }, { key: "removeDashJS", value: function() {
                    var J;
                    this.dashjs && ((J = this.dashjs) && typeof J._stopMuxMonitor == "function" && J._stopMuxMonitor(), this.dashjs = void 0);
                  } }], w && ks(E.prototype, w), Object.defineProperty(E, "prototype", { writable: !1 }), R;
                }(ge), Tu = yu, vn = v(153), Mi = v.n(vn);
                function Ir(A) {
                  return Ir = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(E) {
                    return typeof E;
                  } : function(E) {
                    return E && typeof Symbol == "function" && E.constructor === Symbol && E !== Symbol.prototype ? "symbol" : typeof E;
                  }, Ir(A);
                }
                function or(A, E) {
                  return function(w) {
                    if (Array.isArray(w))
                      return w;
                  }(A) || function(w, x) {
                    var R = w == null ? null : typeof Symbol < "u" && w[Symbol.iterator] || w["@@iterator"];
                    if (R != null) {
                      var J, j, re = [], te = !0, be = !1;
                      try {
                        for (R = R.call(w); !(te = (J = R.next()).done) && (re.push(J.value), !x || re.length !== x); te = !0)
                          ;
                      } catch (Ie) {
                        be = !0, j = Ie;
                      } finally {
                        try {
                          te || R.return == null || R.return();
                        } finally {
                          if (be)
                            throw j;
                        }
                      }
                      return re;
                    }
                  }(A, E) || function(w, x) {
                    if (w) {
                      if (typeof w == "string")
                        return _n(w, x);
                      var R = Object.prototype.toString.call(w).slice(8, -1);
                      return R === "Object" && w.constructor && (R = w.constructor.name), R === "Map" || R === "Set" ? Array.from(w) : R === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R) ? _n(w, x) : void 0;
                    }
                  }(A, E) || function() {
                    throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
                  }();
                }
                function _n(A, E) {
                  (E == null || E > A.length) && (E = A.length);
                  for (var w = 0, x = new Array(E); w < E; w++)
                    x[w] = A[w];
                  return x;
                }
                var ur, ga = ["loadstart", "pause", "play", "playing", "seeking", "seeked", "timeupdate", "ratechange", "stalled", "waiting", "error", "ended"], Fi = { 1: "MEDIA_ERR_ABORTED", 2: "MEDIA_ERR_NETWORK", 3: "MEDIA_ERR_DECODE", 4: "MEDIA_ERR_SRC_NOT_SUPPORTED" };
                T() && T().WeakMap && (ur = /* @__PURE__ */ new WeakMap());
                var yn = function(A) {
                  return this.buffer = "", this.manifest = { segments: [], serverControl: {}, sessionData: {} }, this.currentUri = {}, this.process(A), this.manifest;
                };
                yn.prototype.process = function(A) {
                  var E;
                  for (this.buffer += A, E = this.buffer.indexOf(`
`); E > -1; E = this.buffer.indexOf(`
`))
                    this.processLine(this.buffer.substring(0, E)), this.buffer = this.buffer.substring(E + 1);
                }, yn.prototype.processLine = function(A) {
                  var E = A.indexOf(":"), w = Hr(A, E), x = w[0], R = w.length === 2 ? Tn(w[1]) : void 0;
                  if (x[0] !== "#")
                    this.currentUri.uri = x, this.manifest.segments.push(this.currentUri), this.manifest.targetDuration && !("duration" in this.currentUri) && (this.currentUri.duration = this.manifest.targetDuration), this.currentUri = {};
                  else
                    switch (x) {
                      case "#EXT-X-TARGETDURATION":
                        if (!isFinite(R) || R < 0)
                          return;
                        this.manifest.targetDuration = R, this.setHoldBack();
                        break;
                      case "#EXT-X-PART-INF":
                        Dr(this.manifest, w), this.manifest.partInf.partTarget && (this.manifest.partTargetDuration = this.manifest.partInf.partTarget), this.setHoldBack();
                        break;
                      case "#EXT-X-SERVER-CONTROL":
                        Dr(this.manifest, w), this.setHoldBack();
                        break;
                      case "#EXTINF":
                        R === 0 ? this.currentUri.duration = 0.01 : R > 0 && (this.currentUri.duration = R);
                        break;
                      case "#EXT-X-PROGRAM-DATE-TIME":
                        var J = R, j = new Date(J);
                        this.manifest.dateTimeString || (this.manifest.dateTimeString = J, this.manifest.dateTimeObject = j), this.currentUri.dateTimeString = J, this.currentUri.dateTimeObject = j;
                        break;
                      case "#EXT-X-VERSION":
                        Dr(this.manifest, w);
                        break;
                      case "#EXT-X-SESSION-DATA":
                        var re = Is(w[1]), te = W(re);
                        se()(this.manifest.sessionData, te);
                    }
                }, yn.prototype.setHoldBack = function() {
                  var A = this.manifest, E = A.serverControl, w = A.targetDuration, x = A.partTargetDuration;
                  if (E) {
                    var R = "holdBack", J = "partHoldBack", j = w && 3 * w, re = x && 2 * x;
                    w && !E.hasOwnProperty(R) && (E[R] = j), j && E[R] < j && (E[R] = j), x && !E.hasOwnProperty(J) && (E[J] = 3 * x), x && E[J] < re && (E[J] = re);
                  }
                };
                var Dr = function(A, E) {
                  var w, x = va(E[0].replace("#EXT-X-", ""));
                  bn(E[1]) ? (w = {}, w = se()(bu(E[1]), w)) : w = Tn(E[1]), A[x] = w;
                }, va = function(A) {
                  return A.toLowerCase().replace(/-(\w)/g, function(E) {
                    return E[1].toUpperCase();
                  });
                }, Tn = function(A) {
                  if (A.toLowerCase() === "yes" || A.toLowerCase() === "no")
                    return A.toLowerCase() === "yes";
                  var E = A.indexOf(":") !== -1 ? A : parseFloat(A);
                  return isNaN(E) ? A : E;
                }, Ps = function(A) {
                  var E = {}, w = A.split("=");
                  return w.length > 1 && (E[va(w[0])] = Tn(w[1])), E;
                }, bu = function(A) {
                  for (var E = A.split(","), w = {}, x = 0; E.length > x; x++) {
                    var R = E[x], J = Ps(R);
                    w = se()(J, w);
                  }
                  return w;
                }, bn = function(A) {
                  return A.indexOf("=") > -1;
                }, Hr = function(A, E) {
                  return E === -1 ? [A] : [A.substring(0, E), A.substring(E + 1)];
                }, Is = function(A) {
                  var E = {};
                  if (A) {
                    var w = A.search(",");
                    return [A.slice(0, w), A.slice(w + 1)].forEach(function(x, R) {
                      for (var J = x.replace(/['"]+/g, "").split("="), j = 0; j < J.length; j++)
                        J[j] === "DATA-ID" && (E["DATA-ID"] = J[1 - j]), J[j] === "VALUE" && (E.VALUE = J[1 - j]);
                    }), { data: E };
                  }
                }, Su = yn, gi = { safeCall: function(A, E, w, x) {
                  var R = x;
                  if (A && typeof A[E] == "function")
                    try {
                      R = A[E].apply(A, w);
                    } catch (J) {
                      U.info("safeCall error", J);
                    }
                  return R;
                } };
                gi.safeIncrement = H, gi.getComputedStyle = function(A, E) {
                  var w;
                  if (A && E && T() && typeof T().getComputedStyle == "function")
                    return ur && ur.has(A) && (w = ur.get(A)), w || (w = T().getComputedStyle(A, null), ur && ur.set(A, w)), w.getPropertyValue(E);
                }, gi.secondsToMs = function(A) {
                  return Math.floor(1e3 * A);
                }, gi.assign = se(), gi.headersStringToObject = F, gi.extractHostnameAndDomain = M, gi.extractHostname = me, gi.now = z, gi.manifestParser = Su, gi.generateShortID = V, gi.generateUUID = I;
                var Ds = gi;
                function Ls(A, E) {
                  (E == null || E > A.length) && (E = A.length);
                  for (var w = 0, x = new Array(E); w < E; w++)
                    x[w] = A[w];
                  return x;
                }
                var vi = {}, xt = function A(E) {
                  var w = arguments;
                  typeof E == "string" ? A.hasOwnProperty(E) ? T().setTimeout(function() {
                    w = Array.prototype.splice.call(w, 1), A[E].apply(null, w);
                  }, 0) : U.warn("`" + E + "` is an unknown task") : typeof E == "function" ? T().setTimeout(function() {
                    E(A);
                  }, 0) : U.warn("`" + E + "` is invalid.");
                };
                xt.loaded = z(), xt.NAME = "mux-embed", xt.VERSION = "4.13.1", xt.API_VERSION = "2.1", xt.PLAYER_TRACKED = !1, xt.monitor = function(A, E) {
                  return function(w, x, R) {
                    var J = or(k(x), 3), j = J[0], re = J[1], te = J[2], be = w.log, Ie = w.utils.getComputedStyle, $e = w.utils.secondsToMs;
                    if (!j)
                      return be.error("No element was found with the `" + re + "` query selector.");
                    if (te !== "video" && te !== "audio")
                      return be.error("The element of `" + re + "` was not a media element.");
                    (R = se()({ automaticErrorTracking: !0 }, R)).data = se()({ player_software: "HTML5 Video Element", player_mux_plugin_name: "VideoElementMonitor", player_mux_plugin_version: w.VERSION }, R.data), R.getPlayheadTime = function() {
                      return $e(j.currentTime);
                    }, R.getStateData = function() {
                      var Ce = this.hlsjs && this.hlsjs.url, De = this.dashjs && Ir(this.dashjs.getSource === "function") && this.dashjs.getSource(), We = { player_is_paused: j.paused, player_playhead_time: $e(j.currentTime), player_width: parseInt(Ie(j, "width")), player_height: parseInt(Ie(j, "height")), player_autoplay_on: j.autoplay, player_preload_on: j.preload, player_language_code: j.lang, player_is_fullscreen: Mi() && !!(Mi().fullscreenElement || Mi().webkitFullscreenElement || Mi().mozFullScreenElement || Mi().msFullscreenElement), video_poster_url: j.poster, video_source_url: Ce || De || j.currentSrc, video_source_duration: $e(j.duration), video_source_height: j.videoHeight, video_source_width: j.videoWidth }, bt = R.getPlayheadTime();
                      if (j.getStartDate && bt > 0) {
                        var wt = j.getStartDate();
                        if (wt && typeof wt.getTime == "function" && wt.getTime()) {
                          var Ke = wt.getTime();
                          if (We.player_program_time = Ke + bt, j.seekable.length > 0) {
                            var Ft = Ke + j.seekable.end(j.seekable.length - 1);
                            We.player_live_edge_program_time = Ft;
                          }
                        }
                      }
                      return We;
                    }, j.mux = j.mux || {}, j.mux.deleted = !1, j.mux.emit = function(Ce, De) {
                      w.emit(re, Ce, De);
                    };
                    var Me = function() {
                      be.error("The monitor for this video element has already been destroyed.");
                    };
                    j.mux.destroy = function() {
                      Object.keys(j.mux.listeners).forEach(function(Ce) {
                        j.removeEventListener(Ce, j.mux.listeners[Ce], !1);
                      }), delete j.mux.listeners, j.mux.destroy = Me, j.mux.swapElement = Me, j.mux.emit = Me, j.mux.addHLSJS = Me, j.mux.addDashJS = Me, j.mux.removeHLSJS = Me, j.mux.removeDashJS = Me, j.mux.deleted = !0, w.emit(re, "destroy");
                    }, j.mux.swapElement = function(Ce) {
                      var De = or(k(Ce), 3), We = De[0], bt = De[1], wt = De[2];
                      return We ? wt !== "video" && wt !== "audio" ? w.log.error("The element of `" + bt + "` was not a media element.") : (We.muxId = j.muxId, delete j.muxId, We.mux = We.mux || {}, We.mux.listeners = se()({}, j.mux.listeners), delete j.mux.listeners, Object.keys(We.mux.listeners).forEach(function(Ke) {
                        j.removeEventListener(Ke, We.mux.listeners[Ke], !1), We.addEventListener(Ke, We.mux.listeners[Ke], !1);
                      }), We.mux.swapElement = j.mux.swapElement, We.mux.destroy = j.mux.destroy, delete j.mux, void (j = We)) : w.log.error("No element was found with the `" + bt + "` query selector.");
                    }, j.mux.addHLSJS = function(Ce) {
                      w.addHLSJS(re, Ce);
                    }, j.mux.addDashJS = function(Ce) {
                      w.addDashJS(re, Ce);
                    }, j.mux.removeHLSJS = function() {
                      w.removeHLSJS(re);
                    }, j.mux.removeDashJS = function() {
                      w.removeDashJS(re);
                    }, w.init(re, R), w.emit(re, "playerready"), j.paused || (w.emit(re, "play"), j.readyState > 2 && w.emit(re, "playing")), j.mux.listeners = {}, ga.forEach(function(Ce) {
                      (Ce !== "error" || R.automaticErrorTracking) && (j.mux.listeners[Ce] = function() {
                        var De = {};
                        if (Ce === "error") {
                          if (!j.error || j.error.code === 1)
                            return;
                          De.player_error_code = j.error.code, De.player_error_message = Fi[j.error.code] || j.error.message;
                        }
                        w.emit(re, Ce, De);
                      }, j.addEventListener(Ce, j.mux.listeners[Ce], !1));
                    });
                  }(xt, A, E);
                }, xt.destroyMonitor = function(A) {
                  var E = function(w, x) {
                    return function(R) {
                      if (Array.isArray(R))
                        return R;
                    }(w) || function(R, J) {
                      var j = R == null ? null : typeof Symbol < "u" && R[Symbol.iterator] || R["@@iterator"];
                      if (j != null) {
                        var re, te, be = [], Ie = !0, $e = !1;
                        try {
                          for (j = j.call(R); !(Ie = (re = j.next()).done) && (be.push(re.value), !J || be.length !== J); Ie = !0)
                            ;
                        } catch (Me) {
                          $e = !0, te = Me;
                        } finally {
                          try {
                            Ie || j.return == null || j.return();
                          } finally {
                            if ($e)
                              throw te;
                          }
                        }
                        return be;
                      }
                    }(w, x) || function(R, J) {
                      if (R) {
                        if (typeof R == "string")
                          return Ls(R, J);
                        var j = Object.prototype.toString.call(R).slice(8, -1);
                        return j === "Object" && R.constructor && (j = R.constructor.name), j === "Map" || j === "Set" ? Array.from(R) : j === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j) ? Ls(R, J) : void 0;
                      }
                    }(w, x) || function() {
                      throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
                    }();
                  }(k(A), 1)[0];
                  E && E.mux && typeof E.mux.destroy == "function" ? E.mux.destroy() : U.error("A video element monitor for `" + A + "` has not been initialized via `mux.monitor`.");
                }, xt.addHLSJS = function(A, E) {
                  var w = $(A);
                  vi[w] ? vi[w].addHLSJS(E) : U.error("A monitor for `" + w + "` has not been initialized.");
                }, xt.addDashJS = function(A, E) {
                  var w = $(A);
                  vi[w] ? vi[w].addDashJS(E) : U.error("A monitor for `" + w + "` has not been initialized.");
                }, xt.removeHLSJS = function(A) {
                  var E = $(A);
                  vi[E] ? vi[E].removeHLSJS() : U.error("A monitor for `" + E + "` has not been initialized.");
                }, xt.removeDashJS = function(A) {
                  var E = $(A);
                  vi[E] ? vi[E].removeDashJS() : U.error("A monitor for `" + E + "` has not been initialized.");
                }, xt.init = function(A, E) {
                  ie() && E && E.respectDoNotTrack && U.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");
                  var w = $(A);
                  vi[w] = new Tu(xt, w, E);
                }, xt.emit = function(A, E, w) {
                  var x = $(A);
                  vi[x] ? (vi[x].emit(E, w), E === "destroy" && delete vi[x]) : U.error("A monitor for `" + x + "` has not been initialized.");
                }, T() !== void 0 && typeof T().addEventListener == "function" && T().addEventListener("pagehide", function(A) {
                  A.persisted || (xt.WINDOW_UNLOADING = !0);
                }, !1), xt.checkDoNotTrack = ie, xt.log = U, xt.utils = Ds, xt.events = { PLAYER_READY: "playerready", VIEW_INIT: "viewinit", VIDEO_CHANGE: "videochange", PLAY: "play", PAUSE: "pause", PLAYING: "playing", TIME_UPDATE: "timeupdate", SEEKING: "seeking", SEEKED: "seeked", REBUFFER_START: "rebufferstart", REBUFFER_END: "rebufferend", ERROR: "error", ENDED: "ended", RENDITION_CHANGE: "renditionchange", ORIENTATION_CHANGE: "orientationchange", AD_REQUEST: "adrequest", AD_RESPONSE: "adresponse", AD_BREAK_START: "adbreakstart", AD_PLAY: "adplay", AD_PLAYING: "adplaying", AD_PAUSE: "adpause", AD_FIRST_QUARTILE: "adfirstquartile", AD_MID_POINT: "admidpoint", AD_THIRD_QUARTILE: "adthirdquartile", AD_ENDED: "adended", AD_BREAK_END: "adbreakend", AD_ERROR: "aderror", REQUEST_COMPLETED: "requestcompleted", REQUEST_FAILED: "requestfailed", REQUEST_CANCELLED: "requestcanceled" };
                var Eu = xt;
              }, 655: function(f, _, v) {
                var y, T;
                function I(V) {
                  return I = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function($) {
                    return typeof $;
                  } : function($) {
                    return $ && typeof Symbol == "function" && $.constructor === Symbol && $ !== Symbol.prototype ? "symbol" : typeof $;
                  }, I(V);
                  /*!
                   * JavaScript Cookie v2.1.3
                   * https://github.com/js-cookie/js-cookie
                   *
                   * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
                   * Released under the MIT license
                   */
                }
                (function(V) {
                  var $ = !1;
                  if ((T = typeof (y = V) == "function" ? y.call(_, v, _, f) : y) === void 0 || (f.exports = T), $ = !0, I(_) === "object" && (f.exports = V(), $ = !0), !$) {
                    var k = window.Cookies, P = window.Cookies = V();
                    P.noConflict = function() {
                      return window.Cookies = k, P;
                    };
                  }
                })(function() {
                  var V = function() {
                    for (var $ = 0, k = {}; $ < arguments.length; $++) {
                      var P = arguments[$];
                      for (var L in P)
                        k[L] = P[L];
                    }
                    return k;
                  };
                  return function $(k) {
                    function P(L, O, U) {
                      var ie;
                      if (typeof document < "u") {
                        if (arguments.length > 1) {
                          if (typeof (U = V({ path: "/" }, P.defaults, U)).expires == "number") {
                            var z = new Date();
                            z.setMilliseconds(z.getMilliseconds() + 864e5 * U.expires), U.expires = z;
                          }
                          try {
                            ie = JSON.stringify(O), /^[\{\[]/.test(ie) && (O = ie);
                          } catch {
                          }
                          return O = k.write ? k.write(O, L) : encodeURIComponent(String(O)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent), L = (L = (L = encodeURIComponent(String(L))).replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)).replace(/[\(\)]/g, escape), document.cookie = [L, "=", O, U.expires ? "; expires=" + U.expires.toUTCString() : "", U.path ? "; path=" + U.path : "", U.domain ? "; domain=" + U.domain : "", U.secure ? "; secure" : ""].join("");
                        }
                        L || (ie = {});
                        for (var le = document.cookie ? document.cookie.split("; ") : [], se = /(%[0-9A-Z]{2})+/g, me = 0; me < le.length; me++) {
                          var M = le[me].split("="), ne = M.slice(1).join("=");
                          ne.charAt(0) === '"' && (ne = ne.slice(1, -1));
                          try {
                            var fe = M[0].replace(se, decodeURIComponent);
                            if (ne = k.read ? k.read(ne, fe) : k(ne, fe) || ne.replace(se, decodeURIComponent), this.json)
                              try {
                                ne = JSON.parse(ne);
                              } catch {
                              }
                            if (L === fe) {
                              ie = ne;
                              break;
                            }
                            L || (ie[fe] = ne);
                          } catch {
                          }
                        }
                        return ie;
                      }
                    }
                    return P.set = P, P.get = function(L) {
                      return P.call(P, L);
                    }, P.getJSON = function() {
                      return P.apply({ json: !0 }, [].slice.call(arguments));
                    }, P.defaults = {}, P.remove = function(L, O) {
                      P(L, "", V(O, { expires: -1 }));
                    }, P.withConverter = $, P;
                  }(function() {
                  });
                });
              }, 153: function(f, _, v) {
                var y, T = v.g !== void 0 ? v.g : typeof window < "u" ? window : {}, I = v(558);
                typeof document < "u" ? y = document : (y = T["__GLOBAL_DOCUMENT_CACHE@4"]) || (y = T["__GLOBAL_DOCUMENT_CACHE@4"] = I), f.exports = y;
              }, 48: function(f, _, v) {
                var y;
                y = typeof window < "u" ? window : v.g !== void 0 ? v.g : typeof self < "u" ? self : {}, f.exports = y;
              }, 678: function(f) {
                var _ = 9007199254740991, v = /^(?:0|[1-9]\d*)$/;
                function y(Q, F, W) {
                  switch (W.length) {
                    case 0:
                      return Q.call(F);
                    case 1:
                      return Q.call(F, W[0]);
                    case 2:
                      return Q.call(F, W[0], W[1]);
                    case 3:
                      return Q.call(F, W[0], W[1], W[2]);
                  }
                  return Q.apply(F, W);
                }
                var T, I, V = Object.prototype, $ = V.hasOwnProperty, k = V.toString, P = V.propertyIsEnumerable, L = (T = Object.keys, I = Object, function(Q) {
                  return T(I(Q));
                }), O = Math.max, U = !P.call({ valueOf: 1 }, "valueOf");
                function ie(Q, F) {
                  var W = M(Q) || function(oe) {
                    return function(ae) {
                      return function(ue) {
                        return !!ue && typeof ue == "object";
                      }(ae) && ne(ae);
                    }(oe) && $.call(oe, "callee") && (!P.call(oe, "callee") || k.call(oe) == "[object Arguments]");
                  }(Q) ? function(oe, ae) {
                    for (var ue = -1, ge = Array(oe); ++ue < oe; )
                      ge[ue] = ae(ue);
                    return ge;
                  }(Q.length, String) : [], X = W.length, Y = !!X;
                  for (var de in Q)
                    !F && !$.call(Q, de) || Y && (de == "length" || le(de, X)) || W.push(de);
                  return W;
                }
                function z(Q, F, W) {
                  var X = Q[F];
                  $.call(Q, F) && me(X, W) && (W !== void 0 || F in Q) || (Q[F] = W);
                }
                function le(Q, F) {
                  return !!(F = F == null ? _ : F) && (typeof Q == "number" || v.test(Q)) && Q > -1 && Q % 1 == 0 && Q < F;
                }
                function se(Q) {
                  var F = Q && Q.constructor;
                  return Q === (typeof F == "function" && F.prototype || V);
                }
                function me(Q, F) {
                  return Q === F || Q != Q && F != F;
                }
                var M = Array.isArray;
                function ne(Q) {
                  return Q != null && function(F) {
                    return typeof F == "number" && F > -1 && F % 1 == 0 && F <= _;
                  }(Q.length) && !function(F) {
                    var W = fe(F) ? k.call(F) : "";
                    return W == "[object Function]" || W == "[object GeneratorFunction]";
                  }(Q);
                }
                function fe(Q) {
                  var F = typeof Q;
                  return !!Q && (F == "object" || F == "function");
                }
                var pe, H = (pe = function(Q, F) {
                  if (U || se(F) || ne(F))
                    (function(X, Y, de, oe) {
                      de || (de = {});
                      for (var ae = -1, ue = Y.length; ++ae < ue; ) {
                        var ge = Y[ae];
                        z(de, ge, X[ge]);
                      }
                    })(F, function(X) {
                      return ne(X) ? ie(X) : function(Y) {
                        if (!se(Y))
                          return L(Y);
                        var de = [];
                        for (var oe in Object(Y))
                          $.call(Y, oe) && oe != "constructor" && de.push(oe);
                        return de;
                      }(X);
                    }(F), Q);
                  else
                    for (var W in F)
                      $.call(F, W) && z(Q, W, F[W]);
                }, function(Q, F) {
                  return F = O(F === void 0 ? Q.length - 1 : F, 0), function() {
                    for (var W = arguments, X = -1, Y = O(W.length - F, 0), de = Array(Y); ++X < Y; )
                      de[X] = W[F + X];
                    X = -1;
                    for (var oe = Array(F + 1); ++X < F; )
                      oe[X] = W[X];
                    return oe[F] = de, y(Q, this, oe);
                  };
                }(function(Q, F) {
                  var W = -1, X = F.length, Y = X > 1 ? F[X - 1] : void 0, de = X > 2 ? F[2] : void 0;
                  for (Y = pe.length > 3 && typeof Y == "function" ? (X--, Y) : void 0, de && function(ae, ue, ge) {
                    if (!fe(ge))
                      return !1;
                    var ee = typeof ue;
                    return !!(ee == "number" ? ne(ge) && le(ue, ge.length) : ee == "string" && ue in ge) && me(ge[ue], ae);
                  }(F[0], F[1], de) && (Y = X < 3 ? void 0 : Y, X = 1), Q = Object(Q); ++W < X; ) {
                    var oe = F[W];
                    oe && pe(Q, oe);
                  }
                  return Q;
                }));
                f.exports = H;
              }, 640: function(f, _, v) {
                var y, T;
                (function(I, V) {
                  y = function() {
                    var $ = function() {
                    }, k = "undefined", P = typeof window !== k && typeof window.navigator !== k && /Trident\/|MSIE /.test(window.navigator.userAgent), L = ["trace", "debug", "info", "warn", "error"];
                    function O(pe, H) {
                      var Q = pe[H];
                      if (typeof Q.bind == "function")
                        return Q.bind(pe);
                      try {
                        return Function.prototype.bind.call(Q, pe);
                      } catch {
                        return function() {
                          return Function.prototype.apply.apply(Q, [pe, arguments]);
                        };
                      }
                    }
                    function U() {
                      console.log && (console.log.apply ? console.log.apply(console, arguments) : Function.prototype.apply.apply(console.log, [console, arguments])), console.trace && console.trace();
                    }
                    function ie(pe) {
                      return pe === "debug" && (pe = "log"), typeof console !== k && (pe === "trace" && P ? U : console[pe] !== void 0 ? O(console, pe) : console.log !== void 0 ? O(console, "log") : $);
                    }
                    function z(pe, H) {
                      for (var Q = 0; Q < L.length; Q++) {
                        var F = L[Q];
                        this[F] = Q < pe ? $ : this.methodFactory(F, pe, H);
                      }
                      this.log = this.debug;
                    }
                    function le(pe, H, Q) {
                      return function() {
                        typeof console !== k && (z.call(this, H, Q), this[pe].apply(this, arguments));
                      };
                    }
                    function se(pe, H, Q) {
                      return ie(pe) || le.apply(this, arguments);
                    }
                    function me(pe, H, Q) {
                      var F, W = this;
                      H = H == null ? "WARN" : H;
                      var X = "loglevel";
                      function Y(ae) {
                        var ue = (L[ae] || "silent").toUpperCase();
                        if (typeof window !== k && X) {
                          try {
                            return void (window.localStorage[X] = ue);
                          } catch {
                          }
                          try {
                            window.document.cookie = encodeURIComponent(X) + "=" + ue + ";";
                          } catch {
                          }
                        }
                      }
                      function de() {
                        var ae;
                        if (typeof window !== k && X) {
                          try {
                            ae = window.localStorage[X];
                          } catch {
                          }
                          if (typeof ae === k)
                            try {
                              var ue = window.document.cookie, ge = ue.indexOf(encodeURIComponent(X) + "=");
                              ge !== -1 && (ae = /^([^;]+)/.exec(ue.slice(ge))[1]);
                            } catch {
                            }
                          return W.levels[ae] === void 0 && (ae = void 0), ae;
                        }
                      }
                      typeof pe == "string" ? X += ":" + pe : typeof pe == "symbol" && (X = void 0), W.name = pe, W.levels = { TRACE: 0, DEBUG: 1, INFO: 2, WARN: 3, ERROR: 4, SILENT: 5 }, W.methodFactory = Q || se, W.getLevel = function() {
                        return F;
                      }, W.setLevel = function(ae, ue) {
                        if (typeof ae == "string" && W.levels[ae.toUpperCase()] !== void 0 && (ae = W.levels[ae.toUpperCase()]), !(typeof ae == "number" && ae >= 0 && ae <= W.levels.SILENT))
                          throw "log.setLevel() called with invalid level: " + ae;
                        if (F = ae, ue !== !1 && Y(ae), z.call(W, ae, pe), typeof console === k && ae < W.levels.SILENT)
                          return "No console available for logging";
                      }, W.setDefaultLevel = function(ae) {
                        H = ae, de() || W.setLevel(ae, !1);
                      }, W.resetLevel = function() {
                        W.setLevel(H, !1), function() {
                          if (typeof window !== k && X) {
                            try {
                              return void window.localStorage.removeItem(X);
                            } catch {
                            }
                            try {
                              window.document.cookie = encodeURIComponent(X) + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
                            } catch {
                            }
                          }
                        }();
                      }, W.enableAll = function(ae) {
                        W.setLevel(W.levels.TRACE, ae);
                      }, W.disableAll = function(ae) {
                        W.setLevel(W.levels.SILENT, ae);
                      };
                      var oe = de();
                      oe == null && (oe = H), W.setLevel(oe, !1);
                    }
                    var M = new me(), ne = {};
                    M.getLogger = function(pe) {
                      if (typeof pe != "symbol" && typeof pe != "string" || pe === "")
                        throw new TypeError("You must supply a name when creating a logger.");
                      var H = ne[pe];
                      return H || (H = ne[pe] = new me(pe, M.getLevel(), M.methodFactory)), H;
                    };
                    var fe = typeof window !== k ? window.log : void 0;
                    return M.noConflict = function() {
                      return typeof window !== k && window.log === M && (window.log = fe), M;
                    }, M.getLoggers = function() {
                      return ne;
                    }, M.default = M, M;
                  }, (T = y.call(_, v, _, f)) === void 0 || (f.exports = T);
                })();
              }, 375: function(f, _) {
                var v = Object.prototype.hasOwnProperty;
                function y(I) {
                  try {
                    return decodeURIComponent(I.replace(/\+/g, " "));
                  } catch {
                    return null;
                  }
                }
                function T(I) {
                  try {
                    return encodeURIComponent(I);
                  } catch {
                    return null;
                  }
                }
                _.stringify = function(I, V) {
                  V = V || "";
                  var $, k, P = [];
                  for (k in typeof V != "string" && (V = "?"), I)
                    if (v.call(I, k)) {
                      if (($ = I[k]) || $ != null && !isNaN($) || ($ = ""), k = T(k), $ = T($), k === null || $ === null)
                        continue;
                      P.push(k + "=" + $);
                    }
                  return P.length ? V + P.join("&") : "";
                }, _.parse = function(I) {
                  for (var V, $ = /([^=?#&]+)=?([^&]*)/g, k = {}; V = $.exec(I); ) {
                    var P = y(V[1]), L = y(V[2]);
                    P === null || L === null || P in k || (k[P] = L);
                  }
                  return k;
                };
              }, 558: function() {
              } }, d = {};
              function h(f) {
                var _ = d[f];
                if (_ !== void 0)
                  return _.exports;
                var v = d[f] = { exports: {} };
                return l[f].call(v.exports, v, v.exports, h), v.exports;
              }
              return h.n = function(f) {
                var _ = f && f.__esModule ? function() {
                  return f.default;
                } : function() {
                  return f;
                };
                return h.d(_, { a: _ }), _;
              }, h.d = function(f, _) {
                for (var v in _)
                  h.o(_, v) && !h.o(f, v) && Object.defineProperty(f, v, { enumerable: !0, get: _[v] });
              }, h.g = function() {
                if (typeof globalThis == "object")
                  return globalThis;
                try {
                  return this || new Function("return this")();
                } catch {
                  if (typeof window == "object")
                    return window;
                }
              }(), h.o = function(f, _) {
                return Object.prototype.hasOwnProperty.call(f, _);
              }, h(80);
            }();
          }, o.exports = u();
        }, 855: function(o) {
          o.exports = i;
        } }, e = {};
        function a(o) {
          var u = e[o];
          if (u !== void 0)
            return u.exports;
          var l = e[o] = { exports: {} };
          return r[o](l, l.exports, a), l.exports;
        }
        a.n = function(o) {
          var u = o && o.__esModule ? function() {
            return o.default;
          } : function() {
            return o;
          };
          return a.d(u, { a: u }), u;
        }, a.d = function(o, u) {
          for (var l in u)
            a.o(u, l) && !a.o(o, l) && Object.defineProperty(o, l, { enumerable: !0, get: u[l] });
        }, a.g = function() {
          if (typeof globalThis == "object")
            return globalThis;
          try {
            return this || new Function("return this")();
          } catch {
            if (typeof window == "object")
              return window;
          }
        }(), a.o = function(o, u) {
          return Object.prototype.hasOwnProperty.call(o, u);
        }, a.r = function(o) {
          typeof Symbol < "u" && Symbol.toStringTag && Object.defineProperty(o, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(o, "__esModule", { value: !0 });
        };
        var s = {};
        return function() {
          a.r(s), a.d(s, { register: function() {
            return Q;
          } });
          var o = a(48), u = a.n(o), l = a(855), d = a.n(l), h = a(961), f = a.n(h), _ = f().utils.secondsToMs;
          function v(F, W) {
            var X = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : [], Y = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : [], de = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : function() {
              return {};
            }, oe = !1;
            F.on("adstart", function() {
              oe = !0;
            }), F.on("adend", function() {
              oe = !1;
            }), F.on("adserror", function() {
              oe = !1;
            });
            var ae = function() {
              var ue = _(W.currentTime()), ge = function _e() {
                var xe = f().utils.now(), Le = _(W.currentTime());
                if (oe) {
                  if (Le > ue) {
                    var je = de();
                    je.viewer_time = xe - Math.max(0, Le - ue), W.off("timeupdate", _e), F.mux.emit("adplaying", je);
                  }
                } else
                  W.off("timeupdate", _e);
              };
              W.on("timeupdate", ge);
              var ee = function _e() {
                W.off("timeupdate", ge), X.forEach(function(xe) {
                  W.off(xe, _e);
                });
              };
              X.forEach(function(_e) {
                W.on(_e, ee);
              });
            };
            Y.forEach(function(ue) {
              W.on(ue, ae);
            });
          }
          function y(F) {
            if (typeof F != "string")
              return !1;
            var W = F.split(".").map(function(de) {
              return parseInt(de);
            }), X = W[0], Y = W[1];
            return X > 2 || X === 2 && Y >= 3;
          }
          var T = f().utils.manifestParser;
          function I(F, W) {
            return function(X) {
              if (Array.isArray(X))
                return X;
            }(F) || function(X, Y) {
              var de = X == null ? null : typeof Symbol < "u" && X[Symbol.iterator] || X["@@iterator"];
              if (de != null) {
                var oe, ae, ue = [], ge = !0, ee = !1;
                try {
                  for (de = de.call(X); !(ge = (oe = de.next()).done) && (ue.push(oe.value), !Y || ue.length !== Y); ge = !0)
                    ;
                } catch (_e) {
                  ee = !0, ae = _e;
                } finally {
                  try {
                    ge || de.return == null || de.return();
                  } finally {
                    if (ee)
                      throw ae;
                  }
                }
                return ue;
              }
            }(F, W) || function(X, Y) {
              if (!!X) {
                if (typeof X == "string")
                  return V(X, Y);
                var de = Object.prototype.toString.call(X).slice(8, -1);
                if (de === "Object" && X.constructor && (de = X.constructor.name), de === "Map" || de === "Set")
                  return Array.from(X);
                if (de === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(de))
                  return V(X, Y);
              }
            }(F, W) || function() {
              throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
            }();
          }
          function V(F, W) {
            (W == null || W > F.length) && (W = F.length);
            for (var X = 0, Y = new Array(W); X < W; X++)
              Y[X] = F[X];
            return Y;
          }
          var $ = f().utils, k = $.assign, P = $.secondsToMs;
          function L(F, W, X) {
            var Y = 0;
            return function() {
              var de, oe = W.readyState;
              if (oe >= 2) {
                if (Y = Y || f().utils.now(), oe !== 4)
                  return;
                var ae = F();
                if (W.status >= 200 && W.status < 300) {
                  var ue = ae.mux.utils.extractHostnameAndDomain, ge = ae.mux.utils.headersStringToObject, ee = f().utils.now(), _e = W.responseType === "arraybuffer" ? W.response.byteLength : W.responseText.length, xe = I(ue(W.responseURL), 1)[0], Le = ge(W.getAllResponseHeaders ? W.getAllResponseHeaders() : ""), je = function(ft) {
                    var Ue = ft["content-type"];
                    return Ue ? Ue.match(/^audio\/mpegurl/i) ? "manifest" : Ue.match(/^audio.*/i) ? "audio" : Ue.match(/^video.*/) ? "video" : Ue.match(/^application\/x-mpegurl/i) || Ue.match(/^application\/vnd.apple.mpegurl/i) || Ue.match(/^application\/dash+xml/i) ? "manifest" : "unknown" : "unknown";
                  }(Le), Xe = { request_start: X, request_response_start: Y, request_response_end: ee, request_bytes_loaded: _e, request_hostname: xe, request_response_headers: Le, request_type: je };
                  if (je === "manifest") {
                    var Je, mt, dt, gt, ke, ot, at, Ne = (de = W.responseText, new T(de));
                    if (Ne) {
                      Je = Ne.partTargetDuration, mt = Ne.targetDuration, dt = Ne.segments;
                      var Qe = Ne.serverControl;
                      gt = Qe.partHoldBack, ke = Qe.holdBack, at = Ne.sessionData;
                      var Be = dt[dt.length - 1];
                      Be && Be.dateTimeObject && (ot = Be.dateTimeObject.getTime() + P(Be.duration)), Xe = k(Xe, { video_holdback: ke && P(ke), video_part_holdback: gt && P(gt), video_part_target_duration: Je && P(Je), video_target_duration: mt && P(mt), player_manifest_newest_program_time: ot }), at && (Xe = k(Xe, at));
                    }
                  }
                  ae.mux.emit("requestcompleted", Xe);
                } else
                  ae.mux.emit("requestfailed");
              }
            };
          }
          function O(F, W) {
            var X, Y = function(de) {
              return function(oe) {
                var ae = f().utils.now();
                try {
                  de(oe);
                } catch {
                }
                try {
                  oe.onreadystatechange = function(ue, ge, ee) {
                    var _e = L(F, ue, ge);
                    return function() {
                      try {
                        _e();
                      } catch {
                      }
                      try {
                        ee();
                      } catch {
                      }
                    };
                  }(oe, ae, oe.onreadystatechange || function() {
                  });
                } catch {
                }
              };
            };
            W.beforeRequest = (X = W.beforeRequest || function(de) {
              return de;
            }, function(de) {
              var oe = X(de);
              return oe.beforeSend = Y(oe.beforeSend || function() {
              }), oe;
            });
          }
          var U = function(F) {
            var W, X = function(Y) {
              for (var de, oe = Y.textTracks(), ae = 0; ae < oe.length; ae++)
                oe[ae].label === "segment-metadata" && (de = oe[ae]);
              return de;
            }(F);
            X && X.on && X.on("cuechange", function() {
              try {
                var Y = F.tech({ IWillNotUseThisInPlugins: !0 }), de = (Y.vhs || Y.hls).playlists.media().attributes.BANDWIDTH;
                W !== de && F.mux.emit("renditionchange", { video_source_bitrate: de }), W = de;
              } catch (oe) {
                F.mux && F.mux.log && F.mux.log.warn && F.mux.log.warn("Cannot retrieve BANDWIDTH information from player: ".concat(oe));
              }
            });
          };
          function ie(F, W) {
            return function(X) {
              if (Array.isArray(X))
                return X;
            }(F) || function(X, Y) {
              var de = X == null ? null : typeof Symbol < "u" && X[Symbol.iterator] || X["@@iterator"];
              if (de != null) {
                var oe, ae, ue = [], ge = !0, ee = !1;
                try {
                  for (de = de.call(X); !(ge = (oe = de.next()).done) && (ue.push(oe.value), !Y || ue.length !== Y); ge = !0)
                    ;
                } catch (_e) {
                  ee = !0, ae = _e;
                } finally {
                  try {
                    ge || de.return == null || de.return();
                  } finally {
                    if (ee)
                      throw ae;
                  }
                }
                return ue;
              }
            }(F, W) || function(X, Y) {
              if (!!X) {
                if (typeof X == "string")
                  return z(X, Y);
                var de = Object.prototype.toString.call(X).slice(8, -1);
                if (de === "Object" && X.constructor && (de = X.constructor.name), de === "Map" || de === "Set")
                  return Array.from(X);
                if (de === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(de))
                  return z(X, Y);
              }
            }(F, W) || function() {
              throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
            }();
          }
          function z(F, W) {
            (W == null || W > F.length) && (W = F.length);
            for (var X = 0, Y = new Array(W); X < W; X++)
              Y[X] = F[X];
            return Y;
          }
          var le = /* @__PURE__ */ new Map(), se = f().log, me = f().utils.assign, M = f().utils.safeCall, ne = f().utils.getComputedStyle, fe = f().utils.secondsToMs, pe = ["loadstart", "pause", "play", "playing", "seeking", "seeked", "timeupdate", "ratechange", "stalled", "waiting", "error", "ended"];
          function H(F) {
            var W = F;
            return function(X) {
              if (W.IS_IE8)
                return !1;
              var Y = this, de = Y.id();
              (X = me({ automaticErrorTracking: !0 }, X)).data = me({ player_software_name: "Video.js", player_software_version: W.VERSION || "< 4.11", player_mux_plugin_name: "videojs-mux", player_mux_plugin_version: "4.8.1" }, X.data), X.getPlayheadTime = function() {
                return fe(Y.currentTime());
              }, X.getStateData = function() {
                var ee = M(Y, "videoHeight"), _e = M(Y, "videoWidth");
                if (_e === void 0 || ee === void 0) {
                  var xe = Y.el().firstChild;
                  xe && xe.nodeName.toUpperCase() === "VIDEO" && (ee = xe.videoHeight, _e = xe.videoWidth);
                }
                return { player_is_paused: M(Y, "paused"), player_is_fullscreen: M(Y, "isFullscreen"), player_autoplay_on: !!M(Y, "autoplay"), player_preload_on: M(Y, "preload"), player_width: ne(Y.el(), "width"), player_height: ne(Y.el(), "height"), player_language_code: M(Y, "language"), video_poster_url: M(Y, "poster"), video_source_url: M(Y, "currentSrc"), video_source_mime_type: M(Y, "currentType") && M(Y, "currentType").toLowerCase(), video_source_duration: fe(M(Y, "duration") || 0), video_source_is_live: Y.duration() === 1 / 0, video_source_height: ee, video_source_width: _e };
              }, Y.mux = function() {
                se.error("[videojs-mux] The plugin was initialized more than once.");
              }, Y.mux.emit = function(ee, _e) {
                f().emit(de, ee, _e);
              }, Y.mux.addHLSJS = function(ee) {
                f().addHLSJS(de, ee);
              }, Y.mux.log = se, Y.mux.utils = f().utils, f().init(de, X);
              var oe = !1, ae = function() {
                oe || Y.mux.emit("playerready"), oe = !0;
              };
              Y.ready(function() {
                Y.addClass("vjs-mux"), u().setTimeout(ae, 0);
              });
              var ue = !1;
              Y.one("play", ae), pe.forEach(function(ee) {
                (ee !== "error" || X.automaticErrorTracking) && Y.on(ee, function() {
                  if (!ue) {
                    var _e = {};
                    if (ee === "error") {
                      var xe = M(Y, "error");
                      if (xe && xe.code === 1)
                        return;
                      _e.player_error_code = xe && xe.code, _e.player_error_message = xe && xe.message;
                    }
                    Y.mux.emit(ee, _e);
                  }
                });
              });
              var ge = !1;
              Y.on("play", function() {
                ge = !0;
              }), Y.on("pause", function() {
                ge = !1;
              }), Y.on("adstart", function() {
                ue = !0, ge && Y.mux.emit("pause"), Y.mux.emit("adbreakstart");
              }), Y.on("adend", function() {
                Y.mux.emit("adbreakend"), ue = !1, M(Y, "paused") || (Y.mux.emit("play"), ge = !0, Y.onceux && Y.mux.emit("playing"));
              }), Y.ima && function(ee) {
                var _e, xe, Le, je, Xe, Je, mt = function(ke) {
                  var ot = typeof (ke = ke || {}).getAdData == "function" ? ke.getAdData() : {}, at = typeof ke.getAd == "function" ? ke.getAd() : {}, Ne = typeof at.getMediaUrl == "function" ? at.getMediaUrl() : ot.mediaUrl, Qe = ee.ima.settings || {}, Be = {};
                  return Ne && (Be.ad_asset_url = Ne), Qe.adTagUrl && (Be.ad_tag_url = Qe.adTagUrl), Be;
                };
                try {
                  var dt = window.google.ima.AdEvent.Type;
                  _e = dt.LOADED, xe = dt.STARTED, Le = dt.COMPLETE, je = dt.PAUSED, Xe = dt.RESUMED, Je = dt.SKIPPED;
                } catch {
                  _e = "loaded", xe = "start", Le = "complete", je = "pause", Xe = "resume", Je = "skip";
                }
                var gt = 0;
                ee.mux.triggerAdRequest = function() {
                  gt++, ee.mux.emit("adrequest", mt());
                }, ee.on("adsready", function() {
                  var ke = ee.ima.addEventListener || function() {
                  };
                  ke(_e, function(ot) {
                    var at = mt(ot);
                    gt > 0 && (gt--, ee.mux.emit("adresponse", at)), ee.mux.emit("adplay", at);
                  }), ke(xe, function(ot) {
                    var at = mt(ot);
                    ee.mux.emit("adplaying", at);
                  }), ke(Xe, function(ot) {
                    var at = mt(ot);
                    ee.mux.emit("adplay", at), ee.mux.emit("adplaying", at);
                  }), ke(je, function(ot) {
                    var at = mt(ot);
                    ee.mux.emit("adpause", at);
                  }), ke(Le, function(ot) {
                    var at = mt(ot);
                    ee.mux.emit("adended", at);
                  }), ke(Je, function(ot) {
                    var at = mt(ot);
                    ee.mux.emit("adended", at);
                  }), ee.on("adserror", function() {
                    gt > 0 && (gt--, ee.mux.emit("adresponse")), ee.mux.emit("aderror");
                  });
                });
              }(Y), Y.onceux && function(ee) {
                v(ee, ee, ["onceux-linearad-pause", "onceux-linearad-skipped", "onceux-linearad-complete", "adserror"], ["adstart", "onceux-linearad-resume"]), ee.on("adstart", function() {
                  ee.mux.emit("adplay");
                }), ee.on("onceux-linearad-start", function(_e) {
                  _e.linearAd && _e.linearAd.index > 0 && (ee.mux.emit("adplay"), ee.mux.emit("adplaying"));
                }), ee.on("onceux-linearad-resume", function() {
                  ee.mux.emit("adplay");
                }), ee.on("onceux-linearad-pause", function() {
                  ee.mux.emit("adpause");
                }), ee.on("onceux-linearad-complete", function() {
                  ee.mux.emit("adended");
                }), ee.on("onceux-linearad-skipped", function() {
                  ee.mux.emit("adended");
                });
              }(Y), Y.ima3 && typeof Y.ima3.ready == "function" && function(ee) {
                var _e = function() {
                  var je = ee.ima3.currentAd, Xe = ee.ima3.settings, Je = {};
                  return je && (Je.ad_asset_url = je.mediaUrl), Xe && (Je.ad_tag_url = Xe.serverUrl), Je;
                };
                if (y(ee.ima3.version)) {
                  var xe = 0, Le = function() {
                    xe > 0 && (xe--, ee.mux.emit("adresponse", _e()));
                  };
                  ee.on("ads-request", function() {
                    xe++, ee.mux.emit("adrequest", _e());
                  }), ee.on("ads-load", function() {
                    Le(), ee.mux.emit("adplay", _e());
                  }), ee.on("adserror", function() {
                    Le(), ee.mux.emit("aderror");
                  }), ee.on("ads-play", function() {
                    ee.mux.emit("adplay", _e());
                  }), ee.on("ads-pause", function() {
                    ee.mux.emit("adpause", _e());
                  }), ee.on("ads-ad-ended", function() {
                    ee.mux.emit("adended", _e());
                  });
                }
                ee.ima3.ready(function() {
                  ee.ima3.adPlayer ? (y(ee.ima3.version) || (ee.ima3.adPlayer.on("play", function() {
                    ee.mux.emit("adplay");
                  }), ee.ima3.adPlayer.on("pause", function() {
                    ee.mux.emit("adpause");
                  }), ee.ima3.adPlayer.on("ended", function() {
                    ee.mux.emit("adended");
                  })), v(ee, ee.ima3.adPlayer, ["pause", "ended", "adserror"], ["play"], _e)) : (ee.mux.log("Legacy IMA3 plugin found, ad events may not track correctly."), ee.on("ads-ad-started", function() {
                    ee.mux.emit("adplaying", _e());
                  }), ee.on("ads-play", function() {
                    ee.mux.emit("adplaying", _e());
                  }));
                });
              }(Y), Y.FreeWheelPlugin && Y.FreeWheelPlugin.VERSION && function(ee) {
                var _e = function(xe) {
                  var Le = ee.FreeWheelPlugin, je = {};
                  switch (xe) {
                    case "adplay":
                    case "adplaying":
                    case "adpause":
                      je.ad_asset_url = ee.currentSrc();
                  }
                  return Le && (je.ad_tag_url = Le.tech.toLowerCase() === "html5" ? Le.settings.Html5.serverUrl : Le.settings.Flash.serverUrl), je;
                };
                ee.on("ads-request", function() {
                  ee.mux.emit("adrequest", _e("adrequest"));
                }), ee.on("ads-load", function() {
                  ee.mux.emit("adresponse", _e("adresponse"));
                }), ee.on("adserror", function() {
                  ee.mux.emit("aderror");
                }), ee.on("ads-ad-started", function() {
                  ee.mux.emit("adplay", _e("adplay")), ee.mux.emit("adplaying", _e("adplaying"));
                }), ee.on("ads-play", function() {
                  ee.mux.emit("adplay", _e("adplay")), ee.mux.emit("adplaying", _e("adplaying"));
                }), ee.on("ads-pause", function() {
                  ee.mux.emit("adpause", _e("adpause"));
                }), ee.on("ads-ad-ended", function() {
                  ee.mux.emit("adended", _e("adended"));
                }), ee.on("adend", function() {
                  ee.mux.emit("play");
                });
              }(Y), Y.on("dispose", function() {
                Y.mux.emit("destroy");
              });
            };
          }
          function Q(F) {
            (F.registerPlugin || F.plugin || function() {
              f().log.error("No valid method to register videojs plugin available.");
            })("mux", H(F)), function(W) {
              if (!le.get(W) && (le.set(W, "video.js ".concat(W.VERSION, " initialized")), typeof W.getTech == "function"))
                for (var X = (W.getTech("Html5") || {}).sourceHandlers, Y = W.Vhs || W.Hls, de = function(ae) {
                  var ue = X[ae], ge = ue.handleSource;
                  ue.handleSource = function(ee, _e) {
                    var xe = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
                    Y.xhr && O(function() {
                      return W(_e.el());
                    }, Y.xhr);
                    var Le = ge(ee, _e, xe);
                    if (Le && typeof Le.xhr == "function")
                      try {
                        var je = ie(W.VERSION.split("."), 2), Xe = je[0], Je = je[1];
                        Xe = parseInt(Xe), Je = parseInt(Je);
                        var mt = Xe >= 7 && Je >= 4 ? Le.player().id() : Le.player_.el_.parentNode.id;
                        U(W(mt));
                      } catch {
                      }
                    return Le;
                  };
                }, oe = 0; oe < X.length; oe++)
                  de(oe);
            }(F);
          }
          Q(d());
        }(), s;
      }();
    });
  })();
})(ow);
const lw = "youboralib", dw = "lib", cw = "js", fw = "Jordi Aguilar", hw = "6.8.28", pw = "2022-08-22", mw = "https://bitbucket.org/npaw/lib-plugin-js.git", gw = {
  name: lw,
  type: dw,
  tech: cw,
  author: fw,
  version: hw,
  built: pw,
  repo: mw
};
var tu = gw.version, vw = function() {
  Function.prototype.bind = Function.prototype.bind || function(n) {
    var t = Array.prototype.slice, i = this, r = t.call(arguments, 1);
    function e() {
      var a = i.prototype && this instanceof i;
      return i.apply(
        !a && n || this,
        r.concat(t.call(arguments))
      );
    }
    return e.prototype = i.prototype, e;
  }, Array.prototype.forEach = Array.prototype.forEach || function(n, t) {
    if (typeof n != "function")
      throw new TypeError(n + " is not a function!");
    for (var i = this.length, r = 0; r < i; r++)
      n.call(t, this[r], r, this);
  }, Math.trunc = Math.trunc || function(n) {
    return isNaN(n) ? NaN : n > 0 ? Math.floor(n) : Math.ceil(n);
  };
}, _w = vw, jv = function(n) {
  if (n == null)
    throw new TypeError("Cannot convert undefined or null to object");
  for (var t = Object(n), i = 1; i < arguments.length; i++) {
    var r = arguments[i];
    if (r != null)
      for (var e in r)
        r.hasOwnProperty(e) && (t[e] = r[e]);
  }
  return t;
}, qh = function() {
}, yw = function(n) {
  if (arguments.length > 1)
    throw Error("Second argument not supported");
  if (n === null)
    throw Error("Cannot set a null [[Prototype]]");
  if (typeof n != "object")
    throw TypeError("Argument must be an object");
  return qh.prototype = n, new qh();
}, Vh = jv, Tw = yw, Vc = function() {
};
Vc.prototype = {
  constructor: function() {
  }
};
Vc.extend = function(n, t) {
  var i = this, r;
  return n && n.hasOwnProperty("constructor") ? r = n.constructor : r = function() {
    return i.apply(this, arguments);
  }, Vh(r, i, t), r.prototype = Tw(i.prototype), n && Vh(r.prototype, n), r.prototype.constructor = r, r.__super__ = i.prototype, r;
};
var Mt = Vc, jc = function(n) {
  return Object.prototype.toString.call(n) === "[object Array]";
}, bw = Mt, jh = jc, Sw = bw.extend(
  {
    on: function(n, t) {
      if (this._listeners = this._listeners || {}, typeof t == "function")
        return this._listeners[n] = this._listeners[n] || [], this._listeners[n].push(t), this;
    },
    off: function(n, t) {
      if (this._listeners = this._listeners || {}, this._listeners[n]) {
        var i = this._listeners[n].indexOf(t);
        i !== -1 && this._listeners[n].splice(i, 1);
      }
      return this;
    },
    emit: function(n, t) {
      return this._listeners = this._listeners || {}, t = t || {}, jh(this._listeners[n]) && this._listeners[n].forEach(this._eachCallback.bind(this, n, t)), jh(this._listeners["*"]) && this._listeners["*"].forEach(this._eachCallback.bind(this, n, t)), this;
    },
    _eachCallback: function(n, t, i) {
      if (typeof i == "function") {
        var r = {
          type: n,
          data: t,
          target: this
        };
        i(r);
      }
    }
  }
), Ar = Sw, Ew = Ar, xw = jc, _t = {
  _emitter: new Ew(),
  on: function() {
    _t._emitter.on.apply(_t._emitter, arguments);
  },
  off: function() {
    _t._emitter.off.apply(_t._emitter, arguments);
  },
  emit: function() {
    _t._emitter.emit.apply(_t._emitter, arguments);
  },
  Level: {
    SILENT: 6,
    ERROR: 5,
    WARNING: 4,
    NOTICE: 3,
    DEBUG: 2,
    VERBOSE: 1
  },
  Event: {
    LOG: "log"
  },
  logLevel: 5,
  plainLogs: !1,
  report: function(n, t, i) {
    if (typeof console < "u" && console.log && typeof document < "u") {
      t = t || _t.Level.NOTICE, i = i || "darkcyan";
      var r = {
        5: "e",
        4: "w",
        3: "n",
        2: "d",
        1: "v"
      }, e = r[t], a = "[Youbora]" + _t._getCurrentTime() + " " + e + ":";
      if (this.emit("log", { level: t, msg: n, prefix: a }), _t.logLevel <= t)
        if (_t.plainLogs || document.documentMode)
          _t._plainReport(n, a);
        else {
          var s;
          t === _t.Level.ERROR && console.error ? s = console.error : t === _t.Level.WARNING && console.warn ? s = console.warn : t === _t.Level.DEBUG && console.debug ? s = console.debug : s = console.log, a = "%c" + a, xw(n) ? (n.splice(0, 0, a, "color: " + i), s.apply(console, n)) : s.call(console, a, "color: " + i, n);
        }
    }
  },
  _getCurrentTime: function() {
    var n = new Date(), t = ("0" + n.getDate()).slice(-2), i = ("0" + n.getMinutes()).slice(-2), r = ("0" + n.getSeconds()).slice(-2), e = ("00" + n.getMilliseconds()).slice(-3);
    return "[" + t + ":" + i + ":" + r + "." + e + "]";
  },
  _plainReport: function(n, t) {
    if (n instanceof Array)
      for (var i in n)
        _t._plainReport(n[i], t);
    else
      typeof n == "string" ? console.log(t + " " + n) : (console.log(t + " <next line>"), console.log(n));
  },
  error: function() {
    _t.report([].slice.call(arguments), _t.Level.ERROR, "darkred");
  },
  warn: function() {
    _t.report([].slice.call(arguments), _t.Level.WARNING, "darkorange");
  },
  notice: function() {
    _t.report([].slice.call(arguments), _t.Level.NOTICE, "darkgreen");
  },
  debug: function() {
    _t.report([].slice.call(arguments), _t.Level.DEBUG, "indigo");
  },
  verbose: function() {
    _t.report([].slice.call(arguments), _t.Level.VERBOSE, "navy");
  },
  loadLevelFromUrl: function() {
    typeof window < "u" && window.location && this._parseLevelFromUrl(window.location.search);
  },
  _parseLevelFromUrl: function(n) {
    if (n) {
      var t = /\?.*&*youbora-debug=(.+)/i.exec(n);
      t !== null && (_t.logLevel = t[1]);
      var i = /\?.*&*youbora-debug=plain/i.exec(n);
      i !== null && (_t.plainLogs = !0);
    }
  }
}, Pt = _t, Rn = Pt, ww = {
  stripProtocol: function(n) {
    var t = n;
    try {
      t = n.replace(/^(.*?:\/\/|\/\/)/i, "");
    } catch (i) {
      Rn.warn(i);
    }
    return t;
  },
  addProtocol: function(n, t) {
    var i = "http://localhost/";
    try {
      i = "http://" + n, t || typeof window < "u" && window.location.protocol.indexOf("https") === 0 ? i = "https://" + n : typeof window < "u" && window.location.protocol.indexOf("http") === 0 && (i = "//" + n);
    } catch (r) {
      Rn.warn(r);
    }
    return i;
  },
  parseNumber: function(n, t) {
    return !isNaN(n) && n >= 0 && n !== 1 / 0 && n !== -1 / 0 && n !== null && typeof n < "u" ? n : t;
  },
  logAllEvents: function(n, t, i) {
    try {
      if (Rn.logLevel <= Rn.Level.DEBUG) {
        i = i || function(a) {
          Rn.debug("Event: " + a.type);
        };
        var r = [
          "canplay",
          "buffering",
          "waiting",
          "ended",
          "play",
          "playing",
          "pause",
          "resume",
          "error",
          "abort",
          "seek",
          "seeking",
          "seeked",
          "stalled",
          "dispose",
          "loadeddata",
          "loadstart"
        ];
        t && (t[0] === null ? (t.shift(), r = t) : r = r.concat(t));
        for (var e = 0; e < r.length; e++)
          typeof n == "function" ? n.call(window, r[e], i) : n.on ? n.on(r[e], i) : n.addEventListener && n.addEventListener(r[e], i);
      }
    } catch (a) {
      Rn.error(a);
    }
  },
  buildRenditionString: function(n, t, i) {
    arguments.length === 1 && (i = n, n = null, t = null);
    var r = null;
    return n && t && (r = n + "x" + t), typeof i == "number" && !isNaN(i) && i >= 1 && (r ? r += "@" : r = "", i < 1e3 ? r += Math.round(i) + "bps" : i < 1e6 ? (i = Math.round(i / 1e3), r += i + "Kbps") : (i = Math.round(i / 1e4) / 100, r += i + "Mbps")), r;
  },
  buildErrorParams: function(n, t, i, r) {
    var e = {};
    return typeof n == "object" && n !== null ? e = n : (e.errorCode = n || "FAILURE", e.msg = t || e.errorCode, e.errorMetadata = i, e.errorLevel = r), e;
  },
  calculateAdViewability: function(n, t) {
    var i = !0;
    if (typeof window < "u" && n && typeof n.getBoundingClientRect == "function") {
      var r = n.getBoundingClientRect();
      if (r.top >= window.innerHeight || r.bottom <= 0 || r.right <= 0 || r.left >= window.innerWidth)
        i = !1;
      else {
        var e = Math.trunc(r.height * r.width), a = r.top > 0 ? r.top : 0, s = r.bottom > window.innerHeight ? window.innerHeight : r.bottom, o = r.left > 0 ? r.left : 0, u = r.right > window.innerWidth ? window.innerWidth : r.right, l = (u - o) * (s - a);
        i = l * 100 > e * (t || 50);
      }
    }
    return i;
  },
  getMetricsFrom: function(n, t) {
    var i = n || t;
    for (var r in i)
      if (typeof i[r] != "object" || !i[r].value) {
        var e = {};
        e.value = i[r], i[r] = e;
      }
    return i;
  },
  assign: jv,
  isArray: jc
}, pi = ww, Aw = Mt, Cw = Aw.extend({
  getCdnTraffic: function() {
    var n = null;
    if (typeof CdnBalancerStats < "u" && CdnBalancerStats.cdn)
      n = CdnBalancerStats.cdn.totalDownloadedBytes;
    else if (typeof Streamroot < "u")
      n = this._getStreamrootPeerObject("cdn", !1) || this._getStreamrootInstanceObject("cdnDownload");
    else if (typeof peer5 < "u" && peer5.getStats)
      n = peer5.getStats().totalHttpDownloaded;
    else if (typeof teltoo < "u" && teltoo.getStats) {
      var t = teltoo.getStats();
      n = t.totalReceivedBytes - t.p2pReceivedBytes;
    }
    return n;
  },
  getMultiCdnInfo: function() {
    var n = null;
    if (typeof CdnBalancerStats < "u" && CdnBalancerStats.cdn && CdnBalancerStats.cdn.cdns) {
      var t = CdnBalancerStats.p2p;
      n = {
        P2P: {
          downloaded_bytes: t.downloadedBytes,
          uploaded_bytes: t.uploadedBytes,
          downloaded_chunks: t.downloadedSegments,
          uploaded_chunks: t.uploadedSegments,
          errors: t.failedRequests ? t.failedRequests.total : 0,
          missed_downloaded_chunks: t.failedRequests ? t.failedRequests.absent : 0,
          timeout_errors: t.failedRequests ? t.failedRequests.timeout : 0,
          other_errors: t.failedRequests ? t.failedRequests.error : 0,
          late_uploaded_chunks: t.discardedUploadedSegments,
          late_uploaded_bytes: t.discardedUploadedBytes,
          late_downloaded_bytes: t.discardedDownloadedBytes,
          time: t.downloadMillis,
          active_peers: t.activePeers,
          peers: t.totalPeers
        }
      }, CdnBalancerStats.cdn.cdns.forEach(function(i) {
        n[i.name] = {
          downloaded_bytes: i.bytes,
          downloaded_chunks: i.chunks,
          errors: i.failures,
          time: i.downloadMillis
        };
      });
    }
    return n;
  },
  getSegmentDuration: function() {
    var n = null;
    return typeof CdnBalancerStats < "u" && CdnBalancerStats.segmentDuration ? CdnBalancerStats.segmentDuration : n;
  },
  getBalancerResponseId: function() {
    var n = null;
    return typeof CdnBalancerStats < "u" && CdnBalancerStats.cdn ? CdnBalancerStats.cdn.responseUUID : n;
  },
  getP2PTraffic: function() {
    var n = null;
    return typeof CdnBalancerStats < "u" && CdnBalancerStats.p2p ? n = CdnBalancerStats.p2p.downloadedBytes : typeof Streamroot < "u" ? n = this._getStreamrootPeerObject("p2p", !0) || this._getStreamrootInstanceObject("dnaDownload") : typeof peer5 < "u" && peer5.getStats ? n = peer5.getStats().totalP2PDownloaded : typeof teltoo < "u" && teltoo.getStats && (n = teltoo.getStats().p2pReceivedBytes), n;
  },
  getUploadTraffic: function() {
    var n = null;
    return typeof CdnBalancerStats < "u" && CdnBalancerStats.p2p ? n = CdnBalancerStats.p2p.uploadedBytes : typeof Streamroot < "u" ? n = this._getStreamrootPeerObject("upload", !0) || this._getStreamrootInstanceObject("dnaUpload") : typeof peer5 < "u" && peer5.getStats && (n = peer5.getStats().totalP2PUploaded), n;
  },
  getIsP2PEnabled: function() {
    var n = !1;
    if (typeof CdnBalancerStats < "u" && CdnBalancerStats.p2p)
      n = CdnBalancerStats.p2p.downloadEnabled;
    else if (typeof Streamroot < "u")
      if (Streamroot.p2pAvailable && Streamroot.peerAgents)
        for (var t in Streamroot.peerAgents)
          n = n || Streamroot.peerAgents[t].isP2PEnabled;
      else
        Streamroot.instances && Streamroot.instances.forEach(function(i) {
          n = n || i.dnaDownloadEnabled || i.dnaUploadEnabled;
        });
    else
      typeof peer5 < "u" && peer5.isEnabled ? n = peer5.isEnabled() : typeof teltoo < "u" && (n = !0);
    return n;
  },
  _getStreamrootPeerObject: function(n, t) {
    var i = null;
    if (Streamroot.p2pAvailable && Streamroot.peerAgents)
      for (var r in Streamroot.peerAgents) {
        var e = Streamroot.peerAgents[r];
        e.stats && (!t || e.isP2PEnabled) && (i += e.stats[n]);
      }
    return i;
  },
  _getStreamrootInstanceObject: function(n) {
    var t = null;
    return Streamroot.instances && Streamroot.instances.forEach(function(i) {
      i.stats && i.stats.currentContent && (t += i.stats.currentContent[n]);
    }), t;
  }
}), Hv = Cw, kw = Mt, Wv = kw.extend(
  {
    constructor: function() {
      this.reset();
    },
    reset: function() {
      this.startTime = 0, this.stopTime = 0, this.pauseTime = 0, this.offset = 0;
    },
    getDeltaTime: function(n) {
      var t = -1, i = new Date().getTime();
      if (this.startTime) {
        n && !this.stopTime && (this.stopTime = i);
        var r = this.pauseTime ? i - this.pauseTime : 0, e = this.stopTime ? this.stopTime : i;
        t = this.offset - r + (e - this.startTime);
      }
      return t;
    },
    start: function() {
      this.startTime = new Date().getTime(), this.stopTime = 0, this.offset = 0;
    },
    stop: function() {
      return this.pauseTime && this.resume(), this.stopTime = new Date().getTime(), this.startTime ? this.offset + (this.stopTime - this.startTime) : -1;
    },
    pause: function() {
      this.pauseTime = new Date().getTime();
    },
    resume: function() {
      this.offset -= new Date().getTime() - this.pauseTime, this.pauseTime = 0;
    },
    clone: function() {
      var n = new Wv();
      return n.startTime = this.startTime, n.stopTime = this.stopTime, n.offset = this.offset, n;
    }
  }
), da = Wv, Pw = Mt, Iw = da, Dw = Pw.extend(
  {
    constructor: function(n, t) {
      this.callback = n, this.interval = t || 5e3, this.isRunning = !1, this._timer = null, this.chrono = new Iw();
    },
    start: function() {
      this.isRunning || (this.isRunning = !0, this._setTick());
    },
    stop: function() {
      if (this.isRunning = !1, this._timer)
        try {
          clearTimeout(this._timer);
        } catch {
          typeof atv < "u" && atv.clearTimeout(this._timer);
        }
    },
    _setTick: function() {
      this.chrono.start();
      try {
        this._timer = setTimeout(function() {
          this.callback(this.chrono.stop()), this._setTick();
        }.bind(this), this.interval);
      } catch {
        typeof atv < "u" && (this._timer = atv.setTimeout(function() {
          this.callback(this.chrono.stop()), this._setTick();
        }.bind(this), this.interval));
      }
    }
  }
), Hc = Dw, Lw = {
  Preroll: "pre",
  Midroll: "mid",
  Postroll: "post"
}, Ow = Lw, Rw = {
  START: "start",
  JOIN: "join",
  PAUSE: "pause",
  RESUME: "resume",
  SEEK_BEGIN: "seek-begin",
  SEEK_END: "seek-end",
  BUFFER_BEGIN: "buffer-begin",
  BUFFER_END: "buffer-end",
  ERROR: "error",
  STOP: "stop",
  CLICK: "click",
  MANIFEST: "manifest",
  PODSTART: "break-start",
  PODSTOP: "break-stop",
  QUARTILE: "quartile",
  VIDEO_EVENT: "video-event"
}, Nw = Rw, Mw = Nw, Fw = {
  Event: Mw
}, iu = Fw, Bw = {
  NO_RESPONSE: "NO_RESPONSE",
  EMPTY: "EMPTY_RESPONSE",
  WRONG: "WRONG_RESPONSE"
}, Uw = Bw, qw = {
  DATA: "/data",
  INIT: "/init",
  START: "/start",
  JOIN: "/joinTime",
  PAUSE: "/pause",
  RESUME: "/resume",
  SEEK: "/seek",
  BUFFER: "/bufferUnderrun",
  ERROR: "/error",
  STOP: "/stop",
  PING: "/ping",
  VIDEO_EVENT: "/infinity/video/event",
  AD_INIT: "/adInit",
  AD_START: "/adStart",
  AD_JOIN: "/adJoin",
  AD_PAUSE: "/adPause",
  AD_RESUME: "/adResume",
  AD_BUFFER: "/adBufferUnderrun",
  AD_STOP: "/adStop",
  AD_CLICK: "/adClick",
  AD_ERROR: "/adError",
  AD_MANIFEST: "/adManifest",
  AD_POD_START: "/adBreakStart",
  AD_POD_STOP: "/adBreakStop",
  AD_QUARTILE: "/adQuartile",
  EVENT: "/infinity/session/event",
  SESSION_START: "/infinity/session/start",
  SESSION_STOP: "/infinity/session/stop",
  NAV: "/infinity/session/nav",
  BEAT: "/infinity/session/beat",
  OFFLINE_EVENTS: "/offlineEvents"
}, Vw = qw, jw = {
  WILL_SEND_INIT: "will-send-init",
  WILL_SEND_START: "will-send-start",
  WILL_SEND_JOIN: "will-send-join",
  WILL_SEND_PAUSE: "will-send-pause",
  WILL_SEND_RESUME: "will-send-resume",
  WILL_SEND_SEEK: "will-send-seek",
  WILL_SEND_BUFFER: "will-send-buffer",
  WILL_SEND_ERROR: "will-send-error",
  WILL_SEND_FATAL_ERROR: "will-send-fatal-error",
  WILL_SEND_STOP: "will-send-stop",
  WILL_SEND_PING: "will-send-ping",
  WILL_SEND_VIDEO_EVENT: "will-send-video-event",
  WILL_SEND_AD_START: "will-send-ad-start",
  WILL_SEND_AD_JOIN: "will-send-ad-join",
  WILL_SEND_AD_PAUSE: "will-send-ad-pause",
  WILL_SEND_AD_RESUME: "will-send-ad-resume",
  WILL_SEND_AD_BUFFER: "will-send-ad-buffer",
  WILL_SEND_AD_STOP: "will-send-ad-stop",
  WILL_SEND_AD_CLICK: "will-send-ad-click",
  WILL_SEND_AD_ERROR: "will-send-ad-error",
  WILL_SEND_AD_MANIFEST: "will-send-ad-manifest",
  WILL_SEND_AD_POD_START: "will-send-ad-break-start",
  WILL_SEND_AD_POD_STOP: "will-send-ad-break-stop",
  WILL_SEND_AD_QUARTILE: "will-send-ad-quartile",
  WILL_SEND_SESSION_START: "will-send-session-start",
  WILL_SEND_SESSION_STOP: "will-send-session-stop",
  WILL_SEND_NAV: "will-send-nav",
  WILL_SEND_BEAT: "will-send-beat",
  WILL_SEND_EVENT: "will-send-event",
  WILL_SEND_OFFLINE_EVENTS: "will-send-offline-events"
}, Hw = jw, Ww = {
  ClientSide: "csai",
  ServerSide: "ssai"
}, Gw = Ww, $w = Ow, zw = iu, Kw = Uw, Xw = Vw, Qw = Hw, Yw = Gw, Jw = {
  AdPosition: $w,
  ManifestError: Kw,
  Service: Xw,
  WillSendEvent: Qw,
  AdInsertionType: Yw,
  Adapter: zw
}, $i = Jw, Zw = Mt, cr = Pt, eA = pi, Li = Zw.extend(
  {
    constructor: function(n, t, i, r) {
      this.xhr = this.createXHR(), this.host = n || "", this.service = t || "", this.params = i || {}, this.options = eA.assign({}, Li.defaultOptions, r), this.retries = 0, this.options.cache || this.setParam("timemark", new Date().getTime());
    },
    createXHR: function() {
      var n = {};
      try {
        XMLHttpRequest ? n = new XMLHttpRequest() : n = new ActiveXObject("Microsoft.XMLHTTP");
      } catch (t) {
        cr.error(t);
      }
      return n;
    },
    getXHR: function() {
      return this.xhr;
    },
    getResponse: function() {
      return this.xhr.response;
    },
    getResponseText: function() {
      return this.xhr.responseText;
    },
    getResponseHeaders: function() {
      return this.xhr.getAllResponseHeaders();
    },
    getUrl: function() {
      return this.host + this.service + this.getParamString();
    },
    on: function(n, t, i) {
      return this.xhr.addEventListener ? this.xhr.addEventListener(n, t.bind(this, this, i)) : n === Li.Event.SUCCESS && (this.xhr.onreadystatechange = function() {
        this.xhr.readyState === 4 && t.bind(this, this, i);
      }.bind(this)), this;
    },
    off: function(n, t) {
      return this.xhr.removeEventListener(n, t), this;
    },
    getParamString: function() {
      try {
        var n = "?";
        for (var t in this.params) {
          var i = this.params[t];
          if (i !== null && typeof i == "object") {
            var r = JSON.stringify(i);
            r !== "{}" && (n += encodeURIComponent(t) + "=" + encodeURIComponent(r) + "&");
          } else
            i !== null && typeof i < "u" && i !== "" && (n += encodeURIComponent(t) + "=" + encodeURIComponent(i) + "&");
        }
        return n.slice(0, -1);
      } catch (e) {
        return cr.error(e), "";
      }
    },
    getParam: function(n) {
      return this.params[n];
    },
    setParam: function(n, t) {
      return this.params[n] = t, this;
    },
    setBody: function(n) {
      this.body = n;
    },
    send: function() {
      try {
        if (this.xhr.open(this.options.method, this.getUrl(), !0), this.options.requestHeaders)
          for (var n in this.options.requestHeaders)
            this.options.requestHeaders.hasOwnProperty(n) && this.xhr.setRequestHeader(n, this.options.requestHeaders[n]);
        if (this.options.retryAfter > 0 && this.options.maxRetries > 0) {
          var t = function() {
            if (this.retries >= this.options.maxRetries)
              cr.error('Aborting failed request "' + this.service + '". Max retries reached.');
            else {
              cr.warn('YBRequest "' + this.service + '" failed. Retry ' + (this.retries + 1) + " of " + this.options.maxRetries + " in " + this.options.retryAfter + "ms.");
              try {
                setTimeout(function() {
                  this.retries += 1, this.send();
                }.bind(this), this.options.retryAfter);
              } catch (r) {
                typeof atv < "u" ? atv.setTimeout(function() {
                  this.retries += 1, this.send();
                }.bind(this), this.options.retryAfter) : cr.error(r);
              }
            }
          };
          this.retries === 0 && this.on(Li.Event.ERROR, t.bind(this));
        }
        cr.logLevel <= cr.Level.VERBOSE && cr.verbose("XHR Req: " + this.getUrl());
        for (var i in Li._globalListeners)
          Li._globalListeners[i].forEach(function(r) {
            this.on(i, r);
          }.bind(this));
        return this.xhr.send(this.body);
      } catch (r) {
        cr.error(r);
      }
    }
  },
  {
    Event: {
      SUCCESS: "load",
      LOAD: "load",
      ERROR: "error",
      ABORT: "abort"
    },
    defaultOptions: {
      method: "GET",
      requestHeaders: {},
      maxRetries: 3,
      retryAfter: 5e3,
      cache: !1
    },
    _globalListeners: {},
    onEvery: function(n, t) {
      Li._globalListeners[n] = Li._globalListeners[n] || [], Li._globalListeners[n].push(t);
    },
    offEvery: function(n, t) {
      if (Li._globalListeners[n]) {
        var i = Li._globalListeners[n].indexOf(t);
        i !== -1 && Li._globalListeners[n].splice(i, 1);
      }
    }
  }
), rr = Li, tA = Ar, Gv = tA.extend(
  {
    constructor: function() {
      this._isBusy = !0, this._sendRequest = !0, this.transformName = "Transform";
    },
    parse: function(n) {
    },
    isBlocking: function(n) {
      return this._isBusy;
    },
    done: function() {
      this._isBusy = !1, this.emit(Gv.Event.DONE);
    },
    hasToSend: function(n) {
      return this._sendRequest;
    },
    getState: function() {
      return this._sendRequest ? this._isBusy ? this.STATE_BLOCKED : this.STATE_NO_BLOCKED : this.STATE_OFFLINE;
    }
  },
  {
    STATE_OFFLINE: 2,
    STATE_BLOCKED: 1,
    STATE_NO_BLOCKED: 0,
    Event: {
      DONE: "done"
    }
  }
), Br = Gv, iA = Mt, Hh = Pt, Ju = rr, Xr = Br, rA = iA.extend(
  {
    constructor: function(n) {
      this.transforms = [], this.pluginRef = n, this._requests = [];
    },
    sendRequest: function(n, t, i) {
      n && (typeof t == "function" && n.on(Ju.Event.SUCCESS, t, i), this._registerRequest(n));
    },
    buildRequest: function(n, t, i, r) {
      i = i || {};
      var e = new Ju(n, t, i);
      typeof r == "function" && e.on(Ju.Event.SUCCESS, r), this._registerRequest(e);
    },
    addTransform: function(n) {
      n.parse && n.isBlocking ? (this.transforms.push(n), n.on(Xr.Event.DONE, this._processRequests.bind(this))) : Hh.warn(n + " is not a valid RequestTransform.");
    },
    removeTransform: function(n) {
      var t = this.transforms.indexOf(n);
      t !== -1 ? this.transforms.splice(t, 1) : Hh.warn("Trying to remove unexisting Transform '" + n + "'.");
    },
    _registerRequest: function(n) {
      if (this.pluginRef) {
        var t = this.pluginRef.options;
        t.authToken && (n.options.requestHeaders.Authorization = t.authType + " " + t.authToken);
      }
      this._requests.push(n), this._processRequests();
    },
    _processRequests: function() {
      var n = this._requests;
      this._requests = [];
      for (var t = []; n.length; ) {
        var i = n.shift(), r = this._transform(i);
        r === Xr.STATE_NO_BLOCKED ? (this.pluginRef && (i.host = this.pluginRef.getHost()), i.send()) : r === Xr.STATE_BLOCKED && t.push(i);
      }
      for (; t.length; )
        this._requests.push(t.shift());
    },
    _transform: function(n) {
      var t = Xr.STATE_NO_BLOCKED;
      return this.transforms.forEach(function(i) {
        if (i.isBlocking(n)) {
          t = Xr.STATE_BLOCKED;
          return;
        } else
          i.parse(n);
        i.getState() === Xr.STATE_OFFLINE && (t = Xr.STATE_OFFLINE);
      }), t;
    }
  }
), Wc = rA, Zu = rr, Wh = Br, zs = Pt, nA = pi, Ui = $i, ro = Wh.extend(
  {
    constructor: function(n, t) {
      Wh.prototype.constructor.apply(this, arguments), this.response = {}, this._viewIndex = new Date().getTime(), this._session = t, this._httpSecure = n.options["app.https"], this._plugin = n, this.transformName = "View";
    },
    init: function() {
      if (this._plugin.options && this._plugin.options.offline)
        return this.response.host = "OFFLINE", this.response.code = "OFFLINE", this.response.pingTime = 60, this.response.beatTime = 60, this.done(), null;
      if (this._plugin.storage.isEnabled()) {
        var n = new Date().getTime();
        if (n < this._plugin.sessionExpire + (Number(this._plugin.getDataTime()) || 0) && this._plugin.getStoredData())
          return this.setData(this._plugin.getStoredData()), null;
      }
      var t = Ui.Service.DATA, i = {
        outputformat: "json"
      };
      i = this._plugin.requestBuilder.buildParams(i, t), i !== null && (zs.notice(t + " " + i.system), i.system === "nicetest" && zs.error(
        "No accountCode has been set. Please set your accountCode inside plugin's options."
      ), new Zu(this._plugin.getHost(), t, i).on(Zu.Event.SUCCESS, this._receiveData.bind(this)).on(Zu.Event.ERROR, this._failedData.bind(this)).send());
    },
    setData: function(n) {
      try {
        var t = JSON.parse(n);
        this._plugin.options["parse.fdsResponseHost"] && (n = n.replace(t.q.h, this._plugin.options["parse.fdsResponseHost"](t.q.h)), t = JSON.parse(n)), this.response.msg = n, this.response.host = nA.addProtocol(t.q.h, this._httpSecure), this.response.code = t.q.c, this.response.pingTime = t.q.pt || 5, this.response.beatTime = t.q.i && t.q.i.bt || 30, this.response.sessionExpire = t.q.i && t.q.i.exp || 300, this._plugin.storage.setLocal("sessionExpire", this.response.sessionExpire), this.done();
      } catch {
        zs.error("Fastdata response is invalid.");
      }
    },
    _receiveData: function(n, t) {
      var i = n.getResponse();
      this.setData(i);
    },
    _failedData: function(n, t) {
      zs.error("Fastdata request has failed.");
    },
    nextView: function() {
      return this._viewIndex = new Date().getTime(), this.getViewCode();
    },
    getViewCode: function() {
      return this.response.code + "_" + this._viewIndex;
    },
    getSession: function() {
      return this._session;
    },
    setSession: function(n) {
      this._session = n;
    },
    setHost: function(n) {
      this.response.host = n;
    },
    parse: function(n) {
      n.host = n.host || this.response.host, n.params.system = this._plugin.getAccountCode(), n.params.sessionRoot = n.params.sessionRoot || this.getSession(), ro.EventList.PingTime.indexOf(n.service) !== -1 && (n.params.pingTime = n.params.pingTime || this.response.pingTime), ro.EventList.Infinity.indexOf(n.service) === -1 ? n.params.code = n.params.code || this.getViewCode() : n.params.sessionId = n.params.sessionRoot, ro.EventList.CreateView.indexOf(n.service) !== -1 && (this._plugin.infinity.infinityStarted || this._plugin.storage.isEnabled() && this._plugin.storage.getLocal("infinityStarted")) && (n.params.parentId = n.params.sessionRoot, n.params.navContext = n.params.navContext || this._plugin.getContext());
    }
  },
  {
    EventList: {
      CreateView: [
        Ui.Service.START,
        Ui.Service.INIT,
        Ui.Service.ERROR
      ],
      Infinity: [
        Ui.Service.NAV,
        Ui.Service.SESSION_START,
        Ui.Service.SESSION_STOP,
        Ui.Service.EVENT,
        Ui.Service.BEAT
      ],
      PingTime: [
        Ui.Service.START,
        Ui.Service.PING
      ]
    }
  }
), $v = ro, aA = Ar, zv = aA.extend(
  {
    constructor: function(n) {
      this._realResource = null, this._lastManifest = null, this._transportFormat = null, this.iterations = 3, this._headers = n;
    },
    done: function() {
      this.iterations = 3, this.emit(zv.Event.DONE);
    },
    parse: function(n, t) {
    },
    getResource: function() {
      return this._realResource;
    },
    getTransportFormat: function() {
      return this._transportFormat;
    },
    getLastManifest: function() {
      return this._lastManifest;
    },
    shouldExecute: function(n) {
      return !0;
    }
  },
  {
    Event: {
      DONE: "done"
    }
  }
), ru = zv, sA = {
  MP4: "MP4",
  MPEG2: "TS",
  CMF: "CMF"
}, nu = sA, el = rr, oA = ru, uA = Pt, tl = nu, lA = oA.extend(
  {
    parse: function(n, t, i) {
      i = i || "";
      var r = null;
      try {
        r = /((\S*?)(\.m3u8|\.m3u|\.ts|\.m4s|\.mp4|\.cmfv)((\?|;)\S*|\n|\r|$))/i.exec(n.replaceAll(",URI=", `
`).replaceAll('"', "").replaceAll(",", `
`));
      } catch (l) {
        uA.warn("Parse HLS Regex failed", l), this.done();
      }
      if (r !== null) {
        var e = r[1].trim(), a = "", s = i.lastIndexOf("/");
        if (e.indexOf("http") !== 0 && s !== -1) {
          if (e[0] === "/" && e[1] !== "/") {
            var o = i.indexOf("/") + 1;
            o += i.substr(o, i.length).indexOf("/") + 1, o += i.substr(o, i.length).indexOf("/"), e = i.slice(0, o) + e;
          } else
            e = i.slice(0, s) + "/" + e;
          a = i.slice(0, s) + "/";
        }
        if (r[3] === ".m3u8" || r[3] === ".m3u")
          if (t)
            this._parseWithManifest(t, a, r);
          else {
            var u = new el(e, null, null, { cache: !0, requestHeaders: this._headers });
            u.on(el.Event.SUCCESS, function(l) {
              this._parseWithManifest(l, a, r);
            }.bind(this)), u.on(el.Event.ERROR, function(l) {
              this.done();
            }.bind(this)), u.send();
          }
        else {
          switch (r[3]) {
            case ".mp4":
            case ".m4s":
              this._transportFormat = tl.MP4;
              break;
            case ".ts":
              this._transportFormat = tl.MPEG2;
              break;
            case ".cmfv":
              this._transportFormat = tl.CMF;
          }
          this._realResource = e, this.done();
        }
      } else
        this.done();
    },
    _parseWithManifest: function(n, t, i) {
      this._lastManifest = n, this.parse(n.getResponseText(), null, t + i[2]);
    },
    shouldExecute: function(n) {
      var t = !0;
      if (n) {
        var i = n.getResponseText();
        t = i.indexOf("#EXTM3U") !== -1;
      }
      return t;
    }
  }
), Kv = lA, il, Gh;
function dA() {
  return Gh || (Gh = 1, il = {
    cdnName: "LEVEL3",
    parsers: [{
      element: "host+type",
      headerName: "X-WR-Diag",
      regex: /Host:(.+)\sType:(.+)/
    }],
    requestHeaders: {
      "X-WR-Diag": "host"
    },
    parseType: function(n) {
      if (n) {
        if (n.indexOf("TCP_HIT") === 0 || n.indexOf("TCP_MEM_HIT") === 0 || n.indexOf("TCP_IMS_HIT") === 0)
          return 1;
        if (n.indexOf("TCP_MISS") === 0)
          return 2;
      }
      return 0;
    }
  }), il;
}
var rl, $h;
function cA() {
  return $h || ($h = 1, rl = {
    cdnName: "CLOUDFRT",
    parsers: [{
      element: "host",
      headerName: "X-Amz-Cf-Id",
      regex: /(.+)/
    }, {
      element: "type",
      headerName: "X-Cache",
      regex: /(\S+)\s.+/
    }],
    parseType: function(n) {
      switch (n) {
        case "Hit":
          return 1;
        case "Miss":
          return 2;
        default:
          return 0;
      }
    }
  }), rl;
}
var nl, zh;
function fA() {
  return zh || (zh = 1, nl = {
    cdnName: "AKAMAI",
    parsers: [{
      element: "type+host",
      headerName: "X-Cache",
      regex: /(.+)\sfrom.+AkamaiGHost\/(.+)\).+/
    }, {
      element: "host",
      headerName: "akamai-mon-iucid-del",
      regex: /(.*)/
    }, {
      element: "type",
      headerName: "akamai-cache-status",
      regex: /(.+)\sfrom\schild/
    }],
    requestHeaders: {
      Pragma: "akamai-x-cache-on"
    },
    parseType: function(n) {
      var t = n.toLowerCase();
      return t.indexOf("hit") !== -1 ? 1 : t.indexOf("miss") !== -1 ? 2 : 0;
    }
  }), nl;
}
var al, Kh;
function hA() {
  return Kh || (Kh = 1, al = {
    cdnName: "HIGHNEGR",
    parsers: [{
      element: "host+type",
      headerName: "X-HW",
      regex: /.+,[0-9]+\.(.+)\.(.+)/
    }],
    parseType: function(n) {
      switch (n) {
        case "c":
        case "x":
          return 1;
        default:
          return 2;
      }
    }
  }), al;
}
var sl, Xh;
function pA() {
  return Xh || (Xh = 1, sl = {
    cdnName: "FASTLY",
    parsers: [{
      element: "host",
      headerName: "X-Served-By",
      regex: /([^,\s]+)$/
    }, {
      element: "type",
      headerName: "X-Cache",
      regex: /([^,\s]+)$/
    }],
    parseType: function(n) {
      switch (n) {
        case "HIT":
          return 1;
        case "MISS":
          return 2;
        default:
          return 0;
      }
    }
  }), sl;
}
var ol, Qh;
function mA() {
  return Qh || (Qh = 1, ol = {
    cdnName: "TELEFO",
    parsers: [{
      element: "host+type",
      headerName: "x-tcdn",
      regex: /Host:(.+)\sType:(.+)/
    }],
    requestHeaders: {
      "x-tcdn": "host"
    },
    parseType: function(n) {
      if (n) {
        if (n.indexOf("p") !== -1 || n.indexOf("c") !== -1)
          return 1;
        if (n.indexOf("i") !== -1 || n.indexOf("m") !== -1)
          return 2;
      }
      return 0;
    }
  }), ol;
}
var ul, Yh;
function gA() {
  return Yh || (Yh = 1, ul = {
    cdnName: "AMAZON",
    parsers: [{
      element: "host",
      headerName: "x-amz-cf-pop",
      regex: /(.+)/
    }, {
      element: "type",
      headerName: "x-cache",
      regex: /(.+)\sfrom.+/
    }],
    parseType: function(n) {
      return n.toLowerCase().indexOf("hit") !== -1 ? 1 : n.toLowerCase().indexOf("miss") !== -1 ? 2 : 0;
    }
  }), ul;
}
var ll, Jh;
function vA() {
  return Jh || (Jh = 1, ll = {
    cdnName: "EDGECAST",
    parsers: [{
      element: "host",
      headerName: "Server",
      regex: /\((.+)\/.+\)/
    }, {
      element: "type",
      headerName: "X-Cache",
      regex: /(.+)/
    }],
    parseType: function(n) {
      switch (n) {
        case "HIT":
          return 1;
        case "MISS":
        default:
          return 2;
      }
    }
  }), ll;
}
var dl, Zh;
function _A() {
  return Zh || (Zh = 1, dl = {
    parsers: [
      {
        element: "name",
        headerName: null,
        regex: /(.+)/
      },
      {
        element: "host",
        headerName: null,
        regex: /(.+)/
      }
    ]
  }), dl;
}
var cl, ep;
function yA() {
  return ep || (ep = 1, cl = {
    cdnName: "NOSOTT",
    parsers: [{
      element: "host",
      headerName: "X-NOS-Server",
      regex: /(.+)/
    }, {
      element: "type",
      headerName: "X-Cache",
      regex: /(.*)/
    }],
    parseType: function(n) {
      switch (n) {
        case "Hit":
          return 1;
        case "Miss":
          return 2;
        default:
          return 0;
      }
    }
  }), cl;
}
var TA = Ar, tp = Pt, bA = pi, fl = rr, kt = TA.extend(
  {
    constructor: function(n) {
      this._options = bA.assign({
        cdnName: null,
        parsers: [],
        requestMethod: "HEAD",
        requestHeaders: {},
        parseType: function() {
          return 0;
        }
      }, n), this._responses = {};
    },
    done: function() {
      this.emit(kt.Event.DONE);
    },
    addParser: function(n) {
      return this._options.parsers.push(n), this;
    },
    setCdnName: function(n) {
      return this._options.cdnName = n, this;
    },
    setRequestMethod: function(n) {
      return this._options.requestMethod = n, this;
    },
    setRequestHeader: function(n, t) {
      return this._options.requestHeaders[n] = t, this;
    },
    setParseType: function(n) {
      return this._options.parseType = n, this;
    },
    getParsedCdnName: function() {
      return this._cdnName;
    },
    getParsedNodeHost: function() {
      return this._cdnNodeHost;
    },
    getParsedNodeTypeString: function() {
      return this._cdnNodeTypeString;
    },
    getParsedNodeType: function() {
      return this._cdnNodeType;
    },
    getResponses: function() {
      return this._responses;
    },
    parse: function(n, t) {
      this._responses = t || {};
      var i = JSON.stringify(this._options.requestHeaders);
      this._responses[i] ? this._parseResponse(this._responses[i]) : this._requestResponse(n);
    },
    _requestResponse: function(n) {
      var t = JSON.stringify(this._options.requestHeaders), i = t !== "{}", r = new fl(n, null, null, {
        method: this._options.requestMethod,
        maxRetries: 0,
        requestHeaders: this._options.requestHeaders,
        cache: !0
      });
      r.on(fl.Event.SUCCESS, function(e) {
        this._responses[t] = e.getResponseHeaders(), this._parseResponse(this._responses[t]);
      }.bind(this)), r.on(fl.Event.ERROR, function(e) {
        i ? (this._options.requestHeaders = {}, this._requestResponse(n)) : this.done();
      }.bind(this)), r.send();
    },
    _parseResponse: function(n) {
      this._options.parsers.forEach(function(t) {
        var i = t.headerName ? t.headerName.toLowerCase() : "";
        i && n.split(`
`).forEach(function(r) {
          var e = r.indexOf(":");
          if (e !== -1) {
            var a = r.slice(0, e).toLowerCase();
            a === i && this._executeParser(t, r.slice(e + 1));
          }
        }.bind(this));
      }.bind(this)), this.done();
    },
    _executeParser: function(n, t) {
      try {
        var i = n.regex.exec(t.trim());
        if (i !== null)
          switch (this._options.cdnName && (this._cdnName = this._options.cdnName), n.element) {
            case kt.ElementType.HOST:
              this._cdnNodeHost = i[1];
              break;
            case kt.ElementType.TYPE:
              this._cdnNodeTypeString = i[1], this._cdnNodeType = this._options.parseType(this._cdnNodeTypeString);
              break;
            case kt.ElementType.HOST_AND_TYPE:
              this._cdnNodeHost = i[1], this._cdnNodeTypeString = i[2], this._cdnNodeType = this._options.parseType(this._cdnNodeTypeString);
              break;
            case kt.ElementType.TYPE_AND_HOST:
              this._cdnNodeTypeString = i[1], this._cdnNodeType = this._options.parseType(this._cdnNodeTypeString), this._cdnNodeHost = i[2];
              break;
            case kt.ElementType.NAME:
              this._cdnName = i[1].toUpperCase();
              break;
          }
      } catch {
        tp.warn("CDN parsing for " + this._options.cdnName + " could not parse header value " + t);
      }
    },
    shouldExecute: function() {
      return !0;
    }
  },
  {
    Event: {
      DONE: "done"
    },
    ElementType: {
      HOST: "host",
      TYPE: "type",
      HOST_AND_TYPE: "host+type",
      TYPE_AND_HOST: "type+host",
      NAME: "name"
    },
    _cdnConfigs: {},
    setBalancerHeaderName: function(n, t) {
      kt._cdnConfigs.Balancer.parsers[0].headerName = n, kt._cdnConfigs.Balancer.parsers[1].headerName = t;
    },
    create: function(n) {
      if (kt._cdnConfigs[n])
        return new kt(kt._cdnConfigs[n]);
      tp.warn("Tried to create an unexisting CdnParser named " + n);
    },
    add: function(n, t) {
      kt._cdnConfigs[n] = t;
    }
  }
);
kt.add("Level3", dA());
kt.add("Cloudfront", cA());
kt.add("Akamai", fA());
kt.add("Highwinds", hA());
kt.add("Fastly", pA());
kt.add("Telefonica", mA());
kt.add("Amazon", gA());
kt.add("Edgecast", vA());
kt.add("Balancer", _A());
kt.add("NosOtt", yA());
var Xv = kt, SA = Ar, EA = Pt, hl = rr, Ad = SA.extend({
  constructor: function(n) {
    this.plugin = n, this.headerName = "x-cdn";
  },
  init: function() {
    var n = null;
    this.plugin && (this.plugin.getAdapter() && this.plugin.getAdapter().getURLToParse() ? n = this.plugin.getAdapter().getURLToParse() : n = this.plugin.getResource()), this.plugin && this.plugin.getAdapter() && this.plugin.getAdapter().flags.isStarted && this._request(n);
  },
  done: function(n) {
    this.emit(Ad.Events.DONE, n);
  },
  error: function() {
    this.emit(Ad.Events.ERROR);
  },
  _successfulRequest: function(n) {
    setTimeout(this.init.bind(this), parseInt(this.plugin.options["parse.cdnTTL"]) * 1e3);
    var t = n.getResponseHeaders().split(`
`), i = null;
    for (var r in t) {
      var e = t[r], a = e.indexOf(this.headerName);
      a > -1 && (i = e.substring(a + this.headerName.length + 1, e.length - 1).replace(" ", ""));
    }
    this.done(i);
  },
  _failedRequest: function() {
    setTimeout(this.init.bind(this), parseInt(this.plugin.options["parse.cdnTTL"]) * 1e3), EA.warn("CDN switch detection request failed"), this.error();
  },
  _request: function(n) {
    var t = new hl(n, null, null, { method: "HEAD", cache: !0 });
    t.on(hl.Event.SUCCESS, this._successfulRequest.bind(this)), t.on(hl.Event.ERROR, this._failedRequest.bind(this)), t.send();
  }
}, {
  Events: {
    DONE: "done",
    ERROR: "error"
  }
}), xA = Ad, pl = rr, wA = ru, ml = Pt, gl = nu, AA = wA.extend(
  {
    parse: function(n, t) {
      if (t)
        this.parseLocation(t, n);
      else {
        var i = new pl(n, null, null, { cache: !0, requestHeaders: this._headers });
        i.on(pl.Event.SUCCESS, function(r) {
          this.parseLocation(r, n);
        }.bind(this)), i.on(pl.Event.ERROR, function(r) {
          this.done();
        }.bind(this)), i.send();
      }
    },
    parseLocation: function(n, t) {
      this.iterations--;
      var i = new RegExp(/<Location>([\s\S]+)<\/Location>/);
      try {
        this._lastManifest = n;
        var r = n.getResponseText(), e = i.exec(r);
        if (e && e[1])
          var a = this._htmlDecode(e[1].replace(`
`, ""));
        a && a !== t && this.iterations > 0 ? this.parse(a) : this.parseFinalResource(r, t);
      } catch {
        ml.warn("Dash parse failed"), this.done();
      }
    },
    _htmlDecode: function(n) {
      if (typeof document < "u" && typeof document.createElement == "function") {
        var t = document.createElement("textarea");
        return t.innerHTML = n, t.childNodes && t.childNodes.length ? t.childNodes[0].nodeValue : n;
      }
      return n;
    },
    parseFinalResource: function(n, t) {
      var i = new RegExp(/<BaseURL>[\r\n]*(.*?)[\r\n]*<\/BaseURL>/), r = new RegExp(/<SegmentURL[\s\S]*media="([^"]+)/), e = new RegExp(/<SegmentTemplate[\s\S]*media="([^"]+)/), a = null;
      try {
        a = i.exec(n) || e.exec(n) || r.exec(n), this._getManifestMetadata(n), a && a[1] && this._isFullUrl(a[1]) ? a[1].indexOf('"') > 0 ? this._realResource = a[1].substr(0, a[1].indexOf('"')).replace(`
`, "") : this._realResource = a[1].replace(`
`, "") : this._realResource = t;
      } catch {
        ml.warn("Dash manifest parse failed");
      }
      this.done();
    },
    _getManifestMetadata: function(n) {
      try {
        var t = new RegExp(/<AdaptationSet[\s\S]*mimeType="video\/([^"]+)/), i = t.exec(n), r = null;
        switch (i[1]) {
          case "mp4":
          case "m4s":
            r = gl.MP4;
            break;
          case "mp2t":
            r = gl.MPEG2;
            break;
          case "cmfv":
            r = gl.CMF;
            break;
        }
        this._transportFormat = r;
      } catch {
        ml.warn("Couldnt find the transport format");
      }
    },
    _isFullUrl: function(n) {
      return n.indexOf("http") !== -1;
    },
    shouldExecute: function(n) {
      var t = !0;
      if (n) {
        var i = n.getResponseText();
        t = i.indexOf("<MPD") !== -1;
      }
      return t;
    }
  }
), Qv = AA, vl = rr, CA = ru, kA = CA.extend(
  {
    parse: function(n, t) {
      if (t)
        this._parseWithManifest(t);
      else {
        this._realResource = n;
        var i = new vl(n, null, null, {
          cache: !0,
          requestHeaders: this._headers
        });
        i.on(vl.Event.SUCCESS, function(r) {
          this._parseWithManifest(r);
        }.bind(this)), i.on(vl.Event.ERROR, function(r) {
          this.done();
        }.bind(this)), i.send();
      }
    },
    _parseWithManifest: function(n) {
      this._lastManifest = n;
      var t = n.getResponseHeaders(), i = !1;
      n && n.xhr && n.xhr.responseURL && n.xhr.responseURL !== this._realResource ? (this._realResource = n.xhr.responseURL, this.parse(this._realResource), i = !0) : t.split(`
`).forEach(function(r) {
        r.startsWith("Location:") && (this._realResource = r.slice(10), this.parse(this._realResource), i = !0);
      }.bind(this)), i || this.done();
    }
  }
), Yv = kA, PA = Br, IA = Kv, _l = Xv, yl = xA, DA = Qv, LA = ru, OA = Yv, ip = Pt, RA = $i, Jv = PA.extend(
  {
    constructor: function(n) {
      Jv.__super__.constructor.apply(this, arguments), this._plugin = n, this._realResource = null, this._transportFormat = null, this._initResource = null, this._cdnName = null, this._cdnNodeHost = null, this._cdnNodeTypeString = null, this._cdnNodeType = null, this._responses = {}, this._isBusy = !1, this.transformName = "Resource";
    },
    getResource: function() {
      return this._realResource;
    },
    _getInitialCdnResource: function() {
      return this._realResource || this._initResource;
    },
    getTransportFormat: function() {
      return this._transportFormat;
    },
    getCdnName: function() {
      return this._cdnName;
    },
    getNodeHost: function() {
      return this._cdnNodeHost;
    },
    getNodeTypeString: function() {
      return this._cdnNodeTypeString;
    },
    getNodeType: function() {
      return this._cdnNodeType;
    },
    init: function(n) {
      if (!n) {
        this.done();
        return;
      }
      this._isBusy || (this._isBusy = !0, this._initResource = n, this._parseManifestEnabled = this._plugin.isParseManifest(), this._cdnEnabled = this._plugin.isParseCdnNode(), this._cdnList = this._plugin.getParseCdnNodeList().slice(), _l.setBalancerHeaderName(this._plugin.getParseCdnNodeNameHeader(), this._plugin.getParseNodeHeader()), this._setTimeout(), this._parseManifestEnabled ? this._isFinalUrl(this._initResource) ? (this._realResource = this._initResource, this.done()) : this.parseManifest() : this._parseCDN());
    },
    _isFinalUrl: function(n) {
      var t = [".ts", ".mp4", ".m4s", ".cmfv"];
      n = n || "";
      for (var i in t) {
        var r = t[i];
        if (n.lastIndexOf(r) === n.length - r.length)
          return !0;
      }
      return !1;
    },
    _setTimeout: function() {
      var n = function() {
        this._isBusy && (this.done(), ip.warn("ResourceTransform has exceded the maximum execution time (3s) and will be aborted."));
      }.bind(this);
      try {
        this._parseTimeout = setTimeout(n, 3e3);
      } catch (t) {
        typeof atv < "u" ? this._parseTimeout = atv.setTimeout(n, 3e3) : ip.error(t);
      }
    },
    parseManifest: function(n, t) {
      var i = this._plugin.options["parse.manifest.auth"], r = [new OA(i), new DA(i), new IA(i)];
      this._parseManifest(r, n, t || this._initResource);
    },
    _parseManifest: function(n, t, i, r) {
      if (n.length > 0) {
        var e = n[0];
        e.shouldExecute(t) ? (e.on(LA.Event.DONE, function() {
          this._parseManifest(n.slice(1, n.length), e.getLastManifest(), e.getResource(), e.getTransportFormat() || r);
        }.bind(this)), e.parse(i, t)) : this._parseManifest(n.slice(1, n.length), t, i, r);
      } else
        this._transportFormat = r, this._realResource = i, this._parseCDN();
    },
    _parseCDN: function() {
      if (this._plugin.isCdnSwitch())
        this.switchDetector = new yl(this._plugin), this.switchDetector.on(yl.Events.DONE, function(i) {
          this._cdnName = i.data, this.done();
        }.bind(this)), this.switchDetector.on(yl.Events.ERROR, function() {
          this.done();
        }.bind(this)), this.switchDetector.init();
      else if (this._cdnEnabled && this._cdnList.length > 0) {
        var n = this._cdnList.shift();
        if (this.getNodeHost())
          return;
        var t = _l.create(n);
        t ? (t.on(_l.Event.DONE, function() {
          this._responses = t.getResponses(), this._cdnName = t.getParsedCdnName(), this._cdnNodeHost = t.getParsedNodeHost(), this._cdnNodeTypeString = t.getParsedNodeTypeString(), this._cdnNodeType = t.getParsedNodeType(), this.getNodeHost() ? this.done() : this._parseCDN();
        }.bind(this)), t.parse(this._getInitialCdnResource(), this._responses)) : this._parseCDN();
      } else
        this.done();
    },
    parse: function(n) {
      if (n.service === RA.Service.START) {
        var t = this._plugin.requestBuilder.lastSent;
        t.parsedResource = n.params.parsedResource = this.getResource() || n.params.parsedResource, t.transportFormat = n.params.transportFormat = this.getTransportFormat() || n.params.transportFormat, this._cdnEnabled && (t.cdn = n.params.cdn = n.params.cdn || this.getCdnName(), t.nodeHost = n.params.nodeHost = this.getNodeHost() || n.params.nodeHost, t.nodeType = n.params.nodeType = this.getNodeType() || n.params.nodeType, t.nodeTypeString = n.params.nodeTypeString = this.getNodeTypeString() || n.params.nodeTypeString);
      }
    }
  }
), Zv = Jv, rp = Br, NA = rp.extend(
  {
    constructor: function(n, t) {
      this._sendRequest = !1, this._isBusy = !1, this.plugin = n, this.session = t, this.transformName = "Offline";
    },
    parse: function(n) {
      n && this.plugin.offlineStorage && this.plugin.offlineStorage.addEvent(n.service, n.params);
    },
    hasToSend: function(n) {
      return !1;
    },
    getState: function() {
      return rp.STATE_OFFLINE;
    }
  }
), e_ = NA, MA = Mt, FA = Pt, Cd = MA.extend({
  exists: function(n) {
    return Cd.Dictionary.hasOwnProperty(n);
  },
  getNewName: function(n) {
    var t = Cd.Dictionary[n];
    return FA.warn('The option "' + n + '" is deprecated, use "' + t + '" instead'), t;
  }
}, {
  Dictionary: {
    httpSecure: "app.https",
    username: "user.name",
    anonymousUser: "user.anonymousId",
    obfuscateIp: "user.obfuscateIp",
    userType: "user.type",
    "content.title2": "content.program",
    "background.settings.iphone": "background.settings.iOS",
    "parse.hls": "parse.manifest",
    "parse.dash": "parse.manifest",
    "parse.locationHeader": "parse.manifest",
    "extraparam.1": "content.customDimension.1",
    "extraparam.2": "content.customDimension.2",
    "extraparam.3": "content.customDimension.3",
    "extraparam.4": "content.customDimension.4",
    "extraparam.5": "content.customDimension.5",
    "extraparam.6": "content.customDimension.6",
    "extraparam.7": "content.customDimension.7",
    "extraparam.8": "content.customDimension.8",
    "extraparam.9": "content.customDimension.9",
    "extraparam.10": "content.customDimension.10",
    "extraparam.11": "content.customDimension.11",
    "extraparam.12": "content.customDimension.12",
    "extraparam.13": "content.customDimension.13",
    "extraparam.14": "content.customDimension.14",
    "extraparam.15": "content.customDimension.15",
    "extraparam.16": "content.customDimension.16",
    "extraparam.17": "content.customDimension.17",
    "extraparam.18": "content.customDimension.18",
    "extraparam.19": "content.customDimension.19",
    "extraparam.20": "content.customDimension.20",
    "ad.extraparam.1": "ad.customDimension.1",
    "ad.extraparam.2": "ad.customDimension.2",
    "ad.extraparam.3": "ad.customDimension.3",
    "ad.extraparam.4": "ad.customDimension.4",
    "ad.extraparam.5": "ad.customDimension.5",
    "ad.extraparam.6": "ad.customDimension.6",
    "ad.extraparam.7": "ad.customDimension.7",
    "ad.extraparam.8": "ad.customDimension.8",
    "ad.extraparam.9": "ad.customDimension.9",
    "ad.extraparam.10": "ad.customDimension.10"
  }
}), BA = Cd, UA = {
  HDS: "HDS",
  HLS: "HLS",
  MSS: "MSS",
  DASH: "DASH",
  RTMP: "RTMP",
  RTP: "RTP",
  RTSP: "RTSP"
}, t_ = UA, qA = Mt, VA = BA, jA = Pt, HA = nu, WA = t_, kd = qA.extend(
  {
    constructor: function(n) {
      this.enabled = !0, this.host = "a-fds.youborafds01.com", this.accountCode = "nicetest", this.authToken = null, this.authType = "Bearer", this.preventZombieViews = !0, this.offline = !1, this.referer = null, this.referral = null, this.disableCookies = !0, this.forceCookies = !1, this.disableStorage = !1, this["user.email"] = null, this["user.type"] = null, this["user.name"] = null, this["user.obfuscateIp"] = !1, this["user.anonymousId"] = null, this["user.privacyProtocol"] = null, this["parse.manifest"] = !1, this["parse.manifest.auth"] = {}, this["parse.cdnNameHeader"] = "x-cdn-forward", this["parse.cdnNodeHeader"] = "", this["parse.cdnNode"] = !1, this["parse.cdnNode.list"] = ["Akamai", "Amazon", "Cloudfront", "Level3", "Fastly", "Highwinds", "Telefonica", "Edgecast", "NosOtt"], this["parse.fdsResponseHost"] = null, this["parse.cdnSwitchHeader"] = !1, this["parse.cdnTTL"] = 60, this["network.ip"] = null, this["network.isp"] = null, this["network.connectionType"] = null, this["device.id"] = null, this["device.code"] = null, this["device.model"] = null, this["device.brand"] = null, this["device.type"] = null, this["device.name"] = null, this["device.osName"] = null, this["device.osVersion"] = null, this["device.browserName"] = null, this["device.browserVersion"] = null, this["device.browserType"] = null, this["device.browserEngine"] = null, this["device.EDID"] = null, this["device.isAnonymous"] = !1, this["content.transactionCode"] = null, this["content.resource"] = null, this["content.isLive"] = null, this["content.isLive.noSeek"] = !1, this["content.isLive.noMonitor"] = !1, this["content.title"] = null, this["content.program"] = null, this["content.duration"] = null, this["content.fps"] = null, this["content.segmentDuration"] = null, this["content.bitrate"] = null, this["content.totalBytes"] = null, this["content.sendTotalBytes"] = !1, this["content.throughput"] = null, this["content.rendition"] = null, this["content.cdn"] = null, this["content.cdnNode"] = null, this["content.cdnType"] = null, this["content.metadata"] = {}, this["content.metrics"] = {}, this["content.streamingProtocol"] = null, this["content.transportFormat"] = null, this["content.package"] = null, this["content.saga"] = null, this["content.tvShow"] = null, this["content.season"] = null, this["content.episodeTitle"] = null, this["content.channel"] = null, this["content.id"] = null, this["content.imdbId"] = null, this["content.gracenoteId"] = null, this["content.type"] = null, this["content.genre"] = null, this["content.language"] = null, this["content.autodetect.language"] = !0, this["content.subtitles"] = null, this["content.autodetect.subtitles"] = !0, this["content.contractedResolution"] = null, this["content.cost"] = null, this["content.price"] = null, this["content.playbackType"] = null, this["content.drm"] = null, this["content.encoding.videoCodec"] = null, this["content.encoding.audioCodec"] = null, this["content.encoding.codecSettings"] = null, this["content.encoding.codecProfile"] = null, this["content.encoding.containerFormat"] = null, this["ad.metadata"] = {}, this["ad.campaign"] = null, this["ad.creativeId"] = null, this["ad.provider"] = null, this["ad.resource"] = null, this["ad.title"] = null, this["ad.duration"] = null, this["ad.expectedPattern"] = null, this["ad.givenAds"] = null, this["ad.breaksTime"] = null, this["ad.expectedBreaks"] = null, this["ad.givenBreaks"] = null, this["ad.ignore"] = !1, this["ad.blockerDetected"] = null, this["app.name"] = null, this["app.releaseVersion"] = null, this["app.https"] = !1, this["background.enabled"] = !0, this["background.settings"] = null, this["background.settings.android"] = "stop", this["background.settings.iOS"] = "stop", this["background.settings.desktop"] = null, this["background.settings.tv"] = "stop", this["background.settings.playstation"] = "stop", this["smartswitch.configCode"] = null, this["smartswitch.groupCode"] = null, this["smartswitch.contractCode"] = null, this["content.customDimensions"] = {}, this["content.customDimension.1"] = null, this["content.customDimension.2"] = null, this["content.customDimension.3"] = null, this["content.customDimension.4"] = null, this["content.customDimension.5"] = null, this["content.customDimension.6"] = null, this["content.customDimension.7"] = null, this["content.customDimension.8"] = null, this["content.customDimension.9"] = null, this["content.customDimension.10"] = null, this["content.customDimension.11"] = null, this["content.customDimension.12"] = null, this["content.customDimension.13"] = null, this["content.customDimension.14"] = null, this["content.customDimension.15"] = null, this["content.customDimension.16"] = null, this["content.customDimension.17"] = null, this["content.customDimension.18"] = null, this["content.customDimension.19"] = null, this["content.customDimension.20"] = null, this["ad.customDimension.1"] = null, this["ad.customDimension.2"] = null, this["ad.customDimension.3"] = null, this["ad.customDimension.4"] = null, this["ad.customDimension.5"] = null, this["ad.customDimension.6"] = null, this["ad.customDimension.7"] = null, this["ad.customDimension.8"] = null, this["ad.customDimension.9"] = null, this["ad.customDimension.10"] = null, this.forceInit = !1, this["session.metrics"] = {}, this["session.context"] = !1, this["errors.fatal"] = [], this["errors.nonFatal"] = [], this["errors.ignore"] = [], this.linkedViewId = null, this.waitForMetadata = !1, this.pendingMetadata = [], this.setOptions(n);
    },
    setOptions: function(n, t) {
      var i = !1;
      if (t === void 0) {
        t = this, i = !0;
        var r = new VA();
      }
      if (typeof n < "u")
        for (var e in n) {
          var a = !1, s = null;
          i && (this.hasOwnProperty(e) || (r.exists(e) ? (s = r.getNewName(e), a = !0) : jA.warn('The option "' + e + '" does not exist, so it cannot be set'))), typeof t[e] == "object" && t[e] !== null && !Array.isArray(t[e]) && e === "parse.cdnNode.list" ? this.setOptions(n[e], t[e]) : a ? t[s] = n[e] : t[e] = n[e];
        }
    },
    setExtraParams: function(n) {
      var t = 20;
      if (!(typeof n != "object" || !n.length)) {
        for (n.length >= t && (n = n.slice(0, t)); n.length < t; )
          n.push(null);
        n.forEach(function(i, r) {
          this["content.customDimension." + (r + 1).toString()] = i;
        }.bind(this));
      }
    },
    setCustomDimensions: function() {
      kd.prototype.setExtraParams.apply(this, arguments);
    },
    setAdExtraParams: function(n) {
      var t = 10;
      if (!(typeof n != "object" || !n.length)) {
        for (n.length >= t && (n = n.slice(0, t)); n.length < t; )
          n.push(null);
        n.forEach(function(i, r) {
          this["ad.customDimension." + (r + 1).toString()] = i;
        }.bind(this));
      }
    },
    setAdCustomDimensions: function() {
      kd.prototype.setAdExtraParams.apply(this, arguments);
    }
  },
  {
    StreamingProtocol: WA,
    TransportFormat: HA
  }
), i_ = kd, np = Br, Ks = $i, GA = np.extend(
  {
    _services: [Ks.Service.INIT, Ks.Service.START, Ks.Service.OFFLINE_EVENTS],
    isBlocking: function(n) {
      if (this._isBusy && n != null) {
        if (this._services.indexOf(n.service) !== -1)
          this.done();
        else if (n.service === Ks.Service.ERROR)
          return !1;
      }
      return np.prototype.isBlocking.apply(this, arguments);
    }
  }
), $A = GA, zA = Mt, Xs = Pt, KA = zA.extend(
  {
    constructor: function(n, t, i, r) {
      this.prefix = n || "youbora", this.disableCookies = t, this.forceCookies = i, this.disabled = r;
    },
    isEnabled: function() {
      if (this.disabled)
        return !1;
      var n = !0;
      if (!this.forceCookies)
        try {
          localStorage.setItem(this.prefix + ".test", "true"), localStorage.removeItem(this.prefix + ".test");
        } catch {
          n = !1;
        }
      return n;
    },
    setLocal: function(n, t) {
      if (this.disabled)
        return null;
      var i = null;
      try {
        this.forceCookies || (typeof localStorage > "u" || !localStorage) && !this.disableCookies ? i = this._setCookie(this.prefix + ".local." + n, t) : i = localStorage.setItem(this.prefix + "." + n, t);
      } catch {
        Xs.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.");
      }
      return i;
    },
    getLocal: function(n) {
      return this.disabled ? null : this._localGetRemove("getItem", "_getCookie", n);
    },
    removeLocal: function(n) {
      return this.disabled ? null : this._localGetRemove("removeItem", "_removeCookie", n);
    },
    _localGetRemove: function(n, t, i) {
      var r = null;
      try {
        this.forceCookies || (typeof localStorage > "u" || !localStorage) && !this.disableCookies ? r = this[t](this.prefix + ".local." + i) : r = localStorage[n](this.prefix + "." + i);
      } catch {
        Xs.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.");
      }
      return r;
    },
    setSession: function(n, t) {
      if (this.disabled)
        return null;
      var i = null;
      try {
        this.forceCookies || (typeof sessionStorage > "u" || !sessionStorage) && !this.disableCookies ? i = this._setCookie(this.prefix + ".session." + n, t) : i = sessionStorage.setItem(this.prefix + "." + n, t);
      } catch {
        Xs.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.");
      }
      return i;
    },
    getSession: function(n) {
      return this.disabled ? null : this._sessionGetRemove("getItem", "_getCookie", n);
    },
    removeSession: function(n) {
      return this.disabled ? null : this._sessionGetRemove("removeItem", "_removeCookie", n);
    },
    _sessionGetRemove: function(n, t, i) {
      var r = null;
      try {
        this.forceCookies || (typeof sessionStorage > "u" || !sessionStorage) && !this.disableCookies ? r = this[t](this.prefix + ".session." + i) : r = sessionStorage[n](this.prefix + "." + i);
      } catch {
        Xs.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.");
      }
      return r;
    },
    getStorages: function(n) {
      return this.getSession(n) || this.getLocal(n);
    },
    setStorages: function(n, t) {
      this.setSession(n, t), this.setLocal(n, t);
    },
    removeStorages: function(n) {
      this.removeSession(n), this.removeLocal(n);
    },
    _setCookie: function(n, t) {
      if (typeof document < "u") {
        var i = ";";
        typeof location < "u" && (i += "domain=" + location.host.split(".").reverse().splice(0, 2).reverse().join(".") + ";path=/;"), document.cookie = n + "=" + t + i;
      }
    },
    _getCookie: function(n) {
      if (typeof document < "u")
        for (var t = n + "=", i = decodeURIComponent(document.cookie), r = i.split(";"), e = 0; e < r.length; e++) {
          for (var a = r[e]; a.charAt(0) === " "; )
            a = a.substring(1);
          if (a.indexOf(t) === 0)
            return a.substring(t.length, a.length);
        }
      return null;
    },
    _removeCookie: function(n) {
      this._setCookie(n, "");
    }
  }
), Gc = KA, XA = Mt, QA = Gc, YA = XA.extend({
  constructor: function() {
    this.storage = new QA("youboraOffline", !0), this.actualView = null, this.viewList = [], this.givenIds = [], this._getOldViewList();
  },
  _newView: function() {
    var n = this._getValidId();
    this.storage.setLocal(n, ""), this.viewList.push(n), this.storage.setLocal("views", this.viewList), this.actualView = n;
  },
  addEvent: function(n, t) {
    if (n === "/start" && this._newView(), n === "/init" || !this.actualView)
      return null;
    var i = '{"request":"' + n.slice(1) + '",';
    i += '"unixtime":' + Date.now() + ",";
    for (var r in t) {
      if (t[r] === void 0)
        break;
      i += '"' + r + '":', r === "code" ? i += '"CODE_PLACEHOLDER",' : r === "sessionId" ? i += '"SESSION_PLACEHOLDER",' : r === "sessionRoot" ? i += '"ROOT_PLACEHOLDER",' : typeof t[r] == "string" ? i += '"' + t[r] + '",' : typeof t[r] == "object" ? i += '"' + JSON.stringify(t[r]).replace(/"/g, '\\"') + '",' : i += t[r] + ",";
    }
    i = i.slice(0, -1), i += "}";
    var e = this.storage.getLocal(this.actualView);
    e !== "" && (e = e + ","), this.storage.setLocal(this.actualView, e + i);
  },
  getView: function() {
    if (this.viewList.length > this.givenIds.length)
      for (var n = 0; ; ) {
        var t = this.viewList[n];
        if (this.givenIds.indexOf(t) < 0)
          return this.givenIds.push(t), ["[" + this.storage.getLocal(t) + "]", t];
        n++;
      }
    return [null, null];
  },
  removeView: function(n) {
    this.storage.removeLocal(n);
    var t = this.viewList.indexOf(n);
    t !== -1 && this.viewList.splice(t, 1), t = this.givenIds.indexOf(n), t !== -1 && this.givenIds.splice(t, 1), this.storage.setLocal("views", this.viewList.toString()), n === this.actualView && (this.actualView = null);
  },
  _getOldViewList: function() {
    var n = "";
    this.storage.getLocal("views") ? n = this.storage.getLocal("views") : this.storage.setLocal("views", ""), n === "" ? this.viewList = [] : typeof n.split == "function" && (this.viewList = n.split(","));
  },
  _getValidId: function() {
    var n = Math.floor(Math.random() * 1e8).toString();
    return this.viewList.indexOf(n) >= 0 ? this._getValidId() : n;
  },
  sent: function() {
    this.givenIds = [];
  }
}), JA = YA, ZA = Mt, eC = Pt, Tl = [
  "accountCode",
  "username",
  "anonymousUser",
  "rendition",
  "deviceInfo",
  "player",
  "title",
  "title2",
  "live",
  "segmentDuration",
  "mediaDuration",
  "mediaResource",
  "parsedResource",
  "transactionCode",
  "properties",
  "cdn",
  "playerVersion",
  "param1",
  "param2",
  "param3",
  "param4",
  "param5",
  "param6",
  "param7",
  "param8",
  "param9",
  "param10",
  "param11",
  "param12",
  "param13",
  "param14",
  "param15",
  "param16",
  "param17",
  "param18",
  "param19",
  "param20",
  "dimensions",
  "playerStartupTime",
  "obfuscateIp",
  "privacyProtocol",
  "p2pEnabled",
  "pluginVersion",
  "pluginInfo",
  "isp",
  "connectionType",
  "ip",
  "referer",
  "userType",
  "streamingProtocol",
  "transportFormat",
  "householdId",
  "adsBlocked",
  "adsExpected",
  "deviceUUID",
  "smartswitchConfigCode",
  "smartswitchGroupCode",
  "smartswitchContractCode",
  "libVersion",
  "nodeHost",
  "nodeType",
  "appName",
  "appReleaseVersion",
  "package",
  "saga",
  "tvshow",
  "season",
  "titleEpisode",
  "channel",
  "imdbID",
  "gracenoteID",
  "contentType",
  "genre",
  "contentLanguage",
  "subtitles",
  "cost",
  "price",
  "playbackType",
  "email",
  "drm",
  "videoCodec",
  "audioCodec",
  "codecSettings",
  "codecProfile",
  "containerFormat",
  "contentId",
  "contractedResolution",
  "linkedViewId",
  "edid",
  "cdnBalancerResponseUUID"
], bl = [
  "player",
  "playhead",
  "adTitle",
  "position",
  "adDuration",
  "adCampaign",
  "adCreativeId",
  "adProvider",
  "adResource",
  "adPlayerVersion",
  "adProperties",
  "adAdapterVersion",
  "adInsertionType",
  "extraparam1",
  "extraparam2",
  "extraparam3",
  "extraparam4",
  "extraparam5",
  "extraparam6",
  "extraparam7",
  "extraparam8",
  "extraparam9",
  "extraparam10",
  "fullscreen",
  "audio",
  "skippable",
  "adNumber",
  "adNumberInBreak",
  "breakNumber"
], Yr = ZA.extend(
  {
    constructor: function(n) {
      this._plugin = n, this._adNumber = 0, this._adNumberInBreak = 0, this.lastSent = {};
    },
    fetchParams: function(n, t, i) {
      n = n || {}, t = t || [];
      for (var r = 0; r < t.length; r++) {
        var e = t[r];
        if (!n[e]) {
          var a = Yr.getters[e];
          if (this._plugin[a]) {
            var s = this._plugin[a]();
            s !== null && (!i || this.lastSent[e] !== s) && (n[e] = s, this.lastSent[e] = s);
          } else
            eC.warn("Trying to call undefined getter " + e + ":" + a);
        }
      }
      return n;
    },
    getGetters: function() {
      return Yr.getters;
    },
    buildBody: function(n) {
      var t = null;
      return this.fetchParams(t, Yr.bodyParams[n], !1);
    },
    buildParams: function(n, t) {
      return n = n || {}, this.fetchParams(n, Yr.params[t], !1), this.fetchParams(n, Yr.differentParams[t], !0), n;
    },
    getNewAdNumber: function() {
      var n = this.lastSent.adNumber;
      return n && this.lastSent.position === this._plugin.getAdPosition() ? n += 1 : n = 1, this.lastSent.adNumber = n, n;
    },
    getNewAdNumberInBreak: function() {
      return this._adNumberInBreak++, this.lastSent.adNumberInBreak = this._adNumberInBreak, this._adNumberInBreak;
    },
    getNewBreakNumber: function() {
      var n = 1;
      return this._adNumberInBreak = 0, this.lastSent.breakNumber && (n = this.lastSent.breakNumber + 1), this.lastSent.breakNumber = n, n;
    },
    getChangedEntities: function() {
      return this.fetchParams({}, Yr.differentParams.entities, !0);
    }
  },
  {
    params: {
      "/data": ["system", "pluginVersion", "requestNumber", "username"],
      "/init": Tl,
      "/start": Tl,
      "/joinTime": ["joinDuration", "playhead", "bitrate"],
      "/pause": ["playhead"],
      "/resume": ["pauseDuration", "playhead"],
      "/seek": ["seekDuration", "playhead"],
      "/bufferUnderrun": ["bufferDuration", "playhead"],
      "/error": ["player", "playhead"].concat(Tl),
      "/stop": ["bitrate", "totalBytes", "playhead", "pauseDuration", "metrics", "cdnDownloadedTraffic", "multiCdnInfo", "p2pDownloadedTraffic", "uploadTraffic"],
      "/infinity/video/event": [],
      "/adInit": bl,
      "/adStart": bl,
      "/adJoin": ["playhead", "position", "adJoinDuration", "adPlayhead", "adNumber", "adNumberInBreak", "breakNumber"],
      "/adPause": ["playhead", "position", "adPlayhead", "adNumber", "adNumberInBreak", "breakNumber"],
      "/adResume": ["playhead", "position", "adPlayhead", "adPauseDuration", "adNumber", "adNumberInBreak", "breakNumber"],
      "/adBufferUnderrun": ["playhead", "position", "adPlayhead", "adBufferDuration", "adNumber", "adNumberInBreak", "breakNumber"],
      "/adStop": ["playhead", "position", "adPlayhead", "adBitrate", "adTotalDuration", "pauseDuration", "adViewedDuration", "adViewability", "adNumber", "adNumberInBreak", "breakNumber"],
      "/adClick": ["playhead", "position", "adPlayhead", "adNumber", "adNumberInBreak", "breakNumber"],
      "/adError": ["playhead"].concat(bl),
      "/adManifest": ["givenBreaks", "expectedBreaks", "expectedPattern", "breaksTime"],
      "/adBreakStart": ["position", "givenAds", "expectedAds", "breakNumber", "adInsertionType"],
      "/adBreakStop": ["position", "breakNumber"],
      "/adQuartile": ["position", "adViewedDuration", "adViewability", "adNumber", "adNumberInBreak", "breakNumber"],
      "/ping": ["droppedFrames", "playrate", "cdnDownloadedTraffic", "multiCdnInfo", "p2pDownloadedTraffic", "uploadTraffic", "latency", "packetLoss", "packetSent", "metrics", "totalBytes", "segmentDuration"],
      "/infinity/session/start": [
        "accountCode",
        "username",
        "userType",
        "anonymousUser",
        "navContext",
        "route",
        "page",
        "referer",
        "referral",
        "language",
        "deviceInfo",
        "adsBlocked",
        "deviceUUID",
        "libVersion",
        "appName",
        "appReleaseVersion",
        "isp",
        "connectionType",
        "ip",
        "obfuscateIp",
        "privacyProtocol",
        "param1",
        "param2",
        "param3",
        "param4",
        "param5",
        "param6",
        "param7",
        "param8",
        "param9",
        "param10",
        "param11",
        "param12",
        "param13",
        "param14",
        "param15",
        "param16",
        "param17",
        "param18",
        "param19",
        "param20",
        "edid"
      ],
      "/infinity/session/stop": ["sessionMetrics"],
      "/infinity/session/nav": ["navContext", "route", "page", "scrollDepth"],
      "/infinity/session/beat": ["sessionMetrics"],
      "/infinity/session/event": ["accountCode", "navContext"],
      "/offlineEvents": {}
    },
    bodyParams: {
      "/offlineEvents": ["viewJson"]
    },
    differentParams: {
      entities: [
        "rendition",
        "title",
        "title2",
        "param1",
        "param2",
        "param3",
        "param4",
        "param5",
        "param6",
        "param7",
        "param8",
        "param9",
        "param10",
        "param11",
        "param12",
        "param13",
        "param14",
        "param15",
        "param16",
        "param17",
        "param18",
        "param19",
        "param20",
        "cdn",
        "nodeHost",
        "nodeType",
        "nodeTypeString",
        "subtitles",
        "contentLanguage"
      ]
    },
    getters: {
      requestNumber: "getRequestNumber",
      playhead: "getPlayhead",
      playrate: "getPlayrate",
      fps: "getFramesPerSecond",
      segmentDuration: "getSegmentDuration",
      droppedFrames: "getDroppedFrames",
      mediaDuration: "getDuration",
      bitrate: "getBitrate",
      totalBytes: "getTotalBytes",
      throughput: "getThroughput",
      rendition: "getRendition",
      title: "getTitle",
      title2: "getTitle2",
      live: "getIsLive",
      mediaResource: "getResource",
      parsedResource: "getParsedResource",
      transactionCode: "getTransactionCode",
      properties: "getMetadata",
      playerVersion: "getPlayerVersion",
      player: "getPlayerName",
      cdn: "getCdn",
      pluginVersion: "getPluginVersion",
      libVersion: "getLibVersion",
      userType: "getUserType",
      streamingProtocol: "getStreamingProtocol",
      transportFormat: "getTransportFormat",
      obfuscateIp: "getObfuscateIp",
      privacyProtocol: "getPrivacyProtocol",
      householdId: "getHouseholdId",
      latency: "getLatency",
      packetLoss: "getPacketLoss",
      packetSent: "getPacketSent",
      metrics: "getVideoMetrics",
      dimensions: "getCustomDimensions",
      param1: "getExtraparam1",
      param2: "getExtraparam2",
      param3: "getExtraparam3",
      param4: "getExtraparam4",
      param5: "getExtraparam5",
      param6: "getExtraparam6",
      param7: "getExtraparam7",
      param8: "getExtraparam8",
      param9: "getExtraparam9",
      param10: "getExtraparam10",
      param11: "getExtraparam11",
      param12: "getExtraparam12",
      param13: "getExtraparam13",
      param14: "getExtraparam14",
      param15: "getExtraparam15",
      param16: "getExtraparam16",
      param17: "getExtraparam17",
      param18: "getExtraparam18",
      param19: "getExtraparam19",
      param20: "getExtraparam20",
      extraparam1: "getAdExtraparam1",
      extraparam2: "getAdExtraparam2",
      extraparam3: "getAdExtraparam3",
      extraparam4: "getAdExtraparam4",
      extraparam5: "getAdExtraparam5",
      extraparam6: "getAdExtraparam6",
      extraparam7: "getAdExtraparam7",
      extraparam8: "getAdExtraparam8",
      extraparam9: "getAdExtraparam9",
      extraparam10: "getAdExtraparam10",
      position: "getAdPosition",
      adNumber: "getAdNumber",
      adNumberInBreak: "getAdNumberInBreak",
      breakNumber: "getBreakNumber",
      adPlayhead: "getAdPlayhead",
      adDuration: "getAdDuration",
      adCampaign: "getAdCampaign",
      adCreativeId: "getAdCreativeId",
      adBitrate: "getAdBitrate",
      adTitle: "getAdTitle",
      adResource: "getAdResource",
      adPlayerVersion: "getAdPlayerVersion",
      adProperties: "getAdMetadata",
      adAdapterVersion: "getAdAdapterVersion",
      givenBreaks: "getGivenBreaks",
      expectedBreaks: "getExpectedBreaks",
      expectedPattern: "getExpectedPattern",
      breaksTime: "getBreaksTime",
      givenAds: "getGivenAds",
      expectedAds: "getExpectedAds",
      adsExpected: "getAdsExpected",
      adViewedDuration: "getAdViewedDuration",
      adViewability: "getAdViewability",
      fullscreen: "getIsFullscreen",
      audio: "getAudioEnabled",
      skippable: "getIsSkippable",
      adProvider: "getAdProvider",
      adInsertionType: "getAdInsertionType",
      pluginInfo: "getPluginInfo",
      isp: "getIsp",
      connectionType: "getConnectionType",
      ip: "getIp",
      deviceInfo: "getDeviceInfo",
      edid: "getEDID",
      system: "getAccountCode",
      accountCode: "getAccountCode",
      username: "getUsername",
      anonymousUser: "getAnonymousUser",
      joinDuration: "getJoinDuration",
      bufferDuration: "getBufferDuration",
      seekDuration: "getSeekDuration",
      pauseDuration: "getPauseDuration",
      adJoinDuration: "getAdJoinDuration",
      adBufferDuration: "getAdBufferDuration",
      adPauseDuration: "getAdPauseDuration",
      adTotalDuration: "getAdTotalDuration",
      referer: "getReferer",
      referral: "getReferral",
      language: "getLanguage",
      nodeHost: "getNodeHost",
      nodeType: "getNodeType",
      nodeTypeString: "getNodeTypeString",
      route: "getReferer",
      navContext: "getContext",
      page: "getPageName",
      playerStartupTime: "getPlayerStartupTime",
      pageLoadTime: "getPageLoadTime",
      cdnDownloadedTraffic: "getCdnTraffic",
      multiCdnInfo: "getMultiCdnInfo",
      p2pDownloadedTraffic: "getP2PTraffic",
      p2pEnabled: "getIsP2PEnabled",
      uploadTraffic: "getUploadTraffic",
      cdnBalancerResponseUUID: "getBalancerResponseId",
      viewJson: "getOfflineView",
      deviceUUID: "getDeviceUUID",
      sessionMetrics: "getSessionMetrics",
      scrollDepth: "getScrollDepth",
      adsBlocked: "getIsBlocked",
      linkedViewId: "getLinkedViewId",
      smartswitchConfigCode: "getSmartswitchConfigCode",
      smartswitchGroupCode: "getSmartswitchGroupCode",
      smartswitchContractCode: "getSmartswitchContractCode",
      appName: "getAppName",
      appReleaseVersion: "getAppReleaseVersion",
      package: "getPackage",
      saga: "getSaga",
      tvshow: "getTvShow",
      season: "getSeason",
      titleEpisode: "getEpisodeTitle",
      channel: "getChannel",
      drm: "getDRM",
      videoCodec: "getVideoCodec",
      audioCodec: "getAudioCodec",
      codecSettings: "getCodecSettings",
      codecProfile: "getCodecProfile",
      containerFormat: "getContainerFormat",
      contentId: "getID",
      imdbID: "getImdbId",
      gracenoteID: "getGracenoteID",
      contentType: "getType",
      genre: "getGenre",
      contentLanguage: "getVideoLanguage",
      subtitles: "getSubtitles",
      contractedResolution: "getContractedResolution",
      cost: "getCost",
      price: "getPrice",
      playbackType: "getPlaybackType",
      email: "getEmail"
    }
  }
), r_ = Yr, tC = Br, iC = tC.extend(
  {
    isBlocking: function(n) {
      return !n.params.sessionId;
    }
  }
), rC = iC, nC = Ar, aC = Wc, sC = rC, oC = pi, Nn = nC.extend(
  {
    constructor: function(n) {
      this._plugin = n;
    },
    andBeyond: function() {
      Nn.prototype.begin.apply(this, arguments);
    },
    begin: function(n) {
      this._comm = new aC(this._plugin), this._comm.addTransform(this._plugin.viewTransform), this._comm.addTransform(new sC(this._plugin)), this._plugin && this._plugin.storage && typeof this._plugin.storage.getLocal == "function" && (this._registeredProperties = this._plugin.storage.getLocal("inifnityRegisteredProperties"));
      var t = this._plugin.storage.getLocal("infinityStarted");
      this._plugin.getIsSessionExpired() || t === "false" || !t ? this.fireSessionStart(n) : (this.fireNav(n), this._sendExtraBeat());
    },
    _generateNewContext: function() {
      var n = null;
      try {
        n = btoa(new Date().getTime());
      } catch {
        n = "Default";
      }
      this._plugin.storage.setSession("context", n);
    },
    _setLastActive: function() {
      this._firstActive || (this._firstActive = this.getFirstActive()), this._plugin.storage.setStorages("lastactive", new Date().getTime());
    },
    getFirstActive: function() {
      return Number(this._plugin.getLastActive()) || 0;
    },
    getComm: function() {
      return this._comm;
    },
    fireSessionStart: function(n) {
      this.infinityStarted || (this._plugin.storage.setLocal("infinityStarted", "true"), this.infinityStarted = !0, this._generateNewContext(), this.emit(Nn.Event.SESSION_START, this._getParamsJson(n, null, null, !0, !0)), this._setLastActive());
    },
    fireSessionStop: function(n) {
      this.infinityStarted && (this.infinityStarted = !1, this._plugin.storage.removeStorages("infinityStarted"), this.emit(Nn.Event.SESSION_STOP, n), this._plugin.storage.removeStorages("data"), this._plugin.storage.removeStorages("session"), this._plugin.storage.removeStorages("lastactive"));
    },
    newSession: function(n, t) {
      this.isActive() && (this.fireSessionStop(), this._plugin.storage.removeStorages("infinityStarted"), this._plugin.storage.removeStorages("data"), this._comm && this._comm.removeTransform(this._plugin.viewTransform), this._plugin.restartViewTransform(), this._comm && this._comm.addTransform(this._plugin.viewTransform)), this._plugin.setOptions(n), this.begin(t);
    },
    fireNav: function(n) {
      this.isActive() && (this._plugin.getContext() || this._generateNewContext(), this.infinityStarted = !0, this.emit(Nn.Event.NAV, this._getParamsJson(n, null, null, !0)));
    },
    _sendExtraBeat: function() {
      if (this._plugin && this._plugin._beat) {
        var n = new Date().getTime(), t = this._plugin._beat.chrono.startTime ? n - this._plugin._beat.chrono.startTime : 0;
        this._plugin._sendBeat(t), this._plugin._beat.chrono.startTime = n;
      }
      this._setLastActive();
    },
    fireEvent: function(n, t, i, r) {
      if (this.infinityStarted) {
        var e = this._getParamsJson(t, i, n);
        oC.assign(e.params, r || {}), this.emit(Nn.Event.EVENT, e), this._setLastActive();
      }
    },
    register: function(n, t) {
      this._registeredProperties = { dimensions: n, values: t }, this._plugin.storage.setLocal("inifnityRegisteredProperties", JSON.stringify(this._registeredProperties));
    },
    registerOnce: function(n, t) {
      this._registeredProperties || this.register(n, t);
    },
    unregister: function() {
      this._registeredProperties = null, this._plugin.storage.removeLocal("inifnityRegisteredProperties");
    },
    _getParamsJson: function(n, t, i, r, e) {
      var a = {};
      if (i && (a.name = i), a.dimensions = n || {}, a.values = t || {}, this._registeredProperties) {
        for (var s in this._registeredProperties.dimensions)
          a.dimensions[s] = this._registeredProperties.dimensions[s];
        for (var o in this._registeredProperties.values)
          a.values[o] = this._registeredProperties.values[o];
      }
      var u = { params: a };
      return r && (u.params.dimensions.page && (u.params.page = u.params.dimensions.page, delete u.params.dimensions.page), u.params.dimensions.route && (u.params.route = u.params.dimensions.route, delete u.params.dimensions.route), e || delete u.params.dimensions, delete u.params.values), u;
    },
    isActive: function() {
      var n = this._plugin.storage.getLocal("infinityStarted");
      if (this.infinityStarted || n && n !== "false")
        return !0;
      var t = new Date().getTime();
      return Number(this._plugin.getLastActive()) + this._plugin.sessionExpire > t;
    }
  },
  {
    Event: {
      NAV: "nav",
      SESSION_START: "sessionStart",
      SESSION_STOP: "sessionStop",
      BEAT: "beat",
      EVENT: "event"
    }
  }
), $c = Nn, n_ = function(n) {
  n = n || window;
  var t = n.document, i = function(y) {
    var T = !1;
    if (y.getBoundingClientRect) {
      var I = y.getBoundingClientRect();
      T = {
        top: Math.max(I.top, 0),
        left: Math.max(I.left, 0),
        bottom: Math.min(I.bottom, n.innerHeight || t.documentElement.clientHeight),
        right: Math.min(I.right, n.innerWidth || t.documentElement.clientWidth)
      }, T.bottom <= T.top || T.right <= T.left ? T = !1 : T.area = (T.bottom - T.top) * (T.right - T.left);
    }
    return T;
  }, r = function(y, T) {
    if (T) {
      var I = i(y);
      I && l.push({
        url: T,
        area: I.area,
        rect: I
      });
    }
  }, e = function() {
    for (var y = t.getElementsByTagName("*"), T = /url\(.*(http.*)\)/ig, I = 0; I < y.length; I++) {
      var V = y[I], $ = n.getComputedStyle(V);
      if (V.tagName === "IMG" && r(V, V.src), $["background-image"]) {
        T.lastIndex = 0;
        var k = T.exec($["background-image"]);
        k && k.length > 1 && r(V, k[1].replace('"', ""));
      }
      if (V.tagName === "IFRAME")
        try {
          var P = i(V);
          if (P) {
            var L = n_(V.contentWindow);
            L && l.push({
              tm: L,
              area: P.area,
              rect: P
            });
          }
        } catch {
        }
    }
  }, a = function() {
    for (var y = {}, T = n.performance.getEntriesByType("resource"), I = 0; I < T.length; I++)
      y[T[I].name] = T[I].responseEnd;
    for (var V = 0; V < l.length; V++)
      "tm" in l[V] || (l[V].tm = y[l[V].url] !== void 0 ? y[l[V].url] : 0);
  }, s = function() {
    "msFirstPaint" in n.performance.timing && (h = n.performance.timing.msFirstPaint - v);
    for (var y = n.performance.getEntriesByType("paint"), T = 0; T < y.length; T++)
      y[T].name === "first-paint" && (h = y[T].startTime);
    if (h === void 0 || h < 0 || h > 12e4) {
      h = n.performance.timing.responseStart - v;
      for (var I = {}, V = t.getElementsByTagName("head")[0].children, $ = 0; $ < V.length; $++) {
        var k = V[$];
        k.tagName === "SCRIPT" && k.src && !k.async && (I[k.src] = !0), k.tagName === "LINK" && k.rel === "stylesheet" && k.href && (I[k.href] = !0);
      }
      for (var P = n.performance.getEntriesByType("resource"), L = !1, O = 0; O < P.length; O++)
        if (!L && I[P[O].name] && (P[O].initiatorType === "script" || P[O].initiatorType === "link")) {
          var U = P[O].responseEnd;
          (h === void 0 || U > h) && (h = U);
        } else
          L = !0;
    }
    h = Math.max(h, 0);
  }, o = function() {
    for (var y = { 0: 0 }, T = 0, I = 0; I < l.length; I++) {
      var V = h;
      "tm" in l[I] && l[I].tm > h && (V = l[I].tm), y[V] === void 0 && (y[V] = 0), y[V] += l[I].area, T += l[I].area;
    }
    var $ = Math.max(t.documentElement.clientWidth, n.innerWidth || 0) * Math.max(t.documentElement.clientHeight, n.innerHeight || 0);
    if ($ > 0 && ($ = Math.max($ - T, 0) * _, y[h] === void 0 && (y[h] = 0), y[h] += $, T += $), T) {
      for (var k in y)
        y.hasOwnProperty(k) && d.push({ tm: k, area: y[k] });
      d.sort(function(O, U) {
        return O.tm - U.tm;
      });
      for (var P = 0, L = 0; L < d.length; L++)
        P += d[L].area, d[L].progress = P / T;
    }
  }, u = function() {
    if (d.length) {
      f = 0;
      for (var y = 0, T = 0, I = 0; I < d.length; I++) {
        var V = d[I].tm - y;
        V > 0 && T < 1 && (f += (1 - T) * V), y = d[I].tm, T = d[I].progress;
      }
    } else
      f = h;
  }, l = [], d = [], h, f, _ = 0.1;
  try {
    var v = n.performance.timing.navigationStart;
    e(), a(), s(), o(), u();
  } catch {
  }
  return f;
}, uC = n_, lC = Mt, dC = uC, cC = lC.extend({
  constructor: function(n) {
    if (this.infinity = n.infinity, this.timeObject = null, this.playerSetup = null, this.perfObject = null, this.myTimesObject = {}, typeof window < "u" && typeof window.addEventListener == "function" && (window.addEventListener("load", this._windowLoaded.bind(this)), window.performance && window.performance.timing)) {
      try {
        typeof window.performance.getEntriesByType == "function" && (this.perfObject = window.performance);
      } catch {
      }
      this.timeObject = window.performance.timing;
    }
    try {
      if (typeof PerformanceObserver == "function") {
        var t = new PerformanceObserver(function(i, r) {
          var e = i.getEntries();
          this.myTimesObject.largestContentfulPaint = e[e.length - 1].renderTime;
        }.bind(this));
        PerformanceObserver.supportedEntryTypes.indexOf("largest-contentful-paint") > -1 && t.observe({ entryTypes: ["largest-contentful-paint"] });
      }
    } catch {
    }
  },
  _windowLoaded: function() {
    this.myTimesObject.onLoad = new Date().getTime(), this._getEnoughFPS(), setTimeout(this._fireLoadTimesEvent.bind(this), 1e3);
  },
  _fireLoadTimesEvent: function() {
    this._getLastMetrics(), this.infinity.fireEvent("loadTimes", {}, this._getAllValues());
  },
  _getAllValues: function() {
    var n = {
      PageLoadTime: this.getPageLoadTime(),
      DNSTime: this.getDnsTime(),
      TCPTime: this.getTcpTime(),
      HandshakeTime: this.getHandshakeTime(),
      DomReadyTime: this.getDomReadyTime(),
      BackendTime: this.getBackendTime(),
      FrontendTime: this.getFrontendTime(),
      VisualReady: this.getTimeToVisuallyReady(),
      TimeToInteractive: this.getTimeToInteractive(),
      JsTime: this.getJSTime(),
      CssTime: this.getCSSTime(),
      ImageTime: this.getImageTime(),
      FontTime: this.getFontTime(),
      AvgReqLatency: this.getAvgReqLatency(),
      MaxReqLatency: this.getMaxReqLatency(),
      FirstPaint: this.getFirstPaint(),
      FirstContentfulPaint: this.getFirstContentfulPaint(),
      LargestContentfulPaint: this.getLargestContentfulPaint(),
      SpeedIndex: this.getSpeedIndex()
    };
    for (var t in n)
      n[t] === null || n[t] === void 0 || n[t] < 0 ? delete n[t] : n[t] = Math.round(n[t]);
    return n;
  },
  getPageLoadTime: function() {
    var n = null;
    return this.timeObject && (n = this.timeObject.loadEventEnd - this.timeObject.navigationStart), n;
  },
  getPlayerStartupTime: function() {
    var n = null;
    return this.timeObject && this.playerSetup && (n = this.playerSetup - this.timeObject.navigationStart), n;
  },
  getDnsTime: function() {
    var n = null;
    return this.timeObject && (n = this.timeObject.domainLookupEnd - this.timeObject.domainLookupStart), n;
  },
  getTcpTime: function() {
    var n = null;
    return this.timeObject && (n = this.timeObject.connectEnd - this.timeObject.connectStart), n;
  },
  getHandshakeTime: function() {
    var n = null;
    return this.timeObject && this.timeObject.secureConnectionStart && (n = this.timeObject.connectEnd - this.timeObject.secureConnectionStart), n;
  },
  getDomReadyTime: function() {
    var n = null;
    return this.timeObject && (n = this.timeObject.domComplete - this.timeObject.navigationStart), n;
  },
  getBackendTime: function() {
    var n = null;
    return this.timeObject && (n = this.timeObject.responseStart - this.timeObject.navigationStart), n;
  },
  getFrontendTime: function() {
    var n = null;
    return this.timeObject && (n = this.myTimesObject.onLoad - this.timeObject.responseStart), n;
  },
  getTimeToVisuallyReady: function() {
    var n = this.myTimesObject.firstPaint || 0;
    return this.timeObject ? Math.max(
      n,
      this.timeObject.domContentLoadedEventEnd - this.timeObject.navigationStart || 0
    ) : n || null;
  },
  getTimeToInteractive: function() {
    if (this.myTimesObject.fps && this.getTimeToVisuallyReady())
      return Math.max(this.myTimesObject.fps, this.getTimeToVisuallyReady());
    setTimeout(function() {
      this.getTimeToInteractive();
    }.bind(this), 500);
  },
  getJSTime: function() {
    return this._getXTime("script");
  },
  getCSSTime: function() {
    return this._getXTime("css");
  },
  getImageTime: function() {
    return this._getXTime("img");
  },
  getFontTime: function() {
    return this._getXTime("css", [".woff", ".otf", ".ttf"]);
  },
  getAvgReqLatency: function() {
    try {
      if (this.perfObject && typeof this.perfObject.getEntriesByType == "function") {
        var n = 0, t = 0, i = this.perfObject.getEntriesByType("resource");
        for (var r in i)
          i[r].requestStart && i[r].responseStart && (t += i[r].responseStart - i[r].requestStart), n++;
        return t / n;
      }
    } catch {
    }
    return null;
  },
  getFirstPaint: function() {
    return this.myTimesObject ? this.myTimesObject.firstPaint : null;
  },
  getFirstContentfulPaint: function() {
    return this.myTimesObject ? this.myTimesObject.firstContentfulPaint : null;
  },
  getLargestContentfulPaint: function() {
    return this.myTimesObject ? this.myTimesObject.largestContentfulPaint : null;
  },
  getMaxReqLatency: function() {
    try {
      if (this.perfObject && typeof this.perfObject.getEntriesByType == "function") {
        var n = this.perfObject.getEntriesByType("resource"), t = 0;
        for (var i in n)
          n[i].requestStart && n[i].responseStart && (t = Math.max(t, n[i].responseStart - n[i].requestStart));
        return t;
      }
    } catch {
    }
    return null;
  },
  getSpeedIndex: function() {
    var n = null;
    if (typeof window < "u" && window.performance && typeof window.performance.getEntriesByType == "function")
      try {
        n = dC();
      } catch {
      }
    return n;
  },
  _getXTime: function(n, t) {
    var i = 0;
    try {
      if (this.perfObject && typeof this.perfObject.getEntriesByType == "function") {
        var r = this.perfObject.getEntriesByType("resource");
        for (var e in r)
          if (r[e].initiatorType === n)
            if (!t)
              i += r[e].duration;
            else {
              var a = !1;
              for (var s in t)
                r[e].name.indexOf(t[s] > 0) && (a = !0);
              a && (i += r[e].duration);
            }
      }
    } catch {
    }
    return Math.round(i) || null;
  },
  _getLastMetrics: function() {
    var n = null, t = null;
    try {
      if (this.perfObject && typeof this.perfObject.getEntriesByType == "function") {
        var i = this.perfObject.getEntriesByType("paint");
        for (var r in i)
          i[r].name === "first-paint" ? n = i[r].startTime : i[r].name === "first-contentful-paint" && (t = i[r].startTime);
      }
    } catch {
    }
    !n && this.timeObject && (n = this.timeObject.msFirstPaint - this.timeObject.navigationStart), this.myTimesObject.firstPaint = n, this.myTimesObject.firstContentfulPaint = t, this.getTimeToInteractive();
  },
  _getEnoughFPS: function() {
    if (this.timeObject && typeof window < "u") {
      var n = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || function() {
      };
      this.preFPS = new Date().getTime(), n(function() {
        var t = new Date().getTime();
        t < this.preFPS + 50 ? this.myTimesObject.fps = t - this.timeObject.navigationStart : setTimeout(function() {
          return this._getEnoughFPS();
        }.bind(this), 50);
      }.bind(this));
    } else
      return !0;
  },
  setPlayerSetupTime: function() {
    this.playerSetup = this.playerSetup || new Date().getTime();
  }
}), fC = cC, hC = Mt, pC = hC.extend({
  constructor: function(n) {
    this.plugin = n, this.isInBackground = !1, this.listenerReference = this._visibilityListener.bind(this), this._reset();
  },
  startDetection: function() {
    !this.isBackgroundDetectorStarted && typeof document < "u" && (this.isBackgroundDetectorStarted = !0, document.addEventListener("visibilitychange", this.listenerReference));
  },
  stopDetection: function() {
    this.isBackgroundDetectorStarted && typeof document < "u" && (document.removeEventListener("visibilitychange", this.listenerReference), this._reset());
  },
  _reset: function() {
    this.isBackgroundDetectorStarted = !1;
  },
  _visibilityListener: function(n) {
    if (typeof document < "u") {
      var t = this._getSettings();
      document.visibilityState === "hidden" ? this._toBackground(t) : document.visibilityState === "visible" && this._toForeground(t);
    }
  },
  _toBackground: function(n) {
    if (this.isInBackground = !0, this.plugin && this.plugin._adsAdapter && this.plugin._adsAdapter.stopChronoView(), typeof n == "string") {
      switch (n) {
        case "stop":
          this._fireStop();
          break;
        case "pause":
          this._firePause();
          break;
      }
      if (this.plugin.infinity.infinityStarted) {
        this.lastBeatTime = new Date().getTime();
        var t = this.plugin._beat.chrono.startTime ? this.lastBeatTime - this.plugin._beat.chrono.startTime : 0;
        this.plugin._sendBeat(t), this.plugin._beat.stop();
      }
    }
  },
  _toForeground: function(n) {
    if (this.isInBackground = !1, this.plugin && this.plugin._adsAdapter && this.plugin._adsAdapter.startChronoView(), typeof n == "string" && n && this.plugin.infinity.infinityStarted) {
      var t = new Date().getTime();
      t - this.lastBeatTime < this.plugin.sessionExpire ? (this.plugin._sendBeat(t - this.lastBeatTime), this.plugin._beat.start()) : this.plugin.infinity.newSession();
    }
  },
  _getSettings: function() {
    if (typeof this.plugin.options["background.settings"] == "string" && this.plugin.options["background.settings"])
      return this.plugin.options["background.settings"];
    if (this.plugin.deviceDetector.isSmartTV())
      return this.plugin.options["background.settings.tv"];
    if (this.plugin.deviceDetector.isDesktop())
      return this.plugin.options["background.settings.desktop"];
    if (this.plugin.deviceDetector.isAndroid())
      return this.plugin.options["background.settings.android"];
    if (this.plugin.deviceDetector.isIphone())
      return this.plugin.options["background.settings.iOS"];
    if (this.plugin.deviceDetector.isPlayStation())
      return this.plugin.options["background.settings.playstation"];
  },
  _firePause: function() {
    this._fireX("firePause");
  },
  _fireStop: function() {
    this._fireX("fireStop"), this.plugin.fireStop();
  },
  _fireX: function(n) {
    this.adsAdapter = this.plugin.getAdsAdapter(), this.adsAdapter && this.adsAdapter[n](), this.contentAdapter = this.plugin.getAdapter(), this.contentAdapter && this.contentAdapter[n]();
  },
  canBlockStartCalls: function() {
    return this.isInBackground && this.plugin.options["background.enabled"] === !0 && this._getSettings();
  }
}), a_ = pC, mC = Mt, gC = mC.extend({
  constructor: function() {
    typeof navigator < "u" && navigator.userAgent && (this._isSmartTVDevice = navigator.userAgent.toLowerCase().match(/smarttv/) || navigator.userAgent.toLowerCase().match(/smart-tv/) || navigator.userAgent.toLowerCase().match(/appletv/) || navigator.userAgent.toLowerCase().match(/apple tv/), this._isPlaystationDevice = navigator.userAgent.match(/PlayStation/) !== null, this._isIphoneDevice = navigator.userAgent.match(/iPhone|iPad|iPod/i) !== null, this._isAndroidDevice = navigator.userAgent.match(/Android/) !== null, this._isSmartphoneDevice = !this._isSmartTVDevice && !this._isPlaystationDevice && (this._isIphoneDevice || this._isAndroidDevice), this._isDesktopDevice = !this._isSmartphoneDevice && !this._isSmartTVDevice && !this._isPlaystationDevice);
  },
  isIphone: function() {
    return this._isIphoneDevice;
  },
  isAndroid: function() {
    return this._isAndroidDevice;
  },
  isSmartphone: function() {
    return this._isSmartphoneDevice;
  },
  isDesktop: function() {
    return this._isDesktopDevice;
  },
  isSmartTV: function() {
    return this._isSmartTVDevice;
  },
  isPlayStation: function() {
    return this._isPlaystationDevice;
  }
}), s_ = gC, vC = Mt, _C = vC.extend({
  constructor: function(n) {
    this.pluginref = n, this.listenerReference = this._changeListener.bind(this), this.loadReference = this._loadListener.bind(this), this.isEnabled = !1, this.pageHeight = 0, this.maxHeight = 0, this.startDetection();
  },
  startDetection: function() {
    !this.isEnabled && typeof window < "u" && typeof window.addEventListener == "function" && (window.addEventListener("scroll", this.listenerReference), window.addEventListener("resize", this.listenerReference), window.addEventListener("load", this.loadReference), this.isEnabled = !0);
  },
  stopDetection: function() {
    this.isEnabled && typeof window < "u" && typeof window.removeEventListener == "function" && (window.removeEventListener("scroll", this.listenerReference), window.removeEventListener("resize", this.listenerReference), window.removeEventListener("load", this.loadReference), this.isEnabled = !1);
  },
  getScrollDepth: function() {
    var n = null;
    return this.maxHeight && this.pageHeight && (n = Math.min(Math.trunc(this.maxHeight / this.pageHeight * 100), 100)), n;
  },
  _loadListener: function() {
    if (typeof document < "u") {
      var n = document.documentElement;
      n && (this.pageHeight = Math.round(n.scrollHeight, n.clientHeight, n.offsetHeight), this.maxHeight = window.innerHeight, this._updateCompletionRate());
    }
  },
  _changeListener: function() {
    if (this.pageHeight) {
      var n = this.maxHeight;
      this.maxHeight = Math.max(this.maxHeight, window.pageYOffset + window.innerHeight), n !== this.maxHeight && this._updateCompletionRate();
    }
    var t = this.pluginref.getAdsAdapter();
    t && t.flags.isStarted && (t.getIsVisible() ? t.startChronoView() : t.stopChronoView());
  },
  _updateCompletionRate: function() {
    setTimeout(function() {
      this.pluginref.storage.setSession("pageScrollDepth", this.getScrollDepth());
    }.bind(this), 3e3);
  }
}), yC = _C, TC = Mt, bC = TC.extend({
  constructor: function(n) {
    this.plugin = n;
  },
  getAllData: function() {
    var n = this.getNonRandomData();
    return n.timestamp = this.getTimestamp(), n;
  },
  getNonRandomData: function() {
    var n = {};
    return n.userAgent = this.getUserAgent(), n.threads = this.getVirtualCores(), n.language = this.getLanguage(), n.langList = this.getAvailableLanguages(), n.resolution = this.getResolution(), n.colorDepth = this.getColorDepth(), n.deviceMemory = this.getMemory(), n.touchscreen = this.getTouchscreen(), n.localStorage = this.getLocalStorage(), n.sessionStorage = this.getSessionStorage(), n.cookiesAvailable = this.getCookiesAvailable(), n.flashAvailable = this.getHasFlash(), n.timeZone = this.getTimeZone(), n.plugins = this.getPluginList(), n;
  },
  getUserAgent: function() {
    return this._getNavigatorValue("userAgent");
  },
  getVirtualCores: function() {
    return this._getNavigatorValue("hardwareConcurrency");
  },
  getLanguage: function() {
    return this._getNavigatorValue("language");
  },
  getAvailableLanguages: function() {
    return this._getNavigatorValue("languages");
  },
  getResolution: function() {
    var n = null;
    try {
      this._getNavigatorValue("screen") && (n = navigator.screen.width.toString() + navigator.screen.height.toString());
    } catch {
    }
    return n;
  },
  getColorDepth: function() {
    var n = null;
    try {
      this._getNavigatorValue("screen") && (n = navigator.screen.colorDepth);
    } catch {
    }
    return n;
  },
  getMemory: function() {
    return this._getNavigatorValue("deviceMemory");
  },
  getTouchscreen: function() {
    return this._getNavigatorValue("maxTouchPoints") || !1;
  },
  getLocalStorage: function() {
    var n = !1;
    try {
      n = typeof localStorage < "u";
    } catch {
    }
    return n;
  },
  getSessionStorage: function() {
    var n = !1;
    try {
      n = typeof sessionStorage < "u";
    } catch {
    }
    return n;
  },
  getCookiesAvailable: function() {
    return this._getNavigatorValue("cookieEnabled") || !1;
  },
  getHasFlash: function() {
    var n = !1;
    try {
      var t = this._getNavigatorValue("plugins");
      n = t && typeof t["Shockwave Flash"] == "object" || typeof window < "u" && window.ActiveXObject && new ActiveXObject("ShockwaveFlash.ShockwaveFlash") !== !1;
    } catch {
    }
    return n;
  },
  getPluginList: function() {
    var n = null;
    try {
      var t = this._getNavigatorValue("plugins");
      if (t && t.length !== 0) {
        for (var i = "", r = 0; r < navigator.plugins.length; r++)
          i += navigator.plugins[r].description + " " + navigator.plugins[r].filename + " " + navigator.plugins[r].name + " ";
        n = i;
      }
    } catch {
    }
    return n;
  },
  getTimeZone: function() {
    var n = null;
    try {
      var t = new Date();
      n = t.getTimezoneOffset().toString();
    } catch {
    }
    return n;
  },
  getTimestamp: function() {
    return new Date().getTime();
  },
  _navigatorCheck: function() {
    return typeof navigator < "u";
  },
  _getNavigatorValue: function(n) {
    var t = null;
    try {
      this._navigatorCheck() && (t = navigator[n]);
    } catch {
    }
    return t;
  }
}), SC = bC, EC = function(n) {
  function t(oe, ae) {
    return oe << ae | oe >>> 32 - ae;
  }
  function i(oe, ae) {
    var ue, ge, ee, _e, xe;
    return ee = oe & 2147483648, _e = ae & 2147483648, ue = oe & 1073741824, ge = ae & 1073741824, xe = (oe & 1073741823) + (ae & 1073741823), ue & ge ? xe ^ 2147483648 ^ ee ^ _e : ue | ge ? xe & 1073741824 ? xe ^ 3221225472 ^ ee ^ _e : xe ^ 1073741824 ^ ee ^ _e : xe ^ ee ^ _e;
  }
  function r(oe, ae, ue) {
    return oe & ae | ~oe & ue;
  }
  function e(oe, ae, ue) {
    return oe & ue | ae & ~ue;
  }
  function a(oe, ae, ue) {
    return oe ^ ae ^ ue;
  }
  function s(oe, ae, ue) {
    return ae ^ (oe | ~ue);
  }
  function o(oe, ae, ue, ge, ee, _e, xe) {
    return oe = i(oe, i(i(r(ae, ue, ge), ee), xe)), i(t(oe, _e), ae);
  }
  function u(oe, ae, ue, ge, ee, _e, xe) {
    return oe = i(oe, i(i(e(ae, ue, ge), ee), xe)), i(t(oe, _e), ae);
  }
  function l(oe, ae, ue, ge, ee, _e, xe) {
    return oe = i(oe, i(i(a(ae, ue, ge), ee), xe)), i(t(oe, _e), ae);
  }
  function d(oe, ae, ue, ge, ee, _e, xe) {
    return oe = i(oe, i(i(s(ae, ue, ge), ee), xe)), i(t(oe, _e), ae);
  }
  function h(oe) {
    for (var ae, ue = oe.length, ge = ue + 8, ee = (ge - ge % 64) / 64, _e = (ee + 1) * 16, xe = Array(_e - 1), Le = 0, je = 0; je < ue; )
      ae = (je - je % 4) / 4, Le = je % 4 * 8, xe[ae] = xe[ae] | oe.charCodeAt(je) << Le, je++;
    return ae = (je - je % 4) / 4, Le = je % 4 * 8, xe[ae] = xe[ae] | 128 << Le, xe[_e - 2] = ue << 3, xe[_e - 1] = ue >>> 29, xe;
  }
  function f(oe) {
    var ae = "", ue = "", ge, ee;
    for (ee = 0; ee <= 3; ee++)
      ge = oe >>> ee * 8 & 255, ue = "0" + ge.toString(16), ae = ae + ue.substr(ue.length - 2, 2);
    return ae;
  }
  function _(oe) {
    oe = oe.replace(/rn/g, "n");
    for (var ae = "", ue = 0; ue < oe.length; ue++) {
      var ge = oe.charCodeAt(ue);
      ge < 128 ? ae += String.fromCharCode(ge) : ge > 127 && ge < 2048 ? (ae += String.fromCharCode(ge >> 6 | 192), ae += String.fromCharCode(ge & 63 | 128)) : (ae += String.fromCharCode(ge >> 12 | 224), ae += String.fromCharCode(ge >> 6 & 63 | 128), ae += String.fromCharCode(ge & 63 | 128));
    }
    return ae;
  }
  var v = Array(), y, T, I, V, $, k, P, L, O, U = 7, ie = 12, z = 17, le = 22, se = 5, me = 9, M = 14, ne = 20, fe = 4, pe = 11, H = 16, Q = 23, F = 6, W = 10, X = 15, Y = 21;
  for (n = _(n), v = h(n), k = 1732584193, P = 4023233417, L = 2562383102, O = 271733878, y = 0; y < v.length; y += 16)
    T = k, I = P, V = L, $ = O, k = o(k, P, L, O, v[y + 0], U, 3614090360), O = o(O, k, P, L, v[y + 1], ie, 3905402710), L = o(L, O, k, P, v[y + 2], z, 606105819), P = o(P, L, O, k, v[y + 3], le, 3250441966), k = o(k, P, L, O, v[y + 4], U, 4118548399), O = o(O, k, P, L, v[y + 5], ie, 1200080426), L = o(L, O, k, P, v[y + 6], z, 2821735955), P = o(P, L, O, k, v[y + 7], le, 4249261313), k = o(k, P, L, O, v[y + 8], U, 1770035416), O = o(O, k, P, L, v[y + 9], ie, 2336552879), L = o(L, O, k, P, v[y + 10], z, 4294925233), P = o(P, L, O, k, v[y + 11], le, 2304563134), k = o(k, P, L, O, v[y + 12], U, 1804603682), O = o(O, k, P, L, v[y + 13], ie, 4254626195), L = o(L, O, k, P, v[y + 14], z, 2792965006), P = o(P, L, O, k, v[y + 15], le, 1236535329), k = u(k, P, L, O, v[y + 1], se, 4129170786), O = u(O, k, P, L, v[y + 6], me, 3225465664), L = u(L, O, k, P, v[y + 11], M, 643717713), P = u(P, L, O, k, v[y + 0], ne, 3921069994), k = u(k, P, L, O, v[y + 5], se, 3593408605), O = u(O, k, P, L, v[y + 10], me, 38016083), L = u(L, O, k, P, v[y + 15], M, 3634488961), P = u(P, L, O, k, v[y + 4], ne, 3889429448), k = u(k, P, L, O, v[y + 9], se, 568446438), O = u(O, k, P, L, v[y + 14], me, 3275163606), L = u(L, O, k, P, v[y + 3], M, 4107603335), P = u(P, L, O, k, v[y + 8], ne, 1163531501), k = u(k, P, L, O, v[y + 13], se, 2850285829), O = u(O, k, P, L, v[y + 2], me, 4243563512), L = u(L, O, k, P, v[y + 7], M, 1735328473), P = u(P, L, O, k, v[y + 12], ne, 2368359562), k = l(k, P, L, O, v[y + 5], fe, 4294588738), O = l(O, k, P, L, v[y + 8], pe, 2272392833), L = l(L, O, k, P, v[y + 11], H, 1839030562), P = l(P, L, O, k, v[y + 14], Q, 4259657740), k = l(k, P, L, O, v[y + 1], fe, 2763975236), O = l(O, k, P, L, v[y + 4], pe, 1272893353), L = l(L, O, k, P, v[y + 7], H, 4139469664), P = l(P, L, O, k, v[y + 10], Q, 3200236656), k = l(k, P, L, O, v[y + 13], fe, 681279174), O = l(O, k, P, L, v[y + 0], pe, 3936430074), L = l(L, O, k, P, v[y + 3], H, 3572445317), P = l(P, L, O, k, v[y + 6], Q, 76029189), k = l(k, P, L, O, v[y + 9], fe, 3654602809), O = l(O, k, P, L, v[y + 12], pe, 3873151461), L = l(L, O, k, P, v[y + 15], H, 530742520), P = l(P, L, O, k, v[y + 2], Q, 3299628645), k = d(k, P, L, O, v[y + 0], F, 4096336452), O = d(O, k, P, L, v[y + 7], W, 1126891415), L = d(L, O, k, P, v[y + 14], X, 2878612391), P = d(P, L, O, k, v[y + 5], Y, 4237533241), k = d(k, P, L, O, v[y + 12], F, 1700485571), O = d(O, k, P, L, v[y + 3], W, 2399980690), L = d(L, O, k, P, v[y + 10], X, 4293915773), P = d(P, L, O, k, v[y + 1], Y, 2240044497), k = d(k, P, L, O, v[y + 8], F, 1873313359), O = d(O, k, P, L, v[y + 15], W, 4264355552), L = d(L, O, k, P, v[y + 6], X, 2734768916), P = d(P, L, O, k, v[y + 13], Y, 1309151649), k = d(k, P, L, O, v[y + 4], F, 4149444226), O = d(O, k, P, L, v[y + 11], W, 3174756917), L = d(L, O, k, P, v[y + 2], X, 718787259), P = d(P, L, O, k, v[y + 9], Y, 3951481745), k = i(k, T), P = i(P, I), L = i(L, V), O = i(O, $);
  var de = f(k) + f(P) + f(L) + f(O);
  return de.toLowerCase();
}, xC = EC, wC = SC, AC = Mt, CC = xC, kC = AC.extend({
  constructor: function(n) {
    this.plugin = n, this.dataExtractor = new wC(), this.key = this.getPreviousKey();
  },
  generateHashKey: function() {
    if (!this.key) {
      var n = this.dataExtractor.getAllData();
      this.key = this._hashFunction(n), this.plugin.storage.setLocal("youboraDeviceUUID", this.key);
    }
  },
  getKey: function() {
    return this.key || this.generateHashKey(), this.key;
  },
  _hashFunction: function(n) {
    var t = n;
    return typeof n != "string" && (t = JSON.stringify(n)), CC(t);
  },
  _reset: function() {
    this.key = void 0;
  },
  getPreviousKey: function() {
    return this.plugin.storage.getLocal("youboraDeviceUUID");
  }
}), o_ = kC, PC = Mt, Ia = da, IC = PC.extend(
  {
    constructor: function() {
      this.reset();
    },
    reset: function() {
      this.join = new Ia(), this.seek = new Ia(), this.pause = new Ia(), this.buffer = new Ia(), this.total = new Ia(), this.viewedMax = [];
    }
  }
), DC = IC, LC = Mt, OC = LC.extend(
  {
    constructor: function() {
      this.reset();
    },
    reset: function() {
      this.isStarted = !1, this.isJoined = !1, this.isPaused = !1, this.isSeeking = !1, this.isBuffering = !1, this.isEnded = !1, this.isStopped = !1, this.lastQuartileSent = 0;
    }
  }
), RC = OC, NC = Mt, MC = Hc, FC = da, Ba = NC.extend(
  {
    constructor: function(n, t, i) {
      this._adapter = n, this._seekEnabled = t & Ba.Type.SEEK, this._bufferEnabled = t & Ba.Type.BUFFER, i = i || 800, this._chrono = new FC(), this._lastPlayhead = 0, i > 0 && (this._timer = new MC(this.progress.bind(this), i));
    },
    start: function() {
      this.stop(), this.canBeUsed() && this._timer.start();
    },
    stop: function() {
      this._lastPlayhead = 0, this._timer && this._timer.stop();
    },
    skipNextTick: function() {
      this._lastPlayhead = 0;
    },
    progress: function() {
      var n = this._chrono.stop();
      this._chrono.start();
      var t = n * Ba.kBUFFER_THRESHOLD_RATIO, i = n * Ba.kSEEK_THRESHOLD_RATIO;
      this._adapter.getPlayrate && this._adapter.getPlayrate() && this._adapter.getPlayrate() !== 1 && (t *= this._adapter.getPlayrate(), i *= this._adapter.getPlayrate());
      var r = this._getPlayhead(), e = Math.abs(this._lastPlayhead - r) * 1e3;
      e < t ? this._bufferEnabled && this._lastPlayhead > 0 && !this._adapter.flags.isPaused && !this._adapter.flags.isSeeking && this._adapter.fireBufferBegin(null, !1) : e > i ? this._seekEnabled && this._lastPlayhead > 0 && this._adapter.fireSeekBegin(null, !1) : (this._seekEnabled && this._adapter.fireSeekEnd(), this._bufferEnabled && this._adapter.fireBufferEnd()), this._lastPlayhead = r;
    },
    canBeUsed: function() {
      var n = this._adapter.plugin;
      return n && n.getIsLive() ? !n.options["content.isLive.noMonitor"] : !0;
    },
    _getPlayhead: function() {
      return this._adapter.getPlayhead();
    }
  },
  {
    Type: {
      NONE: 0,
      BUFFER: 1,
      SEEK: 2
    },
    kBUFFER_THRESHOLD_RATIO: 0.5,
    kSEEK_THRESHOLD_RATIO: 2
  }
), u_ = Ba, Sl, ap;
function BC() {
  if (ap)
    return Sl;
  ap = 1;
  var n = iu, t = da, i = {
    getPosition: function() {
      return null;
    },
    getGivenBreaks: function() {
      return null;
    },
    getExpectedBreaks: function() {
      return null;
    },
    getExpectedPattern: function() {
      return null;
    },
    getBreaksTime: function() {
      return null;
    },
    getGivenAds: function() {
      return null;
    },
    getExpectedAds: function() {
      return null;
    },
    getIsVisible: function() {
      return !0;
    },
    getAudioEnabled: function() {
      return null;
    },
    getIsSkippable: function() {
      return null;
    },
    getIsFullscreen: function() {
      return null;
    },
    getCampaign: function() {
      return null;
    },
    getCreativeId: function() {
      return null;
    },
    getProvider: function() {
      return null;
    },
    getAdInsertionType: function() {
      return null;
    },
    fireClick: function(r) {
      typeof r == "string" && (r = { url: r }), this.emit(n.Event.CLICK, { params: r });
    },
    fireQuartile: function(r) {
      this.flags.isStarted && typeof r == "number" && r > this.flags.lastQuartileSent && r < 4 && (this.flags.lastQuartileSent++, this.emit(n.Event.QUARTILE, { params: { quartile: r } }));
    },
    startChronoView: function() {
      if (this.getIsVisible() && !this.plugin.backgroundDetector.isInBackground) {
        var r = this.chronos.viewedMax;
        (r.length === 0 || r[r.length - 1].stopTime !== 0) && (r.push(new t()), r[r.length - 1].start());
      }
    },
    stopChronoView: function() {
      var r = this.chronos.viewedMax;
      r[0] && r.length > 0 && r[r.length - 1].stopTime === 0 && r[r.length - 1].stop();
    },
    fireManifest: function(r, e) {
      var a = { params: r };
      typeof r == "string" && (a = { params: { errorType: r, errorMessage: e } }), this.emit(n.Event.MANIFEST, a);
    },
    fireSkip: function(r) {
      r === void 0 && (r = {}), r.skipped = !0, this.fireStop(r);
    },
    fireBreakStart: function(r) {
      this.emit(n.Event.PODSTART, { params: r });
    },
    fireBreakStop: function(r) {
      this.emit(n.Event.PODSTOP, { params: r });
    }
  };
  return Sl = i, Sl;
}
var El, sp;
function UC() {
  if (sp)
    return El;
  sp = 1;
  var n = iu, t = Pt, i = {
    getPlayrate: function() {
      return this.flags.isPaused ? 0 : 1;
    },
    getFramesPerSecond: function() {
      return null;
    },
    getDroppedFrames: function() {
      return null;
    },
    getThroughput: function() {
      return null;
    },
    getRendition: function() {
      return null;
    },
    getTitle2: function() {
      return null;
    },
    getIsLive: function() {
      return null;
    },
    getCdnTraffic: function() {
      return null;
    },
    getP2PTraffic: function() {
      return null;
    },
    getUploadTraffic: function() {
      return null;
    },
    getIsP2PEnabled: function() {
      return null;
    },
    getSegmentDuration: function() {
      return null;
    },
    getHouseholdId: function() {
      return null;
    },
    getLatency: function() {
      return null;
    },
    getPacketLoss: function() {
      return null;
    },
    getPacketSent: function() {
      return null;
    },
    getMetrics: function() {
      return null;
    },
    getAudioCodec: function() {
      return null;
    },
    getVideoCodec: function() {
      return null;
    },
    getURLToParse: function() {
      return null;
    },
    fireSeekBegin: function(r, e) {
      if (this.plugin && this.plugin.getIsLive() && this.plugin.options["content.isLive.noSeek"])
        return null;
      if (this.flags.isJoined && !this.flags.isSeeking) {
        if (this.flags.isBuffering)
          if (e !== !1)
            t.notice("Converting current buffer to seek"), this.chronos.seek = this.chronos.buffer.clone(), this.chronos.buffer.reset(), this.flags.isBuffering = !1;
          else
            return;
        else
          this.chronos.seek.start();
        this.flags.isSeeking = !0, this.emit(n.Event.SEEK_BEGIN, { params: r });
      }
    },
    fireSeekEnd: function(r) {
      if (this.plugin && this.plugin.getIsLive() && this.plugin.options["content.isLive.noSeek"])
        return null;
      this.flags.isJoined && this.flags.isSeeking && (this.cancelSeek(), this.emit(n.Event.SEEK_END, { params: r }));
    },
    cancelSeek: function(r) {
      this.flags.isJoined && this.flags.isSeeking && (this.flags.isSeeking = !1, this.chronos.seek.stop(), this.monitor && this.monitor.skipNextTick());
    },
    fireEvent: function(r, e, a, s) {
      var o = s || {};
      o.name = r || "", o.dimensions = e || {}, o.values = a || {}, this.emit(n.Event.VIDEO_EVENT, { params: o });
    }
  };
  return El = i, El;
}
var qC = Ar, op = Pt, zc = pi, up = tu, VC = DC, jC = RC, xl = u_, fr = iu, Kc = qC.extend(
  {
    constructor: function(n) {
      this.flags = new jC(), this.chronos = new VC(), this.monitor = null, this.plugin = null, this.player = null, this._isAdsAdapter = null, this.setPlayer(n), this.tag = this.player, op.notice("Adapter " + this.getVersion() + " with Lib " + up + " is ready.");
    },
    setPlayer: function(n) {
      this.player && this.unregisterListeners(), typeof n == "string" && typeof document < "u" ? this.player = document.getElementById(n) : this.player = n, this.registerListeners();
    },
    registerListeners: function() {
    },
    unregisterListeners: function() {
    },
    dispose: function() {
      this.monitor && this.monitor.stop(), this.fireStop(), this.unregisterListeners(), this.player = null, this.tag = null;
    },
    monitorPlayhead: function(n, t, i) {
      this.stopMonitor();
      var r = 0;
      n && (r |= xl.Type.BUFFER), t && (r |= xl.Type.SEEK), !this.monitor || !this.monitor._timer.isRunning ? this.monitor = new xl(this, r, i) : this.monitor.skipNextTick();
    },
    stopMonitor: function() {
      this.monitor && this.monitor.stop();
    },
    getPlayhead: function() {
      return null;
    },
    getDuration: function() {
      return null;
    },
    getBitrate: function() {
      return null;
    },
    getTotalBytes: function() {
      return null;
    },
    getTitle: function() {
      return null;
    },
    getResource: function() {
      return null;
    },
    getPlayerVersion: function() {
      return null;
    },
    getPlayerName: function() {
      return null;
    },
    getVersion: function() {
      return up + "-generic-js";
    },
    fireInit: function(n) {
      this.plugin && this.plugin.fireInit();
    },
    fireStart: function(n) {
      if (this.plugin && this.plugin.backgroundDetector && this.plugin.backgroundDetector.canBlockStartCalls())
        return null;
      this.flags.isStarted || (this.flags.isStarted = !0, this.chronos.total.start(), this.chronos.join.start(), this.emit(fr.Event.START, { params: n }));
    },
    fireJoin: function(n) {
      !this.flags.isJoined && !this.flags.isStarted && !this._isAds() && this.plugin && this.plugin.isInitiated && this.fireStart(), this.flags.isStarted && !this.flags.isJoined && (this.flags.isStarted = !0, this.monitor && this.monitor.start(), this.flags.isJoined = !0, this.chronos.join.stop(), this.emit(fr.Event.JOIN, { params: n }));
    },
    firePause: function(n) {
      this.flags.isBuffering && this.fireBufferEnd(), this.flags.isJoined && !this.flags.isPaused && (this.flags.isPaused = !0, this.chronos.pause.start(), this.emit(fr.Event.PAUSE, { params: n }));
    },
    fireResume: function(n) {
      this.flags.isJoined && this.flags.isPaused && (this.flags.isPaused = !1, this.chronos.pause.stop(), this.monitor && this.monitor.skipNextTick(), this.emit(fr.Event.RESUME, { params: n }));
    },
    fireBufferBegin: function(n, t) {
      if (this.flags.isJoined && !this.flags.isBuffering) {
        if (this.flags.isSeeking)
          if (t)
            op.notice("Converting current buffer to seek"), this.chronos.buffer = this.chronos.seek.clone(), this.chronos.seek.reset(), this.flags.isSeeking = !1;
          else
            return;
        else
          this.chronos.buffer.start();
        this.flags.isBuffering = !0, this.emit(fr.Event.BUFFER_BEGIN, { params: n });
      }
    },
    fireBufferEnd: function(n) {
      this.flags.isJoined && this.flags.isBuffering && (this.cancelBuffer(), this.emit(fr.Event.BUFFER_END, { params: n }));
    },
    cancelBuffer: function(n) {
      this.flags.isJoined && this.flags.isBuffering && (this.flags.isBuffering = !1, this.chronos.buffer.stop(), this.monitor && this.monitor.skipNextTick());
    },
    fireStop: function(n) {
      (this._isAds() || this.plugin && this.plugin._isStopReady()) && (this._isAds() && this.flags.isStarted || !this._isAds() && (this.flags.isStarted || this.plugin && this.plugin.isInitiated)) && (this.monitor && this.monitor.stop(), this.flags.reset(), this.chronos.total.stop(), this.chronos.join.reset(), this.chronos.pause.stop(), this.chronos.buffer.stop(), this.chronos.seek.stop(), this.emit(fr.Event.STOP, { params: n }), this.chronos.pause.reset(), this.chronos.buffer.reset(), this.chronos.seek.reset(), this.chronos.viewedMax.splice(0, this.chronos.viewedMax.length));
    },
    setIsAds: function(n) {
      this._isAdsAdapter = n;
    },
    _isAds: function() {
      return this._isAdsAdapter;
    },
    fireCasted: function(n) {
      n || (n = {}), n.casted = !0, this.fireStop(n);
    },
    fireError: function(n, t, i, r) {
      var e = zc.buildErrorParams(n, t, i, r);
      e.code && delete e.code;
      var a = this.plugin ? this.plugin.options : {};
      typeof e.errorCode < "u" && a["errors.ignore"] && a["errors.ignore"].indexOf(e.errorCode.toString()) > -1 || (this.emit(fr.Event.ERROR, { params: e }), typeof e.errorCode < "u" && a["errors.fatal"] && a["errors.fatal"].indexOf(e.errorCode.toString()) > -1 && this.fireStop());
    },
    fireFatalError: function(n, t, i, r) {
      var e = this.plugin ? this.plugin.options : {};
      typeof n < "u" && e["errors.ignore"] && e["errors.ignore"].indexOf(n.toString()) > -1 || (this.monitor && this.monitor.stop(), this.fireError(n, t, i, r), typeof n < "u" && e["errors.nonFatal"] && e["errors.nonFatal"].indexOf(n.toString()) > -1 || this.fireStop());
    }
  },
  {
    Event: fr.Event
  }
);
zc.assign(Kc.prototype, BC());
zc.assign(Kc.prototype, UC());
var Xc = Kc, wl, lp;
function HC() {
  if (lp)
    return wl;
  lp = 1;
  var n = Pt, t = $i, i = pi, r = Xc, e = {
    setAdapter: function(a) {
      if (this.browserLoadTimes && this.browserLoadTimes.setPlayerSetupTime(), a.plugin)
        n.warn("Adapters can only be added to a single plugin");
      else {
        this.removeAdapter(), this._adapter = a, a.plugin = this, a.setIsAds(!1), this.contentAdapterListeners = {}, this.contentAdapterListeners[r.Event.START] = this._startListener.bind(this), this.contentAdapterListeners[r.Event.JOIN] = this._joinListener.bind(this), this.contentAdapterListeners[r.Event.PAUSE] = this._pauseListener.bind(this), this.contentAdapterListeners[r.Event.RESUME] = this._resumeListener.bind(this), this.contentAdapterListeners[r.Event.SEEK_BEGIN] = this._seekBufferBeginListener.bind(this), this.contentAdapterListeners[r.Event.SEEK_END] = this._seekEndListener.bind(this), this.contentAdapterListeners[r.Event.BUFFER_BEGIN] = this._seekBufferBeginListener.bind(this), this.contentAdapterListeners[r.Event.BUFFER_END] = this._bufferEndListener.bind(this), this.contentAdapterListeners[r.Event.ERROR] = this._errorListener.bind(this), this.contentAdapterListeners[r.Event.STOP] = this._stopListener.bind(this), this.contentAdapterListeners[r.Event.VIDEO_EVENT] = this._videoEventListener.bind(this);
        for (var s in this.contentAdapterListeners)
          this._adapter.on(s, this.contentAdapterListeners[s]);
      }
    },
    getAdapter: function() {
      return this._adapter;
    },
    removeAdapter: function() {
      if (this._adapter) {
        if (this._adapter.dispose(), this._adapter.plugin = null, this.contentAdapterListeners) {
          for (var a in this.contentAdapterListeners)
            this._adapter.off(a, this.contentAdapterListeners[a]);
          delete this.contentAdapterListeners;
        }
        this._adapter = null;
      }
    },
    _startListener: function(a) {
      this.isInitiated ? this.initChrono.startTime !== 0 && (this._adapter.chronos.join.startTime = this.initChrono.startTime) : (this.viewTransform.nextView(), this._initComm(), this._startPings());
      var s = a.data.params || {}, o = this.getResource() && typeof this.getIsLive() == "boolean" && (this.getIsLive() || typeof this.getDuration() == "number" && this.getDuration() > 0) && this.getTitle();
      o = this.options.forceInit ? !1 : o && this._isExtraMetadataReady(), o && !this.isInitiated ? (this._send(t.WillSendEvent.WILL_SEND_START, t.Service.START, s), this._adSavedError(), this._adSavedManifest(), n.notice(t.Service.START + " " + (s.title || s.mediaResource)), this.isStarted = !0) : this.isInitiated || (this.isInitiated = !0, this._adapter.chronos.join.start(), this._send(t.WillSendEvent.WILL_SEND_INIT, t.Service.INIT, s), this._adSavedError(), this._adSavedManifest(), n.notice(t.Service.INIT + " " + (s.title || s.mediaResource)));
    },
    _retryStart: function(a) {
      this._isExtraMetadataReady() && (this._send(t.WillSendEvent.WILL_SEND_START, t.Service.START, {}), this.startDelayed = !1);
    },
    _joinListener: function(a) {
      var s = {};
      i.assign(s, a.data.params || {}), !this._adsAdapter || !this._adsAdapter.flags.isStarted ? (this._adapter && (this._adapter.chronos.join.startTime = Math.min(
        this._adapter.chronos.join.startTime + (this._totalPrerollsTime || 0),
        new Date().getTime()
      ), this._totalPrerollsTime = 0), this.isInitiated && !this.isStarted && (this._isExtraMetadataReady() ? this._send(t.WillSendEvent.WILL_SEND_START, t.Service.START, s) : this.startDelayed = !0, this._adSavedError(), this._adSavedManifest(), n.notice(t.Service.START + " " + (s.title || s.mediaResource)), this.isStarted = !0), s = a.data.params || {}, this._adsAdapter && this.isBreakStarted && this._adsAdapter.fireBreakStop(), this._send(t.WillSendEvent.WILL_SEND_JOIN, t.Service.JOIN, s), n.notice(t.Service.JOIN + " " + s.joinDuration + "ms")) : (this._adapter.monitor && this._adapter.monitor.stop(), this._adapter.flags.isJoined = !1, this._adapter.chronos.join.stopTime = 0);
    },
    _pauseListener: function(a) {
      this._adapter && (this._adapter.flags.isBuffering || this._adapter.flags.isSeeking || this._adsAdapter && this._adsAdapter.flags.isStarted) && this._adapter.chronos.pause.reset();
      var s = a.data.params || {};
      this._send(t.WillSendEvent.WILL_SEND_PAUSE, t.Service.PAUSE, s), n.notice(t.Service.PAUSE + " at " + s.playhead + "s");
    },
    _resumeListener: function(a) {
      this._adsAdapter && this.isBreakStarted && !this._adsAdapter.flags.isStarted && this._adsAdapter.fireBreakStop();
      var s = a.data.params || {};
      this._send(t.WillSendEvent.WILL_SEND_RESUME, t.Service.RESUME, s), n.notice(t.Service.RESUME + " " + s.pauseDuration + "ms"), this._adapter.chronos.pause.reset();
    },
    _seekEndListener: function(a) {
      var s = a.data.params || {};
      this._send(t.WillSendEvent.WILL_SEND_SEEK, t.Service.SEEK, s), n.notice(
        t.Service.SEEK + " to " + s.playhead + " in " + s.seekDuration + "ms"
      );
    },
    _seekBufferBeginListener: function(a) {
      this._adapter && this._adapter.flags.isPaused && this._adapter.chronos.pause.reset(), n.notice(a.type);
    },
    _bufferEndListener: function(a) {
      var s = a.data.params || {};
      this._send(t.WillSendEvent.WILL_SEND_BUFFER, t.Service.BUFFER, s), n.notice(
        t.Service.BUFFER + " to " + s.playhead + " in " + s.bufferDuration + "ms"
      );
    },
    _errorListener: function(a) {
      this._blockError(a.data.params) || (this.fireError(a.data.params || {}), this._adSavedError(), this._adSavedManifest());
    },
    _blockError: function(a) {
      var s = Date.now(), o = this._lastErrorParams ? this._lastErrorParams.errorCode === a.errorCode && this._lastErrorParams.msg === a.msg : !1;
      return o && this._lastErrorTime + 5e3 > s ? (this._lastErrorTime = s, !0) : (this._lastErrorTime = s, this._lastErrorParams = a, !1);
    },
    _stopListener: function(a) {
      this.fireStop(a.data.params || {});
    },
    _isStopReady: function(a) {
      var s = !1;
      if (!this.requestBuilder.lastSent.live && this._adsAdapter && this._adapter && (!this._adapter.getPlayhead() || this._adapter.getPlayhead() >= this.requestBuilder.lastSent.mediaDuration - 1)) {
        var o = 0, u = this.options["ad.expectedPattern"];
        if (u && u.post && u.post[0])
          o = u.post[0];
        else if (this.requestBuilder.lastSent.breaksTime) {
          if (this.requestBuilder.lastSent.position === t.AdPosition.Postroll && (o = this.requestBuilder.lastSent.givenAds), !o && this.requestBuilder.lastSent.breaksTime) {
            var l = this.requestBuilder.lastSent.breaksTime;
            if (l.length > 0 && this.requestBuilder.lastSent.mediaDuration) {
              var d = Math.round(l[l.length - 1]);
              d + 1 >= this.requestBuilder.lastSent.mediaDuration && (o = 1);
            }
          }
        } else
          s = !0;
        o <= this.playedPostrolls && (s = !0);
      } else
        s = !0;
      return s;
    },
    _videoEventListener: function(a) {
      this._send(t.WillSendEvent.WILL_SEND_VIDEO_EVENT, t.Service.VIDEO_EVENT, a.data.params);
    },
    _isExtraMetadataReady: function(a) {
      if (!this.options.waitForMetadata || this.options.pendingMetadata.length < 1)
        return !0;
      var s = this.requestBuilder.getGetters();
      return this.options.pendingMetadata.map(function(o) {
        if (s.hasOwnProperty(o))
          return !!this[s[o]]();
      }.bind(this)).indexOf(!1) < 0;
    }
  };
  return wl = e, wl;
}
var Al, dp;
function WC() {
  if (dp)
    return Al;
  dp = 1;
  var n = pi, t = tu, i = {
    getHost: function() {
      var r = this.options.host;
      return this.viewTransform && this.viewTransform.response && this.viewTransform.response.host && (r = this.viewTransform.response.host), n.addProtocol(n.stripProtocol(r), this.options["app.https"]);
    },
    getUserType: function() {
      return this.options["user.type"];
    },
    isParseManifest: function() {
      return this.options["parse.manifest"];
    },
    isParseCdnNode: function() {
      return this.options["parse.cdnNode"];
    },
    isCdnSwitch: function() {
      return this.options["parse.cdnSwitchHeader"];
    },
    getParseCdnNodeList: function() {
      return this.options["parse.cdnNode.list"];
    },
    getParseCdnNodeNameHeader: function() {
      return this.options["parse.cdnNameHeader"];
    },
    getParseNodeHeader: function() {
      return this.options["parse.cdnNodeHeader"];
    },
    getObfuscateIp: function() {
      return this.options["user.obfuscateIp"];
    },
    getPrivacyProtocol: function() {
      var r = this.options["user.privacyProtocol"];
      return typeof r == "string" && (r = r.toLowerCase()), r === "optin" || r === "optout" ? r : null;
    },
    getCustomDimensions: function() {
      var r = this.options["content.customDimensions"];
      return typeof r == "object" ? r : null;
    },
    getExtraparam1: function() {
      return this.options["content.customDimension.1"];
    },
    getExtraparam2: function() {
      return this.options["content.customDimension.2"];
    },
    getExtraparam3: function() {
      return this.options["content.customDimension.3"];
    },
    getExtraparam4: function() {
      return this.options["content.customDimension.4"];
    },
    getExtraparam5: function() {
      return this.options["content.customDimension.5"];
    },
    getExtraparam6: function() {
      return this.options["content.customDimension.6"];
    },
    getExtraparam7: function() {
      return this.options["content.customDimension.7"];
    },
    getExtraparam8: function() {
      return this.options["content.customDimension.8"];
    },
    getExtraparam9: function() {
      return this.options["content.customDimension.9"];
    },
    getExtraparam10: function() {
      return this.options["content.customDimension.10"];
    },
    getExtraparam11: function() {
      return this.options["content.customDimension.11"];
    },
    getExtraparam12: function() {
      return this.options["content.customDimension.12"];
    },
    getExtraparam13: function() {
      return this.options["content.customDimension.13"];
    },
    getExtraparam14: function() {
      return this.options["content.customDimension.14"];
    },
    getExtraparam15: function() {
      return this.options["content.customDimension.15"];
    },
    getExtraparam16: function() {
      return this.options["content.customDimension.16"];
    },
    getExtraparam17: function() {
      return this.options["content.customDimension.17"];
    },
    getExtraparam18: function() {
      return this.options["content.customDimension.18"];
    },
    getExtraparam19: function() {
      return this.options["content.customDimension.19"];
    },
    getExtraparam20: function() {
      return this.options["content.customDimension.20"];
    },
    getAdExtraparam1: function() {
      return this.options["ad.customDimension.1"];
    },
    getAdExtraparam2: function() {
      return this.options["ad.customDimension.2"];
    },
    getAdExtraparam3: function() {
      return this.options["ad.customDimension.3"];
    },
    getAdExtraparam4: function() {
      return this.options["ad.customDimension.4"];
    },
    getAdExtraparam5: function() {
      return this.options["ad.customDimension.5"];
    },
    getAdExtraparam6: function() {
      return this.options["ad.customDimension.6"];
    },
    getAdExtraparam7: function() {
      return this.options["ad.customDimension.7"];
    },
    getAdExtraparam8: function() {
      return this.options["ad.customDimension.8"];
    },
    getAdExtraparam9: function() {
      return this.options["ad.customDimension.9"];
    },
    getAdExtraparam10: function() {
      return this.options["ad.customDimension.10"];
    },
    getPluginInfo: function() {
      var r = {
        lib: t,
        adapter: this.getAdapterVersion(),
        adAdapter: this.getAdAdapterVersion()
      };
      return r;
    },
    getIp: function() {
      return this.options["network.ip"];
    },
    getIsp: function() {
      return this.options["network.isp"];
    },
    getConnectionType: function() {
      return this.options["network.connectionType"];
    },
    getDeviceInfo: function() {
      var r = {};
      return this.getDeviceCode() && (r.deviceCode = this.getDeviceCode()), this.getModel() && (r.model = this.getModel()), this.getBrand() && (r.brand = this.getBrand()), this.getDeviceType() && (r.deviceType = this.getDeviceType()), this.getDeviceName() && (r.deviceName = this.getDeviceName()), this.getOsName() && (r.osName = this.getOsName()), this.getOsVersion() && (r.osVersion = this.getOsVersion()), this.getBrowserName() && (r.browserName = this.getBrowserName()), this.getBrowserVersion() && (r.browserVersion = this.getBrowserVersion()), this.getBrowserType() && (r.browserType = this.getBrowserType()), this.getBrowserEngine() && (r.browserEngine = this.getBrowserEngine()), r !== {} ? r : null;
    },
    getEDID: function() {
      var r = this.options["device.EDID"];
      return r ? r.toString() : null;
    },
    getDeviceCode: function() {
      return this.options["device.code"];
    },
    getModel: function() {
      return this.options["device.model"];
    },
    getBrand: function() {
      return this.options["device.brand"];
    },
    getDeviceType: function() {
      return this.options["device.type"];
    },
    getDeviceName: function() {
      return this.options["device.name"];
    },
    getOsName: function() {
      return this.options["device.osName"];
    },
    getOsVersion: function() {
      return this.options["device.osVersion"];
    },
    getBrowserName: function() {
      return this.options["device.browserName"];
    },
    getBrowserVersion: function() {
      return this.options["device.browserVersion"];
    },
    getBrowserType: function() {
      return this.options["device.browserType"];
    },
    getBrowserEngine: function() {
      return this.options["device.browserEngine"];
    },
    getAccountCode: function() {
      return this.options.accountCode;
    },
    getUsername: function() {
      return this.options["user.name"];
    },
    getAnonymousUser: function() {
      return this.options["user.anonymousId"];
    },
    getEmail: function() {
      return this.options["user.email"];
    },
    getReferer: function() {
      var r = this.options.referer || "";
      return !r && typeof window < "u" && window.location && (r = window.location.href), r;
    },
    getReferral: function() {
      var r = this.options.referral || "";
      return !r && typeof document < "u" && (r = document.referrer), r;
    },
    getLanguage: function() {
      var r = null;
      return typeof navigator < "u" && (r = navigator.language), r;
    },
    getNodeHost: function() {
      return this.options["content.cdnNode"] || this.resourceTransform.getNodeHost();
    },
    getNodeType: function() {
      return this.options["content.cdnType"] || this.resourceTransform.getNodeType();
    },
    getNodeTypeString: function() {
      return this.resourceTransform.getNodeTypeString();
    },
    getRequestNumber: function() {
      return Math.random();
    },
    getOfflineView: function() {
      var r = null;
      return this.offlineStorage && (r = this.offlineStorage.getView()), r;
    },
    getDeviceUUID: function() {
      var r = null;
      return this.options["device.isAnonymous"] || (r = this.options["device.id"] || this.uuidGenerator.getKey()), r;
    },
    getSmartswitchConfigCode: function() {
      return this.options["smartswitch.configCode"];
    },
    getSmartswitchGroupCode: function() {
      return this.options["smartswitch.groupCode"];
    },
    getSmartswitchContractCode: function() {
      return this.options["smartswitch.contractCode"];
    },
    getAppName: function() {
      return this.options["app.name"];
    },
    getAppReleaseVersion: function() {
      return this.options["app.releaseVersion"];
    },
    getIsBlocked: function() {
      return this.options["ad.blockerDetected"];
    }
  };
  return Al = i, Al;
}
var Cl, cp;
function GC() {
  if (cp)
    return Cl;
  cp = 1;
  var n = Pt, t = pi, i = tu, r = nu, e = t_, a = {
    getPlayhead: function() {
      var s = this._safeGetterAdapter("getPlayhead");
      return t.parseNumber(s, 0);
    },
    getPlayrate: function() {
      var s = 0;
      if (this._adapter && this._adapter.flags && !this._adapter.flags.isPaused)
        try {
          s = this._adapter.getPlayrate();
        } catch (o) {
          n.warn("An error occured while calling getPlayrate", o);
        }
      return s;
    },
    getFramesPerSecond: function() {
      return this._safeGetterAdapter("getFramesPerSecond", "content.fps");
    },
    getSegmentDuration: function() {
      return this.hybridNetwork.getSegmentDuration() || this._safeGetterAdapter("getSegmentDuration", "content.segmentDuration");
    },
    getDroppedFrames: function() {
      var s = this._safeGetterAdapter("getDroppedFrames");
      return s || (s = this.getWebkitDroppedFrames()), t.parseNumber(s, 0);
    },
    getWebkitDroppedFrames: function() {
      return this._adapter && this._adapter.tag && this._adapter.tag.webkitDroppedFrameCount ? this._adapter.tag.webkitDroppedFrameCount : null;
    },
    getDuration: function() {
      var s = this._safeGetterAdapter("getDuration", "content.duration") || null;
      return t.parseNumber(Math.round(s), null);
    },
    getBitrate: function() {
      var s = this._safeGetterAdapter("getBitrate", "content.bitrate");
      return (!s || s === -1) && (s = this.getWebkitBitrate()), t.parseNumber(s, -1);
    },
    getTotalBytes: function() {
      return this.options["content.sendTotalBytes"] ? this._safeGetterAdapter("getTotalBytes", "content.totalBytes") : null;
    },
    getWebkitBitrate: function() {
      if (this._adapter && this._adapter.tag && this._adapter.tag.webkitVideoDecodedByteCount) {
        var s = this._adapter.tag.webkitVideoDecodedByteCount;
        if (this._lastWebkitBitrate) {
          var o = this._adapter.tag.webkitVideoDecodedByteCount - this._lastWebkitBitrate;
          s = Math.round(o / this.viewTransform.response.pingTime * 8);
        }
        return this._lastWebkitBitrate = this._adapter.tag.webkitVideoDecodedByteCount, s !== 0 ? s : -1;
      }
    },
    getThroughput: function() {
      var s = this._safeGetterAdapter("getThroughput", "content.throughput");
      return t.parseNumber(s, -1);
    },
    getRendition: function() {
      return this._safeGetterAdapter("getRendition", "content.rendition");
    },
    getTitle: function() {
      return this._safeGetterAdapter("getTitle", "content.title");
    },
    getTitle2: function() {
      return this._safeGetterAdapter("getTitle2", "content.program");
    },
    getIsLive: function() {
      var s = this.options["content.isLive"];
      return !s && s !== !1 && (s = this._safeGetterAdapter("getIsLive") || !1), s;
    },
    getResource: function() {
      return this._safeGetterAdapter("getResource", "content.resource");
    },
    getParsedResource: function() {
      var s = null;
      return this.resourceTransform.isBlocking() || (s = this.resourceTransform.getResource()), s = s || this._safeGetterAdapter("getURLToParse"), s === this.getResource() ? null : s;
    },
    getTransactionCode: function() {
      return this.options["content.transactionCode"];
    },
    getMetadata: function() {
      return this.options["content.metadata"];
    },
    getPlayerVersion: function() {
      return this._safeGetterAdapter("getPlayerVersion") || "";
    },
    getPlayerName: function() {
      return this._safeGetterAdapter("getPlayerName") || "";
    },
    getCdn: function() {
      var s = null;
      return this.resourceTransform.isBlocking() || (s = this.resourceTransform.getCdnName()), s || this.options["content.cdn"];
    },
    getPluginVersion: function() {
      var s = this.getAdapterVersion();
      return s || (s = i + "-adapterless-js"), s;
    },
    getLibVersion: function() {
      return i;
    },
    getAdapterVersion: function() {
      return this._safeGetterAdapter("getVersion");
    },
    getCdnTraffic: function() {
      return this._safeGetterAdapter("getCdnTraffic") || this.hybridNetwork.getCdnTraffic();
    },
    getMultiCdnInfo: function() {
      return this.hybridNetwork.getMultiCdnInfo();
    },
    getBalancerResponseId: function() {
      return this.hybridNetwork.getBalancerResponseId();
    },
    getP2PTraffic: function() {
      return this._safeGetterAdapter("getP2PTraffic") || this.hybridNetwork.getP2PTraffic();
    },
    getUploadTraffic: function() {
      return this._safeGetterAdapter("getUploadTraffic") || this.hybridNetwork.getUploadTraffic();
    },
    getIsP2PEnabled: function() {
      return this._safeGetterAdapter("getIsP2PEnabled") || this.hybridNetwork.getIsP2PEnabled();
    },
    getStreamingProtocol: function() {
      var s = this.options["content.streamingProtocol"];
      if (s) {
        for (var o in e)
          if (e[o] === s)
            return s;
      }
      return null;
    },
    getTransportFormat: function() {
      var s = this.options["content.transportFormat"];
      if (!s && this.options["parse.manifest"] && !this.resourceTransform.isBlocking() && (s = this.resourceTransform.getTransportFormat()), s) {
        for (var o in r)
          if (r[o] === s)
            return s;
      }
      return null;
    },
    getHouseholdId: function() {
      return this._safeGetterAdapter("getHouseholdId");
    },
    getLatency: function() {
      return this.getIsLive() ? this._safeGetterAdapter("getLatency") : null;
    },
    getPacketLoss: function() {
      return this._safeGetterAdapter("getPacketLoss");
    },
    getPacketSent: function() {
      return this._safeGetterAdapter("getPacketSent");
    },
    getVideoMetrics: function() {
      return t.getMetricsFrom(this._adapter ? this._adapter.getMetrics() : null, this.options["content.metrics"]);
    },
    getPlayerStartupTime: function() {
      return this.browserLoadTimes.getPlayerStartupTime();
    },
    getJoinDuration: function() {
      return this._adapter ? this._adapter.chronos.join.getDeltaTime(!1) : -1;
    },
    getBufferDuration: function() {
      return this._adapter ? this._adapter.chronos.buffer.getDeltaTime(!1) : -1;
    },
    getSeekDuration: function() {
      return this._adapter ? this._adapter.chronos.seek.getDeltaTime(!1) : -1;
    },
    getPauseDuration: function() {
      return this._adapter ? this._adapter.chronos.pause.getDeltaTime(!1) : 0;
    },
    getPackage: function() {
      return this.options["content.package"];
    },
    getSaga: function() {
      return this.options["content.saga"];
    },
    getTvShow: function() {
      return this.options["content.tvShow"];
    },
    getSeason: function() {
      return this.options["content.season"];
    },
    getEpisodeTitle: function() {
      return this.options["content.episodeTitle"];
    },
    getChannel: function() {
      return this.options["content.channel"];
    },
    getID: function() {
      return this.options["content.id"];
    },
    getImdbId: function() {
      return this.options["content.imdbId"];
    },
    getGracenoteID: function() {
      return this.options["content.gracenoteId"];
    },
    getType: function() {
      return this.options["content.type"];
    },
    getGenre: function() {
      return this.options["content.genre"];
    },
    getVideoLanguage: function() {
      return this.options["content.language"];
    },
    getSubtitles: function() {
      return this.options["content.subtitles"];
    },
    getContractedResolution: function() {
      return this.options["content.contractedResolution"];
    },
    getCost: function() {
      return this.options["content.cost"];
    },
    getPrice: function() {
      return this.options["content.price"];
    },
    getPlaybackType: function() {
      var s = this.options["content.playbackType"];
      if (!s) {
        var o = this.options["content.isLive"];
        typeof o != "boolean" && (o = this._safeGetterAdapter("getIsLive")), typeof o == "boolean" && (s = o ? "Live" : "VoD");
      }
      return s;
    },
    getDRM: function() {
      return this.options["content.drm"];
    },
    getVideoCodec: function() {
      return this._safeGetterAdapter("getVideoCodec", "content.encoding.videoCodec");
    },
    getAudioCodec: function() {
      return this._safeGetterAdapter("getAudioCodec", "content.encoding.audioCodec");
    },
    getCodecSettings: function() {
      return this.options["content.encoding.codecSettings"];
    },
    getCodecProfile: function() {
      return this.options["content.encoding.codecProfile"];
    },
    getContainerFormat: function() {
      return this.options["content.encoding.containerFormat"];
    },
    getLinkedViewId: function() {
      return this.options.linkedViewId;
    },
    _safeGetterAdapter: function(s, o) {
      var u = null;
      if (o && this.options[o])
        u = this.options[o];
      else
        try {
          this._adapter && typeof this._adapter[s] == "function" && (u = this._adapter[s]());
        } catch (l) {
          n.warn("An error occured while calling " + s, l);
        }
      return u;
    }
  };
  return Cl = a, Cl;
}
var kl, fp;
function $C() {
  if (fp)
    return kl;
  fp = 1;
  var n = Pt, t = $i, i = Xc, r = pi, e = {
    getAdsAdapter: function() {
      return this._adsAdapter;
    },
    setAdsAdapter: function(a) {
      if (a.plugin)
        n.warn("Adapters can only be added to a single plugin");
      else {
        this.removeAdsAdapter(), a.plugin = this, this._adsAdapter = a, a.setIsAds(!0), this.adsAdapterListeners = {}, this.adsAdapterListeners[i.Event.START] = this._adStartListener.bind(this), this.adsAdapterListeners[i.Event.JOIN] = this._adJoinListener.bind(this), this.adsAdapterListeners[i.Event.PAUSE] = this._adPauseListener.bind(this), this.adsAdapterListeners[i.Event.RESUME] = this._adResumeListener.bind(this), this.adsAdapterListeners[i.Event.BUFFER_BEGIN] = this._adBufferBeginListener.bind(this), this.adsAdapterListeners[i.Event.BUFFER_END] = this._adBufferEndListener.bind(this), this.adsAdapterListeners[i.Event.STOP] = this._adStopListener.bind(this), this.adsAdapterListeners[i.Event.ERROR] = this._adErrorListener.bind(this), this.adsAdapterListeners[i.Event.CLICK] = this._adClickListener.bind(this), this.adsAdapterListeners[i.Event.MANIFEST] = this._adManifestListener.bind(this), this.adsAdapterListeners[i.Event.PODSTART] = this._adBreakStartListener.bind(this), this.adsAdapterListeners[i.Event.PODSTOP] = this._adBreakStopListener.bind(this), this.adsAdapterListeners[i.Event.QUARTILE] = this._adQuartileListener.bind(this);
        for (var s in this.adsAdapterListeners)
          this._adsAdapter.on(s, this.adsAdapterListeners[s]);
      }
    },
    removeAdsAdapter: function() {
      if (this._adsAdapter) {
        if (this._adsAdapter.dispose(), this._adsAdapter.plugin = null, this.adsAdapterListeners) {
          for (var a in this.adsAdapterListeners)
            this._adsAdapter.off(a, this.adsAdapterListeners[a]);
          delete this.adsAdapterListeners;
        }
        this.resizeScrollDetector.stopDetection(), this._adsAdapter = null;
      }
    },
    _adStartListener: function(a) {
      this._adapter ? (this._adapter.fireBufferEnd(), this._adapter.fireSeekEnd(), !this.isInitiated && !this._adapter.flags.isStarted && this._adapter.fireStart(), this._adapter.flags.isPaused && this._adapter.chronos.pause.reset()) : this.fireInit(), this._adsAdapter && (this._adsAdapter.chronos.viewedMax = []);
      var s = a.data.params || {};
      s.adNumber = this.requestBuilder.getNewAdNumber();
      var o = (this.getAdResource() || this.getAdTitle()) && typeof this.getAdDuration() == "number";
      o ? (this.adStartSent = !0, this._adsAdapter.fireManifest(), this._adsAdapter.fireBreakStart(), s.adNumberInBreak = this.requestBuilder.getNewAdNumberInBreak(), this._sendAdEventIfAllowed(t.WillSendEvent.WILL_SEND_AD_START, t.Service.AD_START, s)) : (this.adInitSent = !0, s.adNumberInBreak = this.requestBuilder.getNewAdNumberInBreak(), this._sendAdEventIfAllowed(t.WillSendEvent.WILL_SEND_AD_INIT, t.Service.AD_INIT, s));
    },
    _adJoinListener: function(a) {
      var s = {};
      r.assign(s, a.data.params || {}), this.adInitSent && !this.adStartSent && (this._adsAdapter.fireManifest(), this._adsAdapter.fireBreakStart(), this._sendAdEventIfAllowed(t.WillSendEvent.WILL_SEND_AD_START, t.Service.AD_START, s)), this._adsAdapter.startChronoView(), this.adConnected && (this._adsAdapter.chronos.join.startTime = this.adConnectedTime, this._adsAdapter.chronos.total.startTime = this.adConnectedTime, this.adConnectedTime = 0, this.adConnected = !1), s = a.data.params || {}, this._sendAdEventIfAllowed(t.WillSendEvent.WILL_SEND_AD_JOIN, t.Service.AD_JOIN, s), this.adInitSent = !1, this.adStartSent = !1;
    },
    _adPauseListener: function(a) {
      var s = a.data.params || {};
      this._adsAdapter.stopChronoView(), this._sendAdEventIfAllowed(t.WillSendEvent.WILL_SEND_AD_PAUSE, t.Service.AD_PAUSE, s);
    },
    _adResumeListener: function(a) {
      var s = a.data.params || {};
      this._adsAdapter.startChronoView(), this._sendAdEventIfAllowed(t.WillSendEvent.WILL_SEND_AD_RESUME, t.Service.AD_RESUME, s);
    },
    _adBufferBeginListener: function(a) {
      n.notice("Ad Buffer Begin"), this._adsAdapter.stopChronoView(), this._adsAdapter && this._adsAdapter.flags.isPaused && this._adsAdapter.chronos.pause.reset();
    },
    _adBufferEndListener: function(a) {
      var s = a.data.params || {};
      this._adsAdapter.startChronoView(), this._sendAdEventIfAllowed(t.WillSendEvent.WILL_SEND_AD_BUFFER, t.Service.AD_BUFFER, s);
    },
    _adStopListener: function(a) {
      this._adsAdapter.stopChronoView(), this._adsAdapter.flags.reset(), this._totalPrerollsTime = (this._totalPrerollsTime || 0) + this._adsAdapter.chronos.total.getDeltaTime();
      var s = a.data.params || {};
      if (s.position = this.requestBuilder.lastSent.position, this._sendAdEventIfAllowed(t.WillSendEvent.WILL_SEND_AD_STOP, t.Service.AD_STOP, s), this.requestBuilder.lastSent.position === t.AdPosition.Postroll) {
        var o = this.options["ad.expectedPattern"];
        this.playedPostrolls++, (this.requestBuilder.lastSent.givenAds && this.requestBuilder.lastSent.givenAds <= this.playedPostrolls || !this.requestBuilder.lastSent.givenAds && o && o.post && o.post[0] && o.post[0] <= this.playedPostrolls) && this.fireStop();
      }
      this.adConnected = !0, this.adConnectedTime = new Date().getTime();
    },
    _adErrorListener: function(a) {
      var s = a.data.params || {};
      if (this._adapter && !this._adapter.flags.isStarted && !this.isInitiated)
        return this._savedAdError = a, null;
      if (this._blockAdError(a.data.params))
        return null;
      this._adsAdapter && (this._adsAdapter.fireManifest(), this._adsAdapter.fireBreakStart()), (!this._adsAdapter || !this._adsAdapter.flags.isStarted) && (s.adNumber = this.requestBuilder.getNewAdNumber(), s.adNumberInBreak = this.requestBuilder.getNewAdNumberInBreak()), this.isBreakStarted || (s.breakNumber = this.requestBuilder.getNewBreakNumber()), this._sendAdEventIfAllowed(t.WillSendEvent.WILL_SEND_AD_ERROR, t.Service.AD_ERROR, s);
    },
    _adSavedError: function() {
      this._savedAdError && (this._adErrorListener(this._savedAdError), this._savedAdError = null);
    },
    _adSavedManifest: function() {
      this._savedAdManifest && (this._adManifestListener(this._savedAdManifest), this._savedAdManifest = null);
    },
    _blockAdError: function(a) {
      var s = Date.now(), o = this._lastAdErrorParams && this._lastAdErrorParams.errorCode === a.errorCode && this._lastAdErrorParams.msg === a.msg && this._lastAdErrorParams.adCreativeId === this.getAdCreativeId();
      return o && this._lastAdErrorTime + 5e3 > s ? (this._lastAdErrorTime = s, !0) : (this._lastAdErrorTime = s, this._lastAdErrorParams = a, !1);
    },
    _adClickListener: function(a) {
      var s = a.data.params || {};
      this._adsAdapter.stopChronoView(), this._sendAdEventIfAllowed(t.WillSendEvent.WILL_SEND_AD_CLICK, t.Service.AD_CLICK, s);
    },
    _adManifestListener: function(a) {
      if (!this.isAdsManifestSent) {
        if (this._adapter && !this._adapter.flags.isStarted && !this.isInitiated)
          return this._savedAdManifest = a, null;
        var s = a.data.params || {};
        this.isAdsManifestSent = !0, this._sendAdEventIfAllowed(t.WillSendEvent.WILL_SEND_AD_MANIFEST, t.Service.AD_MANIFEST, s);
      }
    },
    _adBreakStartListener: function(a) {
      if (!this.isBreakStarted) {
        this.isBreakStarted = !0, this._adapter && this._adapter.firePause();
        var s = a.data.params || {};
        s.breakNumber = this.requestBuilder.getNewBreakNumber(), this._sendAdEventIfAllowed(t.WillSendEvent.WILL_SEND_AD_POD_START, t.Service.AD_POD_START, s), this.adConnected = !1;
      }
    },
    _adBreakStopListener: function(a) {
      if (this.isBreakStarted) {
        this.isBreakStarted = !1;
        var s = a.data.params || {};
        s.position = this.requestBuilder.lastSent.position, this._sendAdEventIfAllowed(t.WillSendEvent.WILL_SEND_AD_POD_STOP, t.Service.AD_POD_STOP, s), this.adConnected = !1, this._adapter && this._adapter.fireResume();
      }
    },
    _adQuartileListener: function(a) {
      var s = a.data.params || {};
      s.quartile && this._sendAdEventIfAllowed(t.WillSendEvent.WILL_SEND_AD_QUARTILE, t.Service.AD_QUARTILE, s);
    },
    _sendAdEventIfAllowed: function(a, s, o) {
      this.options["ad.ignore"] || this._send(a, s, o), n.notice(s);
    }
  };
  return kl = e, kl;
}
var Pl, hp;
function zC() {
  if (hp)
    return Pl;
  hp = 1;
  var n = Pt, t = pi, i = $i, r = {
    getAdPlayerVersion: function() {
      return this._safeGetterAdsAdapter("getPlayerVersion") || "";
    },
    getAdPosition: function() {
      var e = i.AdPosition.Preroll;
      if (this._adsAdapter)
        try {
          var a = this._adsAdapter.getPosition();
          (i.AdPosition.Preroll === a || i.AdPosition.Midroll === a || i.AdPosition.Postroll === a) && (e = a);
        } catch (s) {
          n.warn("An error occured while calling getAdPosition", s);
        }
      return !e && this._adapter && (e = this._adapter.flags.isJoined ? i.AdPosition.Midroll : i.AdPosition.Preroll), e;
    },
    getAdNumber: function() {
      return this.requestBuilder.lastSent.adNumber || 0;
    },
    getAdNumberInBreak: function() {
      return this.requestBuilder.lastSent.adNumberInBreak || 0;
    },
    getBreakNumber: function() {
      return this.requestBuilder.lastSent.breakNumber || 0;
    },
    getAdPlayhead: function() {
      var e = this._safeGetterAdsAdapter("getPlayhead");
      return t.parseNumber(e, 0);
    },
    getAdDuration: function() {
      var e = this._safeGetterAdsAdapter("getDuration", "ad.duration");
      return t.parseNumber(e, 0);
    },
    getAdBitrate: function() {
      var e = this._safeGetterAdsAdapter("getBitrate");
      return (!e || e === -1) && (e = this.getWebkitAdBitrate()), t.parseNumber(e, -1);
    },
    getWebkitAdBitrate: function() {
      if (this._adsAdapter && this._adsAdapter.tag && this._adsAdapter.tag.webkitVideoDecodedByteCount) {
        var e = this._adsAdapter.tag.webkitVideoDecodedByteCount;
        if (this._lastWebkitAdBitrate) {
          var a = this._adsAdapter.tag.webkitVideoDecodedByteCount - this._lastWebkitAdBitrate;
          e = Math.round(a / this.viewTransform.response.pingTime * 8);
        }
        return this._lastWebkitAdBitrate = this._adsAdapter.tag.webkitVideoDecodedByteCount, e !== 0 ? e : -1;
      }
    },
    getAdTitle: function() {
      return this._safeGetterAdsAdapter("getTitle", "ad.title");
    },
    getAdResource: function() {
      return this._safeGetterAdsAdapter("getResource", "ad.resource");
    },
    getAdCampaign: function() {
      return this._safeGetterAdsAdapter("getCampaign", "ad.campaign");
    },
    getAdCreativeId: function() {
      return this._safeGetterAdsAdapter("getCreativeId", "ad.creativeId");
    },
    getAdProvider: function() {
      return this._safeGetterAdsAdapter("getProvider", "ad.provider");
    },
    getAdAdapterVersion: function() {
      return this._safeGetterAdsAdapter("getVersion");
    },
    getAdMetadata: function() {
      return this.options["ad.metadata"];
    },
    getAdInsertionType: function() {
      return this._safeGetterAdsAdapter("getAdInsertionType");
    },
    getGivenBreaks: function() {
      return this._safeGetterAdsAdapter("getGivenBreaks", "ad.givenBreaks");
    },
    getExpectedBreaks: function() {
      var e = null, a = this.options["ad.expectedBreaks"], s = this.options["ad.expectedPattern"];
      if (a)
        e = a;
      else if (s)
        e = 0, e = s.pre ? s.pre.length : 0, e += s.mid ? s.mid.length : 0, e += s.post ? s.post.length : 0;
      else if (this._adsAdapter)
        try {
          e = this._adsAdapter.getExpectedBreaks();
        } catch (o) {
          n.warn("An error occured while calling expectedBreaks", o);
        }
      return e;
    },
    getExpectedPattern: function() {
      return this._safeGetterAdsAdapter("getExpectedPattern", "ad.expectedPattern");
    },
    getBreaksTime: function() {
      return this._safeGetterAdsAdapter("getBreaksTime", "ad.breaksTime");
    },
    getGivenAds: function() {
      return this._safeGetterAdsAdapter("getGivenAds", "ad.givenAds");
    },
    getExpectedAds: function() {
      var e = null;
      try {
        if (this._adsAdapter) {
          var a = this.options["ad.expectedPattern"];
          if (a && this.getAdPosition()) {
            var s = [];
            if (a.pre && (s = s.concat(a.pre)), a.mid && (s = s.concat(a.mid)), a.post && (s = s.concat(a.post)), s.length > 0) {
              var o = this.requestBuilder.lastSent.breakNumber;
              o > s.length && (o = s.length), e = s[o - 1];
            }
          } else
            e = this._adsAdapter.getExpectedAds();
        }
      } catch (u) {
        n.warn("An error occured while calling expectedAds", u);
      }
      return e;
    },
    getAdsExpected: function() {
      var e = null;
      try {
        e = this.getExpectedPattern() || this.getGivenAds() || !1;
      } catch (a) {
        n.warn("An error occured while calling givenAds or expectedPattern", a);
      }
      return e;
    },
    getAdJoinDuration: function() {
      return this._adsAdapter ? this._adsAdapter.chronos.join.getDeltaTime(!1) : -1;
    },
    getAdBufferDuration: function() {
      return this._adsAdapter ? this._adsAdapter.chronos.buffer.getDeltaTime(!1) : -1;
    },
    getAdPauseDuration: function() {
      return this._adsAdapter ? this._adsAdapter.chronos.pause.getDeltaTime(!1) : 0;
    },
    getAdTotalDuration: function() {
      return this._adsAdapter ? this._adsAdapter.chronos.total.getDeltaTime(!1) : -1;
    },
    getAdViewedDuration: function() {
      return this._getTimeMaxOrAcum(!0);
    },
    getAdViewability: function() {
      return this._getTimeMaxOrAcum();
    },
    _getTimeMaxOrAcum: function(e) {
      var a = 0;
      return this._adsAdapter && this._adsAdapter.chronos.viewedMax.forEach(function(s) {
        e ? a += s.getDeltaTime(!1) : a = Math.max(s.getDeltaTime(!1), a);
      }), a;
    },
    getAudioEnabled: function() {
      return this._safeGetterAdsAdapter("getAudioEnabled");
    },
    getIsSkippable: function() {
      return this._safeGetterAdsAdapter("getIsSkippable");
    },
    getIsFullscreen: function() {
      return this._safeGetterAdsAdapter("getIsFullscreen");
    },
    _safeGetterAdsAdapter: function(e, a) {
      var s = null;
      if (a && this.options[a])
        s = this.options[a];
      else
        try {
          this._adsAdapter && typeof this._adsAdapter[e] == "function" && (s = this._adsAdapter[e]());
        } catch (o) {
          n.warn("An error occured while calling " + e, o);
        }
      return s;
    }
  };
  return Pl = r, Pl;
}
var Il, pp;
function KC() {
  if (pp)
    return Il;
  pp = 1;
  var n = Pt, t = $i, i = {
    _startPings: function() {
      this._ping.isRunning || this._ping.start();
    },
    _stopPings: function() {
      this._ping.stop();
    },
    _sendPing: function(r) {
      var e = {
        diffTime: r,
        entities: this.requestBuilder.getChangedEntities()
      };
      this._adapter && (this._adapter.flags.isPaused ? e = this.requestBuilder.fetchParams(e, ["pauseDuration"]) : e = this.requestBuilder.fetchParams(e, ["bitrate", "throughput", "fps"]), this._adapter.flags.isJoined && (e = this.requestBuilder.fetchParams(e, ["playhead"])), this._adapter.flags.isBuffering && (e = this.requestBuilder.fetchParams(e, ["bufferDuration"])), this._adapter.flags.isSeeking && (e = this.requestBuilder.fetchParams(e, ["seekDuration"]))), this._adsAdapter && !this.options["ad.ignore"] && (this._adsAdapter.flags.isStarted && (e = this.requestBuilder.fetchParams(e, ["adPlayhead", "adViewedDuration", "adViewability"]), this._adsAdapter.flags.isPaused ? e = this.requestBuilder.fetchParams(e, ["adPauseDuration"]) : e = this.requestBuilder.fetchParams(e, ["adBitrate"])), this._adsAdapter.flags.isBuffering && (e = this.requestBuilder.fetchParams(e, ["adBufferDuration"]))), this._send(t.WillSendEvent.WILL_SEND_PING, t.Service.PING, e), this.startDelayed && this._retryStart(), n.verbose(t.Service.PING);
    }
  };
  return Il = i, Il;
}
var Dl, mp;
function XC() {
  if (mp)
    return Dl;
  mp = 1;
  var n = Pt, t = pi, i = $i, r = Br, e = {
    fireInit: function(a) {
      this.isInitiated || (!this.getAdapter() || this.getAdapter() && !this.getAdapter().flags.isStarted) && (this.viewTransform.nextView(), this._initComm(), this._startPings(), this.initChrono.start(), this.isInitiated = !0, a = a || {}, this._send(i.WillSendEvent.WILL_SEND_INIT, i.Service.INIT, a), this._adSavedError(), this._adSavedManifest(), n.notice(i.Service.INIT + " " + (a.title || a.mediaResource)));
    },
    fireError: function(a, s, o, u) {
      this.fireInit();
      var l = t.buildErrorParams(a, s, o, u);
      l.code && delete l.code, this._send(i.WillSendEvent.WILL_SEND_ERROR, i.Service.ERROR, l), this._adSavedError(), this._adSavedManifest(), n.notice(
        i.Service.ERROR + " " + l.errorLevel + " " + l.errorCode
      ), l.errorLevel === "fatal" && this.fireStop();
    },
    fireFatalError: function(a, s, o, u) {
      this.fireError(a, s, o, u), this.fireStop();
    },
    fireStop: function(a) {
      if (this.isInitiated || this.isStarted) {
        this._adapter && (this._adapter.flags.isStopped = !0, this._adapter.monitor && this._adapter.monitor.stop()), this._adsAdapter && this.isBreakStarted && (this._adsAdapter.fireStop(), this._adsAdapter.fireBreakStop()), a = a || {}, this._send(i.WillSendEvent.WILL_SEND_STOP, i.Service.STOP, a);
        var s = this._adapter ? this._adapter.chronos : null;
        s && (s.total.stop(), s.join.reset(), s.pause.reset(), s.buffer.reset(), s.seek.reset()), n.notice(i.Service.STOP + " at " + a.playhead + "s"), this._reset();
      }
    },
    fireOfflineEvents: function(a) {
      this.options && !this.options.offline ? !this.isInitiated && (!this._adapter || !this._adapter.flags.isStarted) && (!this._adsAdapter || !this._adsAdapter.flags.isStarted) ? (this._offlineParams = a, this.viewTransform.response.code && this.viewTransform.response.host ? this._generateAndSendOffline() : (this.offlineReference = this._generateAndSendOffline.bind(this), this.viewTransform.on(r.Event.DONE, this.offlineReference))) : n.error("Adapters have to be stopped") : n.error("To send offline events, offline option must be disabled");
    },
    _generateAndSendOffline: function() {
      if (this.options.disableStorage)
        return null;
      var a = this._offlineParams;
      for (this._initComm(); ; ) {
        var s = this.requestBuilder.buildBody(i.Service.OFFLINE_EVENTS).viewJson;
        if (s[0] === null)
          break;
        var o = this.viewTransform.nextView(), u = s[0].replace(/CODE_PLACEHOLDER/g, o.toString()).replace(/,"sessionId":"SESSION_PLACEHOLDER"/g, "").replace(/,"sessionRoot":"ROOT_PLACEHOLDER"/g, "");
        this._send(
          i.WillSendEvent.WILL_SEND_OFFLINE_EVENTS,
          i.Service.OFFLINE_EVENTS,
          a,
          u,
          "POST",
          function(l, d) {
            this.offlineStorage.removeView(d.offlineId);
          }.bind(this),
          { offlineId: s[1] }
        );
      }
      this.offlineStorage.sent(), this._offlineParams = null;
    }
  };
  return Dl = e, Dl;
}
var Ll, gp;
function QC() {
  if (gp)
    return Ll;
  gp = 1;
  var n = $i, t = Pt, i = rr, r = pi, e = $c, a = {
    _initInfinity: function() {
      this.infinity.on(e.Event.NAV, this._navListener.bind(this)), this.infinity.on(e.Event.SESSION_START, this._sessionStartListener.bind(this)), this.infinity.on(e.Event.SESSION_STOP, this._sessionStopListener.bind(this)), this.infinity.on(e.Event.EVENT, this._eventListener.bind(this));
    },
    _sendInfinity: function(s, o, u) {
      u = this.requestBuilder.buildParams(u, o);
      var l = {
        params: u,
        plugin: this,
        adapter: this.getAdapter(),
        adsAdapter: this.getAdsAdapter()
      };
      this.emit(s, l), this.infinity._comm && u !== null && this.options.enabled && (this.lastServeiceSent = o, this.infinity._comm.sendRequest(new i(null, o, u)));
    },
    _navListener: function(s) {
      var o = s.data.params || {};
      this._sendInfinity(n.WillSendEvent.WILL_SEND_NAV, n.Service.NAV, o), this._beat.isRunning || this._beat.start(), t.notice(n.Service.NAV + " " + o.route);
    },
    _sessionStartListener: function(s) {
      var o = s.data.params || {};
      this._sendInfinity(
        n.WillSendEvent.WILL_SEND_SESSION_START,
        n.Service.SESSION_START,
        o
      ), this._beat.isRunning || this._beat.start(), t.notice(n.Service.SESSION_START + " " + o.route);
    },
    _sessionStopListener: function(s) {
      var o = s.data.params || {};
      this._sendInfinity(
        n.WillSendEvent.WILL_SEND_SESSION_STOP,
        n.Service.SESSION_STOP,
        o
      ), this._beat.isRunning && this._beat.stop(), t.notice(n.Service.SESSION_STOP + " " + o.route);
    },
    _eventListener: function(s) {
      var o = s.data.params || {};
      this._sendInfinity(n.WillSendEvent.WILL_SEND_EVENT, n.Service.EVENT, o), t.notice(n.Service.EVENT + " " + o.name);
    },
    _sendBeat: function(s) {
      var o = {
        diffTime: s
      };
      this._sendInfinity(n.WillSendEvent.WILL_SEND_BEAT, n.Service.BEAT, o), this.infinity && this.infinity._setLastActive(), t.verbose(n.Service.BEAT);
    },
    getSessionMetrics: function() {
      return r.getMetricsFrom(this.options["session.metrics"]);
    }
  };
  return Ll = a, Ll;
}
var Ol, vp;
function YC() {
  if (vp)
    return Ol;
  vp = 1;
  const n = pi;
  var t = {
    getContext: function() {
      var i = "Default";
      return this.options["session.context"] && (i = this.storage.getSession("context")), i;
    },
    getScrollDepth: function() {
      var i = this.storage.getSession("pageScrollDepth");
      return this.storage.removeSession("pageScrollDepth"), i;
    },
    getSession: function() {
      var i = this.storage.getStorages("session");
      if (i === "undefined" && (i = void 0), !i) {
        var r = this.getStoredData();
        if (r)
          try {
            i = JSON.parse(r).q.c;
          } catch {
          }
      }
      return i;
    },
    getStorageHost: function() {
      var i = null, r = this.getStoredData();
      if (r)
        try {
          i = JSON.parse(r).q.h;
        } catch {
        }
      return i && n.addProtocol(i, this.options["app.https"]);
    },
    getStoredData: function() {
      return this.storage.getStorages("data");
    },
    getDataTime: function() {
      return this.storage.getStorages("dataTime");
    },
    getLastActive: function() {
      return this.storage.getStorages("lastactive");
    },
    setStoredData: function(i) {
      this.storage.setStorages("data", i);
    },
    setSession: function(i) {
      this.storage.setStorages("session", i);
    },
    setDataTime: function(i) {
      this.storage.setStorages("dataTime", i);
    },
    setLastActive: function(i) {
      this.storage.setStorages("lastactive", i);
    },
    getPageName: function() {
      if (typeof document < "u" && document.title)
        return document.title;
    },
    getPageLoadTime: function() {
      return this.browserLoadTimes.getPageLoadTime();
    },
    getIsSessionExpired: function() {
      var i = new Date().getTime();
      return !this.getSession() || this.infinity.getFirstActive() < i - this.sessionExpire;
    },
    getIsDataExpired: function() {
      var i = new Date().getTime();
      return !this.storage.isEnabled() || !this.getStoredData() || this.infinity.getFirstActive() < i - this.sessionExpire;
    }
  };
  return Ol = t, Ol;
}
var JC = Ar, Rl = Hc, ZC = da, _p = $i, Cr = pi, ek = rr, tk = Wc, ik = $A, yp = $v, Tp = Zv, rk = e_, nk = i_, bp = Gc, ak = JA, sk = r_, ok = $c, uk = Hv, lk = fC, dk = a_, ck = s_, fk = yC, hk = o_, nr = JC.extend(
  {
    constructor: function(n, t, i) {
      typeof t == "string" && !i && (i = t, t = null), this.storage = new bp(), this.uuidGenerator = new hk(this), this.infinity = new ok(this), this.isInitiated = !1, this.isAdsManifestSent = !1, this.playedPostrolls = 0, this.isBreakStarted = !1, this.initChrono = new ZC(), this.options = new nk(n), this.storage = new bp(null, this.options.disableCookies, this.options.forceCookies, this.options.disableStorage), this.options.disableStorage || (this.offlineStorage = new ak()), this._adapter = null, this._adsAdapter = null, this._ping = new Rl(this._sendPing.bind(this), 5e3), this._beat = new Rl(this._sendBeat.bind(this), 3e4), this._refreshData = new Rl(this._checkOldData.bind(this), 36e5), this._refreshData.start(), this.sessionExpire = Number(this.storage.getLocal("sessionExpire")) * 1e3 || 3e5, this.requestBuilder = new sk(this), this.resourceTransform = new Tp(this), this.lastEventTime = null, this.restartViewTransform(i), this._initInfinity(), this.hybridNetwork = new uk(), this.browserLoadTimes = new lk(this), this.deviceDetector = new ck(), this.backgroundDetector = new dk(this), this.resizeScrollDetector = new fk(this), this.options["background.enabled"] && this.backgroundDetector.startDetection(), t && this.setAdapter(t);
    },
    _checkOldData: function() {
      this._adapter && this._adapter.flags.isStarted || this.infinity.infinityStarted || this.restartViewTransform();
    },
    restartViewTransform: function(n) {
      if (this.viewTransform = new yp(this), this.viewTransform.on(yp.Event.DONE, this._receiveData.bind(this)), n) {
        this.viewTransform.setData(n);
        return;
      }
      this.getIsDataExpired() || !this.getStorageHost() || this.storage.getLocal("accCode") !== this.options.accountCode && this.storage.getSession("accCode") !== this.options.accountCode ? (this.storage.removeStorages("data"), this.storage.removeStorages("session"), this.storage.removeLocal("infinityStarted"), this.viewTransform.init()) : this.viewTransform.setData(this.getStoredData());
    },
    _receiveData: function(n) {
      this._ping.interval = n.target.response.pingTime * 1e3, this._beat.interval = n.target.response.beatTime * 1e3, this.sessionExpire = n.target.response.sessionExpire * 1e3, this.storage.setStorages("data", n.target.response.msg), this.storage.setStorages("dataTime", new Date().getTime()), this.storage.setStorages("accCode", this.options.accountCode), this.getIsSessionExpired() ? (this.viewTransform.setSession(this.viewTransform.response.code), this.storage.setStorages("session", this.viewTransform.response.code), this.storage.setStorages("host", this.viewTransform.response.host)) : (this.viewTransform.setSession(this.getSession()), this.viewTransform.setHost(this.getStorageHost()));
    },
    _reset: function() {
      this._stopPings(), this.resourceTransform = new Tp(this), this._adapter && this._adapter.flags.reset(), this.isInitiated = !1, this.isStarted = !1, this.startDelayed = !1, this.isAdsManifestSent = !1, this.initChrono.reset(), this._totalPrerollsTime = 0, this.requestBuilder.lastSent.breakNumber = 0, this.requestBuilder.lastSent.adNumber = 0, this._savedAdManifest = null, this._savedAdError = null, this.playedPostrolls = 0, this.isBreakStarted = !1;
    },
    _send: function(n, t, i, r, e, a, s) {
      var o = new Date().getTime();
      this.options.preventZombieViews && this.lastEventTime && o > this.lastEventTime + 600 * 1e3 && this.viewTransform.nextView(), this.lastEventTime = t === _p.Service.STOP ? null : o, i = this.requestBuilder.buildParams(i, t), this.getIsLive() && (i.mediaDuration = this.options["content.duration"], i.playhead = void 0);
      var u = {
        params: i,
        plugin: this,
        adapter: this.getAdapter(),
        adsAdapter: this.getAdsAdapter()
      };
      if (this.emit(n, u), this._comm && (i !== null || typeof e < "u") && this.options.enabled) {
        this.lastServeiceSent = t;
        var l = {};
        typeof e < "u" && e !== "GET" && (l.method = e);
        var d = new ek(null, t, i, l);
        r && d.setBody(r), this._comm.sendRequest(d, a, s);
      }
    },
    _initComm: function() {
      var n = this.getResource();
      this._adapter && this._adapter.getURLToParse() && (n = this._adapter.getURLToParse()), this.resourceTransform.init(n), this._comm = new tk(), this._comm.addTransform(new ik()), this._comm.addTransform(this.viewTransform), this.options && this.options.offline ? this._comm.addTransform(new rk(this)) : this._comm.addTransform(this.resourceTransform);
    },
    getComm: function() {
      return this._comm;
    },
    setOptions: function(n) {
      n && (this.options.setOptions(n), typeof n["background.enabled"] == "boolean" && (n["background.enabled"] ? this.backgroundDetector.startDetection() : this.backgroundDetector.stopDetection()));
    },
    getFastDataConfig: function() {
      return this.viewTransform.response.msg;
    },
    disable: function() {
      this.setOptions({ enabled: !1 });
    },
    enable: function() {
      this.setOptions({ enabled: !0 });
    }
  },
  {
    Event: _p.WillSendEvent
  }
);
Cr.assign(nr.prototype, HC());
Cr.assign(nr.prototype, WC());
Cr.assign(nr.prototype, GC());
Cr.assign(nr.prototype, $C());
Cr.assign(nr.prototype, zC());
Cr.assign(nr.prototype, KC());
Cr.assign(nr.prototype, XC());
Cr.assign(nr.prototype, QC());
Cr.assign(nr.prototype, YC());
var pk = nr, mk = Ye, Ye = {};
Ye.noConflict = function() {
  return Ye = mk, this;
};
Ye.VERSION = tu;
Ye.polyfills = _w;
Ye.polyfills();
Ye.Object = Mt;
Ye.Emitter = Ar;
Ye.Log = Pt;
Ye.Log.loadLevelFromUrl();
Ye.Util = pi;
Ye.HybridNetwork = Hv;
Ye.Chrono = da;
Ye.Timer = Hc;
Ye.Constants = $i;
Ye.Request = rr;
Ye.Communication = Wc;
Ye.Transform = Br;
Ye.ViewTransform = $v;
Ye.ResourceTransform = Zv;
Ye.CdnParser = Xv;
Ye.HlsParser = Kv;
Ye.DashParser = Qv;
Ye.OfflineParser = e_;
Ye.LocationheaderParser = Yv;
Ye.Options = i_;
Ye.Plugin = pk;
Ye.Storage = Gc;
Ye.RequestBuilder = r_;
Ye.PlayheadMonitor = u_;
Ye.Adapter = Xc;
Ye.adapters = {};
Ye.Infinity = $c;
Ye.BackgroundDetector = a_;
Ye.DeviceDetector = s_;
Ye.UUIDGenerator = o_;
Ye.registerAdapter = function(n, t) {
  this.adapters[n] = t;
}.bind(Ye);
Ye.unregisterAdapter = function(n) {
  this.adapters[n] = null;
}.bind(Ye);
var Ii = Ye;
const gk = "videojs", vk = "adapter", _k = "js", yk = "Jesus Lopez", Tk = "6.8.9", bk = "2022-07-04", Sk = "https://bitbucket.org/npaw/videojs-adapter-js.git", Ek = "^6.8.24", xk = {
  buffer: "native",
  seek: "native",
  error: !0,
  stop: !0,
  pause: !0,
  resume: !0,
  getters: [
    "getPlayhead",
    "getPlayrate",
    "getDuration",
    "getBitrate",
    "getRendition",
    "getTitle",
    "getIsLive",
    "getResource",
    "getPlayerVersion"
  ]
}, wk = [
  {
    buffer: "monitor",
    seek: "monitor",
    error: !0,
    stop: !0,
    pause: !0,
    resume: !0,
    getters: [
      "getPlayhead",
      "getDuration",
      "getTitle",
      "getResource",
      "getPosition",
      "getGivenBreaks",
      "getBreaksTime",
      "getGivenAds",
      "getIsVisible",
      "getAudioEnabled",
      "getIsSkippable",
      "getIsFullscreen",
      "getCreativeId"
    ],
    filename: "bcove-freewheel.js"
  },
  {
    buffer: "monitor",
    seek: "monitor",
    error: !0,
    stop: !0,
    pause: !0,
    resume: !0,
    getters: [
      "getPlayhead",
      "getDuration",
      "getBitrate",
      "getTitle",
      "getResource",
      "getPlayerVersion",
      "getPosition",
      "getGivenBreaks",
      "getBreaksTime",
      "getGivenAds",
      "getIsVisible",
      "getAudioEnabled",
      "getIsSkippable",
      "getIsFullscreen",
      "getCreativeId"
    ],
    filename: "bcove-ima.js"
  },
  {
    buffer: "monitor",
    seek: "monitor",
    error: !1,
    stop: !1,
    pause: !1,
    resume: !1,
    getters: [],
    filename: "freewheel.js"
  },
  {
    buffer: "monitor",
    seek: "monitor",
    error: !0,
    stop: !0,
    pause: !1,
    resume: !1,
    getters: [],
    filename: "generic.js"
  },
  {
    buffer: "monitor",
    seek: "monitor",
    error: !0,
    stop: !0,
    pause: !0,
    resume: !0,
    getters: [
      "getPlayhead",
      "getDuration",
      "getTitle",
      "getIsLive",
      "getResource",
      "getPlayerVersion",
      "getPosition",
      "getGivenBreaks",
      "getBreaksTime",
      "getGivenAds",
      "getIsVisible",
      "getAudioEnabled",
      "getIsSkippable",
      "getIsFullscreen"
    ],
    filename: "ima.js"
  },
  {
    buffer: "monitor",
    seek: "monitor",
    error: !0,
    stop: !0,
    pause: !0,
    resume: !0,
    getters: [
      "getPlayhead",
      "getDuration",
      "getResource",
      "getPosition"
    ],
    filename: "onceux.js"
  }
], au = {
  name: gk,
  type: vk,
  tech: _k,
  author: yk,
  version: Tk,
  built: bk,
  repo: Sk,
  libVersion: Ek,
  features: xk,
  ads: wk
};
var Nl, Sp;
function Ak() {
  if (Sp)
    return Nl;
  Sp = 1;
  var n = Ii, t = au, i = n.Adapter.extend({
    isGeneric: !0,
    getVersion: function() {
      return t.version + "-videojs-ads";
    },
    registerListeners: function() {
      if (this.references = {
        adstart: this.adStartListener.bind(this),
        adend: this.adEndListener.bind(this),
        adskip: this.adSkipListener.bind(this),
        adserror: this.errorListener.bind(this),
        "ads-click": this.clickListener.bind(this)
      }, this.player)
        for (var r in this.references)
          this.player.on(r, this.references[r]);
    },
    unregisterListeners: function() {
      if (this.player && this.references) {
        for (var r in this.references)
          this.player.off(r, this.references[r]);
        delete this.references;
      }
    },
    adStartListener: function(r) {
      this.fireStart(), this.fireJoin();
    },
    adEndListener: function(r) {
      this.fireStop();
    },
    adSkipListener: function(r) {
      this.fireSkip();
    },
    errorListener: function(r) {
      this.fireError();
    },
    clickListener: function(r) {
      this.fireClick();
    }
  });
  return Nl = i, Nl;
}
var Ml, Ep;
function Ck() {
  if (Ep)
    return Ml;
  Ep = 1;
  var n = Ii, t = n.Adapter.extend(
    {
      getVersion: function() {
        var i = null;
        return typeof google < "u" && google.ima && (i = "bcove-ima " + google.ima.VERSION), i;
      },
      getPlayhead: function() {
        var i = this.plugin.getAdapter().player;
        return this.player.ima3 && this.player.ima3 && this.player.ima3.adPlayer && (i = this.player.ima3.adPlayer), i.currentTime();
      },
      getDuration: function() {
        var i = null;
        if (this.player.ads && this.player.ads.ad && this.player.ads.ad.duration)
          i = this.player.ads.ad.duration;
        else {
          var r = this.plugin.player;
          this.player.ima3 && (r = this.player.ima3.adPlayer), i = r && r.duration ? r.duration() : null;
        }
        return i;
      },
      getPosition: function() {
        var i = n.Constants.AdPosition.Midroll;
        if (this.player.ads && this.player.ads.ad)
          switch (this.player.ads.ad.type) {
            case "PREROLL":
              i = n.Constants.AdPosition.Preroll;
              break;
            case "MIDROLL":
              i = n.Constants.AdPosition.Midroll;
              break;
            case "POSTROLL":
              i = n.Constants.AdPosition.Postroll;
              break;
          }
        else
          this.plugin._adapter.getPlayhead() >= this.plugin._adapter.getDuration() && (i = n.Constants.AdPosition.Postroll);
        return this.plugin._adapter.flags.isJoined || (i = n.Constants.AdPosition.Preroll), i;
      },
      getResource: function() {
        var i = "unknown";
        return this.player.ima3 && (i = this.player.ima3.currentAd.getMediaUrl()), i;
      },
      getTitle: function() {
        var i = null;
        return this.player.ima3 && this.player.ima3.currentAd && (i = this.player.ima3.currentAd.getTitle()), i;
      },
      getPlayerVersion: function() {
        var i = null;
        return this.player.ima3 && (i = this.player.ima3.VERSION), i;
      },
      getGivenBreaks: function() {
        var i = null;
        return this.player.ima3 && (i = this.player.ima3.adsManager.getCuePoints().length), i;
      },
      getBreaksTime: function() {
        var i = null;
        if (this.player.ima3) {
          var r = this.player.ima3.adsManager.getCuePoints();
          for (var e in r)
            (!r[e] && r[e] !== 0 || r[e] === -1) && (r[e] = this.plugin._adapter.getDuration());
          i = r;
        }
        return i;
      },
      getGivenAds: function() {
        var i = null;
        return this.player.ima3 && this.player.ima3.currentAd && this.player.ima3.currentAd.getAdPodInfo() && (i = this.player.ima3.currentAd.getAdPodInfo().getTotalAds()), i;
      },
      getAudioEnabled: function() {
        var i = null;
        return this.player.muted() ? i = !1 : i = !!this.player.volume(), i;
      },
      getIsSkippable: function() {
        var i = !1;
        return this.player.ima3 && (i = this.player.ima3.currentAd && this.player.ima3.currentAd.isSkippable()), i;
      },
      getIsFullscreen: function() {
        var i = null;
        if (this.plugin.deviceDetector.isIphone())
          i = !this.plugin.deviceDetector.isInBackground;
        else {
          var r = null;
          this.player.ima3 && (r = this.player.ima3.el), i = r ? window.innerHeight <= r.clientHeight + 30 && window.innerWidth <= r.clientWidth + 30 : !1;
        }
        return i;
      },
      getIsVisible: function() {
        var i = null;
        return this.plugin.deviceDetector.isIphone() ? i = !this.plugin.deviceDetector.isInBackground : this.player.ima3 && (i = n.Util.calculateAdViewability(this.player.ima3.el)), i;
      },
      getBitrate: function() {
        var i = -1;
        return this.player.ima3 && this.player.ima3.currentAd && this.player.ima3.currentAd.getVastMediaBitrate() && (i = this.player.ima3.currentAd.getVastMediaBitrate()), i;
      },
      getCreativeId: function() {
        var i = null;
        return this.player.ima3 && this.player.ima3.currentAd ? i = this.player.ima3.currentAd.getCreativeAdId() || this.player.ima3.currentAd.getCreativeId() : this.titles && (i = this.titles[(this.plugin.requestBuilder.lastSent.adNumber || 1) - 1]._creativeId), i;
      },
      registerListeners: function() {
        if (this.monitorPlayhead(!0, !1), this.references = {
          "ima3-started": this.startJoinListener.bind(this),
          "ima3-paused": this.pausedListener.bind(this),
          "ima3-resumed": this.resumedListener.bind(this),
          "ima3-complete": this.adEndedListener.bind(this),
          "ima3-skipped": this.skippedListener.bind(this),
          "ima3-ad-error": this.errorListener.bind(this),
          "ads-pod-ended": this.podEndListener.bind(this),
          "ads-click": this.clickListener.bind(this),
          "ads-first-quartile": this.firstQuartileListener.bind(this),
          "ads-midpoint": this.secondQuartileListener.bind(this),
          "ads-third-quartile": this.thirdQuartileListener.bind(this)
        }, this.player)
          for (var i in this.references)
            this.player.on(i, this.references[i]);
      },
      startJoinListener: function(i) {
        this.plugin._adapter && this.plugin._adapter.firePause(), this.fireStart(), this.fireJoin();
      },
      pausedListener: function(i) {
        this.firePause();
      },
      resumedListener: function(i) {
        this.fireResume();
      },
      skippedListener: function(i) {
        this.fireSkip(), this.plugin._adapter && this.plugin._adapter.fireResume();
      },
      adEndedListener: function(i) {
        var r = this.plugin.requestBuilder.lastSent.adPosition === n.Constants.AdPosition.Preroll ? 0 : this.plugin._adapter.lastPlayhead;
        this.fireStop({ playhead: r, adPlayhead: this.getDuration() });
      },
      errorListener: function(i) {
        if (this.player.ima3)
          if (i.getError && i.getError()) {
            var r = i.getError();
            this.fireError(r.getCode(), r.getMessage());
          } else
            this.fireError();
      },
      clickListener: function(i) {
        if (this.player.ima3) {
          var r = null;
          this.player.ima3.currentAd && this.player.ima3.currentAd.g && (r = this.player.ima3.currentAd.g.clickThroughUrl), this.fireClick(r);
        }
      },
      firstQuartileListener: function(i) {
        this.fireQuartile(1);
      },
      secondQuartileListener: function(i) {
        this.fireQuartile(2);
      },
      thirdQuartileListener: function(i) {
        this.fireQuartile(3);
      },
      podEndListener: function(i) {
        this.fireBreakStop();
      },
      unregisterListeners: function() {
        if (this.monitor && this.monitor.stop(), this.player && this.references) {
          for (var i in this.references)
            this.player.off(i, this.references[i]);
          delete this.references;
        }
      },
      adPlayerErrorListener: function(i) {
        var r = i.data.AdError, e = [
          1012,
          1005,
          301,
          402,
          302
        ], a = [
          1007,
          1009,
          303
        ], s = [
          403,
          100,
          503,
          101,
          102
        ];
        e.indexOf(r.getErrorCode()) >= 0 ? this.fireManifest(n.Constants.ManifestError.NO_RESPONSE, r.getMessage()) : a.indexOf(r.getErrorCode()) >= 0 ? this.fireManifest(n.Constants.ManifestError.EMPTY, r.getMessage()) : s.indexOf(r.getErrorCode()) >= 0 ? this.fireManifest(n.Constants.ManifestError.WRONG, r.getMessage()) : this.fireError(r.getErrorCode(), r.getMessage());
      }
    },
    {
      isUsed: function(i) {
        return typeof google < "u" && i.player.ima3 && i.player.ads;
      }
    }
  );
  return Ml = t, Ml;
}
var Fl, xp;
function kk() {
  if (xp)
    return Fl;
  xp = 1;
  var n = Ii, t = n.Adapter.extend(
    {
      getVersion: function() {
        var i = "unknown";
        return this.player.FreeWheelPlugin.getVersion ? i = "bcove-fw " + this.player.FreeWheelPlugin.getVersion() : this.player.FreeWheelPlugin.VERSION && (i = "bcove-ssai " + this.player.FreeWheelPlugin.VERSION), i;
      },
      getDuration: function() {
        var i = null;
        if (this.player.ads && this.player.ads.ad && this.player.ads.ad.duration)
          i = this.player.ads.ad.duration;
        else {
          var r = this.plugin.player;
          if (this.player.FreeWheelPlugin) {
            var e = this.player.FreeWheelPlugin.tech;
            this.player.FreeWheelPlugin[e].adPlayer && (r = this.player.FreeWheelPlugin[e].adPlayer);
          }
          r && r.duration && (i = r.duration());
        }
        return i;
      },
      getPosition: function() {
        var i = n.Constants.AdPosition.Midroll;
        if (this.player.ads && this.player.ads.ad)
          switch (this.player.ads.ad.type) {
            case "PREROLL":
              i = n.Constants.AdPosition.Preroll;
              break;
            case "MIDROLL":
              i = n.Constants.AdPosition.Midroll;
              break;
            case "POSTROLL":
              i = n.Constants.AdPosition.Postroll;
              break;
          }
        else
          this.plugin._adapter.flags.isJoined ? this.plugin._adapter.getPlayhead() >= this.plugin._adapter.getDuration() && (i = n.Constants.AdPosition.Postroll) : i = n.Constants.AdPosition.Preroll;
        return i;
      },
      getResource: function() {
        var i = null;
        if (this.slot) {
          var r = this.slot.getAdInstances();
          if (r) {
            var e = (this.plugin.requestBuilder.lastSent.adNumber || 1) - 1;
            if (r[e] && r[e].getActiveCreativeRendition) {
              var a = r[e].getActiveCreativeRendition();
              if (a && a.getPrimaryCreativeRenditionAsset) {
                var s = a.getPrimaryCreativeRenditionAsset();
                s && s.getUrl && s.getUrl() && (i = s.getUrl());
              }
              a && a.getWrapperUrl && !i && (i = a.getWrapperUrl());
            }
          }
        }
        return i || "unknown";
      },
      getTitle: function() {
        var i = null;
        return this.player.FreeWheelPlugin.adsManager && this.player.FreeWheelPlugin.adsManager.getCurrentAd() && this.player.FreeWheelPlugin.adsManager.getCurrentAd().getTitle() ? i = this.player.FreeWheelPlugin.adsManager.getCurrentAd().getTitle() : this.titles && (i = this.titles[(this.plugin.requestBuilder.lastSent.adNumber || 1) - 1]._adId), i;
      },
      getPlayhead: function() {
        var i = this.plugin.getAdapter().player;
        return this.player.FreeWheelPlugin.adPlayer && (i = this.player.FreeWheelPlugin.adPlayer), i.currentTime();
      },
      getGivenBreaks: function() {
        var i = this.player.FreeWheelPlugin.tech, r = this.player.FreeWheelPlugin[i]._adContext._adResponse.getTemporalSlots(), e = 0;
        for (var a in r) {
          var s = r[a];
          if (s.getAdCount() > 0) {
            var o = s.getAdInstances();
            for (var u in o)
              if (o[u]._creativeRenditions[0]._baseUnit === "video") {
                e++;
                break;
              }
          }
        }
        return e;
      },
      getBreaksTime: function() {
        var i = null, r = this.player.FreeWheelPlugin[this.player.FreeWheelPlugin.tech]._adContext._adResponse.getTemporalSlots(), e = [];
        for (var a in r) {
          var s = r[a];
          if (s.getAdCount() > 0) {
            var o = s.getAdInstances();
            for (var u in o)
              if (o[u]._creativeRenditions[0]._baseUnit === "video") {
                this.plugin.getDuration() && s.getTimePosition() > this.plugin.getDuration() ? e.push(this.plugin.getDuration()) : e.push(s.getTimePosition());
                break;
              }
          }
        }
        return i = e.sort(), i;
      },
      getGivenAds: function() {
        var i = this.player.FreeWheelPlugin.tech;
        return this.player.FreeWheelPlugin[i]._currentSlot.getAdCount();
      },
      getAudioEnabled: function() {
        var i = null;
        return this.player.muted() ? i = !1 : i = !!this.player.volume(), i;
      },
      getIsSkippable: function() {
        return !1;
      },
      getIsFullscreen: function() {
        var i = null;
        if (this.plugin.deviceDetector.isIphone())
          i = !this.plugin.deviceDetector.isInBackground;
        else {
          var r = null, e = this.player.FreeWheelPlugin.tech;
          r = this.player.FreeWheelPlugin[e]._video, i = r ? window.innerHeight <= r.clientHeight + 30 && window.innerWidth <= r.clientWidth + 30 : !1;
        }
        return i;
      },
      getIsVisible: function() {
        var i = null;
        if (this.plugin.deviceDetector.isIphone())
          i = !this.plugin.deviceDetector.isInBackground;
        else {
          if (!this.contentPlayer) {
            var r = this.player.FreeWheelPlugin.tech;
            for (var e in this.player.FreeWheelPlugin[r]) {
              var a = this.player.FreeWheelPlugin[r][e];
              if (a.videoHeight && a.clientHeight) {
                this.contentPlayer = a;
                break;
              }
            }
          }
          i = n.Util.calculateAdViewability(this.contentPlayer);
        }
        return i;
      },
      getCreativeId: function() {
        var i = null;
        return this.titles && (i = this.titles[(this.plugin.requestBuilder.lastSent.adNumber || 1) - 1]._creativeId), i;
      },
      registerListeners: function() {
        if (this.monitorPlayhead(!0, !1), this.references = {
          "ads-ad-started": this.startJoinListener.bind(this),
          "ads-pause": this.pausedListener.bind(this),
          "ads-play": this.resumedListener.bind(this),
          "ads-ad-ended": this.adEndedListener.bind(this),
          "ads-pod-ended": this.podEndListener.bind(this),
          "ads-first-quartile": this.firstQuartileListener.bind(this),
          "ads-midpoint": this.secondQuartileListener.bind(this),
          "ads-third-quartile": this.thirdQuartileListener.bind(this)
        }, typeof tv < "u") {
          var i = this.player.FreeWheelPlugin[this.player.FreeWheelPlugin.tech]._adContext;
          this.events = tv.freewheel.SDK, this.fwreferences = {}, this.fwreferences[this.events.EVENT_AD] = this.logListener.bind(this), this.fwreferences[this.events.EVENT_SLOT_STARTED] = this.slotListener.bind(this), this.fwreferences[this.events.EVENT_ERROR] = this.errorFwListener.bind(this), this.manifestNoResponse = [
            this.events.ERROR_SECURITY,
            this.events.ERROR_TIMEOUT
          ];
          for (var r in this.manifestNoResponse)
            this.fwreferences[r] = this.noResponseManifestListener.bind(this);
          this.manifestEmpty = [
            this.events.ERROR_NO_AD_AVAILABLE,
            this.events.ERROR_VAST_NO_AD
          ];
          for (var e in this.manifestEmpty)
            this.fwreferences[e] = this.manifestEmptyListener.bind(this);
          this.manifestWrong = [
            this.events.ERROR_VAST_VERSION_NOT_SUPPORTED,
            this.events.ERROR_VAST_WRAPPER_LIMIT_REACH,
            this.events.ERROR_VAST_XML_PARSING,
            this.events.ERROR_PARSE
          ];
          for (var a in this.manifestWrong)
            this.fwreferences[a] = this.manifestWrongListener.bind(this);
          if (this.player)
            for (var r in this.fwreferences)
              i.addEventListener(r, this.fwreferences[r]);
        }
        if (this.player)
          for (var r in this.references)
            this.player.on(r, this.references[r]);
      },
      logListener: function(i) {
        if (i.errorCode || i.errorInfo || i.errorModule) {
          this.errorFwListener(i);
          return;
        }
        switch (i.subType) {
          case this.events.EVENT_AD_SKIPPED:
            this.skippedListener(i);
            break;
          case this.events.EVENT_SLOT_STARTED:
            this.slotListener(i);
            break;
          case this.events.EVENT_AD_CLICK:
            this.clickFwListener(i);
            break;
        }
      },
      skippedListener: function(i) {
        this.fireSkip(), this.plugin._adapter && this.plugin._adapter.fireResume();
      },
      noResponseManifestListener: function(i) {
        this.fireManifest(n.Constants.ManifestError.NO_RESPONSE, "No response");
      },
      manifestEmptyListener: function(i) {
        this.fireManifest(n.Constants.ManifestError.EMPTY, "Empty manifest");
      },
      manifestWrongListener: function(i) {
        this.fireManifest(n.Constants.ManifestError.WRONG, "Wrong manifest format");
      },
      slotListener: function(i) {
        this.slot = i.slot, i && i.slot && i.slot.getAdInstances && (this.titles = i.slot.getAdInstances());
      },
      startJoinListener: function(i) {
        this.plugin._adapter && this.plugin._adapter.firePause(), this.fireStart(), this.fireJoin();
      },
      pausedListener: function(i) {
        this.firePause();
      },
      resumedListener: function(i) {
        this.fireResume();
      },
      adEndedListener: function(i) {
        var r = this.plugin.requestBuilder.lastSent.adPosition === n.Constants.AdPosition.Preroll ? 0 : this.plugin._adapter.lastPlayhead;
        this.fireStop({ playhead: r, adPlayhead: this.getDuration() });
      },
      errorFwListener: function(i) {
        this.fireError(i.errorCode || i.subType, i.errorInfo), this.fireStop();
      },
      clickFwListener: function(i) {
        var r = i.adInstance.getEventCallbackUrls(this.events.EVENT_AD_CLICK, this.events.EVENT_TYPE_CLICK)[0];
        this.fireClick(r);
      },
      firstQuartileListener: function(i) {
        this.fireQuartile(1);
      },
      secondQuartileListener: function(i) {
        this.fireQuartile(2);
      },
      thirdQuartileListener: function(i) {
        this.fireQuartile(3);
      },
      podEndListener: function(i) {
        this.fireBreakStop();
      },
      unregisterListeners: function() {
        if (this.monitor && this.monitor.stop(), this.player && this.references) {
          for (var i in this.references)
            this.player.off(i, this.references[i]);
          delete this.references;
        }
      }
    },
    {
      isUsed: function(i) {
        return i.player.ads && i.player.FreeWheelPlugin;
      }
    }
  );
  return Fl = t, Fl;
}
const Pk = "freewheel", Ik = "adapter", Dk = "js", Lk = "Jesus Lopez", Ok = "6.8.1", Rk = "2022-03-30", Nk = "https://bitbucket.org/npaw/freewheel-adapter-js", Mk = "^6.8.15", Fk = {
  buffer: "monitor",
  seek: "monitor",
  error: !0,
  stop: !0,
  pause: !0,
  resume: !0,
  getters: [
    "getPlayhead",
    "getDuration",
    "getTitle",
    "getResource",
    "getPlayerVersion",
    "getPosition",
    "getGivenBreaks",
    "getBreaksTime",
    "getGivenAds",
    "getIsVisible",
    "getAudioEnabled",
    "getCreativeId"
  ]
}, Bk = [], Uk = {
  name: Pk,
  type: Ik,
  tech: Dk,
  author: Lk,
  version: Ok,
  built: Rk,
  repo: Nk,
  libVersion: Mk,
  features: Fk,
  ads: Bk
};
var Bl, wp;
function qk() {
  if (wp)
    return Bl;
  wp = 1;
  var n = Ii, t = Uk;
  return n.adapters.Freewheel = n.Adapter.extend({
    getVersion: function() {
      return t.version + "-" + t.name + "-" + t.tech;
    },
    getPlayhead: function() {
      return this._getAdInstanceMethodCall("getPlayheadTime");
    },
    getDuration: function() {
      return this._getAdInstanceMethodCall("getDuration");
    },
    getTitle: function() {
      try {
        if (this.titles)
          return this.titles[this._getAdNumber()]._adId;
      } catch {
      }
      return "unknown";
    },
    getResource: function() {
      var i = null, r = this._getAdInstanceMethodCall("getActiveCreativeRendition");
      return r && (typeof r.getPrimaryCreativeRenditionAsset == "function" ? (asset = r.getPrimaryCreativeRenditionAsset(), asset && typeof asset.getUrl == "function" && (i = asset.getUrl())) : typeof r.getWrapperUrl == "function" && (i = r.getWrapperUrl())), i;
    },
    getPlayerVersion: function() {
      var i = null;
      return typeof tv < "u" && tv.freewheel && tv.freewheel.SDK && (i = tv.freewheel.SDK.version), i;
    },
    getPlayerName: function() {
      return "Freewheel";
    },
    getPosition: function() {
      return this.position;
    },
    getIsVisible: function() {
      if (!this.contentPlayer)
        for (var i in this.player) {
          var r = this.player[i];
          if (r && r.videoHeight && r.clientHeight) {
            this.contentPlayer = r;
            break;
          }
        }
      return n.Util.calculateAdViewability(this.contentPlayer);
    },
    getAudioEnabled: function() {
      for (var i in this.player) {
        var r = this.player[i];
        if (r && r.adManager && r.adManager._context && r.adManager._context.getAdVolume)
          return !!r.adManager._context.getAdVolume();
      }
    },
    getGivenAds: function() {
      return this.slot.getAdCount();
    },
    getBreaksTime: function() {
      var i = this.getSlots();
      if (!i)
        return null;
      var r = [];
      for (var e in i) {
        var a = i[e];
        if (a.getAdCount() > 0) {
          var s = a.getAdInstances();
          for (var o in s)
            if (s[o]._creativeRenditions[0]._baseUnit === "video") {
              var u = this.plugin.getDuration(), l = a.getTimePosition();
              r.push(u && l > u ? u : l);
              break;
            }
        }
      }
      return r;
    },
    getGivenBreaks: function() {
      var i = this.getSlots();
      if (!i)
        return null;
      var r = 0;
      for (var e in i) {
        var a = i[e];
        if (a.getAdCount() > 0) {
          var s = a.getAdInstances();
          for (var o in s)
            if (s[o]._creativeRenditions[0]._baseUnit === "video") {
              r++;
              break;
            }
        }
      }
      return r;
    },
    getCreativeId: function() {
      var i = null;
      if (this.slot) {
        var r = this.slot.getAdInstances(), e = this._getAdNumber();
        r && r[e] && (i = r[e]._creativeId);
      }
      return i;
    },
    getSlots: function() {
      if (this.player.currentAdContext)
        return this.player.currentAdContext._adResponse.getTemporalSlots();
      for (var i in this.player) {
        var r = this.player[i];
        if (r && r._adResponse && r._adResponse.getTemporalSlots)
          return r;
      }
      return null;
    },
    _getAdNumber: function() {
      return (this.plugin.requestBuilder.lastSent.adNumber || 1) - 1;
    },
    _getAdInstanceMethodCall: function(i) {
      if (ret = null, this.slot) {
        var r = this.slot.getAdInstances(), e = this._getAdNumber();
        r && r[e] && typeof r[e][i] == "function" && (ret = r[e][i]());
      }
      return ret;
    },
    registerListeners: function() {
      this.canRemoveListeners = !0, this.events = tv.freewheel.SDK, this.manifestNoResponse = [
        this.events.ERROR_SECURITY,
        this.events.ERROR_TIMEOUT
      ], this.manifestEmpty = [
        this.events.ERROR_NO_AD_AVAILABLE,
        this.events.ERROR_VAST_NO_AD
      ], this.manifestWrong = [
        this.events.ERROR_VAST_VERSION_NOT_SUPPORTED,
        this.events.ERROR_VAST_WRAPPER_LIMIT_REACH,
        this.events.ERROR_VAST_XML_PARSING,
        this.events.ERROR_PARSE
      ], this.ignoredErrors = [
        this.events.ERROR_ADINSTANCE_UNAVAILABLE
      ], this.references = {}, this.references[this.events.EVENT_AD] = this.logListener.bind(this), this.references[this.events.EVENT_ERROR] = this.errorListener.bind(this), this.references[this.events.EVENT_SLOT_STARTED] = this.slotListener.bind(this), this.references[this.events.EVENT_SLOT_ENDED] = this.closeListener.bind(this);
      for (var i in this.manifestNoResponse)
        this.references[i] = this.noResponseManifestListener.bind(this);
      for (var r in this.manifestEmpty)
        this.references[r] = this.manifestEmptyListener.bind(this);
      for (var e in this.manifestWrong)
        this.references[e] = this.manifestWrongListener.bind(this);
      for (var a in this.references)
        this.player.currentAdContext.addEventListener(a, this.references[a]);
    },
    unregisterListeners: function() {
      if (this.player && this.references) {
        for (var i in this.references)
          this.player.currentAdContext.removeEventListener(i, this.references[i]);
        this.references = {};
      }
    },
    noResponseManifestListener: function(i) {
      this.fireManifest(n.Constants.ManifestError.NO_RESPONSE, "No response");
    },
    manifestEmptyListener: function(i) {
      this.fireManifest(n.Constants.ManifestError.EMPTY, "Empty manifest");
    },
    manifestWrongListener: function(i) {
      this.fireManifest(n.Constants.ManifestError.WRONG, "Wrong manifest format");
    },
    logListener: function(i) {
      if (n.Log.debug(i.subType), i.errorCode || i.errorInfo || i.errorModule) {
        this.errorListener(i);
        return;
      }
      switch (i.subType) {
        case this.events.EVENT_AD_PAUSE:
          this.pauseListener(i);
          break;
        case this.events.EVENT_AD_RESUME:
          this.resumeListener(i);
          break;
        case this.events.EVENT_AD_IMPRESSION_END:
          this.endedListener(i);
          break;
        case this.events.EVENT_AD_INITIATED:
          this.playListener(i);
          break;
        case this.events.EVENT_AD_IMPRESSION:
          this.playingListener(i);
          break;
        case this.events.EVENT_AD_SKIPPED:
          this.skipListener(i);
          break;
        case this.events.EVENT_SLOT_STARTED:
          this.slotListener(i);
          break;
        case this.events.EVENT_AD_CLOSE:
        case this.events.EVENT_SLOT_ENDED:
          this.closeListener(i);
          break;
        case this.events.EVENT_AD_CLICK:
          this.clickListener(i);
          break;
        case this.events.EVENT_AD_FIRST_QUARTILE:
          this.fireQuartile(1);
          break;
        case this.events.EVENT_AD_MIDPOINT:
          this.fireQuartile(2);
          break;
        case this.events.EVENT_AD_THIRD_QUARTILE:
          this.fireQuartile(3);
          break;
        case this.events.ERROR_SECURITY:
        case this.events.ERROR_TIMEOUT:
          this.noResponseManifestListener(i);
          break;
        case this.events.ERROR_NO_AD_AVAILABLE:
        case this.events.ERROR_VAST_NO_AD:
          this.manifestEmptyListener(i);
          break;
        case this.events.ERROR_VAST_VERSION_NOT_SUPPORTED:
        case this.events.ERROR_VAST_WRAPPER_LIMIT_REACH:
        case this.events.ERROR_VAST_XML_PARSING:
        case this.events.ERROR_PARSE:
          this.manifestWrongListener(i);
          break;
      }
    },
    slotListener: function(i) {
      this.slot = i.slot;
      var r = this.plugin.getAdapter();
      switch (this.disable = !1, slot.getTimePositionClass()) {
        case "POSTROLL":
          this.position = n.Constants.AdPosition.Postroll;
          break;
        case "MIDROLL":
          this.position = n.Constants.AdPosition.Midroll;
          break;
        case "PREROLL":
          r && r.flags.isJoined ? this.position = n.Constants.AdPosition.Midroll : this.position = n.Constants.AdPosition.Preroll;
          break;
        default:
          this.disable = !0;
      }
      this.disable || (this.titles = slot.getAdInstances(), this.unregister(), this.plugin.fireInit(), this.fireInit());
    },
    playListener: function(i) {
      this.disable || this.fireStart();
    },
    playingListener: function(i) {
      this.disable || (this.fireStart(), this.fireJoin(), this.fireResume());
    },
    pauseListener: function(i) {
      this.firePause();
    },
    resumeListener: function(i) {
      this.playListener(), this.fireResume();
    },
    endedListener: function(i) {
      this.fireStop();
    },
    skipListener: function(i) {
      this.fireSkip();
    },
    clickListener: function(i) {
      var r = i.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK, tv.freewheel.SDK.EVENT_TYPE_CLICK)[0], e = new Date().getTime();
      this.lastUrl === r && e < (this.lastTime || 0) + 2e3 || (this.lastUrl = r, this.lastTime = e, this.fireClick(r));
    },
    closeListener: function(i) {
      this.register(), this.position === n.Constants.AdPosition.Postroll && !this.disable && this.plugin.fireStop();
    },
    errorListener: function(i) {
      this.fireError(i.errorCode || i.subType, i.errorInfo), this.fireStop(), this.register();
    },
    register: function(i) {
      var r = this.plugin.getAdapter();
      r && !this.canRemoveListeners && (r.registerListeners(), r.fireResume(), this.canRemoveListeners = !0);
    },
    unregister: function(i) {
      adapter && this.canRemoveListeners && (this.canRemoveListeners = !1, adapter.unregisterListeners(), adapter.firePause());
    },
    changeVideo: function(i) {
      (this.flags.isStarted || this.flags.isInited) && (this.fireStop(), this.plugin.fireStop(), this.register());
    }
  }), Bl = n.adapters.Freewheel, Bl;
}
var Ul, Ap;
function Vk() {
  if (Ap)
    return Ul;
  Ap = 1;
  var n = qk(), t = n.extend({
    register: function() {
    },
    unregister: function() {
    }
  }, {
    isUsed: function(i) {
      return i.player && i.player.freewheelAds;
    }
  });
  return Ul = t, Ul;
}
var ql, Cp;
function jk() {
  if (Cp)
    return ql;
  Cp = 1;
  var n = Ii, t = au, i = n.Adapter.extend(
    {
      getVersion: function() {
        return t.version + "-videojs-ima-ads";
      },
      getDuration: function() {
        return this.ima.getAdsManager() && this.ima.getAdsManager().getCurrentAd() !== null && (this.duration = this.ima.getAdsManager().getCurrentAd().getDuration()), this.duration;
      },
      getResource: function() {
        var r = null, e = this.ima.getAdsManager();
        return e && (r = e.getCurrentAd().getMediaUrl()), r;
      },
      getTitle: function() {
        var r = null, e = this.ima.getAdsManager();
        return e && (r = e.getCurrentAd().getTitle()), r;
      },
      getPlayhead: function() {
        var r = null, e = this.ima.getAdsManager();
        return e && (r = this.getDuration() - e.getRemainingTime()), r;
      },
      getPlayerVersion: function() {
        return "IMA" + google.ima.VERSION + "; contrib-ads " + this.player.ads.VERSION;
      },
      getPosition: function() {
        var r = n.Constants.AdPosition.Preroll;
        return this.plugin._adapter.flags.isJoined && (!this.plugin.getIsLive() && this.plugin._adapter.getDuration() - 1 < this.plugin._adapter.getPlayhead() ? r = n.Constants.AdPosition.Postroll : this.plugin._adapter.getPlayhead() > 1 && (r = n.Constants.AdPosition.Midroll)), r;
      },
      getGivenBreaks: function() {
        var r = null;
        return this.cuepoints && (r = this.cuepoints.length), r;
      },
      getBreaksTime: function() {
        return this.cuepoints;
      },
      getGivenAds: function() {
        return this.totalAds;
      },
      getAudioEnabled: function() {
        return !this.ima.adMuted;
      },
      getIsSkippable: function() {
        return this.isSkippable;
      },
      getIsFullscreen: function() {
        var r = !1, e = this.ima.adDisplayContainer;
        for (var a in e)
          e[a] && e[a].width && e[a].height && window.innerHeight && window.innerWidth && e[a].width && e[a].height && (r = window.innerHeight <= e[a].height + 30 && window.innerWidth <= e[a].width + 30);
        return r;
      },
      getIsVisible: function() {
        return n.Util.calculateAdViewability(this.ima.adContainerDiv);
      },
      registerListeners: function() {
        this.monitorPlayhead(!0, !1);
        var r = google.ima.AdEvent.Type;
        if (this.references = {}, this.references[r.AD_METADATA] = this.metadataListener.bind(this), this.references[r.LOADED] = this.loadedListener.bind(this), this.references[r.CONTENT_PAUSE_REQUESTED] = this.contentPauseRequestedListener.bind(this), this.references[r.STARTED] = this.startedListener.bind(this), this.references[r.PAUSED] = this.pausedListener.bind(this), this.references[r.RESUMED] = this.resumedListener.bind(this), this.references[r.COMPLETE] = this.completeListener.bind(this), this.references[r.SKIPPED] = this.skippedListener.bind(this), this.references[r.CLICK] = this.clickListener.bind(this), this.references[google.ima.AdErrorEvent.Type.AD_ERROR] = this.errorListener.bind(this), this.references[r.ALL_ADS_COMPLETED] = this.adsEndedListener.bind(this), this.references[r.FIRST_QUARTILE] = this.firstQuartileListener.bind(this), this.references[r.MIDPOINT] = this.secondQuartileListener.bind(this), this.references[r.THIRD_QUARTILE] = this.thirdQuartileListener.bind(this), this.playerReferences = {
          adend: this.adEndedListener.bind(this),
          adstart: this.startedListener.bind(this),
          adskip: this.skippedListener.bind(this),
          adserror: this.errorListener.bind(this),
          "ads-click": this.clickListener.bind(this)
        }, this.player) {
          this.registerImaEvents();
          for (var e in this.playerReferences)
            this.player.on(e, this.playerReferences[e]);
        }
      },
      registerImaEvents: function() {
        if (this.player.ima.addEventListener ? this.ima = this.player.ima : this.player.ima.sdkImpl && this.player.ima.sdkImpl.addEventListener && (this.ima = this.player.ima.sdkImpl), this.ima)
          for (var r in this.references)
            this.ima.addEventListener(r, this.references[r]);
      },
      metadataListener: function(r) {
        this.cuepoints = r.getAdCuePoints().getCuePoints().slice(), this.plugin._adapter && this.cuepoints.forEach(function(e, a) {
          (this.cuepoints[a] === -1 || this.cuepoints[a] == null || this.cuepoints[a] === void 0) && (this.cuepoints[a] = this.plugin._adapter.getDuration());
        }.bind(this));
      },
      loadedListener: function(r) {
        this.isSkippable = r.getAdData().skippable, this.totalAds = r.getAdData().adPodInfo.totalAds, this.fireInit();
      },
      contentPauseRequestedListener: function(r) {
        this.fireInit();
      },
      startedListener: function(r) {
        this.fireStart(), this.fireJoin(), this.plugin.getAdapter().firePause();
      },
      pausedListener: function(r) {
        this.firePause();
      },
      resumedListener: function(r) {
        this.fireResume();
      },
      completeListener: function(r) {
        this.fireStop();
      },
      skippedListener: function(r) {
        this.fireSkip();
      },
      adEndedListener: function(r) {
        this.fireStop();
      },
      errorListener: function(r) {
        var e = null, a = null;
        typeof r.getError == "function" ? (e = r.getError(), a = e.getCode()) : r.data && r.data.AdError && (e = r.data.AdError, a = e.getErrorCode());
        var s = e ? e.getMessage() : null;
        this.fireError(a, s);
      },
      clickListener: function(r) {
        var e = null;
        try {
          if (r && typeof r.getAd == "function") {
            var a = r.getAd();
            for (prop in a)
              typeof a[prop] == "object" && a[prop].clickThroughUrl && (e = a[prop].clickThroughUrl.substring(a[prop].clickThroughUrl.indexOf("adurl=")).replace("adurl=", ""));
          }
        } catch {
          n.Log.notice("Couldnt get adclick url");
        }
        this.fireClick(e);
      },
      adsEndedListener: function(r) {
        this.plugin.getAdapter().adsEnded = !0, this.fireStop(), this.plugin.getAdapter().fireResume(), this.plugin.requestBuilder.lastSent.adPosition === n.Constants.AdPosition.Postroll && this.plugin.fireStop();
      },
      firstQuartileListener: function(r) {
        this.fireQuartile(1);
      },
      secondQuartileListener: function(r) {
        this.fireQuartile(2);
      },
      thirdQuartileListener: function(r) {
        this.fireQuartile(3);
      },
      unregisterListeners: function() {
        if (this.monitor && this.monitor.stop(), this.player && this.ima && this.references && this.playerReferences) {
          for (var r in this.references)
            ;
          for (var r in this.playerReferences)
            this.player.off(r, this.playerReferences[r]);
        }
        delete this.references, delete this.playerReferences;
      },
      adPlayerErrorListener: function(r) {
        var e = r.data.AdError, a = [
          1012,
          1005,
          301,
          402,
          302
        ], s = [
          1007,
          1009,
          303
        ], o = [
          403,
          100,
          503,
          101,
          102
        ], u = e.getErrorCode(), l = e.getMessage();
        a.indexOf(u) >= 0 ? this.fireManifest(n.Constants.ManifestError.NO_RESPONSE, l) : s.indexOf(u) >= 0 ? this.fireManifest(n.Constants.ManifestError.EMPTY, l) : o.indexOf(u) >= 0 ? this.fireManifest(n.Constants.ManifestError.WRONG, l) : this.fireError(u, l);
      }
    },
    {
      isUsed: function(r) {
        return typeof google < "u" && google.ima && r.player.ima;
      }
    }
  );
  return ql = i, ql;
}
var Vl, kp;
function Hk() {
  if (kp)
    return Vl;
  kp = 1;
  var n = Ii, t = au, i = n.Adapter.extend(
    {
      getVersion: function() {
        return t.version + "-videojs-onceux-ads";
      },
      getResource: function() {
        return this.player.ads.contentSrc;
      },
      getPlayhead: function() {
        return this.player.onceux.currentTime();
      },
      getDuration: function() {
        return this.player.onceux.duration();
      },
      getPosition: function() {
        var r = n.Constants.AdPosition.Preroll;
        return this.plugin.getAdapter().flags.isJoined && (this.plugin.getAdapter().getPlayhead() <= this.plugin.getAdapter().getDuration() ? r = n.Constants.AdPosition.Midroll : r = n.Constants.AdPosition.Postroll), r;
      },
      registerListeners: function() {
        if (n.Util.logAllEvents(this.player, [
          null,
          "onceux-ads-complete",
          "onceux-adroll-start",
          "onceux-adroll-complete",
          "onceux-linearad-start",
          "onceux-linearad-impression",
          "onceux-linearad-complete",
          "onceux-linearad-skipped",
          "onceux-linearad-pause",
          "onceux-linearad-resume",
          "onceux-companionad-creativeView",
          "adserror",
          "ads-click"
        ]), this.monitorPlayhead(!0, !1), this.references = {
          "onceux-linearad-start": this.startedListener.bind(this),
          "onceux-linearad-pause": this.pausedListener.bind(this),
          "onceux-linearad-resume": this.resumedListener.bind(this),
          "onceux-linearad-complete": this.completeListener.bind(this),
          "onceux-linearad-skipped": this.skippedListener.bind(this),
          adserror: this.errorListener.bind(this),
          "ads-click": this.clickListener.bind(this)
        }, this.player)
          for (var r in this.references)
            this.player.on(r, this.references[r]);
      },
      unregisterListeners: function() {
        if (this.monitor && this.monitor.stop(), this.player && this.references) {
          for (var r in this.references)
            this.player.off(r, this.references[r]);
          delete this.references;
        }
      },
      startedListener: function(r) {
        this.fireStart(), this.fireJoin();
      },
      pausedListener: function(r) {
        this.firePause();
      },
      resumedListener: function(r) {
        this.fireResume();
      },
      completeListener: function(r) {
        this.fireStop({ adPlayhead: this.getDuration() });
      },
      skippedListener: function(r) {
        this.fireSkip();
      },
      errorListener: function(r) {
        this.fireError();
      },
      clickListener: function(r) {
        this.fireClick();
      }
    },
    {
      isUsed: function(r) {
        return r.player.onceux;
      }
    }
  );
  return Vl = i, Vl;
}
var jl, Pp;
function Wk() {
  if (Pp)
    return jl;
  Pp = 1;
  var n = Ii;
  return jl = {
    getHls: function(t) {
      return t.getTech().vhs || t.getTech().hls || t.getTech().hls_;
    },
    isUsed: function(t) {
      return !!this.getHls(t);
    },
    getBitrate: function(t) {
      var i = null, r = this.getHls(t).playlists.media();
      if (t.player.qualityLevels) {
        var e = t.player.qualityLevels(), a = e[e.selectedIndex];
        a && (i = a.bitrate);
      } else
        r && r.attributes && r.attributes.BANDWIDTH ? i = r.attributes.BANDWIDTH : t.player.tech_ && t.player.tech_.vhs && t.player.tech_.vhs.stats ? i = t.player.tech_.vhs.stats.bandwidth : t.player.tech_ && t.player.tech_.hls && t.player.tech_.hls.bandwidth ? i = t.player.tech_.hls.bandwidth : t.player.hls && t.player.hls.bandwidth && (i = t.player.hls.bandwidth);
      return i;
    },
    getRendition: function(t) {
      var i = null, r = this.getHls(t).playlists.media();
      if (t.player.qualityLevels) {
        var e = t.player.qualityLevels(), a = e[e.selectedIndex];
        a && (i = n.Util.buildRenditionString(a.width, a.height, a.bitrate));
      } else if (r && r.attributes) {
        var s = r.attributes;
        s.RESOLUTION ? i = n.Util.buildRenditionString(
          s.RESOLUTION.width,
          s.RESOLUTION.height,
          s.BANDWIDTH
        ) : s.BANDWIDTH ? i = n.Util.buildRenditionString(s.BANDWIDTH) : s.NAME && (i = s.NAME);
      }
      return i;
    },
    getTotalBytes: function(t) {
      var i = this.getHls(t), r = i.bytesReceived;
      return !r && i.stats && (r = i.stats.mediaBytesTransferred - t.acumBytes), r;
    }
  }, jl;
}
var Hl, Ip;
function Gk() {
  if (Ip)
    return Hl;
  Ip = 1;
  var n = Ii;
  return Hl = {
    getHls: function(t) {
      return this.getTech();
    },
    isUsed: function(t) {
      return !!this.getTech(t);
    },
    getResource: function(t) {
      var i = null;
      return this.getTech(t) && this.getTech(t).url ? i = this.getTech(t).url : this.getHls(t) && this.getHls(t).source_ && (i = this.getHls(t).source_.src), i;
    },
    getBitrate: function(t) {
      var i = null, r = this.getTech(t).currentLevel;
      if (typeof r < "u" && r !== -1 && !!this.getTech(t).levels) {
        var e = this.getTech(t).levels[r];
        e && e.bitrate && (i = e.bitrate);
      }
      return i;
    },
    getRendition: function(t) {
      var i = null, r = this.getTech(t).currentLevel;
      if (typeof r < "u" && r !== -1 && !!this.getTech(t).levels) {
        var e = this.getTech(t).levels[r];
        e && (i = n.Util.buildRenditionString(e.width, e.height, e.bitrate));
      }
      return i;
    },
    getTech: function(t) {
      var i = t.getTech();
      return i.vhs || i.hls || i.hls_;
    }
  }, Hl;
}
var Wl, Dp;
function $k() {
  if (Dp)
    return Wl;
  Dp = 1;
  var n = Ii;
  return Wl = {
    _getShaka: function(t) {
      var i = t.getTech();
      return i.shakaPlayer || i._shakaplayerInstance;
    },
    isUsed: function(t) {
      return !!this._getShaka(t);
    },
    getResource: function(t) {
      return this._getShaka(t).getManifestUri();
    },
    getBitrate: function(t) {
      return this._getShaka(t).getStats().streamBandwidth;
    },
    getRendition: function(t) {
      var i = this._getShaka(t), r = i.getStats(), e = n.Util.buildRenditionString(r.width, r.height, r.streamBandwidth), a = i.getVariantTracks();
      for (var s in a) {
        var o = a[s];
        if (o.active && o.type === "video") {
          e = n.Util.buildRenditionString(o.width, o.height, o.bandwidth);
          break;
        }
      }
      return e;
    }
  }, Wl;
}
var Gl, Lp;
function zk() {
  if (Lp)
    return Gl;
  Lp = 1;
  var n = Ii;
  return Gl = {
    isUsed: function(t) {
      return t.player.dash && t.player.dash.shakaPlayer;
    },
    getResource: function(t) {
      var i = "", r = t.player.dash.shakaPlayer;
      return typeof r.getManifestUri == "function" ? i = r.getManifestUri() : typeof r.getAssetUri == "function" && (i = r.getAssetUri()), i;
    },
    getBitrate: function(t) {
      return t.player.dash.shakaPlayer.getStats().streamBandwidth;
    },
    getRendition: function(t) {
      var i = t.player.dash.shakaPlayer, r = i.getStats(), e = n.Util.buildRenditionString(r.width, r.height, r.streamBandwidth), a = i.getVariantTracks();
      for (var s in a) {
        var o = a[s];
        o.active && o.type === "video" && (e = n.Util.buildRenditionString(o.width, o.height, o.bandwidth));
      }
      return e;
    }
  }, Gl;
}
var $l, Op;
function Kk() {
  if (Op)
    return $l;
  Op = 1;
  var n = Ii;
  return $l = {
    isUsed: function(t) {
      return t.player.dash && t.player.dash.mediaPlayer && !t.player.dash.shakaPlayer;
    },
    getResource: function(t) {
      return this._getDashPlayer(t).getSource();
    },
    getBitrate: function(t) {
      var i = null, r = this._getDashPlayer(t);
      if (r) {
        var e = r.getQualityFor("video");
        e && (i = r.getBitrateInfoListFor("video")[e].bitrate);
      }
      return i;
    },
    getRendition: function(t) {
      var i = null, r = this._getDashPlayer(t);
      if (r) {
        var e = r.getQualityFor("video");
        if (e) {
          var a = r.getBitrateInfoListFor("video")[e];
          a && (i = n.Util.buildRenditionString(a.width, a.height, a.bitrate));
        }
      }
      return i;
    },
    _getDashPlayer: function(t) {
      return t.player.dash.mediaPlayer;
    }
  }, $l;
}
var qn = Ii, zl = au, pt = qn.Adapter.extend(
  {
    getVersion: function() {
      return zl.version + "-" + zl.name + "-" + zl.tech;
    },
    getTitle: function() {
      var n = null;
      return this.player.mediainfo && (n = this.player.mediainfo.name), n;
    },
    getPlayhead: function() {
      var n = this.player.currentTime();
      return this.plugin._adsAdapter && this.plugin._adsAdapter.flags.isStarted && (n = this.lastPlayhead || n), n;
    },
    getIsLive: function() {
      var n = null;
      return this.player.mediainfo && (n = !0, typeof this.player.mediainfo.duration == "number" && (n = this.player.mediainfo.duration < 1)), n;
    },
    getDuration: function() {
      var n = this.player.duration();
      return this.player.mediainfo && typeof this.player.mediainfo.duration < "u" && (n = this.player.mediainfo.duration), n;
    },
    getResource: function() {
      var n = null, t = this.getUsedTech();
      return t && t.getResource && (n = t.getResource(this)), n || (n = this.player.currentSrc()), n;
    },
    getBitrate: function() {
      var n = null, t = this.getUsedTech();
      return t && t.getBitrate && (n = t.getBitrate(this)), n;
    },
    getRendition: function() {
      var n = null, t = this.getUsedTech();
      return t && t.getRendition && (n = t.getRendition(this)), n;
    },
    getTotalBytes: function() {
      var n = null, t = this.getUsedTech();
      return t && t.getTotalBytes && (n = t.getTotalBytes(this)), n;
    },
    getPlayerName: function() {
      var n = "videojs";
      return pt.ContribHlsTech.isUsed(this) ? n += "-hls" : pt.HlsJsTech.isUsed(this) ? n += "-hlsjs" : pt.ShakaTech.isUsed(this) ? n += "-shaka" : pt.DashShakaTech.isUsed(this) ? n += "-dash-shaka" : pt.DashTech.isUsed(this) && (n += "-dash"), pt.ImaAdsAdapter.isUsed(this) ? n += "-ima" : pt.OnceUXAdsAdapter.isUsed(this) ? this.pluginName += "-oux" : this.player.FreeWheelPlugin && (n += "-fw"), this.player.mediainfo && (n += "-bcove"), n;
    },
    getPlayerVersion: function() {
      var n = null;
      return typeof videojs < "u" && (n = videojs.VERSION), n;
    },
    getPlayrate: function() {
      return this.player.playbackRate();
    },
    getTech: function() {
      return this.player.tech({ IWillNotUseThisInPlugins: !0 });
    },
    getUsedTech: function() {
      var n = null;
      return pt.ContribHlsTech.isUsed(this) ? n = pt.ContribHlsTech : pt.HlsJsTech.isUsed(this) ? n = pt.HlsJsTech : pt.ShakaTech.isUsed(this) ? n = pt.ShakaTech : pt.DashShakaTech.isUsed(this) ? n = pt.DashShakaTech : pt.DashTech.isUsed(this) && (n = pt.DashTech), n;
    },
    registerListeners: function() {
      if (this.monitorPlayhead(!0, !1, 1200), this.acumBytes = 0, this.ignoreList = [], this.fatalList = [], this.nonFatalList = [], this.references = {
        loadstart: this.loadstartListener.bind(this),
        adsready: this.loadAdsAdapter.bind(this),
        play: this.playListener.bind(this),
        timeupdate: this.timeupdateListener.bind(this),
        pause: this.pauseListener.bind(this),
        playing: this.playingListener.bind(this),
        ended: this.conditionalStop.bind(this),
        dispose: this.disposeListener.bind(this),
        seeking: this.seekingListener.bind(this),
        seeked: this.seekedListener.bind(this),
        error: this.errorListener.bind(this),
        adserror: this.aderrorListener.bind(this),
        adsEnded: this.adsEndedListener.bind(this),
        texttrackchange: this.textListener.bind(this),
        waiting: this.bufferingListener.bind(this)
      }, this.player)
        for (var n in this.references)
          this.player.on(n, this.references[n]);
      setTimeout(this.loadAdsAdapter.bind(this), 50);
    },
    unregisterListeners: function() {
      if (this.monitor && this.monitor.stop(), this.player && this.references) {
        for (var n in this.references)
          this.player.off(n, this.references[n]);
        delete this.references;
      }
    },
    textListener: function(n) {
      if (this.player.textTracks)
        for (var t = this.player.textTracks(), i = t.length, r = 0; r < i; ++r)
          t[r] && t[r].mode === "showing" && (this.plugin.options["content.subtitles"] = t[r].label || t[r].language);
    },
    aderrorListener: function(n) {
      this.loadAdsAdapter(), this.plugin.getAdsAdapter() && this.plugin.getAdsAdapter().adPlayerErrorListener && this.plugin.getAdsAdapter().adPlayerErrorListener(n);
    },
    loadstartListener: function(n) {
      this.loadAdsAdapter(), qn.Log.notice("Player detected " + this.getPlayerName());
    },
    playListener: function(n) {
      this.flags.isStarted ? this.lastSrc && this.lastSrc !== this.getResource() && (this.fireStop(), this.acumBytesFunc(), this.lastPlayhead = void 0, this._startEvent(), this.lastSrc = this.getResource()) : (this.lastSrc = this.getResource(), this._startEvent());
    },
    _startEvent: function(n) {
      this.loadAdsAdapter(), this.player.options_ && this.plugin && !this.plugin.options["content.id"] && (this.plugin.options["content.id"] = this.player.options_["data-video-id"]), this.fireStart(), this.flags.isJoined || (this.joinPolling || (this.joinPolling = new qn.Timer(this._jointimePolling.bind(this), 500)), this.joinPolling.start());
    },
    _jointimePolling: function(n) {
      this.plugin ? (!this.plugin.getAdsAdapter() || !this.plugin.getAdsAdapter().flags.isStarted) && (this.lastPlayhead !== 0 && typeof this.lastPlayhead == "number" && this.lastPlayhead !== this.getPlayhead() && (this.fireJoin(), this.joinPolling && this.joinPolling.stop()), this.lastPlayhead = this.getPlayhead()) : this.joinPolling && this.joinPolling.stop();
    },
    timeupdateListener: function(n) {
      this.getPlayhead() > 0.1 && (this.fireJoin(), this.joinPolling && this.joinPolling.stop(), !this.flags.isPaused && this.lastSeekPlayhead && this.lastSeekPlayhead !== this.getPlayhead() && (this.fireSeekEnd(), this.lastSeekPlayhead = !1)), this.flags.isJoined || (this.lastPlayhead === void 0 && (this.lastPlayhead = this.getPlayhead()), this.lastPlayhead !== this.getPlayhead() && (this.player.options_ && this.plugin && !this.plugin.options["content.id"] && (this.plugin.options["content.id"] = this.player.options_["data-video-id"]), this.fireStart(), this.fireJoin(), this.joinPolling && this.joinPolling.stop(), this.lastPlayhead = void 0)), this.plugin._adsAdapter && !this.plugin._adsAdapter.flags.isStarted && (this.lastPlayhead = this.getPlayhead());
    },
    pauseListener: function(n) {
      this.firePause();
    },
    playingListener: function(n) {
      this._startEvent(), this.fireResume(), this.getPlayhead() < 1 && this.fireSeekEnd();
    },
    disposeListener: function(n) {
      this.plugin && (this.plugin.fireStop(), this.plugin.removeAdsAdapter(), this.plugin.removeAdapter());
    },
    conditionalStop: function(n) {
      this.plugin && (this.adsEnded = !1, this.fireStop(), this.plugin && !this.plugin.options["content.id"] && (this.plugin.options["content.id"] = null), this.acumBytesFunc(), this.lastPlayhead = void 0);
    },
    adsEndedListener: function(n) {
      this.adsEnded = !0, this.plugin.requestBuilder.lastSent.adPosition === qn.Constants.AdPosition.Postroll && (this.plugin.fireStop(), this.acumBytesFunc(), this.lastPlayhead = void 0);
    },
    seekingListener: function(n) {
      this.fireSeekBegin({}, !1);
    },
    seekedListener: function(n) {
      this.lastSeekPlayhead = this.getPlayhead();
    },
    bufferingListener: function(n) {
      this.fireBufferBegin();
    },
    errorListener: function(n) {
      var t = !1, i = !1, r = null, e = null;
      this.player.error && this.player.error() && (r = Number(this.player.error().code), e = this.player.error().message, (r === 2 || r === 4 || r < 0) && (i = !0)), r !== null && (this.ignoreList.includes(r) && (t = !0), !i && this.fatalList.includes(r) ? i = !0 : i && this.nonFatalList.includes(r) && (i = !1)), t || (i ? (this.fireFatalError(r, e), this.acumBytesFunc(), this.lastPlayhead = void 0, this.crashed = !0) : this.fireError(r, e));
    },
    loadAdsAdapter: function() {
      if (this.plugin.getAdsAdapter() === null || this.plugin.getAdsAdapter().isGeneric) {
        var n = null;
        pt.ImaAdsAdapter.isUsed(this) ? n = new pt.ImaAdsAdapter(this.player) : pt.OnceUXAdsAdapter.isUsed(this) ? n = new pt.OnceUXAdsAdapter(this.player) : pt.BcoveImaAdsAdapter.isUsed(this) ? n = new pt.BcoveImaAdsAdapter(this.player) : pt.BcoveFreewheelAdsAdapter.isUsed(this) ? n = new pt.BcoveFreewheelAdsAdapter(this.player) : pt.FreewheelAdsAdapter.isUsed(this) ? n = new pt.FreewheelAdsAdapter(this.player.freewheelAds.controller) : this.plugin.getAdsAdapter() === null && (n = new pt.GenericAdsAdapter(this.player)), n && this.plugin.setAdsAdapter(n);
      } else
        this.plugin.getAdsAdapter().registerImaEvents && this.plugin.getAdsAdapter().registerImaEvents();
    },
    acumBytesFunc: function() {
      this.acumBytes += this.getTotalBytes() || 0;
    },
    errorModifyer: function(n, t, i) {
      this.fatalList = n || [], this.nonFatalList = t || [], this.ignoreList = i || [];
    }
  },
  {
    GenericAdsAdapter: Ak(),
    BcoveImaAdsAdapter: Ck(),
    BcoveFreewheelAdsAdapter: kk(),
    FreewheelAdsAdapter: Vk(),
    ImaAdsAdapter: jk(),
    OnceUXAdsAdapter: Hk(),
    ContribHlsTech: Wk(),
    HlsJsTech: Gk(),
    ShakaTech: $k(),
    DashShakaTech: zk(),
    DashTech: Kk()
  }
);
qn.adapters.Videojs = pt;
var Xk = qn.adapters.Videojs;
function Qk(n, t) {
  var e;
  t.accountCode || console.warn(
    "NPAW was not enabled because options.npaw.accountCode is invalid. The value was: " + t.accountCode
  );
  const i = new Ii.Plugin({ accountCode: t.accountCode }), r = {
    "content.isLive": t.tracking.isLive === !0,
    "content.id": t.tracking.metadata.contentId,
    "content.title": t.tracking.metadata.title,
    "content.program": (e = t.tracking.metadata.showTitle) != null ? e : t.tracking.metadata.title,
    "content.tvShow": t.tracking.metadata.showTitle,
    "content.season": t.tracking.metadata.seasonTitle,
    "content.episodeTitle": t.tracking.metadata.episodeTitle,
    obfuscateIp: !0,
    "user.name": t.tracking.userId,
    "app.name": "web",
    "app.releaseVersion": "",
    "parse.manifest": !0
  };
  i.setOptions(r), i.setAdapter(new Xk(n));
}
function Yk(n) {
  return new Promise((t, i) => {
    let r = !1, e = document.getElementsByTagName("script")[0], a = document.createElement("script");
    a.type = "text/javascript", a.src = n, a.async = !0, a.onload = a.onreadystatechange = function() {
      !r && (!this.readyState || this.readyState === "complete") && (r = !0, t(this));
    }, a.onerror = a.onabort = i, e && e.parentNode && e.parentNode.insertBefore(a, e);
  });
}
const Jk = "//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1";
class Do {
  static load() {
    return new Promise((t, i) => {
      window.__onGCastApiAvailable = (r) => Do.onGCastApiAvailable(r, t), Do.loadCastSDK().catch((r) => {
        console.warn("Cast sender lib loading failed", r), i(r);
      });
    });
  }
  static loadCastSDK() {
    return window.cast && window.cast.framework ? Promise.resolve() : Yk(Jk);
  }
  static onGCastApiAvailable(t, i) {
    t ? i() : console.warn("Google cast API isn't available yet");
  }
}
const Zk = "1.1.4", eP = G.getComponent("MenuButton"), tP = G.getComponent("Menu"), iP = G.getComponent("Component"), rP = G.dom;
function nP(n) {
  return typeof n != "string" ? n : n.charAt(0).toUpperCase() + n.slice(1);
}
class aP extends eP {
  constructor(t) {
    super(t, {
      title: t.localize("Quality"),
      name: "QualityButton"
    });
  }
  createItems() {
    return [];
  }
  createMenu() {
    const t = new tP(this.player_, { menuButton: this });
    if (this.hideThreshold_ = 0, this.options_.title) {
      const i = rP.createEl("li", {
        className: "vjs-menu-title",
        innerHTML: nP(this.options_.title),
        tabIndex: -1
      }), r = new iP(this.player_, { el: i });
      this.hideThreshold_ += 1, t.addItem(r);
    }
    if (this.items = this.createItems(), this.items)
      for (let i = 0; i < this.items.length; i++)
        t.addItem(this.items[i]);
    return t;
  }
}
const sP = G.getComponent("MenuItem");
class oP extends sP {
  constructor(t, i, r, e) {
    super(t, {
      label: i.label,
      selectable: !0,
      selected: i.selected || !1
    }), this.item = i, this.qualityButton = r, this.plugin = e;
  }
  handleClick() {
    this.plugin.setQuality(this.item.value);
  }
}
const uP = {
  sortAscending: !1,
  autoPlacement: "top"
}, lP = G.registerPlugin || G.plugin;
class dP {
  constructor(t, i) {
    this.player = t, this.config = i, this.player.qualityLevels && this.getHls() && (this.createQualityButton(), this.bindPlayerEvents());
  }
  getHls() {
    return this.player.tech({ IWillNotUseThisInPlugins: !0 }).hls;
  }
  bindPlayerEvents() {
    this.player.qualityLevels().on("addqualitylevel", this.onAddQualityLevel.bind(this));
  }
  createQualityButton() {
    const t = this.player;
    this._qualityButton = new aP(t);
    const i = t.controlBar.children().length - 2, r = t.controlBar.addChild(
      this._qualityButton,
      { componentClass: "qualitySelector" },
      this.config.placementIndex || i
    );
    if (r.addClass("vjs-quality-selector"), this.config.displayCurrentQuality)
      this.setButtonInnerText("auto");
    else {
      const e = ` ${this.config.vjsIconClass || "vjs-icon-hd"}`;
      r.menuButton_.$(".vjs-icon-placeholder").className += e;
    }
    r.removeClass("vjs-hidden");
  }
  setButtonInnerText(t) {
    this._qualityButton.menuButton_.$(".vjs-icon-placeholder").innerHTML = t;
  }
  getQualityMenuItem(t) {
    const i = this.player;
    return new oP(i, t, this._qualityButton, this);
  }
  onAddQualityLevel() {
    const t = this.player, r = t.qualityLevels().levels_ || [], e = [], a = this.config.autoPlacement, s = this.getQualityMenuItem.call(this, {
      label: t.localize("Auto"),
      value: "auto",
      selected: !0
    });
    for (let o = 0; o < r.length; ++o) {
      const { width: u, height: l } = r[o], d = u > l ? l : u;
      if (!!d && !e.filter((h) => h.item && h.item.value === d).length) {
        const h = this.getQualityMenuItem.call(this, {
          label: d + "p",
          value: d
        });
        e.push(h);
      }
    }
    this.config.sortAscending ? e.sort((o, u) => typeof o != "object" || typeof u != "object" ? -1 : o.item.value - u.item.value) : e.sort((o, u) => typeof o != "object" || typeof u != "object" ? -1 : u.item.value - o.item.value), this._qualityButton && (this._qualityButton.createItems = function() {
      return a === "top" ? [s, ...e] : [...e, s];
    }, this._qualityButton.update());
  }
  setQuality(t) {
    const i = this.player.qualityLevels();
    this._currentQuality = t, this.config.displayCurrentQuality && this.setButtonInnerText(t === "auto" ? t : `${t}p`);
    for (let r = 0; r < i.length; ++r) {
      const { width: e, height: a } = i[r], s = e > a ? a : e;
      i[r].enabled = s === t || t === "auto";
    }
    for (let r = 0; r < this._qualityButton.items.length; ++r) {
      const e = this._qualityButton.items[r];
      e && e.selected(e.item && e.item.value === t);
    }
    this._qualityButton.unpressButton();
  }
  getCurrentQuality() {
    return this._currentQuality || "auto";
  }
}
const cP = (n, t) => {
  n.addClass("vjs-hls-quality-selector"), n.hlsQualitySelector = new dP(n, t);
}, Qc = function(n) {
  this.ready(() => {
    cP(this, G.mergeOptions(uP, n));
  });
};
lP("hlsQualitySelector", Qc);
Qc.VERSION = Zk;
function fP(n, t, i, r) {
  return function() {
    r = this, clearTimeout(i), i = setTimeout(function() {
      n.apply(r, arguments);
    }, t || 100);
  };
}
G.registerPlugin("smallScreen", function(n) {
  var t = (r) => {
    this.userActive(!this.userActive()), r.stopPropagation();
  };
  let i = !1;
  this.on(
    "playerresize",
    fP(() => {
      !i && G.browser.TOUCH_ENABLED && screen.width < 768 ? (i = !0, this.controlBar.el().addEventListener("click", t), this.addClass("vjs-smallscreen-ui")) : i && screen.width >= 768 && !this.isFullscreen() && (i = !1, this.controlBar.el().removeEventListener("click", t), this.removeClass("vjs-smallscreen-ui"));
    }, 100)
  );
});
const su = G.getComponent("SeekBar");
var hP = su.prototype.getPercent;
su.prototype.getPercent = function() {
  const t = this.player_.liveTracker;
  if (t && t.isLive())
    return hP.bind(this)();
  const r = this.player_.currentTime() / this.player_.duration();
  return r >= 1 ? 1 : r;
};
var pP = su.prototype.handleMouseMove;
su.prototype.handleMouseMove = function(t) {
  const i = this.player_.liveTracker;
  if (i && i.isLive())
    return pP.bind(this, t)();
  let r = this.calculateDistance(t) * this.player_.duration();
  r === this.player_.duration() && (r = r - 0.1), this.player_.currentTime(r), this.update();
};
const l_ = G.getComponent("Button");
class mP extends l_ {
  constructor(t, i = {}) {
    super(t, i), this.player_ = t, this.addClass("vjs-seek-forward-control");
  }
  handleClick(t) {
    this.player_.currentTime(this.player_.currentTime() + 15);
  }
}
class gP extends l_ {
  constructor(t, i = {}) {
    super(t, i), this.player_ = t, this.addClass("vjs-seek-backward-control");
  }
  handleClick(t) {
    this.player_.currentTime(this.player_.currentTime() - 15);
  }
}
const vP = G.getComponent("Button");
class _P extends vP {
  constructor(t, i = {}) {
    super(t, i), this.player_ = t, this.controlText("Hide controls"), this.addClass("vjs-dismiss-control");
  }
  handleClick(t) {
    this.player_.userActive(!1);
  }
}
var Pd = { exports: {} };
(function(n, t) {
  (function(i, r) {
    var e = "1.0.2", a = "", s = "?", o = "function", u = "undefined", l = "object", d = "string", h = "major", f = "model", _ = "name", v = "type", y = "vendor", T = "version", I = "architecture", V = "console", $ = "mobile", k = "tablet", P = "smarttv", L = "wearable", O = "embedded", U = 255, ie = "Amazon", z = "Apple", le = "ASUS", se = "BlackBerry", me = "Browser", M = "Chrome", ne = "Edge", fe = "Firefox", pe = "Google", H = "Huawei", Q = "LG", F = "Microsoft", W = "Motorola", X = "Opera", Y = "Samsung", de = "Sony", oe = "Xiaomi", ae = "Zebra", ue = "Facebook", ge = function(Ne, Qe) {
      var Be = {};
      for (var ft in Ne)
        Qe[ft] && Qe[ft].length % 2 === 0 ? Be[ft] = Qe[ft].concat(Ne[ft]) : Be[ft] = Ne[ft];
      return Be;
    }, ee = function(Ne) {
      for (var Qe = {}, Be = 0; Be < Ne.length; Be++)
        Qe[Ne[Be].toUpperCase()] = Ne[Be];
      return Qe;
    }, _e = function(Ne, Qe) {
      return typeof Ne === d ? xe(Qe).indexOf(xe(Ne)) !== -1 : !1;
    }, xe = function(Ne) {
      return Ne.toLowerCase();
    }, Le = function(Ne) {
      return typeof Ne === d ? Ne.replace(/[^\d\.]/g, a).split(".")[0] : r;
    }, je = function(Ne, Qe) {
      if (typeof Ne === d)
        return Ne = Ne.replace(/^\s\s*/, a).replace(/\s\s*$/, a), typeof Qe === u ? Ne : Ne.substring(0, U);
    }, Xe = function(Ne, Qe) {
      for (var Be = 0, ft, Ue, zi, ut, Ki, Jt; Be < Qe.length && !Ki; ) {
        var et = Qe[Be], cn = Qe[Be + 1];
        for (ft = Ue = 0; ft < et.length && !Ki; )
          if (Ki = et[ft++].exec(Ne), Ki)
            for (zi = 0; zi < cn.length; zi++)
              Jt = Ki[++Ue], ut = cn[zi], typeof ut === l && ut.length > 0 ? ut.length === 2 ? typeof ut[1] == o ? this[ut[0]] = ut[1].call(this, Jt) : this[ut[0]] = ut[1] : ut.length === 3 ? typeof ut[1] === o && !(ut[1].exec && ut[1].test) ? this[ut[0]] = Jt ? ut[1].call(this, Jt, ut[2]) : r : this[ut[0]] = Jt ? Jt.replace(ut[1], ut[2]) : r : ut.length === 4 && (this[ut[0]] = Jt ? ut[3].call(this, Jt.replace(ut[1], ut[2])) : r) : this[ut] = Jt || r;
        Be += 2;
      }
    }, Je = function(Ne, Qe) {
      for (var Be in Qe)
        if (typeof Qe[Be] === l && Qe[Be].length > 0) {
          for (var ft = 0; ft < Qe[Be].length; ft++)
            if (_e(Qe[Be][ft], Ne))
              return Be === s ? r : Be;
        } else if (_e(Qe[Be], Ne))
          return Be === s ? r : Be;
      return Ne;
    }, mt = {
      "1.0": "/8",
      "1.2": "/1",
      "1.3": "/3",
      "2.0": "/412",
      "2.0.2": "/416",
      "2.0.3": "/417",
      "2.0.4": "/419",
      "?": "/"
    }, dt = {
      ME: "4.90",
      "NT 3.11": "NT3.51",
      "NT 4.0": "NT4.0",
      2e3: "NT 5.0",
      XP: ["NT 5.1", "NT 5.2"],
      Vista: "NT 6.0",
      7: "NT 6.1",
      8: "NT 6.2",
      "8.1": "NT 6.3",
      10: ["NT 6.4", "NT 10.0"],
      RT: "ARM"
    }, gt = {
      browser: [
        [
          /\b(?:crmo|crios)\/([\w\.]+)/i
        ],
        [T, [_, "Chrome"]],
        [
          /edg(?:e|ios|a)?\/([\w\.]+)/i
        ],
        [T, [_, "Edge"]],
        [
          /(opera mini)\/([-\w\.]+)/i,
          /(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,
          /(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i
        ],
        [_, T],
        [
          /opios[\/ ]+([\w\.]+)/i
        ],
        [T, [_, X + " Mini"]],
        [
          /\bopr\/([\w\.]+)/i
        ],
        [T, [_, X]],
        [
          /(kindle)\/([\w\.]+)/i,
          /(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,
          /(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,
          /(ba?idubrowser)[\/ ]?([\w\.]+)/i,
          /(?:ms|\()(ie) ([\w\.]+)/i,
          /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,
          /(weibo)__([\d\.]+)/i
        ],
        [_, T],
        [
          /(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i
        ],
        [T, [_, "UC" + me]],
        [
          /\bqbcore\/([\w\.]+)/i
        ],
        [T, [_, "WeChat(Win) Desktop"]],
        [
          /micromessenger\/([\w\.]+)/i
        ],
        [T, [_, "WeChat"]],
        [
          /konqueror\/([\w\.]+)/i
        ],
        [T, [_, "Konqueror"]],
        [
          /trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i
        ],
        [T, [_, "IE"]],
        [
          /yabrowser\/([\w\.]+)/i
        ],
        [T, [_, "Yandex"]],
        [
          /(avast|avg)\/([\w\.]+)/i
        ],
        [[_, /(.+)/, "$1 Secure " + me], T],
        [
          /\bfocus\/([\w\.]+)/i
        ],
        [T, [_, fe + " Focus"]],
        [
          /\bopt\/([\w\.]+)/i
        ],
        [T, [_, X + " Touch"]],
        [
          /coc_coc\w+\/([\w\.]+)/i
        ],
        [T, [_, "Coc Coc"]],
        [
          /dolfin\/([\w\.]+)/i
        ],
        [T, [_, "Dolphin"]],
        [
          /coast\/([\w\.]+)/i
        ],
        [T, [_, X + " Coast"]],
        [
          /miuibrowser\/([\w\.]+)/i
        ],
        [T, [_, "MIUI " + me]],
        [
          /fxios\/([-\w\.]+)/i
        ],
        [T, [_, fe]],
        [
          /\bqihu|(qi?ho?o?|360)browser/i
        ],
        [[_, "360 " + me]],
        [
          /(oculus|samsung|sailfish)browser\/([\w\.]+)/i
        ],
        [[_, /(.+)/, "$1 " + me], T],
        [
          /(comodo_dragon)\/([\w\.]+)/i
        ],
        [[_, /_/g, " "], T],
        [
          /(electron)\/([\w\.]+) safari/i,
          /(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,
          /m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i
        ],
        [_, T],
        [
          /(metasr)[\/ ]?([\w\.]+)/i,
          /(lbbrowser)/i
        ],
        [_],
        [
          /((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i
        ],
        [[_, ue], T],
        [
          /safari (line)\/([\w\.]+)/i,
          /\b(line)\/([\w\.]+)\/iab/i,
          /(chromium|instagram)[\/ ]([-\w\.]+)/i
        ],
        [_, T],
        [
          /\bgsa\/([\w\.]+) .*safari\//i
        ],
        [T, [_, "GSA"]],
        [
          /headlesschrome(?:\/([\w\.]+)| )/i
        ],
        [T, [_, M + " Headless"]],
        [
          / wv\).+(chrome)\/([\w\.]+)/i
        ],
        [[_, M + " WebView"], T],
        [
          /droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i
        ],
        [T, [_, "Android " + me]],
        [
          /(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i
        ],
        [_, T],
        [
          /version\/([\w\.]+) .*mobile\/\w+ (safari)/i
        ],
        [T, [_, "Mobile Safari"]],
        [
          /version\/([\w\.]+) .*(mobile ?safari|safari)/i
        ],
        [T, _],
        [
          /webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i
        ],
        [_, [T, Je, mt]],
        [
          /(webkit|khtml)\/([\w\.]+)/i
        ],
        [_, T],
        [
          /(navigator|netscape\d?)\/([-\w\.]+)/i
        ],
        [[_, "Netscape"], T],
        [
          /mobile vr; rv:([\w\.]+)\).+firefox/i
        ],
        [T, [_, fe + " Reality"]],
        [
          /ekiohf.+(flow)\/([\w\.]+)/i,
          /(swiftfox)/i,
          /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,
          /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,
          /(firefox)\/([\w\.]+)/i,
          /(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,
          /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,
          /(links) \(([\w\.]+)/i
        ],
        [_, T]
      ],
      cpu: [
        [
          /(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i
        ],
        [[I, "amd64"]],
        [
          /(ia32(?=;))/i
        ],
        [[I, xe]],
        [
          /((?:i[346]|x)86)[;\)]/i
        ],
        [[I, "ia32"]],
        [
          /\b(aarch64|arm(v?8e?l?|_?64))\b/i
        ],
        [[I, "arm64"]],
        [
          /\b(arm(?:v[67])?ht?n?[fl]p?)\b/i
        ],
        [[I, "armhf"]],
        [
          /windows (ce|mobile); ppc;/i
        ],
        [[I, "arm"]],
        [
          /((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i
        ],
        [[I, /ower/, a, xe]],
        [
          /(sun4\w)[;\)]/i
        ],
        [[I, "sparc"]],
        [
          /((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i
        ],
        [[I, xe]]
      ],
      device: [
        [
          /\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i
        ],
        [f, [y, Y], [v, k]],
        [
          /\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,
          /samsung[- ]([-\w]+)/i,
          /sec-(sgh\w+)/i
        ],
        [f, [y, Y], [v, $]],
        [
          /\((ip(?:hone|od)[\w ]*);/i
        ],
        [f, [y, z], [v, $]],
        [
          /\((ipad);[-\w\),; ]+apple/i,
          /applecoremedia\/[\w\.]+ \((ipad)/i,
          /\b(ipad)\d\d?,\d\d?[;\]].+ios/i
        ],
        [f, [y, z], [v, k]],
        [
          /\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i
        ],
        [f, [y, H], [v, k]],
        [
          /(?:huawei|honor)([-\w ]+)[;\)]/i,
          /\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i
        ],
        [f, [y, H], [v, $]],
        [
          /\b(poco[\w ]+)(?: bui|\))/i,
          /\b; (\w+) build\/hm\1/i,
          /\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,
          /\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,
          /\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i
        ],
        [[f, /_/g, " "], [y, oe], [v, $]],
        [
          /\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i
        ],
        [[f, /_/g, " "], [y, oe], [v, k]],
        [
          /; (\w+) bui.+ oppo/i,
          /\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i
        ],
        [f, [y, "OPPO"], [v, $]],
        [
          /vivo (\w+)(?: bui|\))/i,
          /\b(v[12]\d{3}\w?[at])(?: bui|;)/i
        ],
        [f, [y, "Vivo"], [v, $]],
        [
          /\b(rmx[12]\d{3})(?: bui|;|\))/i
        ],
        [f, [y, "Realme"], [v, $]],
        [
          /\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,
          /\bmot(?:orola)?[- ](\w*)/i,
          /((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i
        ],
        [f, [y, W], [v, $]],
        [
          /\b(mz60\d|xoom[2 ]{0,2}) build\//i
        ],
        [f, [y, W], [v, k]],
        [
          /((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i
        ],
        [f, [y, Q], [v, k]],
        [
          /(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,
          /\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,
          /\blg-?([\d\w]+) bui/i
        ],
        [f, [y, Q], [v, $]],
        [
          /(ideatab[-\w ]+)/i,
          /lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i
        ],
        [f, [y, "Lenovo"], [v, k]],
        [
          /(?:maemo|nokia).*(n900|lumia \d+)/i,
          /nokia[-_ ]?([-\w\.]*)/i
        ],
        [[f, /_/g, " "], [y, "Nokia"], [v, $]],
        [
          /(pixel c)\b/i
        ],
        [f, [y, pe], [v, k]],
        [
          /droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i
        ],
        [f, [y, pe], [v, $]],
        [
          /droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i
        ],
        [f, [y, de], [v, $]],
        [
          /sony tablet [ps]/i,
          /\b(?:sony)?sgp\w+(?: bui|\))/i
        ],
        [[f, "Xperia Tablet"], [y, de], [v, k]],
        [
          / (kb2005|in20[12]5|be20[12][59])\b/i,
          /(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i
        ],
        [f, [y, "OnePlus"], [v, $]],
        [
          /(alexa)webm/i,
          /(kf[a-z]{2}wi)( bui|\))/i,
          /(kf[a-z]+)( bui|\)).+silk\//i
        ],
        [f, [y, ie], [v, k]],
        [
          /((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i
        ],
        [[f, /(.+)/g, "Fire Phone $1"], [y, ie], [v, $]],
        [
          /(playbook);[-\w\),; ]+(rim)/i
        ],
        [f, y, [v, k]],
        [
          /\b((?:bb[a-f]|st[hv])100-\d)/i,
          /\(bb10; (\w+)/i
        ],
        [f, [y, se], [v, $]],
        [
          /(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i
        ],
        [f, [y, le], [v, k]],
        [
          / (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i
        ],
        [f, [y, le], [v, $]],
        [
          /(nexus 9)/i
        ],
        [f, [y, "HTC"], [v, k]],
        [
          /(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,
          /(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,
          /(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i
        ],
        [y, [f, /_/g, " "], [v, $]],
        [
          /droid.+; ([ab][1-7]-?[0178a]\d\d?)/i
        ],
        [f, [y, "Acer"], [v, k]],
        [
          /droid.+; (m[1-5] note) bui/i,
          /\bmz-([-\w]{2,})/i
        ],
        [f, [y, "Meizu"], [v, $]],
        [
          /\b(sh-?[altvz]?\d\d[a-ekm]?)/i
        ],
        [f, [y, "Sharp"], [v, $]],
        [
          /(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,
          /(hp) ([\w ]+\w)/i,
          /(asus)-?(\w+)/i,
          /(microsoft); (lumia[\w ]+)/i,
          /(lenovo)[-_ ]?([-\w]+)/i,
          /(jolla)/i,
          /(oppo) ?([\w ]+) bui/i
        ],
        [y, f, [v, $]],
        [
          /(archos) (gamepad2?)/i,
          /(hp).+(touchpad(?!.+tablet)|tablet)/i,
          /(kindle)\/([\w\.]+)/i,
          /(nook)[\w ]+build\/(\w+)/i,
          /(dell) (strea[kpr\d ]*[\dko])/i,
          /(le[- ]+pan)[- ]+(\w{1,9}) bui/i,
          /(trinity)[- ]*(t\d{3}) bui/i,
          /(gigaset)[- ]+(q\w{1,9}) bui/i,
          /(vodafone) ([\w ]+)(?:\)| bui)/i
        ],
        [y, f, [v, k]],
        [
          /(surface duo)/i
        ],
        [f, [y, F], [v, k]],
        [
          /droid [\d\.]+; (fp\du?)(?: b|\))/i
        ],
        [f, [y, "Fairphone"], [v, $]],
        [
          /(u304aa)/i
        ],
        [f, [y, "AT&T"], [v, $]],
        [
          /\bsie-(\w*)/i
        ],
        [f, [y, "Siemens"], [v, $]],
        [
          /\b(rct\w+) b/i
        ],
        [f, [y, "RCA"], [v, k]],
        [
          /\b(venue[\d ]{2,7}) b/i
        ],
        [f, [y, "Dell"], [v, k]],
        [
          /\b(q(?:mv|ta)\w+) b/i
        ],
        [f, [y, "Verizon"], [v, k]],
        [
          /\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i
        ],
        [f, [y, "Barnes & Noble"], [v, k]],
        [
          /\b(tm\d{3}\w+) b/i
        ],
        [f, [y, "NuVision"], [v, k]],
        [
          /\b(k88) b/i
        ],
        [f, [y, "ZTE"], [v, k]],
        [
          /\b(nx\d{3}j) b/i
        ],
        [f, [y, "ZTE"], [v, $]],
        [
          /\b(gen\d{3}) b.+49h/i
        ],
        [f, [y, "Swiss"], [v, $]],
        [
          /\b(zur\d{3}) b/i
        ],
        [f, [y, "Swiss"], [v, k]],
        [
          /\b((zeki)?tb.*\b) b/i
        ],
        [f, [y, "Zeki"], [v, k]],
        [
          /\b([yr]\d{2}) b/i,
          /\b(dragon[- ]+touch |dt)(\w{5}) b/i
        ],
        [[y, "Dragon Touch"], f, [v, k]],
        [
          /\b(ns-?\w{0,9}) b/i
        ],
        [f, [y, "Insignia"], [v, k]],
        [
          /\b((nxa|next)-?\w{0,9}) b/i
        ],
        [f, [y, "NextBook"], [v, k]],
        [
          /\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i
        ],
        [[y, "Voice"], f, [v, $]],
        [
          /\b(lvtel\-)?(v1[12]) b/i
        ],
        [[y, "LvTel"], f, [v, $]],
        [
          /\b(ph-1) /i
        ],
        [f, [y, "Essential"], [v, $]],
        [
          /\b(v(100md|700na|7011|917g).*\b) b/i
        ],
        [f, [y, "Envizen"], [v, k]],
        [
          /\b(trio[-\w\. ]+) b/i
        ],
        [f, [y, "MachSpeed"], [v, k]],
        [
          /\btu_(1491) b/i
        ],
        [f, [y, "Rotor"], [v, k]],
        [
          /(shield[\w ]+) b/i
        ],
        [f, [y, "Nvidia"], [v, k]],
        [
          /(sprint) (\w+)/i
        ],
        [y, f, [v, $]],
        [
          /(kin\.[onetw]{3})/i
        ],
        [[f, /\./g, " "], [y, F], [v, $]],
        [
          /droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i
        ],
        [f, [y, ae], [v, k]],
        [
          /droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i
        ],
        [f, [y, ae], [v, $]],
        [
          /(ouya)/i,
          /(nintendo) ([wids3utch]+)/i
        ],
        [y, f, [v, V]],
        [
          /droid.+; (shield) bui/i
        ],
        [f, [y, "Nvidia"], [v, V]],
        [
          /(playstation [345portablevi]+)/i
        ],
        [f, [y, de], [v, V]],
        [
          /\b(xbox(?: one)?(?!; xbox))[\); ]/i
        ],
        [f, [y, F], [v, V]],
        [
          /smart-tv.+(samsung)/i
        ],
        [y, [v, P]],
        [
          /hbbtv.+maple;(\d+)/i
        ],
        [[f, /^/, "SmartTV"], [y, Y], [v, P]],
        [
          /(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i
        ],
        [[y, Q], [v, P]],
        [
          /(apple) ?tv/i
        ],
        [y, [f, z + " TV"], [v, P]],
        [
          /crkey/i
        ],
        [[f, M + "cast"], [y, pe], [v, P]],
        [
          /droid.+aft(\w)( bui|\))/i
        ],
        [f, [y, ie], [v, P]],
        [
          /\(dtv[\);].+(aquos)/i
        ],
        [f, [y, "Sharp"], [v, P]],
        [
          /\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,
          /hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i
        ],
        [[y, je], [f, je], [v, P]],
        [
          /\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i
        ],
        [[v, P]],
        [
          /((pebble))app/i
        ],
        [y, f, [v, L]],
        [
          /droid.+; (glass) \d/i
        ],
        [f, [y, pe], [v, L]],
        [
          /droid.+; (wt63?0{2,3})\)/i
        ],
        [f, [y, ae], [v, L]],
        [
          /(quest( 2)?)/i
        ],
        [f, [y, ue], [v, L]],
        [
          /(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i
        ],
        [y, [v, O]],
        [
          /droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i
        ],
        [f, [v, $]],
        [
          /droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i
        ],
        [f, [v, k]],
        [
          /\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i
        ],
        [[v, k]],
        [
          /(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i
        ],
        [[v, $]],
        [
          /(android[-\w\. ]{0,9});.+buil/i
        ],
        [f, [y, "Generic"]]
      ],
      engine: [
        [
          /windows.+ edge\/([\w\.]+)/i
        ],
        [T, [_, ne + "HTML"]],
        [
          /webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i
        ],
        [T, [_, "Blink"]],
        [
          /(presto)\/([\w\.]+)/i,
          /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,
          /ekioh(flow)\/([\w\.]+)/i,
          /(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,
          /(icab)[\/ ]([23]\.[\d\.]+)/i
        ],
        [_, T],
        [
          /rv\:([\w\.]{1,9})\b.+(gecko)/i
        ],
        [T, _]
      ],
      os: [
        [
          /microsoft (windows) (vista|xp)/i
        ],
        [_, T],
        [
          /(windows) nt 6\.2; (arm)/i,
          /(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,
          /(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i
        ],
        [_, [T, Je, dt]],
        [
          /(win(?=3|9|n)|win 9x )([nt\d\.]+)/i
        ],
        [[_, "Windows"], [T, Je, dt]],
        [
          /ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,
          /cfnetwork\/.+darwin/i
        ],
        [[T, /_/g, "."], [_, "iOS"]],
        [
          /(mac os x) ?([\w\. ]*)/i,
          /(macintosh|mac_powerpc\b)(?!.+haiku)/i
        ],
        [[_, "Mac OS"], [T, /_/g, "."]],
        [
          /droid ([\w\.]+)\b.+(android[- ]x86)/i
        ],
        [T, _],
        [
          /(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,
          /(blackberry)\w*\/([\w\.]*)/i,
          /(tizen|kaios)[\/ ]([\w\.]+)/i,
          /\((series40);/i
        ],
        [_, T],
        [
          /\(bb(10);/i
        ],
        [T, [_, se]],
        [
          /(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i
        ],
        [T, [_, "Symbian"]],
        [
          /mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i
        ],
        [T, [_, fe + " OS"]],
        [
          /web0s;.+rt(tv)/i,
          /\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i
        ],
        [T, [_, "webOS"]],
        [
          /crkey\/([\d\.]+)/i
        ],
        [T, [_, M + "cast"]],
        [
          /(cros) [\w]+ ([\w\.]+\w)/i
        ],
        [[_, "Chromium OS"], T],
        [
          /(nintendo|playstation) ([wids345portablevuch]+)/i,
          /(xbox); +xbox ([^\);]+)/i,
          /\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,
          /(mint)[\/\(\) ]?(\w*)/i,
          /(mageia|vectorlinux)[; ]/i,
          /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,
          /(hurd|linux) ?([\w\.]*)/i,
          /(gnu) ?([\w\.]*)/i,
          /\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,
          /(haiku) (\w+)/i
        ],
        [_, T],
        [
          /(sunos) ?([\w\.\d]*)/i
        ],
        [[_, "Solaris"], T],
        [
          /((?:open)?solaris)[-\/ ]?([\w\.]*)/i,
          /(aix) ((\d)(?=\.|\)| )[\w\.])*/i,
          /\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,
          /(unix) ?([\w\.]*)/i
        ],
        [_, T]
      ]
    }, ke = function(Ne, Qe) {
      if (typeof Ne === l && (Qe = Ne, Ne = r), !(this instanceof ke))
        return new ke(Ne, Qe).getResult();
      var Be = Ne || (typeof i !== u && i.navigator && i.navigator.userAgent ? i.navigator.userAgent : a), ft = Qe ? ge(gt, Qe) : gt;
      return this.getBrowser = function() {
        var Ue = {};
        return Ue[_] = r, Ue[T] = r, Xe.call(Ue, Be, ft.browser), Ue.major = Le(Ue.version), Ue;
      }, this.getCPU = function() {
        var Ue = {};
        return Ue[I] = r, Xe.call(Ue, Be, ft.cpu), Ue;
      }, this.getDevice = function() {
        var Ue = {};
        return Ue[y] = r, Ue[f] = r, Ue[v] = r, Xe.call(Ue, Be, ft.device), Ue;
      }, this.getEngine = function() {
        var Ue = {};
        return Ue[_] = r, Ue[T] = r, Xe.call(Ue, Be, ft.engine), Ue;
      }, this.getOS = function() {
        var Ue = {};
        return Ue[_] = r, Ue[T] = r, Xe.call(Ue, Be, ft.os), Ue;
      }, this.getResult = function() {
        return {
          ua: this.getUA(),
          browser: this.getBrowser(),
          engine: this.getEngine(),
          os: this.getOS(),
          device: this.getDevice(),
          cpu: this.getCPU()
        };
      }, this.getUA = function() {
        return Be;
      }, this.setUA = function(Ue) {
        return Be = typeof Ue === d && Ue.length > U ? je(Ue, U) : Ue, this;
      }, this.setUA(Be), this;
    };
    ke.VERSION = e, ke.BROWSER = ee([_, T, h]), ke.CPU = ee([I]), ke.DEVICE = ee([f, y, v, V, $, P, k, L, O]), ke.ENGINE = ke.OS = ee([_, T]), n.exports && (t = n.exports = ke), t.UAParser = ke;
    var ot = typeof i !== u && (i.jQuery || i.Zepto);
    if (ot && !ot.ua) {
      var at = new ke();
      ot.ua = at.getResult(), ot.ua.get = function() {
        return at.getUA();
      }, ot.ua.set = function(Ne) {
        at.setUA(Ne);
        var Qe = at.getResult();
        for (var Be in Qe)
          ot.ua[Be] = Qe[Be];
      };
    }
  })(typeof window == "object" ? window : st);
})(Pd, Pd.exports);
const yP = Pd.exports, Kl = new yP().getResult(), d_ = () => (Kl == null ? void 0 : Kl.device.type) === "smarttv";
G.getPlugin("hlsQualitySelector") || G.registerPlugin("hlsQualitySelector", Qc);
let Lo = !1;
Do.load().then(() => {
  Lo = !0;
});
async function TP(n, t) {
  var o;
  Lo || await new Promise((u) => setTimeout(u, 100));
  const i = G.mergeOptions(bP(), t), r = "videojs-" + n;
  var e = G.getPlayer(r);
  e && e.dispose();
  const a = SP(r, i);
  (o = document.getElementById(n)) == null || o.insertAdjacentElement("afterbegin", a);
  const s = c_(a, i);
  return i.npaw.enabled === !0 && Qk(s, i.npaw), s;
}
window.bccmCreatePlayer = c_;
const bP = () => {
  const n = {
    eventTracking: !0,
    smallScreen: {}
  };
  return Lo && (n.chromecast = {
    buttonPositionIndex: 10,
    receiverAppID: "BC91FA3B"
  }), {
    src: {
      type: "application/x-mpegURL"
    },
    autoplay: !1,
    languagePreferenceDefaults: {},
    npaw: {
      tracking: {
        isLive: !1,
        metadata: {},
        userId: ""
      }
    },
    subtitles: [],
    videojs: {
      autoplay: !1,
      controls: !0,
      fluid: !0,
      crossOrigin: "anonymous",
      html5: {
        vhs: {
          experimentalBufferBasedABR: !1,
          useBandwidthFromLocalStorage: !0,
          overrideNative: !0,
          limitRenditionByPlayerDimensions: !0,
          useDevicePixelRatio: !0,
          allowSeeksWithinUnsafeLiveWindow: !0,
          cacheEncryptionKeys: !0
        },
        nativeAudioTracks: !1,
        nativeVideoTracks: !1
      },
      inactivityTimeout: d_() ? 6e4 : 2e3,
      liveui: !0,
      liveTracker: {
        trackingThreshold: 15
      },
      plugins: n,
      responsive: !0,
      techOrder: Lo ? ["chromecast", "html5"] : ["html5"],
      userActions: {
        hotkeys: !0
      }
    }
  };
};
function SP(n, t) {
  const i = document.createElement("video");
  return i.classList.add("video-js", "vjs-brunstadtv-skin"), t.autoplay && i.classList.add("vjs-show-startup-spinner"), i.id = n, i;
}
function Rp(n, t) {
  let i = null;
  for (const r of Object.values(n.audioTracks().tracks_))
    r.language === t && (i = r);
  t && i && (i.enabled = !0);
}
function Np(n, t) {
  var e;
  const i = (e = Object.values(
    n.remoteTextTracks()
  )) == null ? void 0 : e.filter((a) => a.kind === "captions" || a.kind === "subtitles"), r = i.find((a) => {
    var s;
    return ((s = a.language) == null ? void 0 : s.substr(0, 3)) === t;
  });
  i.forEach(
    (a) => a.mode = r && r.id === a.id ? "showing" : "hidden"
  );
}
function c_(n, t) {
  const i = G(n, t.videojs);
  if (i.src(t.src), t.subtitles)
    for (var r = 0; r < t.subtitles.length; r++)
      i.addRemoteTextTrack(t.subtitles[r], !1);
  i.ready(function() {
    var s, o;
    i.controlBar.addChild(new mP(i), {}, 1), i.controlBar.addChild(new gP(i), {}, 0), d_() && i.controlBar.addChild(
      new _P(i),
      {},
      99
    ), i.hlsQualitySelector();
    var a = (o = (s = i.tech({ IWillNotUseThisInPlugins: !0 }).vhs) == null ? void 0 : s.masterPlaylistController_) == null ? void 0 : o.mainSegmentLoader_;
    a && a.on("error", function() {
      let u = a.error();
      !u || u.status !== 401 && u.status !== 403 || (i.pause(), i.error(
        "Session possibly expired. Try reloading the page to continue watching."
      ), i.errorDisplay.show(), i.reset());
    });
  }), i.one("loadedmetadata", () => {
    Rp(
      i,
      t.languagePreferenceDefaults.audio
    ), Np(
      i,
      t.languagePreferenceDefaults.subtitles
    );
  });
  const e = i;
  return e.setAudioTrackToLanguage = function(a) {
    Rp(this, a);
  }, e.setSubtitleTrackToLanguage = function(a) {
    Np(this, a);
  }, e.setVideoQuality = (a) => {
    G.log("BTV: Queued setting quality to " + a + "p"), e.ready(() => {
      if (typeof e.hlsQualitySelector != "object" || !e.qualityLevels() || !e.qualityLevels().levels_ || e.qualityLevels().levels_.length < 1) {
        G.log("BTV: Can't change quality yet.");
        return;
      }
      return G.log("BTV: Setting quality to " + a + "p"), e.hlsQualitySelector.setQuality(a);
    });
  }, i;
}
const Oo = class {
  constructor({ tokenFactory: t, endpoint: i }) {
    Sa(this, "endpoint");
    Sa(this, "_tokens");
    this._tokens = t, this.endpoint = i;
  }
  getToken() {
    var t, i;
    return (i = (t = this._tokens) == null ? void 0 : t.call(this)) != null ? i : null;
  }
  static get default() {
    if (!Oo._default)
      throw new Error("Default instance not found");
    return Oo._default;
  }
};
let Wa = Oo;
Sa(Wa, "_default", null);
var Xl = {}, Id = { exports: {} };
(function(n, t) {
  var i = typeof self < "u" ? self : st, r = function() {
    function a() {
      this.fetch = !1, this.DOMException = i.DOMException;
    }
    return a.prototype = i, new a();
  }();
  (function(a) {
    (function(s) {
      var o = {
        searchParams: "URLSearchParams" in a,
        iterable: "Symbol" in a && "iterator" in Symbol,
        blob: "FileReader" in a && "Blob" in a && function() {
          try {
            return new Blob(), !0;
          } catch {
            return !1;
          }
        }(),
        formData: "FormData" in a,
        arrayBuffer: "ArrayBuffer" in a
      };
      function u(M) {
        return M && DataView.prototype.isPrototypeOf(M);
      }
      if (o.arrayBuffer)
        var l = [
          "[object Int8Array]",
          "[object Uint8Array]",
          "[object Uint8ClampedArray]",
          "[object Int16Array]",
          "[object Uint16Array]",
          "[object Int32Array]",
          "[object Uint32Array]",
          "[object Float32Array]",
          "[object Float64Array]"
        ], d = ArrayBuffer.isView || function(M) {
          return M && l.indexOf(Object.prototype.toString.call(M)) > -1;
        };
      function h(M) {
        if (typeof M != "string" && (M = String(M)), /[^a-z0-9\-#$%&'*+.^_`|~]/i.test(M))
          throw new TypeError("Invalid character in header field name");
        return M.toLowerCase();
      }
      function f(M) {
        return typeof M != "string" && (M = String(M)), M;
      }
      function _(M) {
        var ne = {
          next: function() {
            var fe = M.shift();
            return { done: fe === void 0, value: fe };
          }
        };
        return o.iterable && (ne[Symbol.iterator] = function() {
          return ne;
        }), ne;
      }
      function v(M) {
        this.map = {}, M instanceof v ? M.forEach(function(ne, fe) {
          this.append(fe, ne);
        }, this) : Array.isArray(M) ? M.forEach(function(ne) {
          this.append(ne[0], ne[1]);
        }, this) : M && Object.getOwnPropertyNames(M).forEach(function(ne) {
          this.append(ne, M[ne]);
        }, this);
      }
      v.prototype.append = function(M, ne) {
        M = h(M), ne = f(ne);
        var fe = this.map[M];
        this.map[M] = fe ? fe + ", " + ne : ne;
      }, v.prototype.delete = function(M) {
        delete this.map[h(M)];
      }, v.prototype.get = function(M) {
        return M = h(M), this.has(M) ? this.map[M] : null;
      }, v.prototype.has = function(M) {
        return this.map.hasOwnProperty(h(M));
      }, v.prototype.set = function(M, ne) {
        this.map[h(M)] = f(ne);
      }, v.prototype.forEach = function(M, ne) {
        for (var fe in this.map)
          this.map.hasOwnProperty(fe) && M.call(ne, this.map[fe], fe, this);
      }, v.prototype.keys = function() {
        var M = [];
        return this.forEach(function(ne, fe) {
          M.push(fe);
        }), _(M);
      }, v.prototype.values = function() {
        var M = [];
        return this.forEach(function(ne) {
          M.push(ne);
        }), _(M);
      }, v.prototype.entries = function() {
        var M = [];
        return this.forEach(function(ne, fe) {
          M.push([fe, ne]);
        }), _(M);
      }, o.iterable && (v.prototype[Symbol.iterator] = v.prototype.entries);
      function y(M) {
        if (M.bodyUsed)
          return Promise.reject(new TypeError("Already read"));
        M.bodyUsed = !0;
      }
      function T(M) {
        return new Promise(function(ne, fe) {
          M.onload = function() {
            ne(M.result);
          }, M.onerror = function() {
            fe(M.error);
          };
        });
      }
      function I(M) {
        var ne = new FileReader(), fe = T(ne);
        return ne.readAsArrayBuffer(M), fe;
      }
      function V(M) {
        var ne = new FileReader(), fe = T(ne);
        return ne.readAsText(M), fe;
      }
      function $(M) {
        for (var ne = new Uint8Array(M), fe = new Array(ne.length), pe = 0; pe < ne.length; pe++)
          fe[pe] = String.fromCharCode(ne[pe]);
        return fe.join("");
      }
      function k(M) {
        if (M.slice)
          return M.slice(0);
        var ne = new Uint8Array(M.byteLength);
        return ne.set(new Uint8Array(M)), ne.buffer;
      }
      function P() {
        return this.bodyUsed = !1, this._initBody = function(M) {
          this._bodyInit = M, M ? typeof M == "string" ? this._bodyText = M : o.blob && Blob.prototype.isPrototypeOf(M) ? this._bodyBlob = M : o.formData && FormData.prototype.isPrototypeOf(M) ? this._bodyFormData = M : o.searchParams && URLSearchParams.prototype.isPrototypeOf(M) ? this._bodyText = M.toString() : o.arrayBuffer && o.blob && u(M) ? (this._bodyArrayBuffer = k(M.buffer), this._bodyInit = new Blob([this._bodyArrayBuffer])) : o.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(M) || d(M)) ? this._bodyArrayBuffer = k(M) : this._bodyText = M = Object.prototype.toString.call(M) : this._bodyText = "", this.headers.get("content-type") || (typeof M == "string" ? this.headers.set("content-type", "text/plain;charset=UTF-8") : this._bodyBlob && this._bodyBlob.type ? this.headers.set("content-type", this._bodyBlob.type) : o.searchParams && URLSearchParams.prototype.isPrototypeOf(M) && this.headers.set("content-type", "application/x-www-form-urlencoded;charset=UTF-8"));
        }, o.blob && (this.blob = function() {
          var M = y(this);
          if (M)
            return M;
          if (this._bodyBlob)
            return Promise.resolve(this._bodyBlob);
          if (this._bodyArrayBuffer)
            return Promise.resolve(new Blob([this._bodyArrayBuffer]));
          if (this._bodyFormData)
            throw new Error("could not read FormData body as blob");
          return Promise.resolve(new Blob([this._bodyText]));
        }, this.arrayBuffer = function() {
          return this._bodyArrayBuffer ? y(this) || Promise.resolve(this._bodyArrayBuffer) : this.blob().then(I);
        }), this.text = function() {
          var M = y(this);
          if (M)
            return M;
          if (this._bodyBlob)
            return V(this._bodyBlob);
          if (this._bodyArrayBuffer)
            return Promise.resolve($(this._bodyArrayBuffer));
          if (this._bodyFormData)
            throw new Error("could not read FormData body as text");
          return Promise.resolve(this._bodyText);
        }, o.formData && (this.formData = function() {
          return this.text().then(ie);
        }), this.json = function() {
          return this.text().then(JSON.parse);
        }, this;
      }
      var L = ["DELETE", "GET", "HEAD", "OPTIONS", "POST", "PUT"];
      function O(M) {
        var ne = M.toUpperCase();
        return L.indexOf(ne) > -1 ? ne : M;
      }
      function U(M, ne) {
        ne = ne || {};
        var fe = ne.body;
        if (M instanceof U) {
          if (M.bodyUsed)
            throw new TypeError("Already read");
          this.url = M.url, this.credentials = M.credentials, ne.headers || (this.headers = new v(M.headers)), this.method = M.method, this.mode = M.mode, this.signal = M.signal, !fe && M._bodyInit != null && (fe = M._bodyInit, M.bodyUsed = !0);
        } else
          this.url = String(M);
        if (this.credentials = ne.credentials || this.credentials || "same-origin", (ne.headers || !this.headers) && (this.headers = new v(ne.headers)), this.method = O(ne.method || this.method || "GET"), this.mode = ne.mode || this.mode || null, this.signal = ne.signal || this.signal, this.referrer = null, (this.method === "GET" || this.method === "HEAD") && fe)
          throw new TypeError("Body not allowed for GET or HEAD requests");
        this._initBody(fe);
      }
      U.prototype.clone = function() {
        return new U(this, { body: this._bodyInit });
      };
      function ie(M) {
        var ne = new FormData();
        return M.trim().split("&").forEach(function(fe) {
          if (fe) {
            var pe = fe.split("="), H = pe.shift().replace(/\+/g, " "), Q = pe.join("=").replace(/\+/g, " ");
            ne.append(decodeURIComponent(H), decodeURIComponent(Q));
          }
        }), ne;
      }
      function z(M) {
        var ne = new v(), fe = M.replace(/\r?\n[\t ]+/g, " ");
        return fe.split(/\r?\n/).forEach(function(pe) {
          var H = pe.split(":"), Q = H.shift().trim();
          if (Q) {
            var F = H.join(":").trim();
            ne.append(Q, F);
          }
        }), ne;
      }
      P.call(U.prototype);
      function le(M, ne) {
        ne || (ne = {}), this.type = "default", this.status = ne.status === void 0 ? 200 : ne.status, this.ok = this.status >= 200 && this.status < 300, this.statusText = "statusText" in ne ? ne.statusText : "OK", this.headers = new v(ne.headers), this.url = ne.url || "", this._initBody(M);
      }
      P.call(le.prototype), le.prototype.clone = function() {
        return new le(this._bodyInit, {
          status: this.status,
          statusText: this.statusText,
          headers: new v(this.headers),
          url: this.url
        });
      }, le.error = function() {
        var M = new le(null, { status: 0, statusText: "" });
        return M.type = "error", M;
      };
      var se = [301, 302, 303, 307, 308];
      le.redirect = function(M, ne) {
        if (se.indexOf(ne) === -1)
          throw new RangeError("Invalid status code");
        return new le(null, { status: ne, headers: { location: M } });
      }, s.DOMException = a.DOMException;
      try {
        new s.DOMException();
      } catch {
        s.DOMException = function(ne, fe) {
          this.message = ne, this.name = fe;
          var pe = Error(ne);
          this.stack = pe.stack;
        }, s.DOMException.prototype = Object.create(Error.prototype), s.DOMException.prototype.constructor = s.DOMException;
      }
      function me(M, ne) {
        return new Promise(function(fe, pe) {
          var H = new U(M, ne);
          if (H.signal && H.signal.aborted)
            return pe(new s.DOMException("Aborted", "AbortError"));
          var Q = new XMLHttpRequest();
          function F() {
            Q.abort();
          }
          Q.onload = function() {
            var W = {
              status: Q.status,
              statusText: Q.statusText,
              headers: z(Q.getAllResponseHeaders() || "")
            };
            W.url = "responseURL" in Q ? Q.responseURL : W.headers.get("X-Request-URL");
            var X = "response" in Q ? Q.response : Q.responseText;
            fe(new le(X, W));
          }, Q.onerror = function() {
            pe(new TypeError("Network request failed"));
          }, Q.ontimeout = function() {
            pe(new TypeError("Network request failed"));
          }, Q.onabort = function() {
            pe(new s.DOMException("Aborted", "AbortError"));
          }, Q.open(H.method, H.url, !0), H.credentials === "include" ? Q.withCredentials = !0 : H.credentials === "omit" && (Q.withCredentials = !1), "responseType" in Q && o.blob && (Q.responseType = "blob"), H.headers.forEach(function(W, X) {
            Q.setRequestHeader(X, W);
          }), H.signal && (H.signal.addEventListener("abort", F), Q.onreadystatechange = function() {
            Q.readyState === 4 && H.signal.removeEventListener("abort", F);
          }), Q.send(typeof H._bodyInit > "u" ? null : H._bodyInit);
        });
      }
      return me.polyfill = !0, a.fetch || (a.fetch = me, a.Headers = v, a.Request = U, a.Response = le), s.Headers = v, s.Request = U, s.Response = le, s.fetch = me, Object.defineProperty(s, "__esModule", { value: !0 }), s;
    })({});
  })(r), r.fetch.ponyfill = !0, delete r.fetch.polyfill;
  var e = r;
  t = e.fetch, t.default = e.fetch, t.fetch = e.fetch, t.Headers = e.Headers, t.Request = e.Request, t.Response = e.Response, n.exports = t;
})(Id, Id.exports);
function EP(n) {
  return typeof n == "object" && n !== null;
}
function xP(n, t) {
  if (!Boolean(n))
    throw new Error(
      t != null ? t : "Unexpected invariant triggered."
    );
}
const wP = /\r\n|[\n\r]/g;
function Dd(n, t) {
  let i = 0, r = 1;
  for (const e of n.body.matchAll(wP)) {
    if (typeof e.index == "number" || xP(!1), e.index >= t)
      break;
    i = e.index + e[0].length, r += 1;
  }
  return {
    line: r,
    column: t + 1 - i
  };
}
function AP(n) {
  return f_(
    n.source,
    Dd(n.source, n.start)
  );
}
function f_(n, t) {
  const i = n.locationOffset.column - 1, r = "".padStart(i) + n.body, e = t.line - 1, a = n.locationOffset.line - 1, s = t.line + a, o = t.line === 1 ? i : 0, u = t.column + o, l = `${n.name}:${s}:${u}
`, d = r.split(/\r\n|[\n\r]/g), h = d[e];
  if (h.length > 120) {
    const f = Math.floor(u / 80), _ = u % 80, v = [];
    for (let y = 0; y < h.length; y += 80)
      v.push(h.slice(y, y + 80));
    return l + Mp([
      [`${s} |`, v[0]],
      ...v.slice(1, f + 1).map((y) => ["|", y]),
      ["|", "^".padStart(_)],
      ["|", v[f + 1]]
    ]);
  }
  return l + Mp([
    [`${s - 1} |`, d[e - 1]],
    [`${s} |`, h],
    ["|", "^".padStart(u)],
    [`${s + 1} |`, d[e + 1]]
  ]);
}
function Mp(n) {
  const t = n.filter(([r, e]) => e !== void 0), i = Math.max(...t.map(([r]) => r.length));
  return t.map(([r, e]) => r.padStart(i) + (e ? " " + e : "")).join(`
`);
}
function CP(n) {
  const t = n[0];
  return t == null || "kind" in t || "length" in t ? {
    nodes: t,
    source: n[1],
    positions: n[2],
    path: n[3],
    originalError: n[4],
    extensions: n[5]
  } : t;
}
class Yc extends Error {
  constructor(t, ...i) {
    var r, e, a;
    const { nodes: s, source: o, positions: u, path: l, originalError: d, extensions: h } = CP(i);
    super(t), this.name = "GraphQLError", this.path = l != null ? l : void 0, this.originalError = d != null ? d : void 0, this.nodes = Fp(
      Array.isArray(s) ? s : s ? [s] : void 0
    );
    const f = Fp(
      (r = this.nodes) === null || r === void 0 ? void 0 : r.map((v) => v.loc).filter((v) => v != null)
    );
    this.source = o != null ? o : f == null || (e = f[0]) === null || e === void 0 ? void 0 : e.source, this.positions = u != null ? u : f == null ? void 0 : f.map((v) => v.start), this.locations = u && o ? u.map((v) => Dd(o, v)) : f == null ? void 0 : f.map((v) => Dd(v.source, v.start));
    const _ = EP(
      d == null ? void 0 : d.extensions
    ) ? d == null ? void 0 : d.extensions : void 0;
    this.extensions = (a = h != null ? h : _) !== null && a !== void 0 ? a : /* @__PURE__ */ Object.create(null), Object.defineProperties(this, {
      message: {
        writable: !0,
        enumerable: !0
      },
      name: {
        enumerable: !1
      },
      nodes: {
        enumerable: !1
      },
      source: {
        enumerable: !1
      },
      positions: {
        enumerable: !1
      },
      originalError: {
        enumerable: !1
      }
    }), d != null && d.stack ? Object.defineProperty(this, "stack", {
      value: d.stack,
      writable: !0,
      configurable: !0
    }) : Error.captureStackTrace ? Error.captureStackTrace(this, Yc) : Object.defineProperty(this, "stack", {
      value: Error().stack,
      writable: !0,
      configurable: !0
    });
  }
  get [Symbol.toStringTag]() {
    return "GraphQLError";
  }
  toString() {
    let t = this.message;
    if (this.nodes)
      for (const i of this.nodes)
        i.loc && (t += `

` + AP(i.loc));
    else if (this.source && this.locations)
      for (const i of this.locations)
        t += `

` + f_(this.source, i);
    return t;
  }
  toJSON() {
    const t = {
      message: this.message
    };
    return this.locations != null && (t.locations = this.locations), this.path != null && (t.path = this.path), this.extensions != null && Object.keys(this.extensions).length > 0 && (t.extensions = this.extensions), t;
  }
}
function Fp(n) {
  return n === void 0 || n.length === 0 ? void 0 : n;
}
function $t(n, t, i) {
  return new Yc(`Syntax Error: ${i}`, {
    source: n,
    positions: [t]
  });
}
class kP {
  constructor(t, i, r) {
    this.start = t.start, this.end = i.end, this.startToken = t, this.endToken = i, this.source = r;
  }
  get [Symbol.toStringTag]() {
    return "Location";
  }
  toJSON() {
    return {
      start: this.start,
      end: this.end
    };
  }
}
class h_ {
  constructor(t, i, r, e, a, s) {
    this.kind = t, this.start = i, this.end = r, this.line = e, this.column = a, this.value = s, this.prev = null, this.next = null;
  }
  get [Symbol.toStringTag]() {
    return "Token";
  }
  toJSON() {
    return {
      kind: this.kind,
      value: this.value,
      line: this.line,
      column: this.column
    };
  }
}
const p_ = {
  Name: [],
  Document: ["definitions"],
  OperationDefinition: [
    "name",
    "variableDefinitions",
    "directives",
    "selectionSet"
  ],
  VariableDefinition: ["variable", "type", "defaultValue", "directives"],
  Variable: ["name"],
  SelectionSet: ["selections"],
  Field: ["alias", "name", "arguments", "directives", "selectionSet"],
  Argument: ["name", "value"],
  FragmentSpread: ["name", "directives"],
  InlineFragment: ["typeCondition", "directives", "selectionSet"],
  FragmentDefinition: [
    "name",
    "variableDefinitions",
    "typeCondition",
    "directives",
    "selectionSet"
  ],
  IntValue: [],
  FloatValue: [],
  StringValue: [],
  BooleanValue: [],
  NullValue: [],
  EnumValue: [],
  ListValue: ["values"],
  ObjectValue: ["fields"],
  ObjectField: ["name", "value"],
  Directive: ["name", "arguments"],
  NamedType: ["name"],
  ListType: ["type"],
  NonNullType: ["type"],
  SchemaDefinition: ["description", "directives", "operationTypes"],
  OperationTypeDefinition: ["type"],
  ScalarTypeDefinition: ["description", "name", "directives"],
  ObjectTypeDefinition: [
    "description",
    "name",
    "interfaces",
    "directives",
    "fields"
  ],
  FieldDefinition: ["description", "name", "arguments", "type", "directives"],
  InputValueDefinition: [
    "description",
    "name",
    "type",
    "defaultValue",
    "directives"
  ],
  InterfaceTypeDefinition: [
    "description",
    "name",
    "interfaces",
    "directives",
    "fields"
  ],
  UnionTypeDefinition: ["description", "name", "directives", "types"],
  EnumTypeDefinition: ["description", "name", "directives", "values"],
  EnumValueDefinition: ["description", "name", "directives"],
  InputObjectTypeDefinition: ["description", "name", "directives", "fields"],
  DirectiveDefinition: ["description", "name", "arguments", "locations"],
  SchemaExtension: ["directives", "operationTypes"],
  ScalarTypeExtension: ["name", "directives"],
  ObjectTypeExtension: ["name", "interfaces", "directives", "fields"],
  InterfaceTypeExtension: ["name", "interfaces", "directives", "fields"],
  UnionTypeExtension: ["name", "directives", "types"],
  EnumTypeExtension: ["name", "directives", "values"],
  InputObjectTypeExtension: ["name", "directives", "fields"]
}, PP = new Set(Object.keys(p_));
function Bp(n) {
  const t = n == null ? void 0 : n.kind;
  return typeof t == "string" && PP.has(t);
}
var Vn;
(function(n) {
  n.QUERY = "query", n.MUTATION = "mutation", n.SUBSCRIPTION = "subscription";
})(Vn || (Vn = {}));
var Ld;
(function(n) {
  n.QUERY = "QUERY", n.MUTATION = "MUTATION", n.SUBSCRIPTION = "SUBSCRIPTION", n.FIELD = "FIELD", n.FRAGMENT_DEFINITION = "FRAGMENT_DEFINITION", n.FRAGMENT_SPREAD = "FRAGMENT_SPREAD", n.INLINE_FRAGMENT = "INLINE_FRAGMENT", n.VARIABLE_DEFINITION = "VARIABLE_DEFINITION", n.SCHEMA = "SCHEMA", n.SCALAR = "SCALAR", n.OBJECT = "OBJECT", n.FIELD_DEFINITION = "FIELD_DEFINITION", n.ARGUMENT_DEFINITION = "ARGUMENT_DEFINITION", n.INTERFACE = "INTERFACE", n.UNION = "UNION", n.ENUM = "ENUM", n.ENUM_VALUE = "ENUM_VALUE", n.INPUT_OBJECT = "INPUT_OBJECT", n.INPUT_FIELD_DEFINITION = "INPUT_FIELD_DEFINITION";
})(Ld || (Ld = {}));
var Ve;
(function(n) {
  n.NAME = "Name", n.DOCUMENT = "Document", n.OPERATION_DEFINITION = "OperationDefinition", n.VARIABLE_DEFINITION = "VariableDefinition", n.SELECTION_SET = "SelectionSet", n.FIELD = "Field", n.ARGUMENT = "Argument", n.FRAGMENT_SPREAD = "FragmentSpread", n.INLINE_FRAGMENT = "InlineFragment", n.FRAGMENT_DEFINITION = "FragmentDefinition", n.VARIABLE = "Variable", n.INT = "IntValue", n.FLOAT = "FloatValue", n.STRING = "StringValue", n.BOOLEAN = "BooleanValue", n.NULL = "NullValue", n.ENUM = "EnumValue", n.LIST = "ListValue", n.OBJECT = "ObjectValue", n.OBJECT_FIELD = "ObjectField", n.DIRECTIVE = "Directive", n.NAMED_TYPE = "NamedType", n.LIST_TYPE = "ListType", n.NON_NULL_TYPE = "NonNullType", n.SCHEMA_DEFINITION = "SchemaDefinition", n.OPERATION_TYPE_DEFINITION = "OperationTypeDefinition", n.SCALAR_TYPE_DEFINITION = "ScalarTypeDefinition", n.OBJECT_TYPE_DEFINITION = "ObjectTypeDefinition", n.FIELD_DEFINITION = "FieldDefinition", n.INPUT_VALUE_DEFINITION = "InputValueDefinition", n.INTERFACE_TYPE_DEFINITION = "InterfaceTypeDefinition", n.UNION_TYPE_DEFINITION = "UnionTypeDefinition", n.ENUM_TYPE_DEFINITION = "EnumTypeDefinition", n.ENUM_VALUE_DEFINITION = "EnumValueDefinition", n.INPUT_OBJECT_TYPE_DEFINITION = "InputObjectTypeDefinition", n.DIRECTIVE_DEFINITION = "DirectiveDefinition", n.SCHEMA_EXTENSION = "SchemaExtension", n.SCALAR_TYPE_EXTENSION = "ScalarTypeExtension", n.OBJECT_TYPE_EXTENSION = "ObjectTypeExtension", n.INTERFACE_TYPE_EXTENSION = "InterfaceTypeExtension", n.UNION_TYPE_EXTENSION = "UnionTypeExtension", n.ENUM_TYPE_EXTENSION = "EnumTypeExtension", n.INPUT_OBJECT_TYPE_EXTENSION = "InputObjectTypeExtension";
})(Ve || (Ve = {}));
function Od(n) {
  return n === 9 || n === 32;
}
function ts(n) {
  return n >= 48 && n <= 57;
}
function m_(n) {
  return n >= 97 && n <= 122 || n >= 65 && n <= 90;
}
function g_(n) {
  return m_(n) || n === 95;
}
function IP(n) {
  return m_(n) || ts(n) || n === 95;
}
function DP(n) {
  var t;
  let i = Number.MAX_SAFE_INTEGER, r = null, e = -1;
  for (let s = 0; s < n.length; ++s) {
    var a;
    const o = n[s], u = LP(o);
    u !== o.length && (r = (a = r) !== null && a !== void 0 ? a : s, e = s, s !== 0 && u < i && (i = u));
  }
  return n.map((s, o) => o === 0 ? s : s.slice(i)).slice(
    (t = r) !== null && t !== void 0 ? t : 0,
    e + 1
  );
}
function LP(n) {
  let t = 0;
  for (; t < n.length && Od(n.charCodeAt(t)); )
    ++t;
  return t;
}
function OP(n, t) {
  const i = n.replace(/"""/g, '\\"""'), r = i.split(/\r\n|[\n\r]/g), e = r.length === 1, a = r.length > 1 && r.slice(1).every((_) => _.length === 0 || Od(_.charCodeAt(0))), s = i.endsWith('\\"""'), o = n.endsWith('"') && !s, u = n.endsWith("\\"), l = o || u, d = !(t != null && t.minimize) && (!e || n.length > 70 || l || a || s);
  let h = "";
  const f = e && Od(n.charCodeAt(0));
  return (d && !f || a) && (h += `
`), h += i, (d || l) && (h += `
`), '"""' + h + '"""';
}
var he;
(function(n) {
  n.SOF = "<SOF>", n.EOF = "<EOF>", n.BANG = "!", n.DOLLAR = "$", n.AMP = "&", n.PAREN_L = "(", n.PAREN_R = ")", n.SPREAD = "...", n.COLON = ":", n.EQUALS = "=", n.AT = "@", n.BRACKET_L = "[", n.BRACKET_R = "]", n.BRACE_L = "{", n.PIPE = "|", n.BRACE_R = "}", n.NAME = "Name", n.INT = "Int", n.FLOAT = "Float", n.STRING = "String", n.BLOCK_STRING = "BlockString", n.COMMENT = "Comment";
})(he || (he = {}));
class RP {
  constructor(t) {
    const i = new h_(he.SOF, 0, 0, 0, 0);
    this.source = t, this.lastToken = i, this.token = i, this.line = 1, this.lineStart = 0;
  }
  get [Symbol.toStringTag]() {
    return "Lexer";
  }
  advance() {
    return this.lastToken = this.token, this.token = this.lookahead();
  }
  lookahead() {
    let t = this.token;
    if (t.kind !== he.EOF)
      do
        if (t.next)
          t = t.next;
        else {
          const i = MP(this, t.end);
          t.next = i, i.prev = t, t = i;
        }
      while (t.kind === he.COMMENT);
    return t;
  }
}
function NP(n) {
  return n === he.BANG || n === he.DOLLAR || n === he.AMP || n === he.PAREN_L || n === he.PAREN_R || n === he.SPREAD || n === he.COLON || n === he.EQUALS || n === he.AT || n === he.BRACKET_L || n === he.BRACKET_R || n === he.BRACE_L || n === he.PIPE || n === he.BRACE_R;
}
function ca(n) {
  return n >= 0 && n <= 55295 || n >= 57344 && n <= 1114111;
}
function ou(n, t) {
  return v_(n.charCodeAt(t)) && __(n.charCodeAt(t + 1));
}
function v_(n) {
  return n >= 55296 && n <= 56319;
}
function __(n) {
  return n >= 56320 && n <= 57343;
}
function on(n, t) {
  const i = n.source.body.codePointAt(t);
  if (i === void 0)
    return he.EOF;
  if (i >= 32 && i <= 126) {
    const r = String.fromCodePoint(i);
    return r === '"' ? `'"'` : `"${r}"`;
  }
  return "U+" + i.toString(16).toUpperCase().padStart(4, "0");
}
function Vt(n, t, i, r, e) {
  const a = n.line, s = 1 + i - n.lineStart;
  return new h_(t, i, r, a, s, e);
}
function MP(n, t) {
  const i = n.source.body, r = i.length;
  let e = t;
  for (; e < r; ) {
    const a = i.charCodeAt(e);
    switch (a) {
      case 65279:
      case 9:
      case 32:
      case 44:
        ++e;
        continue;
      case 10:
        ++e, ++n.line, n.lineStart = e;
        continue;
      case 13:
        i.charCodeAt(e + 1) === 10 ? e += 2 : ++e, ++n.line, n.lineStart = e;
        continue;
      case 35:
        return FP(n, e);
      case 33:
        return Vt(n, he.BANG, e, e + 1);
      case 36:
        return Vt(n, he.DOLLAR, e, e + 1);
      case 38:
        return Vt(n, he.AMP, e, e + 1);
      case 40:
        return Vt(n, he.PAREN_L, e, e + 1);
      case 41:
        return Vt(n, he.PAREN_R, e, e + 1);
      case 46:
        if (i.charCodeAt(e + 1) === 46 && i.charCodeAt(e + 2) === 46)
          return Vt(n, he.SPREAD, e, e + 3);
        break;
      case 58:
        return Vt(n, he.COLON, e, e + 1);
      case 61:
        return Vt(n, he.EQUALS, e, e + 1);
      case 64:
        return Vt(n, he.AT, e, e + 1);
      case 91:
        return Vt(n, he.BRACKET_L, e, e + 1);
      case 93:
        return Vt(n, he.BRACKET_R, e, e + 1);
      case 123:
        return Vt(n, he.BRACE_L, e, e + 1);
      case 124:
        return Vt(n, he.PIPE, e, e + 1);
      case 125:
        return Vt(n, he.BRACE_R, e, e + 1);
      case 34:
        return i.charCodeAt(e + 1) === 34 && i.charCodeAt(e + 2) === 34 ? HP(n, e) : UP(n, e);
    }
    if (ts(a) || a === 45)
      return BP(n, e, a);
    if (g_(a))
      return WP(n, e);
    throw $t(
      n.source,
      e,
      a === 39 ? `Unexpected single quote character ('), did you mean to use a double quote (")?` : ca(a) || ou(i, e) ? `Unexpected character: ${on(n, e)}.` : `Invalid character: ${on(n, e)}.`
    );
  }
  return Vt(n, he.EOF, r, r);
}
function FP(n, t) {
  const i = n.source.body, r = i.length;
  let e = t + 1;
  for (; e < r; ) {
    const a = i.charCodeAt(e);
    if (a === 10 || a === 13)
      break;
    if (ca(a))
      ++e;
    else if (ou(i, e))
      e += 2;
    else
      break;
  }
  return Vt(
    n,
    he.COMMENT,
    t,
    e,
    i.slice(t + 1, e)
  );
}
function BP(n, t, i) {
  const r = n.source.body;
  let e = t, a = i, s = !1;
  if (a === 45 && (a = r.charCodeAt(++e)), a === 48) {
    if (a = r.charCodeAt(++e), ts(a))
      throw $t(
        n.source,
        e,
        `Invalid number, unexpected digit after 0: ${on(
          n,
          e
        )}.`
      );
  } else
    e = Ql(n, e, a), a = r.charCodeAt(e);
  if (a === 46 && (s = !0, a = r.charCodeAt(++e), e = Ql(n, e, a), a = r.charCodeAt(e)), (a === 69 || a === 101) && (s = !0, a = r.charCodeAt(++e), (a === 43 || a === 45) && (a = r.charCodeAt(++e)), e = Ql(n, e, a), a = r.charCodeAt(e)), a === 46 || g_(a))
    throw $t(
      n.source,
      e,
      `Invalid number, expected digit but got: ${on(
        n,
        e
      )}.`
    );
  return Vt(
    n,
    s ? he.FLOAT : he.INT,
    t,
    e,
    r.slice(t, e)
  );
}
function Ql(n, t, i) {
  if (!ts(i))
    throw $t(
      n.source,
      t,
      `Invalid number, expected digit but got: ${on(
        n,
        t
      )}.`
    );
  const r = n.source.body;
  let e = t + 1;
  for (; ts(r.charCodeAt(e)); )
    ++e;
  return e;
}
function UP(n, t) {
  const i = n.source.body, r = i.length;
  let e = t + 1, a = e, s = "";
  for (; e < r; ) {
    const o = i.charCodeAt(e);
    if (o === 34)
      return s += i.slice(a, e), Vt(n, he.STRING, t, e + 1, s);
    if (o === 92) {
      s += i.slice(a, e);
      const u = i.charCodeAt(e + 1) === 117 ? i.charCodeAt(e + 2) === 123 ? qP(n, e) : VP(n, e) : jP(n, e);
      s += u.value, e += u.size, a = e;
      continue;
    }
    if (o === 10 || o === 13)
      break;
    if (ca(o))
      ++e;
    else if (ou(i, e))
      e += 2;
    else
      throw $t(
        n.source,
        e,
        `Invalid character within String: ${on(
          n,
          e
        )}.`
      );
  }
  throw $t(n.source, e, "Unterminated string.");
}
function qP(n, t) {
  const i = n.source.body;
  let r = 0, e = 3;
  for (; e < 12; ) {
    const a = i.charCodeAt(t + e++);
    if (a === 125) {
      if (e < 5 || !ca(r))
        break;
      return {
        value: String.fromCodePoint(r),
        size: e
      };
    }
    if (r = r << 4 | Ua(a), r < 0)
      break;
  }
  throw $t(
    n.source,
    t,
    `Invalid Unicode escape sequence: "${i.slice(
      t,
      t + e
    )}".`
  );
}
function VP(n, t) {
  const i = n.source.body, r = Up(i, t + 2);
  if (ca(r))
    return {
      value: String.fromCodePoint(r),
      size: 6
    };
  if (v_(r) && i.charCodeAt(t + 6) === 92 && i.charCodeAt(t + 7) === 117) {
    const e = Up(i, t + 8);
    if (__(e))
      return {
        value: String.fromCodePoint(r, e),
        size: 12
      };
  }
  throw $t(
    n.source,
    t,
    `Invalid Unicode escape sequence: "${i.slice(t, t + 6)}".`
  );
}
function Up(n, t) {
  return Ua(n.charCodeAt(t)) << 12 | Ua(n.charCodeAt(t + 1)) << 8 | Ua(n.charCodeAt(t + 2)) << 4 | Ua(n.charCodeAt(t + 3));
}
function Ua(n) {
  return n >= 48 && n <= 57 ? n - 48 : n >= 65 && n <= 70 ? n - 55 : n >= 97 && n <= 102 ? n - 87 : -1;
}
function jP(n, t) {
  const i = n.source.body;
  switch (i.charCodeAt(t + 1)) {
    case 34:
      return {
        value: '"',
        size: 2
      };
    case 92:
      return {
        value: "\\",
        size: 2
      };
    case 47:
      return {
        value: "/",
        size: 2
      };
    case 98:
      return {
        value: "\b",
        size: 2
      };
    case 102:
      return {
        value: "\f",
        size: 2
      };
    case 110:
      return {
        value: `
`,
        size: 2
      };
    case 114:
      return {
        value: "\r",
        size: 2
      };
    case 116:
      return {
        value: "	",
        size: 2
      };
  }
  throw $t(
    n.source,
    t,
    `Invalid character escape sequence: "${i.slice(
      t,
      t + 2
    )}".`
  );
}
function HP(n, t) {
  const i = n.source.body, r = i.length;
  let e = n.lineStart, a = t + 3, s = a, o = "";
  const u = [];
  for (; a < r; ) {
    const l = i.charCodeAt(a);
    if (l === 34 && i.charCodeAt(a + 1) === 34 && i.charCodeAt(a + 2) === 34) {
      o += i.slice(s, a), u.push(o);
      const d = Vt(
        n,
        he.BLOCK_STRING,
        t,
        a + 3,
        DP(u).join(`
`)
      );
      return n.line += u.length - 1, n.lineStart = e, d;
    }
    if (l === 92 && i.charCodeAt(a + 1) === 34 && i.charCodeAt(a + 2) === 34 && i.charCodeAt(a + 3) === 34) {
      o += i.slice(s, a), s = a + 1, a += 4;
      continue;
    }
    if (l === 10 || l === 13) {
      o += i.slice(s, a), u.push(o), l === 13 && i.charCodeAt(a + 1) === 10 ? a += 2 : ++a, o = "", s = a, e = a;
      continue;
    }
    if (ca(l))
      ++a;
    else if (ou(i, a))
      a += 2;
    else
      throw $t(
        n.source,
        a,
        `Invalid character within String: ${on(
          n,
          a
        )}.`
      );
  }
  throw $t(n.source, a, "Unterminated string.");
}
function WP(n, t) {
  const i = n.source.body, r = i.length;
  let e = t + 1;
  for (; e < r; ) {
    const a = i.charCodeAt(e);
    if (IP(a))
      ++e;
    else
      break;
  }
  return Vt(
    n,
    he.NAME,
    t,
    e,
    i.slice(t, e)
  );
}
function no(n, t) {
  if (!Boolean(n))
    throw new Error(t);
}
const GP = 10, y_ = 2;
function Jc(n) {
  return uu(n, []);
}
function uu(n, t) {
  switch (typeof n) {
    case "string":
      return JSON.stringify(n);
    case "function":
      return n.name ? `[function ${n.name}]` : "[function]";
    case "object":
      return $P(n, t);
    default:
      return String(n);
  }
}
function $P(n, t) {
  if (n === null)
    return "null";
  if (t.includes(n))
    return "[Circular]";
  const i = [...t, n];
  if (zP(n)) {
    const r = n.toJSON();
    if (r !== n)
      return typeof r == "string" ? r : uu(r, i);
  } else if (Array.isArray(n))
    return XP(n, i);
  return KP(n, i);
}
function zP(n) {
  return typeof n.toJSON == "function";
}
function KP(n, t) {
  const i = Object.entries(n);
  if (i.length === 0)
    return "{}";
  if (t.length > y_)
    return "[" + QP(n) + "]";
  const r = i.map(
    ([e, a]) => e + ": " + uu(a, t)
  );
  return "{ " + r.join(", ") + " }";
}
function XP(n, t) {
  if (n.length === 0)
    return "[]";
  if (t.length > y_)
    return "[Array]";
  const i = Math.min(GP, n.length), r = n.length - i, e = [];
  for (let a = 0; a < i; ++a)
    e.push(uu(n[a], t));
  return r === 1 ? e.push("... 1 more item") : r > 1 && e.push(`... ${r} more items`), "[" + e.join(", ") + "]";
}
function QP(n) {
  const t = Object.prototype.toString.call(n).replace(/^\[object /, "").replace(/]$/, "");
  if (t === "Object" && typeof n.constructor == "function") {
    const i = n.constructor.name;
    if (typeof i == "string" && i !== "")
      return i;
  }
  return t;
}
const YP = process.env.NODE_ENV === "production" ? function(t, i) {
  return t instanceof i;
} : function(t, i) {
  if (t instanceof i)
    return !0;
  if (typeof t == "object" && t !== null) {
    var r;
    const e = i.prototype[Symbol.toStringTag], a = Symbol.toStringTag in t ? t[Symbol.toStringTag] : (r = t.constructor) === null || r === void 0 ? void 0 : r.name;
    if (e === a) {
      const s = Jc(t);
      throw new Error(`Cannot use ${e} "${s}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`);
    }
  }
  return !1;
};
class T_ {
  constructor(t, i = "GraphQL request", r = {
    line: 1,
    column: 1
  }) {
    typeof t == "string" || no(!1, `Body must be a string. Received: ${Jc(t)}.`), this.body = t, this.name = i, this.locationOffset = r, this.locationOffset.line > 0 || no(
      !1,
      "line in locationOffset is 1-indexed and must be positive."
    ), this.locationOffset.column > 0 || no(
      !1,
      "column in locationOffset is 1-indexed and must be positive."
    );
  }
  get [Symbol.toStringTag]() {
    return "Source";
  }
}
function JP(n) {
  return YP(n, T_);
}
function ZP(n, t) {
  return new gs(n, t).parseDocument();
}
function eI(n, t) {
  const i = new gs(n, t);
  i.expectToken(he.SOF);
  const r = i.parseValueLiteral(!1);
  return i.expectToken(he.EOF), r;
}
function tI(n, t) {
  const i = new gs(n, t);
  i.expectToken(he.SOF);
  const r = i.parseConstValueLiteral();
  return i.expectToken(he.EOF), r;
}
function iI(n, t) {
  const i = new gs(n, t);
  i.expectToken(he.SOF);
  const r = i.parseTypeReference();
  return i.expectToken(he.EOF), r;
}
class gs {
  constructor(t, i = {}) {
    const r = JP(t) ? t : new T_(t);
    this._lexer = new RP(r), this._options = i, this._tokenCounter = 0;
  }
  parseName() {
    const t = this.expectToken(he.NAME);
    return this.node(t, {
      kind: Ve.NAME,
      value: t.value
    });
  }
  parseDocument() {
    return this.node(this._lexer.token, {
      kind: Ve.DOCUMENT,
      definitions: this.many(
        he.SOF,
        this.parseDefinition,
        he.EOF
      )
    });
  }
  parseDefinition() {
    if (this.peek(he.BRACE_L))
      return this.parseOperationDefinition();
    const t = this.peekDescription(), i = t ? this._lexer.lookahead() : this._lexer.token;
    if (i.kind === he.NAME) {
      switch (i.value) {
        case "schema":
          return this.parseSchemaDefinition();
        case "scalar":
          return this.parseScalarTypeDefinition();
        case "type":
          return this.parseObjectTypeDefinition();
        case "interface":
          return this.parseInterfaceTypeDefinition();
        case "union":
          return this.parseUnionTypeDefinition();
        case "enum":
          return this.parseEnumTypeDefinition();
        case "input":
          return this.parseInputObjectTypeDefinition();
        case "directive":
          return this.parseDirectiveDefinition();
      }
      if (t)
        throw $t(
          this._lexer.source,
          this._lexer.token.start,
          "Unexpected description, descriptions are supported only on type definitions."
        );
      switch (i.value) {
        case "query":
        case "mutation":
        case "subscription":
          return this.parseOperationDefinition();
        case "fragment":
          return this.parseFragmentDefinition();
        case "extend":
          return this.parseTypeSystemExtension();
      }
    }
    throw this.unexpected(i);
  }
  parseOperationDefinition() {
    const t = this._lexer.token;
    if (this.peek(he.BRACE_L))
      return this.node(t, {
        kind: Ve.OPERATION_DEFINITION,
        operation: Vn.QUERY,
        name: void 0,
        variableDefinitions: [],
        directives: [],
        selectionSet: this.parseSelectionSet()
      });
    const i = this.parseOperationType();
    let r;
    return this.peek(he.NAME) && (r = this.parseName()), this.node(t, {
      kind: Ve.OPERATION_DEFINITION,
      operation: i,
      name: r,
      variableDefinitions: this.parseVariableDefinitions(),
      directives: this.parseDirectives(!1),
      selectionSet: this.parseSelectionSet()
    });
  }
  parseOperationType() {
    const t = this.expectToken(he.NAME);
    switch (t.value) {
      case "query":
        return Vn.QUERY;
      case "mutation":
        return Vn.MUTATION;
      case "subscription":
        return Vn.SUBSCRIPTION;
    }
    throw this.unexpected(t);
  }
  parseVariableDefinitions() {
    return this.optionalMany(
      he.PAREN_L,
      this.parseVariableDefinition,
      he.PAREN_R
    );
  }
  parseVariableDefinition() {
    return this.node(this._lexer.token, {
      kind: Ve.VARIABLE_DEFINITION,
      variable: this.parseVariable(),
      type: (this.expectToken(he.COLON), this.parseTypeReference()),
      defaultValue: this.expectOptionalToken(he.EQUALS) ? this.parseConstValueLiteral() : void 0,
      directives: this.parseConstDirectives()
    });
  }
  parseVariable() {
    const t = this._lexer.token;
    return this.expectToken(he.DOLLAR), this.node(t, {
      kind: Ve.VARIABLE,
      name: this.parseName()
    });
  }
  parseSelectionSet() {
    return this.node(this._lexer.token, {
      kind: Ve.SELECTION_SET,
      selections: this.many(
        he.BRACE_L,
        this.parseSelection,
        he.BRACE_R
      )
    });
  }
  parseSelection() {
    return this.peek(he.SPREAD) ? this.parseFragment() : this.parseField();
  }
  parseField() {
    const t = this._lexer.token, i = this.parseName();
    let r, e;
    return this.expectOptionalToken(he.COLON) ? (r = i, e = this.parseName()) : e = i, this.node(t, {
      kind: Ve.FIELD,
      alias: r,
      name: e,
      arguments: this.parseArguments(!1),
      directives: this.parseDirectives(!1),
      selectionSet: this.peek(he.BRACE_L) ? this.parseSelectionSet() : void 0
    });
  }
  parseArguments(t) {
    const i = t ? this.parseConstArgument : this.parseArgument;
    return this.optionalMany(he.PAREN_L, i, he.PAREN_R);
  }
  parseArgument(t = !1) {
    const i = this._lexer.token, r = this.parseName();
    return this.expectToken(he.COLON), this.node(i, {
      kind: Ve.ARGUMENT,
      name: r,
      value: this.parseValueLiteral(t)
    });
  }
  parseConstArgument() {
    return this.parseArgument(!0);
  }
  parseFragment() {
    const t = this._lexer.token;
    this.expectToken(he.SPREAD);
    const i = this.expectOptionalKeyword("on");
    return !i && this.peek(he.NAME) ? this.node(t, {
      kind: Ve.FRAGMENT_SPREAD,
      name: this.parseFragmentName(),
      directives: this.parseDirectives(!1)
    }) : this.node(t, {
      kind: Ve.INLINE_FRAGMENT,
      typeCondition: i ? this.parseNamedType() : void 0,
      directives: this.parseDirectives(!1),
      selectionSet: this.parseSelectionSet()
    });
  }
  parseFragmentDefinition() {
    const t = this._lexer.token;
    return this.expectKeyword("fragment"), this._options.allowLegacyFragmentVariables === !0 ? this.node(t, {
      kind: Ve.FRAGMENT_DEFINITION,
      name: this.parseFragmentName(),
      variableDefinitions: this.parseVariableDefinitions(),
      typeCondition: (this.expectKeyword("on"), this.parseNamedType()),
      directives: this.parseDirectives(!1),
      selectionSet: this.parseSelectionSet()
    }) : this.node(t, {
      kind: Ve.FRAGMENT_DEFINITION,
      name: this.parseFragmentName(),
      typeCondition: (this.expectKeyword("on"), this.parseNamedType()),
      directives: this.parseDirectives(!1),
      selectionSet: this.parseSelectionSet()
    });
  }
  parseFragmentName() {
    if (this._lexer.token.value === "on")
      throw this.unexpected();
    return this.parseName();
  }
  parseValueLiteral(t) {
    const i = this._lexer.token;
    switch (i.kind) {
      case he.BRACKET_L:
        return this.parseList(t);
      case he.BRACE_L:
        return this.parseObject(t);
      case he.INT:
        return this.advanceLexer(), this.node(i, {
          kind: Ve.INT,
          value: i.value
        });
      case he.FLOAT:
        return this.advanceLexer(), this.node(i, {
          kind: Ve.FLOAT,
          value: i.value
        });
      case he.STRING:
      case he.BLOCK_STRING:
        return this.parseStringLiteral();
      case he.NAME:
        switch (this.advanceLexer(), i.value) {
          case "true":
            return this.node(i, {
              kind: Ve.BOOLEAN,
              value: !0
            });
          case "false":
            return this.node(i, {
              kind: Ve.BOOLEAN,
              value: !1
            });
          case "null":
            return this.node(i, {
              kind: Ve.NULL
            });
          default:
            return this.node(i, {
              kind: Ve.ENUM,
              value: i.value
            });
        }
      case he.DOLLAR:
        if (t)
          if (this.expectToken(he.DOLLAR), this._lexer.token.kind === he.NAME) {
            const r = this._lexer.token.value;
            throw $t(
              this._lexer.source,
              i.start,
              `Unexpected variable "$${r}" in constant value.`
            );
          } else
            throw this.unexpected(i);
        return this.parseVariable();
      default:
        throw this.unexpected();
    }
  }
  parseConstValueLiteral() {
    return this.parseValueLiteral(!0);
  }
  parseStringLiteral() {
    const t = this._lexer.token;
    return this.advanceLexer(), this.node(t, {
      kind: Ve.STRING,
      value: t.value,
      block: t.kind === he.BLOCK_STRING
    });
  }
  parseList(t) {
    const i = () => this.parseValueLiteral(t);
    return this.node(this._lexer.token, {
      kind: Ve.LIST,
      values: this.any(he.BRACKET_L, i, he.BRACKET_R)
    });
  }
  parseObject(t) {
    const i = () => this.parseObjectField(t);
    return this.node(this._lexer.token, {
      kind: Ve.OBJECT,
      fields: this.any(he.BRACE_L, i, he.BRACE_R)
    });
  }
  parseObjectField(t) {
    const i = this._lexer.token, r = this.parseName();
    return this.expectToken(he.COLON), this.node(i, {
      kind: Ve.OBJECT_FIELD,
      name: r,
      value: this.parseValueLiteral(t)
    });
  }
  parseDirectives(t) {
    const i = [];
    for (; this.peek(he.AT); )
      i.push(this.parseDirective(t));
    return i;
  }
  parseConstDirectives() {
    return this.parseDirectives(!0);
  }
  parseDirective(t) {
    const i = this._lexer.token;
    return this.expectToken(he.AT), this.node(i, {
      kind: Ve.DIRECTIVE,
      name: this.parseName(),
      arguments: this.parseArguments(t)
    });
  }
  parseTypeReference() {
    const t = this._lexer.token;
    let i;
    if (this.expectOptionalToken(he.BRACKET_L)) {
      const r = this.parseTypeReference();
      this.expectToken(he.BRACKET_R), i = this.node(t, {
        kind: Ve.LIST_TYPE,
        type: r
      });
    } else
      i = this.parseNamedType();
    return this.expectOptionalToken(he.BANG) ? this.node(t, {
      kind: Ve.NON_NULL_TYPE,
      type: i
    }) : i;
  }
  parseNamedType() {
    return this.node(this._lexer.token, {
      kind: Ve.NAMED_TYPE,
      name: this.parseName()
    });
  }
  peekDescription() {
    return this.peek(he.STRING) || this.peek(he.BLOCK_STRING);
  }
  parseDescription() {
    if (this.peekDescription())
      return this.parseStringLiteral();
  }
  parseSchemaDefinition() {
    const t = this._lexer.token, i = this.parseDescription();
    this.expectKeyword("schema");
    const r = this.parseConstDirectives(), e = this.many(
      he.BRACE_L,
      this.parseOperationTypeDefinition,
      he.BRACE_R
    );
    return this.node(t, {
      kind: Ve.SCHEMA_DEFINITION,
      description: i,
      directives: r,
      operationTypes: e
    });
  }
  parseOperationTypeDefinition() {
    const t = this._lexer.token, i = this.parseOperationType();
    this.expectToken(he.COLON);
    const r = this.parseNamedType();
    return this.node(t, {
      kind: Ve.OPERATION_TYPE_DEFINITION,
      operation: i,
      type: r
    });
  }
  parseScalarTypeDefinition() {
    const t = this._lexer.token, i = this.parseDescription();
    this.expectKeyword("scalar");
    const r = this.parseName(), e = this.parseConstDirectives();
    return this.node(t, {
      kind: Ve.SCALAR_TYPE_DEFINITION,
      description: i,
      name: r,
      directives: e
    });
  }
  parseObjectTypeDefinition() {
    const t = this._lexer.token, i = this.parseDescription();
    this.expectKeyword("type");
    const r = this.parseName(), e = this.parseImplementsInterfaces(), a = this.parseConstDirectives(), s = this.parseFieldsDefinition();
    return this.node(t, {
      kind: Ve.OBJECT_TYPE_DEFINITION,
      description: i,
      name: r,
      interfaces: e,
      directives: a,
      fields: s
    });
  }
  parseImplementsInterfaces() {
    return this.expectOptionalKeyword("implements") ? this.delimitedMany(he.AMP, this.parseNamedType) : [];
  }
  parseFieldsDefinition() {
    return this.optionalMany(
      he.BRACE_L,
      this.parseFieldDefinition,
      he.BRACE_R
    );
  }
  parseFieldDefinition() {
    const t = this._lexer.token, i = this.parseDescription(), r = this.parseName(), e = this.parseArgumentDefs();
    this.expectToken(he.COLON);
    const a = this.parseTypeReference(), s = this.parseConstDirectives();
    return this.node(t, {
      kind: Ve.FIELD_DEFINITION,
      description: i,
      name: r,
      arguments: e,
      type: a,
      directives: s
    });
  }
  parseArgumentDefs() {
    return this.optionalMany(
      he.PAREN_L,
      this.parseInputValueDef,
      he.PAREN_R
    );
  }
  parseInputValueDef() {
    const t = this._lexer.token, i = this.parseDescription(), r = this.parseName();
    this.expectToken(he.COLON);
    const e = this.parseTypeReference();
    let a;
    this.expectOptionalToken(he.EQUALS) && (a = this.parseConstValueLiteral());
    const s = this.parseConstDirectives();
    return this.node(t, {
      kind: Ve.INPUT_VALUE_DEFINITION,
      description: i,
      name: r,
      type: e,
      defaultValue: a,
      directives: s
    });
  }
  parseInterfaceTypeDefinition() {
    const t = this._lexer.token, i = this.parseDescription();
    this.expectKeyword("interface");
    const r = this.parseName(), e = this.parseImplementsInterfaces(), a = this.parseConstDirectives(), s = this.parseFieldsDefinition();
    return this.node(t, {
      kind: Ve.INTERFACE_TYPE_DEFINITION,
      description: i,
      name: r,
      interfaces: e,
      directives: a,
      fields: s
    });
  }
  parseUnionTypeDefinition() {
    const t = this._lexer.token, i = this.parseDescription();
    this.expectKeyword("union");
    const r = this.parseName(), e = this.parseConstDirectives(), a = this.parseUnionMemberTypes();
    return this.node(t, {
      kind: Ve.UNION_TYPE_DEFINITION,
      description: i,
      name: r,
      directives: e,
      types: a
    });
  }
  parseUnionMemberTypes() {
    return this.expectOptionalToken(he.EQUALS) ? this.delimitedMany(he.PIPE, this.parseNamedType) : [];
  }
  parseEnumTypeDefinition() {
    const t = this._lexer.token, i = this.parseDescription();
    this.expectKeyword("enum");
    const r = this.parseName(), e = this.parseConstDirectives(), a = this.parseEnumValuesDefinition();
    return this.node(t, {
      kind: Ve.ENUM_TYPE_DEFINITION,
      description: i,
      name: r,
      directives: e,
      values: a
    });
  }
  parseEnumValuesDefinition() {
    return this.optionalMany(
      he.BRACE_L,
      this.parseEnumValueDefinition,
      he.BRACE_R
    );
  }
  parseEnumValueDefinition() {
    const t = this._lexer.token, i = this.parseDescription(), r = this.parseEnumValueName(), e = this.parseConstDirectives();
    return this.node(t, {
      kind: Ve.ENUM_VALUE_DEFINITION,
      description: i,
      name: r,
      directives: e
    });
  }
  parseEnumValueName() {
    if (this._lexer.token.value === "true" || this._lexer.token.value === "false" || this._lexer.token.value === "null")
      throw $t(
        this._lexer.source,
        this._lexer.token.start,
        `${Qs(
          this._lexer.token
        )} is reserved and cannot be used for an enum value.`
      );
    return this.parseName();
  }
  parseInputObjectTypeDefinition() {
    const t = this._lexer.token, i = this.parseDescription();
    this.expectKeyword("input");
    const r = this.parseName(), e = this.parseConstDirectives(), a = this.parseInputFieldsDefinition();
    return this.node(t, {
      kind: Ve.INPUT_OBJECT_TYPE_DEFINITION,
      description: i,
      name: r,
      directives: e,
      fields: a
    });
  }
  parseInputFieldsDefinition() {
    return this.optionalMany(
      he.BRACE_L,
      this.parseInputValueDef,
      he.BRACE_R
    );
  }
  parseTypeSystemExtension() {
    const t = this._lexer.lookahead();
    if (t.kind === he.NAME)
      switch (t.value) {
        case "schema":
          return this.parseSchemaExtension();
        case "scalar":
          return this.parseScalarTypeExtension();
        case "type":
          return this.parseObjectTypeExtension();
        case "interface":
          return this.parseInterfaceTypeExtension();
        case "union":
          return this.parseUnionTypeExtension();
        case "enum":
          return this.parseEnumTypeExtension();
        case "input":
          return this.parseInputObjectTypeExtension();
      }
    throw this.unexpected(t);
  }
  parseSchemaExtension() {
    const t = this._lexer.token;
    this.expectKeyword("extend"), this.expectKeyword("schema");
    const i = this.parseConstDirectives(), r = this.optionalMany(
      he.BRACE_L,
      this.parseOperationTypeDefinition,
      he.BRACE_R
    );
    if (i.length === 0 && r.length === 0)
      throw this.unexpected();
    return this.node(t, {
      kind: Ve.SCHEMA_EXTENSION,
      directives: i,
      operationTypes: r
    });
  }
  parseScalarTypeExtension() {
    const t = this._lexer.token;
    this.expectKeyword("extend"), this.expectKeyword("scalar");
    const i = this.parseName(), r = this.parseConstDirectives();
    if (r.length === 0)
      throw this.unexpected();
    return this.node(t, {
      kind: Ve.SCALAR_TYPE_EXTENSION,
      name: i,
      directives: r
    });
  }
  parseObjectTypeExtension() {
    const t = this._lexer.token;
    this.expectKeyword("extend"), this.expectKeyword("type");
    const i = this.parseName(), r = this.parseImplementsInterfaces(), e = this.parseConstDirectives(), a = this.parseFieldsDefinition();
    if (r.length === 0 && e.length === 0 && a.length === 0)
      throw this.unexpected();
    return this.node(t, {
      kind: Ve.OBJECT_TYPE_EXTENSION,
      name: i,
      interfaces: r,
      directives: e,
      fields: a
    });
  }
  parseInterfaceTypeExtension() {
    const t = this._lexer.token;
    this.expectKeyword("extend"), this.expectKeyword("interface");
    const i = this.parseName(), r = this.parseImplementsInterfaces(), e = this.parseConstDirectives(), a = this.parseFieldsDefinition();
    if (r.length === 0 && e.length === 0 && a.length === 0)
      throw this.unexpected();
    return this.node(t, {
      kind: Ve.INTERFACE_TYPE_EXTENSION,
      name: i,
      interfaces: r,
      directives: e,
      fields: a
    });
  }
  parseUnionTypeExtension() {
    const t = this._lexer.token;
    this.expectKeyword("extend"), this.expectKeyword("union");
    const i = this.parseName(), r = this.parseConstDirectives(), e = this.parseUnionMemberTypes();
    if (r.length === 0 && e.length === 0)
      throw this.unexpected();
    return this.node(t, {
      kind: Ve.UNION_TYPE_EXTENSION,
      name: i,
      directives: r,
      types: e
    });
  }
  parseEnumTypeExtension() {
    const t = this._lexer.token;
    this.expectKeyword("extend"), this.expectKeyword("enum");
    const i = this.parseName(), r = this.parseConstDirectives(), e = this.parseEnumValuesDefinition();
    if (r.length === 0 && e.length === 0)
      throw this.unexpected();
    return this.node(t, {
      kind: Ve.ENUM_TYPE_EXTENSION,
      name: i,
      directives: r,
      values: e
    });
  }
  parseInputObjectTypeExtension() {
    const t = this._lexer.token;
    this.expectKeyword("extend"), this.expectKeyword("input");
    const i = this.parseName(), r = this.parseConstDirectives(), e = this.parseInputFieldsDefinition();
    if (r.length === 0 && e.length === 0)
      throw this.unexpected();
    return this.node(t, {
      kind: Ve.INPUT_OBJECT_TYPE_EXTENSION,
      name: i,
      directives: r,
      fields: e
    });
  }
  parseDirectiveDefinition() {
    const t = this._lexer.token, i = this.parseDescription();
    this.expectKeyword("directive"), this.expectToken(he.AT);
    const r = this.parseName(), e = this.parseArgumentDefs(), a = this.expectOptionalKeyword("repeatable");
    this.expectKeyword("on");
    const s = this.parseDirectiveLocations();
    return this.node(t, {
      kind: Ve.DIRECTIVE_DEFINITION,
      description: i,
      name: r,
      arguments: e,
      repeatable: a,
      locations: s
    });
  }
  parseDirectiveLocations() {
    return this.delimitedMany(he.PIPE, this.parseDirectiveLocation);
  }
  parseDirectiveLocation() {
    const t = this._lexer.token, i = this.parseName();
    if (Object.prototype.hasOwnProperty.call(Ld, i.value))
      return i;
    throw this.unexpected(t);
  }
  node(t, i) {
    return this._options.noLocation !== !0 && (i.loc = new kP(
      t,
      this._lexer.lastToken,
      this._lexer.source
    )), i;
  }
  peek(t) {
    return this._lexer.token.kind === t;
  }
  expectToken(t) {
    const i = this._lexer.token;
    if (i.kind === t)
      return this.advanceLexer(), i;
    throw $t(
      this._lexer.source,
      i.start,
      `Expected ${b_(t)}, found ${Qs(i)}.`
    );
  }
  expectOptionalToken(t) {
    return this._lexer.token.kind === t ? (this.advanceLexer(), !0) : !1;
  }
  expectKeyword(t) {
    const i = this._lexer.token;
    if (i.kind === he.NAME && i.value === t)
      this.advanceLexer();
    else
      throw $t(
        this._lexer.source,
        i.start,
        `Expected "${t}", found ${Qs(i)}.`
      );
  }
  expectOptionalKeyword(t) {
    const i = this._lexer.token;
    return i.kind === he.NAME && i.value === t ? (this.advanceLexer(), !0) : !1;
  }
  unexpected(t) {
    const i = t != null ? t : this._lexer.token;
    return $t(
      this._lexer.source,
      i.start,
      `Unexpected ${Qs(i)}.`
    );
  }
  any(t, i, r) {
    this.expectToken(t);
    const e = [];
    for (; !this.expectOptionalToken(r); )
      e.push(i.call(this));
    return e;
  }
  optionalMany(t, i, r) {
    if (this.expectOptionalToken(t)) {
      const e = [];
      do
        e.push(i.call(this));
      while (!this.expectOptionalToken(r));
      return e;
    }
    return [];
  }
  many(t, i, r) {
    this.expectToken(t);
    const e = [];
    do
      e.push(i.call(this));
    while (!this.expectOptionalToken(r));
    return e;
  }
  delimitedMany(t, i) {
    this.expectOptionalToken(t);
    const r = [];
    do
      r.push(i.call(this));
    while (this.expectOptionalToken(t));
    return r;
  }
  advanceLexer() {
    const { maxTokens: t } = this._options, i = this._lexer.advance();
    if (t !== void 0 && i.kind !== he.EOF && (++this._tokenCounter, this._tokenCounter > t))
      throw $t(
        this._lexer.source,
        i.start,
        `Document contains more that ${t} tokens. Parsing aborted.`
      );
  }
}
function Qs(n) {
  const t = n.value;
  return b_(n.kind) + (t != null ? ` "${t}"` : "");
}
function b_(n) {
  return NP(n) ? `"${n}"` : n;
}
const rI = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  parse: ZP,
  parseValue: eI,
  parseConstValue: tI,
  parseType: iI,
  Parser: gs
}, Symbol.toStringTag, { value: "Module" })), nI = /* @__PURE__ */ is(rI);
function aI(n) {
  return `"${n.replace(sI, oI)}"`;
}
const sI = /[\x00-\x1f\x22\x5c\x7f-\x9f]/g;
function oI(n) {
  return uI[n.charCodeAt(0)];
}
const uI = [
  "\\u0000",
  "\\u0001",
  "\\u0002",
  "\\u0003",
  "\\u0004",
  "\\u0005",
  "\\u0006",
  "\\u0007",
  "\\b",
  "\\t",
  "\\n",
  "\\u000B",
  "\\f",
  "\\r",
  "\\u000E",
  "\\u000F",
  "\\u0010",
  "\\u0011",
  "\\u0012",
  "\\u0013",
  "\\u0014",
  "\\u0015",
  "\\u0016",
  "\\u0017",
  "\\u0018",
  "\\u0019",
  "\\u001A",
  "\\u001B",
  "\\u001C",
  "\\u001D",
  "\\u001E",
  "\\u001F",
  "",
  "",
  '\\"',
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "\\\\",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "\\u007F",
  "\\u0080",
  "\\u0081",
  "\\u0082",
  "\\u0083",
  "\\u0084",
  "\\u0085",
  "\\u0086",
  "\\u0087",
  "\\u0088",
  "\\u0089",
  "\\u008A",
  "\\u008B",
  "\\u008C",
  "\\u008D",
  "\\u008E",
  "\\u008F",
  "\\u0090",
  "\\u0091",
  "\\u0092",
  "\\u0093",
  "\\u0094",
  "\\u0095",
  "\\u0096",
  "\\u0097",
  "\\u0098",
  "\\u0099",
  "\\u009A",
  "\\u009B",
  "\\u009C",
  "\\u009D",
  "\\u009E",
  "\\u009F"
], lI = Object.freeze({});
function dI(n, t, i = p_) {
  const r = /* @__PURE__ */ new Map();
  for (const I of Object.values(Ve))
    r.set(I, cI(t, I));
  let e, a = Array.isArray(n), s = [n], o = -1, u = [], l = n, d, h;
  const f = [], _ = [];
  do {
    o++;
    const I = o === s.length, V = I && u.length !== 0;
    if (I) {
      if (d = _.length === 0 ? void 0 : f[f.length - 1], l = h, h = _.pop(), V)
        if (a) {
          l = l.slice();
          let k = 0;
          for (const [P, L] of u) {
            const O = P - k;
            L === null ? (l.splice(O, 1), k++) : l[O] = L;
          }
        } else {
          l = Object.defineProperties(
            {},
            Object.getOwnPropertyDescriptors(l)
          );
          for (const [k, P] of u)
            l[k] = P;
        }
      o = e.index, s = e.keys, u = e.edits, a = e.inArray, e = e.prev;
    } else if (h) {
      if (d = a ? o : s[o], l = h[d], l == null)
        continue;
      f.push(d);
    }
    let $;
    if (!Array.isArray(l)) {
      var v, y;
      Bp(l) || no(!1, `Invalid AST Node: ${Jc(l)}.`);
      const k = I ? (v = r.get(l.kind)) === null || v === void 0 ? void 0 : v.leave : (y = r.get(l.kind)) === null || y === void 0 ? void 0 : y.enter;
      if ($ = k == null ? void 0 : k.call(t, l, d, h, f, _), $ === lI)
        break;
      if ($ === !1) {
        if (!I) {
          f.pop();
          continue;
        }
      } else if ($ !== void 0 && (u.push([d, $]), !I))
        if (Bp($))
          l = $;
        else {
          f.pop();
          continue;
        }
    }
    if ($ === void 0 && V && u.push([d, l]), I)
      f.pop();
    else {
      var T;
      e = {
        inArray: a,
        index: o,
        keys: s,
        edits: u,
        prev: e
      }, a = Array.isArray(l), s = a ? l : (T = i[l.kind]) !== null && T !== void 0 ? T : [], o = -1, u = [], h && _.push(h), h = l;
    }
  } while (e !== void 0);
  return u.length !== 0 ? u[u.length - 1][1] : n;
}
function cI(n, t) {
  const i = n[t];
  return typeof i == "object" ? i : typeof i == "function" ? {
    enter: i,
    leave: void 0
  } : {
    enter: n.enter,
    leave: n.leave
  };
}
function fI(n) {
  return dI(n, pI);
}
const hI = 80, pI = {
  Name: {
    leave: (n) => n.value
  },
  Variable: {
    leave: (n) => "$" + n.name
  },
  Document: {
    leave: (n) => Pe(n.definitions, `

`)
  },
  OperationDefinition: {
    leave(n) {
      const t = rt("(", Pe(n.variableDefinitions, ", "), ")"), i = Pe(
        [
          n.operation,
          Pe([n.name, t]),
          Pe(n.directives, " ")
        ],
        " "
      );
      return (i === "query" ? "" : i + " ") + n.selectionSet;
    }
  },
  VariableDefinition: {
    leave: ({ variable: n, type: t, defaultValue: i, directives: r }) => n + ": " + t + rt(" = ", i) + rt(" ", Pe(r, " "))
  },
  SelectionSet: {
    leave: ({ selections: n }) => qi(n)
  },
  Field: {
    leave({ alias: n, name: t, arguments: i, directives: r, selectionSet: e }) {
      const a = rt("", n, ": ") + t;
      let s = a + rt("(", Pe(i, ", "), ")");
      return s.length > hI && (s = a + rt(`(
`, ao(Pe(i, `
`)), `
)`)), Pe([s, Pe(r, " "), e], " ");
    }
  },
  Argument: {
    leave: ({ name: n, value: t }) => n + ": " + t
  },
  FragmentSpread: {
    leave: ({ name: n, directives: t }) => "..." + n + rt(" ", Pe(t, " "))
  },
  InlineFragment: {
    leave: ({ typeCondition: n, directives: t, selectionSet: i }) => Pe(
      [
        "...",
        rt("on ", n),
        Pe(t, " "),
        i
      ],
      " "
    )
  },
  FragmentDefinition: {
    leave: ({ name: n, typeCondition: t, variableDefinitions: i, directives: r, selectionSet: e }) => `fragment ${n}${rt("(", Pe(i, ", "), ")")} on ${t} ${rt("", Pe(r, " "), " ")}` + e
  },
  IntValue: {
    leave: ({ value: n }) => n
  },
  FloatValue: {
    leave: ({ value: n }) => n
  },
  StringValue: {
    leave: ({ value: n, block: t }) => t ? OP(n) : aI(n)
  },
  BooleanValue: {
    leave: ({ value: n }) => n ? "true" : "false"
  },
  NullValue: {
    leave: () => "null"
  },
  EnumValue: {
    leave: ({ value: n }) => n
  },
  ListValue: {
    leave: ({ values: n }) => "[" + Pe(n, ", ") + "]"
  },
  ObjectValue: {
    leave: ({ fields: n }) => "{" + Pe(n, ", ") + "}"
  },
  ObjectField: {
    leave: ({ name: n, value: t }) => n + ": " + t
  },
  Directive: {
    leave: ({ name: n, arguments: t }) => "@" + n + rt("(", Pe(t, ", "), ")")
  },
  NamedType: {
    leave: ({ name: n }) => n
  },
  ListType: {
    leave: ({ type: n }) => "[" + n + "]"
  },
  NonNullType: {
    leave: ({ type: n }) => n + "!"
  },
  SchemaDefinition: {
    leave: ({ description: n, directives: t, operationTypes: i }) => rt("", n, `
`) + Pe(["schema", Pe(t, " "), qi(i)], " ")
  },
  OperationTypeDefinition: {
    leave: ({ operation: n, type: t }) => n + ": " + t
  },
  ScalarTypeDefinition: {
    leave: ({ description: n, name: t, directives: i }) => rt("", n, `
`) + Pe(["scalar", t, Pe(i, " ")], " ")
  },
  ObjectTypeDefinition: {
    leave: ({ description: n, name: t, interfaces: i, directives: r, fields: e }) => rt("", n, `
`) + Pe(
      [
        "type",
        t,
        rt("implements ", Pe(i, " & ")),
        Pe(r, " "),
        qi(e)
      ],
      " "
    )
  },
  FieldDefinition: {
    leave: ({ description: n, name: t, arguments: i, type: r, directives: e }) => rt("", n, `
`) + t + (qp(i) ? rt(`(
`, ao(Pe(i, `
`)), `
)`) : rt("(", Pe(i, ", "), ")")) + ": " + r + rt(" ", Pe(e, " "))
  },
  InputValueDefinition: {
    leave: ({ description: n, name: t, type: i, defaultValue: r, directives: e }) => rt("", n, `
`) + Pe(
      [t + ": " + i, rt("= ", r), Pe(e, " ")],
      " "
    )
  },
  InterfaceTypeDefinition: {
    leave: ({ description: n, name: t, interfaces: i, directives: r, fields: e }) => rt("", n, `
`) + Pe(
      [
        "interface",
        t,
        rt("implements ", Pe(i, " & ")),
        Pe(r, " "),
        qi(e)
      ],
      " "
    )
  },
  UnionTypeDefinition: {
    leave: ({ description: n, name: t, directives: i, types: r }) => rt("", n, `
`) + Pe(
      ["union", t, Pe(i, " "), rt("= ", Pe(r, " | "))],
      " "
    )
  },
  EnumTypeDefinition: {
    leave: ({ description: n, name: t, directives: i, values: r }) => rt("", n, `
`) + Pe(["enum", t, Pe(i, " "), qi(r)], " ")
  },
  EnumValueDefinition: {
    leave: ({ description: n, name: t, directives: i }) => rt("", n, `
`) + Pe([t, Pe(i, " ")], " ")
  },
  InputObjectTypeDefinition: {
    leave: ({ description: n, name: t, directives: i, fields: r }) => rt("", n, `
`) + Pe(["input", t, Pe(i, " "), qi(r)], " ")
  },
  DirectiveDefinition: {
    leave: ({ description: n, name: t, arguments: i, repeatable: r, locations: e }) => rt("", n, `
`) + "directive @" + t + (qp(i) ? rt(`(
`, ao(Pe(i, `
`)), `
)`) : rt("(", Pe(i, ", "), ")")) + (r ? " repeatable" : "") + " on " + Pe(e, " | ")
  },
  SchemaExtension: {
    leave: ({ directives: n, operationTypes: t }) => Pe(
      ["extend schema", Pe(n, " "), qi(t)],
      " "
    )
  },
  ScalarTypeExtension: {
    leave: ({ name: n, directives: t }) => Pe(["extend scalar", n, Pe(t, " ")], " ")
  },
  ObjectTypeExtension: {
    leave: ({ name: n, interfaces: t, directives: i, fields: r }) => Pe(
      [
        "extend type",
        n,
        rt("implements ", Pe(t, " & ")),
        Pe(i, " "),
        qi(r)
      ],
      " "
    )
  },
  InterfaceTypeExtension: {
    leave: ({ name: n, interfaces: t, directives: i, fields: r }) => Pe(
      [
        "extend interface",
        n,
        rt("implements ", Pe(t, " & ")),
        Pe(i, " "),
        qi(r)
      ],
      " "
    )
  },
  UnionTypeExtension: {
    leave: ({ name: n, directives: t, types: i }) => Pe(
      [
        "extend union",
        n,
        Pe(t, " "),
        rt("= ", Pe(i, " | "))
      ],
      " "
    )
  },
  EnumTypeExtension: {
    leave: ({ name: n, directives: t, values: i }) => Pe(["extend enum", n, Pe(t, " "), qi(i)], " ")
  },
  InputObjectTypeExtension: {
    leave: ({ name: n, directives: t, fields: i }) => Pe(["extend input", n, Pe(t, " "), qi(i)], " ")
  }
};
function Pe(n, t = "") {
  var i;
  return (i = n == null ? void 0 : n.filter((r) => r).join(t)) !== null && i !== void 0 ? i : "";
}
function qi(n) {
  return rt(`{
`, ao(Pe(n, `
`)), `
}`);
}
function rt(n, t, i = "") {
  return t != null && t !== "" ? n + t + i : "";
}
function ao(n) {
  return rt("  ", n.replace(/\n/g, `
  `));
}
function qp(n) {
  var t;
  return (t = n == null ? void 0 : n.some((i) => i.includes(`
`))) !== null && t !== void 0 ? t : !1;
}
const mI = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  print: fI
}, Symbol.toStringTag, { value: "Module" })), gI = /* @__PURE__ */ is(mI);
var Zc = {}, lu = {}, S_ = function(t) {
  var i = t.uri, r = t.name, e = t.type;
  this.uri = i, this.name = r, this.type = e;
}, vI = S_, E_ = function(t) {
  return typeof File < "u" && t instanceof File || typeof Blob < "u" && t instanceof Blob || t instanceof vI;
}, _I = E_, yI = function n(t, i, r) {
  i === void 0 && (i = ""), r === void 0 && (r = _I);
  var e, a = /* @__PURE__ */ new Map();
  function s(d, h) {
    var f = a.get(h);
    f ? f.push.apply(f, d) : a.set(h, d);
  }
  if (r(t))
    e = null, s([i], t);
  else {
    var o = i ? i + "." : "";
    if (typeof FileList < "u" && t instanceof FileList)
      e = Array.prototype.map.call(t, function(d, h) {
        return s(["" + o + h], d), null;
      });
    else if (Array.isArray(t))
      e = t.map(function(d, h) {
        var f = n(d, "" + o + h, r);
        return f.files.forEach(s), f.clone;
      });
    else if (t && t.constructor === Object) {
      e = {};
      for (var u in t) {
        var l = n(t[u], "" + o + u, r);
        l.files.forEach(s), e[u] = l.clone;
      }
    } else
      e = t;
  }
  return {
    clone: e,
    files: a
  };
};
lu.ReactNativeFile = S_;
lu.extractFiles = yI;
lu.isExtractableFile = E_;
var TI = typeof self == "object" ? self.FormData : window.FormData, vs = {};
Object.defineProperty(vs, "__esModule", { value: !0 });
vs.defaultJsonSerializer = void 0;
vs.defaultJsonSerializer = {
  parse: JSON.parse,
  stringify: JSON.stringify
};
var bI = st && st.__importDefault || function(n) {
  return n && n.__esModule ? n : { default: n };
};
Object.defineProperty(Zc, "__esModule", { value: !0 });
var x_ = lu, SI = bI(TI), EI = vs, xI = function(n) {
  return x_.isExtractableFile(n) || n !== null && typeof n == "object" && typeof n.pipe == "function";
};
function wI(n, t, i, r) {
  r === void 0 && (r = EI.defaultJsonSerializer);
  var e = x_.extractFiles({ query: n, variables: t, operationName: i }, "", xI), a = e.clone, s = e.files;
  if (s.size === 0) {
    if (!Array.isArray(n))
      return r.stringify(a);
    if (typeof t < "u" && !Array.isArray(t))
      throw new Error("Cannot create request body with given variable type, array expected");
    var o = n.reduce(function(f, _, v) {
      return f.push({ query: _, variables: t ? t[v] : void 0 }), f;
    }, []);
    return r.stringify(o);
  }
  var u = typeof FormData > "u" ? SI.default : FormData, l = new u();
  l.append("operations", r.stringify(a));
  var d = {}, h = 0;
  return s.forEach(function(f) {
    d[++h] = f;
  }), l.append("map", r.stringify(d)), h = 0, s.forEach(function(f, _) {
    l.append("" + ++h, _);
  }), l;
}
Zc.default = wI;
var Ti = {};
Object.defineProperty(Ti, "__esModule", { value: !0 });
Ti.parseBatchRequestsExtendedArgs = Ti.parseRawRequestExtendedArgs = Ti.parseRequestExtendedArgs = Ti.parseBatchRequestArgs = Ti.parseRawRequestArgs = Ti.parseRequestArgs = void 0;
function AI(n, t, i) {
  return n.document ? n : {
    document: n,
    variables: t,
    requestHeaders: i,
    signal: void 0
  };
}
Ti.parseRequestArgs = AI;
function CI(n, t, i) {
  return n.query ? n : {
    query: n,
    variables: t,
    requestHeaders: i,
    signal: void 0
  };
}
Ti.parseRawRequestArgs = CI;
function kI(n, t) {
  return n.documents ? n : {
    documents: n,
    requestHeaders: t,
    signal: void 0
  };
}
Ti.parseBatchRequestArgs = kI;
function PI(n, t, i, r) {
  return n.document ? n : {
    url: n,
    document: t,
    variables: i,
    requestHeaders: r,
    signal: void 0
  };
}
Ti.parseRequestExtendedArgs = PI;
function II(n, t, i, r) {
  return n.query ? n : {
    url: n,
    query: t,
    variables: i,
    requestHeaders: r,
    signal: void 0
  };
}
Ti.parseRawRequestExtendedArgs = II;
function DI(n, t, i) {
  return n.documents ? n : {
    url: n,
    documents: t,
    requestHeaders: i,
    signal: void 0
  };
}
Ti.parseBatchRequestsExtendedArgs = DI;
var _s = {}, LI = st && st.__extends || function() {
  var n = function(t, i) {
    return n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, e) {
      r.__proto__ = e;
    } || function(r, e) {
      for (var a in e)
        Object.prototype.hasOwnProperty.call(e, a) && (r[a] = e[a]);
    }, n(t, i);
  };
  return function(t, i) {
    if (typeof i != "function" && i !== null)
      throw new TypeError("Class extends value " + String(i) + " is not a constructor or null");
    n(t, i);
    function r() {
      this.constructor = t;
    }
    t.prototype = i === null ? Object.create(i) : (r.prototype = i.prototype, new r());
  };
}();
Object.defineProperty(_s, "__esModule", { value: !0 });
_s.ClientError = void 0;
var OI = function(n) {
  LI(t, n);
  function t(i, r) {
    var e = this, a = t.extractMessage(i) + ": " + JSON.stringify({
      response: i,
      request: r
    });
    return e = n.call(this, a) || this, Object.setPrototypeOf(e, t.prototype), e.response = i, e.request = r, typeof Error.captureStackTrace == "function" && Error.captureStackTrace(e, t), e;
  }
  return t.extractMessage = function(i) {
    try {
      return i.errors[0].message;
    } catch {
      return "GraphQL Error (Code: " + i.status + ")";
    }
  }, t;
}(Error);
_s.ClientError = OI;
var Da = {}, Vp;
function RI() {
  if (Vp)
    return Da;
  Vp = 1;
  var n = st && st.__assign || function() {
    return n = Object.assign || function(P) {
      for (var L, O = 1, U = arguments.length; O < U; O++) {
        L = arguments[O];
        for (var ie in L)
          Object.prototype.hasOwnProperty.call(L, ie) && (P[ie] = L[ie]);
      }
      return P;
    }, n.apply(this, arguments);
  }, t = st && st.__awaiter || function(P, L, O, U) {
    function ie(z) {
      return z instanceof O ? z : new O(function(le) {
        le(z);
      });
    }
    return new (O || (O = Promise))(function(z, le) {
      function se(ne) {
        try {
          M(U.next(ne));
        } catch (fe) {
          le(fe);
        }
      }
      function me(ne) {
        try {
          M(U.throw(ne));
        } catch (fe) {
          le(fe);
        }
      }
      function M(ne) {
        ne.done ? z(ne.value) : ie(ne.value).then(se, me);
      }
      M((U = U.apply(P, L || [])).next());
    });
  }, i = st && st.__generator || function(P, L) {
    var O = { label: 0, sent: function() {
      if (z[0] & 1)
        throw z[1];
      return z[1];
    }, trys: [], ops: [] }, U, ie, z, le;
    return le = { next: se(0), throw: se(1), return: se(2) }, typeof Symbol == "function" && (le[Symbol.iterator] = function() {
      return this;
    }), le;
    function se(M) {
      return function(ne) {
        return me([M, ne]);
      };
    }
    function me(M) {
      if (U)
        throw new TypeError("Generator is already executing.");
      for (; O; )
        try {
          if (U = 1, ie && (z = M[0] & 2 ? ie.return : M[0] ? ie.throw || ((z = ie.return) && z.call(ie), 0) : ie.next) && !(z = z.call(ie, M[1])).done)
            return z;
          switch (ie = 0, z && (M = [M[0] & 2, z.value]), M[0]) {
            case 0:
            case 1:
              z = M;
              break;
            case 4:
              return O.label++, { value: M[1], done: !1 };
            case 5:
              O.label++, ie = M[1], M = [0];
              continue;
            case 7:
              M = O.ops.pop(), O.trys.pop();
              continue;
            default:
              if (z = O.trys, !(z = z.length > 0 && z[z.length - 1]) && (M[0] === 6 || M[0] === 2)) {
                O = 0;
                continue;
              }
              if (M[0] === 3 && (!z || M[1] > z[0] && M[1] < z[3])) {
                O.label = M[1];
                break;
              }
              if (M[0] === 6 && O.label < z[1]) {
                O.label = z[1], z = M;
                break;
              }
              if (z && O.label < z[2]) {
                O.label = z[2], O.ops.push(M);
                break;
              }
              z[2] && O.ops.pop(), O.trys.pop();
              continue;
          }
          M = L.call(P, O);
        } catch (ne) {
          M = [6, ne], ie = 0;
        } finally {
          U = z = 0;
        }
      if (M[0] & 5)
        throw M[1];
      return { value: M[0] ? M[1] : void 0, done: !0 };
    }
  };
  Object.defineProperty(Da, "__esModule", { value: !0 }), Da.GraphQLWebSocketClient = void 0;
  var r = _s, e = w_(), a = "connection_init", s = "connection_ack", o = "ping", u = "pong", l = "subscribe", d = "next", h = "error", f = "complete", _ = function() {
    function P(L, O, U) {
      this._type = L, this._payload = O, this._id = U;
    }
    return Object.defineProperty(P.prototype, "type", {
      get: function() {
        return this._type;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(P.prototype, "id", {
      get: function() {
        return this._id;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(P.prototype, "payload", {
      get: function() {
        return this._payload;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(P.prototype, "text", {
      get: function() {
        var L = { type: this.type };
        return this.id != null && this.id != null && (L.id = this.id), this.payload != null && this.payload != null && (L.payload = this.payload), JSON.stringify(L);
      },
      enumerable: !1,
      configurable: !0
    }), P.parse = function(L, O) {
      var U = JSON.parse(L), ie = U.type, z = U.payload, le = U.id;
      return new P(ie, O(z), le);
    }, P;
  }(), v = function() {
    function P(L, O) {
      var U = this, ie = O.onInit, z = O.onAcknowledged, le = O.onPing, se = O.onPong;
      this.socketState = { acknowledged: !1, lastRequestId: 0, subscriptions: {} }, this.socket = L, L.onopen = function(me) {
        return t(U, void 0, void 0, function() {
          var M, ne, fe, pe;
          return i(this, function(H) {
            switch (H.label) {
              case 0:
                return this.socketState.acknowledged = !1, this.socketState.subscriptions = {}, ne = (M = L).send, fe = T, ie ? [4, ie()] : [3, 2];
              case 1:
                return pe = H.sent(), [3, 3];
              case 2:
                pe = null, H.label = 3;
              case 3:
                return ne.apply(M, [fe.apply(void 0, [pe]).text]), [2];
            }
          });
        });
      }, L.onclose = function(me) {
        U.socketState.acknowledged = !1, U.socketState.subscriptions = {};
      }, L.onerror = function(me) {
        console.error(me);
      }, L.onmessage = function(me) {
        try {
          var M = y(me.data);
          switch (M.type) {
            case s: {
              U.socketState.acknowledged ? console.warn("Duplicate CONNECTION_ACK message ignored") : (U.socketState.acknowledged = !0, z && z(M.payload));
              return;
            }
            case o: {
              le ? le(M.payload).then(function(Q) {
                return L.send(V(Q).text);
              }) : L.send(V(null).text);
              return;
            }
            case u: {
              se && se(M.payload);
              return;
            }
          }
          if (!U.socketState.acknowledged || M.id === void 0 || M.id === null || !U.socketState.subscriptions[M.id])
            return;
          var ne = U.socketState.subscriptions[M.id], fe = ne.query, pe = ne.variables, H = ne.subscriber;
          switch (M.type) {
            case d: {
              !M.payload.errors && M.payload.data && H.next && H.next(M.payload.data), M.payload.errors && H.error && H.error(new r.ClientError(n(n({}, M.payload), { status: 200 }), { query: fe, variables: pe }));
              return;
            }
            case h: {
              H.error && H.error(new r.ClientError({ errors: M.payload, status: 200 }, { query: fe, variables: pe }));
              return;
            }
            case f: {
              H.complete && H.complete(), delete U.socketState.subscriptions[M.id];
              return;
            }
          }
        } catch (Q) {
          console.error(Q), L.close(1006);
        }
        L.close(4400, "Unknown graphql-ws message.");
      };
    }
    return P.prototype.makeSubscribe = function(L, O, U, ie) {
      var z = this, le = (this.socketState.lastRequestId++).toString();
      return this.socketState.subscriptions[le] = { query: L, variables: U, subscriber: ie }, this.socket.send($(le, { query: L, operationName: O, variables: U }).text), function() {
        z.socket.send(k(le).text), delete z.socketState.subscriptions[le];
      };
    }, P.prototype.rawRequest = function(L, O) {
      var U = this;
      return new Promise(function(ie, z) {
        var le;
        U.rawSubscribe(L, {
          next: function(se, me) {
            return le = { data: se, extensions: me };
          },
          error: z,
          complete: function() {
            return ie(le);
          }
        }, O);
      });
    }, P.prototype.request = function(L, O) {
      var U = this;
      return new Promise(function(ie, z) {
        var le;
        U.subscribe(L, {
          next: function(se) {
            return le = se;
          },
          error: z,
          complete: function() {
            return ie(le);
          }
        }, O);
      });
    }, P.prototype.subscribe = function(L, O, U) {
      var ie = e.resolveRequestDocument(L), z = ie.query, le = ie.operationName;
      return this.makeSubscribe(z, le, U, O);
    }, P.prototype.rawSubscribe = function(L, O, U) {
      return this.makeSubscribe(L, void 0, U, O);
    }, P.prototype.ping = function(L) {
      this.socket.send(I(L).text);
    }, P.prototype.close = function() {
      this.socket.close(1e3);
    }, P.PROTOCOL = "graphql-transport-ws", P;
  }();
  Da.GraphQLWebSocketClient = v;
  function y(P, L) {
    L === void 0 && (L = function(U) {
      return U;
    });
    var O = _.parse(P, L);
    return O;
  }
  function T(P) {
    return new _(a, P);
  }
  function I(P) {
    return new _(o, P, void 0);
  }
  function V(P) {
    return new _(u, P, void 0);
  }
  function $(P, L) {
    return new _(l, L, P);
  }
  function k(P) {
    return new _(f, void 0, P);
  }
  return Da;
}
var jp;
function w_() {
  return jp || (jp = 1, function(n) {
    var t = st && st.__assign || function() {
      return t = Object.assign || function(H) {
        for (var Q, F = 1, W = arguments.length; F < W; F++) {
          Q = arguments[F];
          for (var X in Q)
            Object.prototype.hasOwnProperty.call(Q, X) && (H[X] = Q[X]);
        }
        return H;
      }, t.apply(this, arguments);
    }, i = st && st.__createBinding || (Object.create ? function(H, Q, F, W) {
      W === void 0 && (W = F), Object.defineProperty(H, W, { enumerable: !0, get: function() {
        return Q[F];
      } });
    } : function(H, Q, F, W) {
      W === void 0 && (W = F), H[W] = Q[F];
    }), r = st && st.__setModuleDefault || (Object.create ? function(H, Q) {
      Object.defineProperty(H, "default", { enumerable: !0, value: Q });
    } : function(H, Q) {
      H.default = Q;
    }), e = st && st.__importStar || function(H) {
      if (H && H.__esModule)
        return H;
      var Q = {};
      if (H != null)
        for (var F in H)
          F !== "default" && Object.prototype.hasOwnProperty.call(H, F) && i(Q, H, F);
      return r(Q, H), Q;
    }, a = st && st.__awaiter || function(H, Q, F, W) {
      function X(Y) {
        return Y instanceof F ? Y : new F(function(de) {
          de(Y);
        });
      }
      return new (F || (F = Promise))(function(Y, de) {
        function oe(ge) {
          try {
            ue(W.next(ge));
          } catch (ee) {
            de(ee);
          }
        }
        function ae(ge) {
          try {
            ue(W.throw(ge));
          } catch (ee) {
            de(ee);
          }
        }
        function ue(ge) {
          ge.done ? Y(ge.value) : X(ge.value).then(oe, ae);
        }
        ue((W = W.apply(H, Q || [])).next());
      });
    }, s = st && st.__generator || function(H, Q) {
      var F = { label: 0, sent: function() {
        if (Y[0] & 1)
          throw Y[1];
        return Y[1];
      }, trys: [], ops: [] }, W, X, Y, de;
      return de = { next: oe(0), throw: oe(1), return: oe(2) }, typeof Symbol == "function" && (de[Symbol.iterator] = function() {
        return this;
      }), de;
      function oe(ue) {
        return function(ge) {
          return ae([ue, ge]);
        };
      }
      function ae(ue) {
        if (W)
          throw new TypeError("Generator is already executing.");
        for (; F; )
          try {
            if (W = 1, X && (Y = ue[0] & 2 ? X.return : ue[0] ? X.throw || ((Y = X.return) && Y.call(X), 0) : X.next) && !(Y = Y.call(X, ue[1])).done)
              return Y;
            switch (X = 0, Y && (ue = [ue[0] & 2, Y.value]), ue[0]) {
              case 0:
              case 1:
                Y = ue;
                break;
              case 4:
                return F.label++, { value: ue[1], done: !1 };
              case 5:
                F.label++, X = ue[1], ue = [0];
                continue;
              case 7:
                ue = F.ops.pop(), F.trys.pop();
                continue;
              default:
                if (Y = F.trys, !(Y = Y.length > 0 && Y[Y.length - 1]) && (ue[0] === 6 || ue[0] === 2)) {
                  F = 0;
                  continue;
                }
                if (ue[0] === 3 && (!Y || ue[1] > Y[0] && ue[1] < Y[3])) {
                  F.label = ue[1];
                  break;
                }
                if (ue[0] === 6 && F.label < Y[1]) {
                  F.label = Y[1], Y = ue;
                  break;
                }
                if (Y && F.label < Y[2]) {
                  F.label = Y[2], F.ops.push(ue);
                  break;
                }
                Y[2] && F.ops.pop(), F.trys.pop();
                continue;
            }
            ue = Q.call(H, F);
          } catch (ge) {
            ue = [6, ge], X = 0;
          } finally {
            W = Y = 0;
          }
        if (ue[0] & 5)
          throw ue[1];
        return { value: ue[0] ? ue[1] : void 0, done: !0 };
      }
    }, o = st && st.__rest || function(H, Q) {
      var F = {};
      for (var W in H)
        Object.prototype.hasOwnProperty.call(H, W) && Q.indexOf(W) < 0 && (F[W] = H[W]);
      if (H != null && typeof Object.getOwnPropertySymbols == "function")
        for (var X = 0, W = Object.getOwnPropertySymbols(H); X < W.length; X++)
          Q.indexOf(W[X]) < 0 && Object.prototype.propertyIsEnumerable.call(H, W[X]) && (F[W[X]] = H[W[X]]);
      return F;
    }, u = st && st.__importDefault || function(H) {
      return H && H.__esModule ? H : { default: H };
    };
    Object.defineProperty(n, "__esModule", { value: !0 }), n.GraphQLWebSocketClient = n.gql = n.resolveRequestDocument = n.batchRequests = n.request = n.rawRequest = n.GraphQLClient = n.ClientError = void 0;
    var l = e(Id.exports), d = l, h = nI, f = gI, _ = u(Zc), v = vs, y = Ti, T = _s;
    Object.defineProperty(n, "ClientError", { enumerable: !0, get: function() {
      return T.ClientError;
    } });
    var I = function(H) {
      var Q = {};
      return H && (typeof Headers < "u" && H instanceof Headers || d && d.Headers && H instanceof d.Headers ? Q = fe(H) : Array.isArray(H) ? H.forEach(function(F) {
        var W = F[0], X = F[1];
        Q[W] = X;
      }) : Q = H), Q;
    }, V = function(H) {
      return H.replace(/([\s,]|#[^\n\r]+)+/g, " ").trim();
    }, $ = function(H) {
      var Q = H.query, F = H.variables, W = H.operationName, X = H.jsonSerializer;
      if (!Array.isArray(Q)) {
        var Y = ["query=" + encodeURIComponent(V(Q))];
        return F && Y.push("variables=" + encodeURIComponent(X.stringify(F))), W && Y.push("operationName=" + encodeURIComponent(W)), Y.join("&");
      }
      if (typeof F < "u" && !Array.isArray(F))
        throw new Error("Cannot create query with given variable type, array expected");
      var de = Q.reduce(function(oe, ae, ue) {
        return oe.push({
          query: V(ae),
          variables: F ? X.stringify(F[ue]) : void 0
        }), oe;
      }, []);
      return "query=" + encodeURIComponent(X.stringify(de));
    }, k = function(H) {
      var Q = H.url, F = H.query, W = H.variables, X = H.operationName, Y = H.headers, de = H.fetch, oe = H.fetchOptions, ae = H.middleware;
      return a(void 0, void 0, void 0, function() {
        var ue, ge;
        return s(this, function(ee) {
          switch (ee.label) {
            case 0:
              return ue = _.default(F, W, X, oe.jsonSerializer), ge = t({ method: "POST", headers: t(t({}, typeof ue == "string" ? { "Content-Type": "application/json" } : {}), Y), body: ue }, oe), ae ? [4, Promise.resolve(ae(ge))] : [3, 2];
            case 1:
              ge = ee.sent(), ee.label = 2;
            case 2:
              return [4, de(Q, ge)];
            case 3:
              return [2, ee.sent()];
          }
        });
      });
    }, P = function(H) {
      var Q = H.url, F = H.query, W = H.variables, X = H.operationName, Y = H.headers, de = H.fetch, oe = H.fetchOptions, ae = H.middleware;
      return a(void 0, void 0, void 0, function() {
        var ue, ge;
        return s(this, function(ee) {
          switch (ee.label) {
            case 0:
              return ue = $({
                query: F,
                variables: W,
                operationName: X,
                jsonSerializer: oe.jsonSerializer
              }), ge = t({ method: "GET", headers: Y }, oe), ae ? [4, Promise.resolve(ae(ge))] : [3, 2];
            case 1:
              ge = ee.sent(), ee.label = 2;
            case 2:
              return [4, de(Q + "?" + ue, ge)];
            case 3:
              return [2, ee.sent()];
          }
        });
      });
    }, L = function() {
      function H(Q, F) {
        F === void 0 && (F = {}), this.url = Q, this.options = F;
      }
      return H.prototype.rawRequest = function(Q, F, W) {
        return a(this, void 0, void 0, function() {
          var X, Y, de, oe, ae, ue, ge, ee, _e, xe, Le, je;
          return s(this, function(Xe) {
            return X = y.parseRawRequestArgs(Q, F, W), Y = this.options, de = Y.headers, oe = Y.fetch, ae = oe === void 0 ? l.default : oe, ue = Y.method, ge = ue === void 0 ? "POST" : ue, ee = Y.requestMiddleware, _e = Y.responseMiddleware, xe = o(Y, ["headers", "fetch", "method", "requestMiddleware", "responseMiddleware"]), Le = this.url, X.signal !== void 0 && (xe.signal = X.signal), je = me(X.query).operationName, [2, O({
              url: Le,
              query: X.query,
              variables: X.variables,
              headers: t(t({}, I(M(de))), I(X.requestHeaders)),
              operationName: je,
              fetch: ae,
              method: ge,
              fetchOptions: xe,
              middleware: ee
            }).then(function(Je) {
              return _e && _e(Je), Je;
            }).catch(function(Je) {
              throw _e && _e(Je), Je;
            })];
          });
        });
      }, H.prototype.request = function(Q) {
        for (var F = [], W = 1; W < arguments.length; W++)
          F[W - 1] = arguments[W];
        var X = F[0], Y = F[1], de = y.parseRequestArgs(Q, X, Y), oe = this.options, ae = oe.headers, ue = oe.fetch, ge = ue === void 0 ? l.default : ue, ee = oe.method, _e = ee === void 0 ? "POST" : ee, xe = oe.requestMiddleware, Le = oe.responseMiddleware, je = o(oe, ["headers", "fetch", "method", "requestMiddleware", "responseMiddleware"]), Xe = this.url;
        de.signal !== void 0 && (je.signal = de.signal);
        var Je = me(de.document), mt = Je.query, dt = Je.operationName;
        return O({
          url: Xe,
          query: mt,
          variables: de.variables,
          headers: t(t({}, I(M(ae))), I(de.requestHeaders)),
          operationName: dt,
          fetch: ge,
          method: _e,
          fetchOptions: je,
          middleware: xe
        }).then(function(gt) {
          return Le && Le(gt), gt.data;
        }).catch(function(gt) {
          throw Le && Le(gt), gt;
        });
      }, H.prototype.batchRequests = function(Q, F) {
        var W = y.parseBatchRequestArgs(Q, F), X = this.options, Y = X.headers, de = X.fetch, oe = de === void 0 ? l.default : de, ae = X.method, ue = ae === void 0 ? "POST" : ae, ge = X.requestMiddleware, ee = X.responseMiddleware, _e = o(X, ["headers", "fetch", "method", "requestMiddleware", "responseMiddleware"]), xe = this.url;
        W.signal !== void 0 && (_e.signal = W.signal);
        var Le = W.documents.map(function(Xe) {
          var Je = Xe.document;
          return me(Je).query;
        }), je = W.documents.map(function(Xe) {
          var Je = Xe.variables;
          return Je;
        });
        return O({
          url: xe,
          query: Le,
          variables: je,
          headers: t(t({}, I(M(Y))), I(W.requestHeaders)),
          operationName: void 0,
          fetch: oe,
          method: ue,
          fetchOptions: _e,
          middleware: ge
        }).then(function(Xe) {
          return ee && ee(Xe), Xe.data;
        }).catch(function(Xe) {
          throw ee && ee(Xe), Xe;
        });
      }, H.prototype.setHeaders = function(Q) {
        return this.options.headers = Q, this;
      }, H.prototype.setHeader = function(Q, F) {
        var W, X = this.options.headers;
        return X ? X[Q] = F : this.options.headers = (W = {}, W[Q] = F, W), this;
      }, H.prototype.setEndpoint = function(Q) {
        return this.url = Q, this;
      }, H;
    }();
    n.GraphQLClient = L;
    function O(H) {
      var Q = H.url, F = H.query, W = H.variables, X = H.headers, Y = H.operationName, de = H.fetch, oe = H.method, ae = oe === void 0 ? "POST" : oe, ue = H.fetchOptions, ge = H.middleware;
      return a(this, void 0, void 0, function() {
        var ee, _e, xe, Le, je, Xe, Je, mt, dt, gt, ke;
        return s(this, function(ot) {
          switch (ot.label) {
            case 0:
              return ee = ae.toUpperCase() === "POST" ? k : P, _e = Array.isArray(F), [4, ee({
                url: Q,
                query: F,
                variables: W,
                operationName: Y,
                headers: X,
                fetch: de,
                fetchOptions: ue,
                middleware: ge
              })];
            case 1:
              return xe = ot.sent(), [4, le(xe, ue.jsonSerializer)];
            case 2:
              if (Le = ot.sent(), je = _e && Array.isArray(Le) ? !Le.some(function(at) {
                var Ne = at.data;
                return !Ne;
              }) : !!Le.data, Xe = !Le.errors || ue.errorPolicy === "all" || ue.errorPolicy === "ignore", xe.ok && Xe && je)
                return Je = xe.headers, mt = xe.status, Le.errors, dt = o(Le, ["errors"]), gt = ue.errorPolicy === "ignore" ? dt : Le, [2, t(t({}, _e ? { data: gt } : gt), { headers: Je, status: mt })];
              throw ke = typeof Le == "string" ? { error: Le } : Le, new T.ClientError(t(t({}, ke), { status: xe.status, headers: xe.headers }), { query: F, variables: W });
          }
        });
      });
    }
    function U(H, Q, F, W) {
      return a(this, void 0, void 0, function() {
        var X, Y;
        return s(this, function(de) {
          return X = y.parseRawRequestExtendedArgs(H, Q, F, W), Y = new L(X.url), [2, Y.rawRequest(t({}, X))];
        });
      });
    }
    n.rawRequest = U;
    function ie(H, Q) {
      for (var F = [], W = 2; W < arguments.length; W++)
        F[W - 2] = arguments[W];
      return a(this, void 0, void 0, function() {
        var X, Y, de, oe;
        return s(this, function(ae) {
          return X = F[0], Y = F[1], de = y.parseRequestExtendedArgs(H, Q, X, Y), oe = new L(de.url), [2, oe.request(t({}, de))];
        });
      });
    }
    n.request = ie;
    function z(H, Q, F) {
      return a(this, void 0, void 0, function() {
        var W, X;
        return s(this, function(Y) {
          return W = y.parseBatchRequestsExtendedArgs(H, Q, F), X = new L(W.url), [2, X.batchRequests(t({}, W))];
        });
      });
    }
    n.batchRequests = z, n.default = ie;
    function le(H, Q) {
      return Q === void 0 && (Q = v.defaultJsonSerializer), a(this, void 0, void 0, function() {
        var F, W, X;
        return s(this, function(Y) {
          switch (Y.label) {
            case 0:
              return H.headers.forEach(function(de, oe) {
                oe.toLowerCase() === "content-type" && (F = de);
              }), F && F.toLowerCase().startsWith("application/json") ? (X = (W = Q).parse, [4, H.text()]) : [3, 2];
            case 1:
              return [2, X.apply(W, [Y.sent()])];
            case 2:
              return [2, H.text()];
          }
        });
      });
    }
    function se(H) {
      var Q, F = void 0, W = H.definitions.filter(function(X) {
        return X.kind === "OperationDefinition";
      });
      return W.length === 1 && (F = (Q = W[0].name) === null || Q === void 0 ? void 0 : Q.value), F;
    }
    function me(H) {
      if (typeof H == "string") {
        var Q = void 0;
        try {
          var F = h.parse(H);
          Q = se(F);
        } catch {
        }
        return { query: H, operationName: Q };
      }
      var W = se(H);
      return { query: f.print(H), operationName: W };
    }
    n.resolveRequestDocument = me;
    function M(H) {
      return typeof H == "function" ? H() : H;
    }
    function ne(H) {
      for (var Q = [], F = 1; F < arguments.length; F++)
        Q[F - 1] = arguments[F];
      return H.reduce(function(W, X, Y) {
        return "" + W + X + (Y in Q ? Q[Y] : "");
      }, "");
    }
    n.gql = ne;
    function fe(H) {
      var Q = {};
      return H.forEach(function(F, W) {
        Q[W] = F;
      }), Q;
    }
    var pe = RI();
    Object.defineProperty(n, "GraphQLWebSocketClient", { enumerable: !0, get: function() {
      return pe.GraphQLWebSocketClient;
    } });
  }(Xl)), Xl;
}
var Hp = w_();
const NI = async (n, t) => {
  t != null || (t = Wa.default);
  const i = Hp.gql`
    query getEpisode($ID: ID!) {
        episode(id: $ID) {
            imageUrl
            streams {
                audioLanguages
                subtitleLanguages
                url
                type
            }
        }
    }`, r = await t.getToken(), e = {};
  return r && (e.Authorization = "Bearer " + r), (await new Hp.GraphQLClient(t.endpoint, { headers: e }).request(i, {
    ID: n
  })).episode;
};
class FI {
  constructor(t) {
    Sa(this, "client");
    this.client = new Wa(t);
  }
  async create(t, i) {
    const r = await NI(i.episodeId, this.client), e = r.streams;
    if (e.length) {
      let a = e.find((s) => s.type === "hls_cmaf");
      if (a || (a = e.find((s) => s.type === "hls_ts")), a || (a = e.find((s) => s.type === "dash")), a)
        return await TP(t, G.mergeOptions(
          {
            src: {
              src: a.url
            },
            videojs: {
              poster: r.imageUrl
            }
          },
          i.overrides
        ));
    }
    return null;
  }
}
export {
  Wa as ApiClient,
  FI as PlayerFactory,
  TP as createPlayer,
  NI as getEpisodeStreams
};
