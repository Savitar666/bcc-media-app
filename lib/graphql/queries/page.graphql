fragment GridSectionItem on SectionItem {
  ...ItemSectionItem
  item {
    ... on Show {
      episodeCount
      seasonCount
    }
    ... on Episode {
      availableFrom
      duration
      number
      season {
        number
        show {
          title
        }
      }
    }
    __typename
  }
}

fragment ItemSectionItem on SectionItem {
  id
  title
  image
  item {
    ... on Link {
      url
    }
    ... on Page {
      code
    }
    ... on Episode {
      id
      duration
      progress
    }
    ... on Show {
      defaultEpisode {
        id
      }
      id
    }
    __typename
  }
}

fragment Section on Section {
  title
  ... on ItemSection {
    items {
      items {
        ...ItemSectionItem
      }
    }
  }
  ... on PosterSection {
    size
    items {
      items {
        item {
          ... on Show {
            episodeCount
            seasonCount
          }
          ... on Episode {
            productionDate
            availableFrom
            duration
            season {
              show {
                title
              }
            }
          }
          __typename
        }
      }
    }
  }
  ... on FeaturedSection {
    size
    items {
      items {
        description
      }
    }
  }
  ... on DefaultSection {
    size
    items {
      items {
        item {
          ... on Show {
            episodeCount
            seasonCount
          }
          ... on Episode {
            productionDate
            availableFrom
            duration
            season {
              show {
                title
              }
            }
          }
          __typename
        }
      }
    }
  }
  ... on GridSection {
    gridSize: size
    items {
      items {
        ...GridSectionItem
      }
    }
  }
  ... on WebSection {
    authentication
    widthRatio
    url
  }
  __typename
}

query Page($code: String!) {
  page(code: $code) {
    title
    sections {
      items {
        ...Section
      }
    }
  }
}
