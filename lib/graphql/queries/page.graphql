fragment Section on Section {
  title
  ... on ItemSection {
    items {
      items {
        id
        title
        image
        item {
          ... on Link {
            url
          }
          ... on Page {
            code
          }
          ... on Episode {
            id
            duration
            progress
          }
          ... on Show {
            defaultEpisode {
              id
            }
            id
          }
          __typename
        }
      }
    }
  }
  ... on PosterSection {
    size
    items {
      items {
        item {
          ... on Show {
            episodeCount
            seasonCount
          }
          ... on Episode {
            productionDate
            duration
            season {
              show {
                title
              }
            }
          }
          __typename
        }
      }
    }
  }
  ... on FeaturedSection {
    size
    items {
      items {
        description
      }
    }
  }
  ... on DefaultSection {
    size
    items {
      items {
        item {
          ... on Show {
            episodeCount
            seasonCount
          }
          ... on Episode {
            productionDate
            duration
            season {
              show {
                title
              }
            }
          }
          __typename
        }
      }
    }
  }
  ... on GridSection {
    gridSize: size
    items {
      items {
        item {
          ... on Show {
            episodeCount
            seasonCount
          }
          ... on Episode {
            productionDate
            duration
            number
            season {
              number
              show {
                title
              }
            }
          }
          __typename
        }
      }
    }
  }
  __typename
}

query Page($code: String!) {
  page(code: $code) {
    title
    sections {
      items {
        ...Section
      }
    }
  }
}
